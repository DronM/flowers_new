
function extend(Child,Parent){var F=function(){};F.prototype=Parent.prototype;Child.prototype=new F();Child.prototype.constructor=Child;Child.superclass=Parent.prototype;} 
function App(id,options){this.setId(id);options=options||{};this.setHost(options.host);this.setScript(options.script);this.m_servVars=options.servVars||{};var con_opts={"host":options.host};var con;if(this.m_servVars.token&&this.m_servVars.token.length){con_opts.accessToken=this.m_servVars.token;con_opts.refreshToken=this.m_servVars.tokenr;con=new ServConnectorSecure(con_opts);}
else{con=new ServConnector(con_opts);}
this.setServConnector(con);this.m_constantManager=new ConstantManager(this.m_servConnector,{"XMLString":options.constantXMLString});this.m_cashData={};this.m_openedForms={};this.m_templateParams={};}
App.prototype.DEF_dateEditMask="99/99/9999";App.prototype.DEF_dateFormat="d/m/Y";App.prototype.DEF_dateTimeEditMask="99/99/9999 99:99:99";App.prototype.DEF_dateTimeFormat="d/m/Y H:i:s";App.prototype.DEF_phoneEditMask="+7-(999)-999-99-99";App.prototype.DEF_timeEditMask="99:99";App.prototype.DEF_timeFormat="H:i:s";App.prototype.DEF_LOCALE="ru";App.prototype.m_id;App.prototype.m_host;App.prototype.m_script;App.prototype.m_bsCol;App.prototype.m_winClass;App.prototype.m_servVars;App.prototype.m_constantManager;App.prototype.m_servConnector;App.prototype.m_dateEditMask;App.prototype.m_dateFormat;App.prototype.m_dateTimeEditMask;App.prototype.m_dateTimeFormat;App.prototype.m_timeFormat;App.prototype.m_phoneEditMask;App.prototype.m_timeEditMask;App.prototype.m_locale;App.prototype.m_cashData;App.prototype.m_openedForms;App.prototype.m_templates;App.prototype.m_templateParams;App.prototype.setHost=function(host){this.m_host=host;}
App.prototype.getHost=function(){return this.m_host;}
App.prototype.setScript=function(v){this.m_script=v;}
App.prototype.getScript=function(){return this.m_script;}
App.prototype.getBsCol=function(v){return window.getBsCol(v);}
App.prototype.setWinClass=function(winClass){this.m_winClass=winClass;}
App.prototype.getWinClass=function(winClass){return this.m_winClass;}
App.prototype.getServVars=function(){return this.m_servVars;}
App.prototype.getServVar=function(id){return this.m_servVars[id];}
App.prototype.getConstantManager=function(){return this.m_constantManager;}
App.prototype.getServConnector=function(){return this.m_servConnector;}
App.prototype.setServConnector=function(v){this.m_servConnector=v;}
App.prototype.getId=function(){return this.m_id;}
App.prototype.setId=function(id){this.m_id=id;}
App.prototype.setDateEditMask=function(v){this.m_dateEditMask=v;}
App.prototype.getDateEditMask=function(){return(this.m_dateEditMask)?this.m_dateEditMask:this.DEF_dateEditMask;}
App.prototype.setDateTimeEditMask=function(v){this.m_dateTimeEditMask=v;}
App.prototype.getDateTimeEditMask=function(){return(this.m_dateTimeEditMask)?this.m_dateTimeEditMask:this.DEF_dateTimeEditMask;}
App.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
App.prototype.getDateFormat=function(){return(this.m_dateFormat)?this.m_dateFormat:this.DEF_dateFormat;}
App.prototype.setDateTimeFormat=function(v){this.m_dateTimeFormat=v;}
App.prototype.getDateTimeFormat=function(){return(this.m_dateTimeFormat)?this.m_dateTimeFormat:this.DEF_dateTimeFormat;}
App.prototype.setTimeFormat=function(v){this.m_timeFormat=v;}
App.prototype.getTimeFormat=function(){return(this.m_timeFormat)?this.m_timeFormat:this.DEF_timeFormat;}
App.prototype.setPhoneEditMask=function(v){this.m_phoneEditMask=v;}
App.prototype.getPhoneEditMask=function(){return(this.m_phoneEditMask)?this.m_phoneEditMask:this.DEF_phoneEditMask;}
App.prototype.setTimeEditMask=function(v){this.m_timeEditMask=v;}
App.prototype.getTimeEditMask=function(){return(this.m_timeEditMask)?this.m_timeEditMask:this.DEF_timeEditMask;}
App.prototype.getLocale=function(){return this.m_servVars["locale_id"]||this.DEF_LOCALE;}
App.prototype.formatError=function(erCode,erStr){return(erStr+(erCode)?(", code:"+erCode):"");}
App.prototype.getCashData=function(id){return this.m_cashData[id];}
App.prototype.setCashData=function(id,val){this.m_cashData[id]=val;}
App.prototype.getOpenedForms=function(){return this.m_openedForms;}
App.prototype.addOpenedForm=function(id,form){this.m_openedForms[id]=form;}
App.prototype.delOpenedForm=function(id){delete this.m_openedForms[id];}
App.prototype.numberFormat=function(val,prec){return CommonHelper.numberFormat(val,prec,CommonHelper.getDecimalSeparator()," ");}
App.prototype.addTemplate=function(id,tmpl){this.m_templates[id]=tmpl;}
App.prototype.getTemplate=function(id){return this.m_templates[id];}
App.prototype.setTemplateParams=function(templateId,paramStruc){this.m_templateParams[templateId]=paramStruc;}
App.prototype.getTemplateParams=function(templateId){return this.m_templateParams[templateId];}
App.prototype.setTemplateParam=function(templateId,paramId,paramVal){this.m_templateParams[templateId][paramId]=paramVal;}
App.prototype.getTemplateParam=function(templateId,paramId){return(this.m_templateParams[templateId])?this.m_templateParams[templateId][paramId]:null;} 
function AppWin(options){options=options||{};this.m_msg=new WindowMessage();var self=this;window.onerror=function(msg,url,line,col,error){self.onError(msg,url,line,col,error);};window.getApp=function(){return options.app;}
window.getBsCol=function(v){return options.bsCol+((v!=undefined)?v.toString():"");};window.showMsg=function(msgType,msg,callBack,timeout){self.m_msg.show({"type":msgType,"text":msg,"callBack":callBack,"timeout":timeout,"bsCol":window.getBsCol()});};window.showError=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_ER,msg,callBack,timeout);};window.showWarn=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_WARN,msg,callBack,timeout);};window.showNote=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_NOTE,msg,callBack,timeout);};window.showOk=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_OK,msg,callBack,timeout);};window.resetError=function(){};window.setGlobalWait=function(isWait){var n=CommonHelper.nd("waiting");if(n&&isWait){CommonHelper.delClass(n,"hidden");}
else if(n){CommonHelper.addClass(n,"hidden");}}}
AppWin.prototype.onError=function(msg,url,line,col,error){var str=msg+"\nurl: "+url+"\nline: "+line;console.log(str);console.trace();window.showError(str);return false;} 
var CommonHelper={format:function(str,params){if(!str)return"";var r=str;for(var i=0;i<params.length;i++){r=r.replace("%",params[i]);}
return r;},numberFormat:function(number,decimals,dec_point,thousands_sep){var i,j,kw,kd,km;if(isNaN(decimals=Math.abs(decimals))){decimals=2;}
if(dec_point==undefined){dec_point=",";}
if(thousands_sep==undefined){thousands_sep=".";}
i=parseInt(number=(+number||0).toFixed(decimals))+"";if((j=i.length)>3){j=j%3;}else{j=0;}
km=(j?i.substr(0,j)+thousands_sep:"");kw=i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_sep);kd=(decimals?dec_point+Math.abs(number-i).toFixed(decimals).replace(/-/,0).slice(2):"");return km+kw+kd;},byteForamt:function(size,precision){precision=(precision==undefined)?2:precision;var i=Math.floor(Math.log(size)/Math.log(1024));return(size/Math.pow(1024,i)).toFixed(precision)*1+' '+['B','kB','MB','GB','TB'][i];},nd:function(x,docum){if(docum==undefined){docum=window.document;}
return(x)?docum.getElementById(x):null;},isIE:function(){return(navigator.appName=="Microsoft Internet Explorer");},getIEVersion:function(){return parseInt(navigator.userAgent.toLowerCase().split('msie')[1]);},getBrowser:function(){var res="unknown";if(navigator.userAgent.indexOf("Chrome")!=-1){res="chrome";}
else if(navigator.userAgent.indexOf("Opera")!=-1){res="opera";}
else if(navigator.userAgent.indexOf("Firefox")!=-1){res="firefox";}
else if((navigator.userAgent.indexOf("MSIE")!=-1)||(!!document.documentMode==true)){res="ie";}
return res;},createXHR:function(){var request_o;if(this.isIE()){request_o=new ActiveXObject("Microsoft.XMLHTTP");}
else{request_o=new XMLHttpRequest();}
return request_o;},isEmpty:function(x,p){for(p in x)return!1;return!0;},isArray:function(o){return(Object.prototype.toString.call(o)==='[object Array]');},clone:function(obj){var F=function(){};F.prototype=obj;return new F();},uniqid:function(){var chars='0123456789abcdef'.split('');var uuid=[],rnd=Math.random,r;uuid[8]=uuid[13]=uuid[18]=uuid[23]='-';uuid[14]='4';for(var i=0;i<36;i++){if(!uuid[i]){r=0|rnd()*16;uuid[i]=chars[(i==19)?(r&0x3)|0x8:r&0xf];}}
return uuid.join('');},array2json:function(arr){return JSON.stringify(arr);},json2obj:function(json_string){return JSON.parse(json_string);},serialize:function(o){return this.array2json(o);},unserialize:function(s){return this.json2obj(s);},findPosX:function(obj){var curleft=0;if(obj.offsetParent){while(1){curleft+=obj.offsetLeft;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.x){curleft+=obj.x;}
return curleft;},findPosY:function(obj){var curtop=0;if(obj.offsetParent){while(1){curtop+=obj.offsetTop;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.y){curtop+=obj.y;}
return curtop;},getDecimalSeparator:function(){var n=1.1;n=n.toLocaleString().substring(1,2);return n;},longString:function(funcWrapper){var funcString=funcWrapper.toString();var funcDefinitionRe=/^function\s*[a-zA-Z0-9_$]*\s*\(\s*\)\s*{\s*\/\*([\s\S]*)\*\/\s*}\s*$/g;var wantedString=funcString.replace(funcDefinitionRe,"$1").trim();return wantedString;},merge:function(o1,o2){for(var id in o2){o1[id]=o2[id];}},getClassName:function(o){return Object.prototype.toString.call(o).match(/^\[object\s(.*)\]$/)[1];},md5:function(s){return hex_md5(s);},getViewportHeight:function(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=='CSS1Compat')return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined;},getViewportWidth:function(){var offset=17;var width=null;if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=='CSS1Compat')return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth;},inArray:function(v,ar){return $.inArray(v,ar);}} 
var DOMHelper={elem:function(tagName,opts){var e=document.createElement(tagName);opts=opts||{};for(var i in opts){e.setAttribute(i,opts[i]);}
return(e);},setAttr:function(node,attrName,attrValue){if(node){node.setAttribute(attrName,attrValue);}},getAttr:function(node,name){if(node&&node.attributes){return node.getAttribute(name);}},delAttr:function(node,name){if(node){return node.removeAttribute(name);}},addAttr:function(node,name,val){this.setAttr(node,name,val);},delNode:function(node){if(node&&node.parentNode)
node.parentNode.removeChild(node);},delNodesOnClass:function(classVal){this.delNodes("class",classVal)},delNodesOnAttr:function(attrName,attrVal){var body=document.getElementsByTagName("body")[0];var list=this.getElementsByAttr(attrVal,body,attrName);for(var i=0;i<list.length;i++){this.delNode(list[i]);}},getElementsByAttr:function(classStr,node,attrName,uniq,tag){tag=tag||"*";var node=node||document;var list=node.getElementsByTagName(tag);var length=list.length;var classArray=classStr.split(/\s+/);var classes=classArray.length;var result=new Array();for(var i=0;i<length;i++){if(uniq&&result.length>0)break;for(var j=0;j<classes;j++){if(((attrName=='class')&&(list[i].className!=undefined&&typeof list[i].className=='string')&&(list[i].className.search('\\b'+classArray[j]+'\\b')!=-1))||((list[i].attributes!=undefined)&&(list[i].getAttribute(attrName)!=undefined)&&(list[i].getAttribute(attrName).search('\\b'+classArray[j]+'\\b')!=-1))){result.push(list[i]);break;}}}
return result;},swapClasses:function(node,new_class,old_class){node.className=node.className.replace(old_class,new_class);},addClass:function(node,classToAdd){var re=new RegExp("(^|\\s)"+classToAdd+"(\\s|$)","g");if(re.test(node.className))return;node.className=(node.className+" "+classToAdd).replace(/\s+/g," ").replace(/(^ | $)/g,"");},delClass:function(node,classToRemove){if(!node||!node.className)return;var re=new RegExp("(^|\\s)"+classToRemove+"(\\s|$)","g");node.className=node.className.replace(re,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"");},hasClass:function(node,classToCheck){return(node)?(node.className&&new RegExp("(^|\\s)"+classToCheck+"(\\s|$)").test(node.className)):null;},getParentByTagName:function(node,tagName){var p=node.parentNode;if(p){var tn=tagName.toLowerCase();while(p&&p.nodeName.toLowerCase()!=tn){p=p.parentNode;}
return((p&&p.nodeName.toLowerCase()==tn)?p:null);}},getElementIndex:function(node){var i=0;while(node=node.previousSibling){if(node.nodeType===1){i++;}}
return i;},xmlDocFromString:function(txt){return $.parseXML(txt);},htmlDocFromString:function(txt){return $.parseHTML(txt);},setTagName:function(node,tag){var oHTML=node.outerHTML;var tempTag=document.createElement(tag);var tName={original:node.tagName.toUpperCase(),change:tag.toUpperCase()};if(tName.original==tName.change)return;oHTML=oHTML.replace(RegExp("(^\<"+tName.original+")|("+tName.original+"\>$)","gi"),function(x){return(x.toUpperCase().replace(tName.original,tName.change));});tempTag.innerHTML=oHTML;node.parentElement.replaceChild(tempTag.firstChild,node);},swapNodes:function(a,b){var aParent=a.parentNode;var bParent=b.parentNode;var aHolder=document.createElement("div");var bHolder=document.createElement("div");aParent.replaceChild(aHolder,a);bParent.replaceChild(bHolder,b);aParent.replaceChild(b,aHolder);bParent.replaceChild(a,bHolder);},inViewport:function(el,fullyInView){var pageTop=$(window).scrollTop();var pageBottom=pageTop+$(window).height();var elementTop=$(el).offset().top;var elementBottom=el+$(el).height();if(fullyInView===true){return((pageTop<elementTop)&&(pageBottom>elementBottom));}else{return((elementTop<=pageBottom)&&(elementBottom>=pageTop));}}} 
var DateHelper={time:function(){return new Date();},strtotime:function(dateStr){if(!dateStr||!dateStr.length)return;var ds=dateStr;var t_offset_p=ds.indexOf("+");if(CommonHelper.isIE()){ds=ds.replace(/-/g,'/');ds=ds.replace('T',' ');ds=ds.replace(/(\+[0-9]{2})(\:)([0-9]{2}$)/,' UTC\$1\$3');}
else if(ds.length>12&&t_offset_p==-1&&ds.substr(ds.length-1,1)!="Z"){ds+="+05:00";}
else if(t_offset_p!=-1){var t_offset_ar=ds.substr(t_offset_p+1).split(":");for(var i=t_offset_ar.length;i<2;i++){t_offset_ar.push("00");}
ds=ds.substr(0,t_offset_p-1)+"+"+t_offset_ar.join(":");}
var d=new Date(ds);return d;},userStrToDate:function(date_str){var SHORT_YEAR_LEN=8;var FULL_YEAR_LEN=10;var time=new Array(0,0,0);var date=new Array(0,0,0);var time_part='',date_part='';var TIME_DELIM=':';var DATE_DELIM='.';var PARTS_DELIM=' ';var NEXT_MIL_BOUND=40;var str_replace_delim=function(str,delim_ar,new_delim){if(str&&str.length){for(var i=0;i<delim_ar.length;i++){while(str.search(delim_ar[i])>=00){str=str.replace(delim_ar[i],new_delim);}}}
return str;};var date_str_copy=str_replace_delim(date_str,new Array(/T/),PARTS_DELIM);var separ=date_str_copy.indexOf(PARTS_DELIM);if(separ>=0){date_part=date_str_copy.slice(0,separ);time_part=date_str_copy.substr(separ+1);}
else{if(date_str_copy.indexOf(TIME_DELIM)==-1){date_part=date_str_copy;}
else{time_part=date_str_copy;}}
date_part=str_replace_delim(date_part,new Array(/\//,/-/,/:/),DATE_DELIM);time_part=str_replace_delim(time_part,new Array(/ /,/-/,/\//),TIME_DELIM);if(date_part.length>0){date=date_part.split(DATE_DELIM);}
if(time_part.length>0){time=time_part.split(TIME_DELIM);}
if(date.length&&date[0].length==4){var y=date[0];date[0]=date[2];date[2]=y;}
else if(date.length>=3&&date[2].length==2){date[2]=parseInt(date[2],10);date[2]+=(date[2]<=NEXT_MIL_BOUND)?2000:1900;}
if(time[2]==undefined){time[2]=0;}
date[1]=(date[1]==0)?0:date[1]-1;return new Date(date[2],date[1],date[0],time[0],time[1],time[2]);},format:function(dt,fs){add_zero=function(arg){var s=arg.toString();return((s.length<2)?"0":"")+s;};if(!dt){dt=this.time();}
if(!dt.getDate){throw Error("DateHelper.format Invalid date "+dt);}
if(!fs){fs=DateHelper.FORMAT_STR;}
var s;s=fs.replace(/d/,add_zero(dt.getDate()));s=s.replace(/j/,dt.getDate());s=s.replace(/F/,DateHelper.MON_LIST[dt.getMonth()]);s=s.replace(/m/,add_zero(dt.getMonth()+1));s=s.replace(/n/,dt.getMonth()+1);s=s.replace(/Y/,dt.getFullYear());s=s.replace(/y/,dt.getFullYear()-2000);s=s.replace(/H/,add_zero(dt.getHours()));s=s.replace(/i/,add_zero(dt.getMinutes()));s=s.replace(/s/,add_zero(dt.getSeconds()));s=s.replace(/u/,add_zero(dt.getMilliseconds()));return s;},timeToMS:function(timeStr){if(timeStr==undefined){return 0;}
var h,m;var time_ar=timeStr.split(":");var h=0;var m=0;var s=0;if(time_ar.length>=1){h=parseInt(time_ar[0][0],10)*10+
parseInt(time_ar[0][1],10);h=(isNaN(h)?0:h);}
if(time_ar.length>=2){m=parseInt(time_ar[1][0],10)*10+
parseInt(time_ar[1][1],10);m=(isNaN(m)?0:m);}
if(time_ar.length>=3){s=parseInt(time_ar[2][0],10)*10+
parseInt(time_ar[2][1],10);s=(isNaN(s)?0:s);}
return(h*60*60*1000+m*60*1000+s*1000);},weekStart:function(dt){if(!dt)dt=this.time();var dow=dt.getDay();var dif=dow-1;if(dif<0)dif=6;return new Date(dt.getTime()-dif*24*60*60*1000);},weekEnd:function(dt){return new Date(this.weekStart(dt).getTime()+7*24*60*60*1000);},monthStart:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),dt.getMonth(),1);},monthEnd:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),dt.getMonth()+1,0);},quarterStart:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==1||m==2){m=0;}
else if(m==4||m==5){m=3;}
else if(m==7||m==8){m=6;}
else if(m==10||m==11){m=9;};return new Date(dt.getFullYear(),m,1);},quarterEnd:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==0||m==1){m=2;}
else if(m==3||m==4){m=5;}
else if(m==6||m==7){m=8;}
else if(m==9||m==10){m=11;};return this.monthEnd(new Date(dt.getFullYear(),m,1));},yearStart:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),0,1);},yearEnd:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),12,0);}} 
var EventHelper={add:function(obj,evType,fn,capture){if(!fn)return;if(typeof obj=='string'){obj=$(obj);}
if(CommonHelper.isIE()){$(obj).on(evType,fn);}
else{if(obj&&obj.addEventListener){obj.addEventListener(evType,fn,capture);return true;}else if(obj&&obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r;}else{return false;}}},del:function(obj,evType,fn,useCapture){if(CommonHelper.isIE()){$(obj).off(evType,fn);}
else{if(obj&&obj.removeEventListener){obj.removeEventListener(evType,fn,useCapture);return true;}else if(obj&&obj.detachEvent){var r=obj.detachEvent("on"+evType,fn);return r;}else{throw new Error(this.DEL_ERR);}}},fixMouseEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.pageX==null&&e.clientX!=null){var html=document.documentElement;var body=document.body;e.pageX=e.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);e.pageY=e.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0);}
if(!e.which&&e.button){e.which=e.button&1?1:(e.button&2?3:(e.button&4?2:0));}
return(e);},fixKeyEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.which==null&&e.keyCode>=32){e.char=String.fromCharCode(event.keyCode);}
else if(e.which!=0&&e.charCode!=0&&e.which>=32){e.char=String.fromCharCode(e.which);}
return(e);},fixWheelEvent:function(e){e.delta=e.deltaY||e.detail||e.wheelDelta;return(e);},getWheelEventName:function(){var res;if("onwheel"in document){res="wheel";}else if("onmousewheel"in document){res="mousewheel";}else{res="MozMousePixelScroll";}
return(res);},addWheelEvent:function(obj,fn,capture){this.add(obj,this.getWheelEventName(),fn,capture);},delWheelEvent:function(obj,fn,capture){this.del(obj,this.getWheelEventName(),fn,capture);}}; 
function ConstantManager(con,options){options=options||{};this.m_connection=con;this.m_values=options.values||{};if(options.XMLString){this.fillFromXML(options.XMLString);}}
ConstantManager.prototype.m_values;ConstantManager.prototype.m_connection;ConstantManager.prototype.initController=function(){this.m_controller=new Constant_Controller(this.m_connection);}
ConstantManager.prototype.fillFromXML=function(xml){var m=new ModelXML("ConstantValueList_Model",{"data":xml,"fields":{"id":new FieldString(),"val":new FieldString(),"val_type":new FieldString()}});while(m.getNextRow()){var v_t=m.getFieldValue("val_type");var v=m.getFieldValue("val");var v_class;var v_id=m.getFieldValue("id");if(v_t=="Int"){v_class=FieldInt;}
else if(v_t=="Float"){v_class=FieldFloat;}
else if(v_t=="DateTime"){v_class=FieldDateTime;}
else if(v_t=="Date"){v_class=FieldDate;}
else{v_class=FieldString;}
this.m_values[v_id]=new v_class(v_id,{"value":v});}}
ConstantManager.prototype.get=function(constants){var not_found="";for(var id in constants){if(this.m_values[id]){constants[id]=this.m_values[id];}
else{not_found+=(not_found=="")?"":",";not_found+=id;}}
if(not_found!=""){if(!this.m_controller)this.initController();var self=this;var pm=this.m_controller.getPublicMethod("get_values");pm.setFieldValue("id_list",not_found);this.m_controller.run("get_values",{"async":false,"ok":function(resp){self.fillFromXML(resp.getModelData("ConstantList_Model"));},"fail":function(resp,errCode,errStr){throw Error(errStr);}});}}
ConstantManager.prototype.set=function(constants){} 
function ServConnector(options){options=options||{};this.setHost(options.host);this.setScript(options.script||this.DEF_SCRIPT);}
ServConnector.prototype.DEF_SCRIPT="index.php";ServConnector.prototype.ERR_AUTH=100;ServConnector.prototype.ERR_AUTH_NOT_LOGGED=102;ServConnector.prototype.m_host;ServConnector.prototype.m_script;ServConnector.prototype.m_port;ServConnector.prototype.getHost=function(){return this.m_host;}
ServConnector.prototype.setHost=function(host){this.m_host=host;}
ServConnector.prototype.getScript=function(){return this.m_script;}
ServConnector.prototype.setScript=function(script){this.m_script=script;}
ServConnector.prototype.queryParamsAsStr=function(params){var paramStr="";for(var par_id in params){paramStr+=(paramStr=="")?"?":"&";paramStr+=par_id+"="+encodeURIComponent(params[par_id]);}
return paramStr;}
ServConnector.prototype.sendRequest=function(isGet,params,async,onReturn,retContentType){var request_id=CommonHelper.uniqid();async=(async==undefined)?true:async;var self=this;var xhr=CommonHelper.createXHR();var ready_func=function(){if(xhr.readyState==4){var status=xhr.status;var error_n=(status>=200&&status<300)?0:status;var error_s;var resp;var RESP_MODEL_ID="ModelServResponse";if(error_n==0){try{var tr=xhr.getResponseHeader("content-type");if(tr.indexOf("xml")>=0){resp=new ServRespXML(xhr.responseXML);var m=new ModelServRespXML(resp.getModelData(RESP_MODEL_ID));error_n=m.result;error_s=m.descr;}
else if(tr.indexOf("json")>=0){resp=new ServRespJSON(xhr.responseText);var m=new ModelServRespJSON(resp.getModelData(RESP_MODEL_ID));error_n=m.result;error_s=m.descr;}
else{if(retContentType!=undefined&&tr.indexOf(retContentType)<0){error_n=-1;error_s=xhr.responseText;}
else{resp=xhr.responseText;}}}
catch(e){error_n=-1;error_s=e.message;}}
else{error_s=xhr.statusText;}
if(error_n==self.ERR_AUTH_NOT_LOGGED){window.location=self.getHost()+self.getScript();}
if(onReturn){onReturn.call(self,error_n,error_s,resp,request_id);}}};if(async){xhr.onreadystatechange=ready_func;}
var url=this.getHost()+this.getScript();if(isGet){xhr.open("get",url+this.queryParamsAsStr(params),async);xhr.send(null);}
else{var fd=new FormData();for(var par_id in params){fd.append(par_id,encodeURIComponent(params[par_id]));}
xhr.open("POST",url,async);xhr.send(fd)}
if(!async){ready_func.call(this);}
return request_id;}
ServConnector.prototype.sendPost=function(params,async,onReturn,retContentType){return this.sendRequest(false,params,async,onReturn);}
ServConnector.prototype.sendGet=function(params,async,onReturn,retContentType){return this.sendRequest(true,params,async,onReturn,retContentType);}
ServConnector.prototype.openHref=function(params,winParams){winParams=(winParams)?winParams:"location=0,menubar=0,status=0,titlebar=0";window.open(this.getHost()+this.getScript()+this.queryParamsAsStr(params),"_blank",winParams);} 
function ServResp(resp){this.m_models={};this.setResponse(resp);}
ServResp.prototype.m_resp;ServResp.prototype.m_models;ServResp.prototype.setResponse=function(resp){this.m_resp=resp;}
ServResp.prototype.modelExists=function(id){return(this.m_models[id])?true:false;}
ServResp.prototype.getModelData=function(id){if(!this.m_models[id]){throw new Error(CommonHelper.format(this.ERR_NO_MODEL,Array(id)));}
return this.m_models[id];} 
function ServRespXML(resp){ServRespXML.superclass.constructor.call(this,resp);}
extend(ServRespXML,ServResp);ServRespXML.prototype.TAG_MODEL="model";ServRespXML.prototype.setResponse=function(resp){ServRespXML.superclass.setResponse.call(this,resp);var models=resp.documentElement.getElementsByTagName(this.TAG_MODEL);for(var i=0;i<models.length;i++){this.m_models[models[i].getAttribute("id")]=models[i];}} 
function PublicMethod(id,options){this.setId(id);options=options||{};if(!options.controller){throw Error(CommonHelper.format(this.ER_NO_CONTROLLER,Array(id)));}
this.setController(options.controller);this.setRequestType(options.requestType);this.setAsync(options.async);this.setSendNulls(options.sendNulls);this.m_fields=options.fields||{};}
PublicMethod.prototype.m_id;PublicMethod.prototype.m_fields;PublicMethod.prototype.m_controller;PublicMethod.prototype.m_requestType;PublicMethod.prototype.m_sync;PublicMethod.prototype.m_sendNulls;PublicMethod.prototype.fieldExists=function(id){return(this.m_fields[id]!=undefined);}
PublicMethod.prototype.getId=function(){return this.m_id;}
PublicMethod.prototype.setId=function(id){this.m_id=id;}
PublicMethod.prototype.getRequestType=function(){this.m_requestType;}
PublicMethod.prototype.setRequestType=function(v){this.m_requestType=v;}
PublicMethod.prototype.getAsync=function(){this.m_async;}
PublicMethod.prototype.setAsync=function(v){this.m_async=v;}
PublicMethod.prototype.getSendNulls=function(){return this.m_sendNulls;}
PublicMethod.prototype.setSendNulls=function(v){this.m_sendNulls=v;}
PublicMethod.prototype.getController=function(){return this.m_controller;}
PublicMethod.prototype.setController=function(c){this.m_controller=c;}
PublicMethod.prototype.addField=function(field){this.m_fields[field.getId()]=field;}
PublicMethod.prototype.checkField=function(id){if(!this.fieldExists(id)){throw Error(CommonHelper.format(this.ER_NO_FIELD,Array(this.m_controller.getId(),this.getId(),id)));}
return true;}
PublicMethod.prototype.getField=function(id){this.checkField(id);return this.m_fields[id];}
PublicMethod.prototype.getFields=function(){return this.m_fields;}
PublicMethod.prototype.setFields=function(v){this.m_fields=v;}
PublicMethod.prototype.setFieldValue=function(id,value){this.checkField(id);this.m_fields[id].setValue(value);}
PublicMethod.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
PublicMethod.prototype.run=function(options){this.getController().run(this.getId(),options);}
PublicMethod.prototype.download=function(viewId){this.getController().download(this.getId(),viewId);}
PublicMethod.prototype.openHref=function(viewId,winParams){this.getController().openHref(this.getId(),viewId,winParams);} 
function Controller(app,options){if(!app){throw Error(this.ER_NO_PARAM_APP);}
this.setApp(app);this.setServConnector(options.servConnector);this.m_publicMethods={};}
Controller.prototype.PARAM_DEF_VIEW="ViewXML";Controller.prototype.PARAM_CONTROLLER="c";Controller.prototype.PARAM_METH="f";Controller.prototype.PARAM_VIEW="v";Controller.prototype.m_app;Controller.prototype.m_publicMethods;Controller.prototype.m_servConnector;Controller.prototype.getId=function(){return this.constructor.toString().match(/function (\w*)/)[1];}
Controller.prototype.publicMethodExists=function(id){return(this.m_publicMethods[id]!=undefined);}
Controller.prototype.addPublicMethod=function(pm){this.m_publicMethods[pm.getId()]=pm;}
Controller.prototype.checkPublicMethod=function(id){if(!this.publicMethodExists(id)){throw new Error(CommonHelper.format(this.ER_NO_METHOD,Array(id,this.getId())));}
return true;}
Controller.prototype.getPublicMethod=function(id){this.checkPublicMethod(id);return this.m_publicMethods[id];}
Controller.prototype.getPublicMethods=function(){return this.m_publicMethods;}
Controller.prototype.getApp=function(){return this.m_app;}
Controller.prototype.setApp=function(app){this.m_app=app;}
Controller.prototype.getServConnector=function(){return(this.m_servConnector)?this.m_servConnector:this.getApp().getServConnector();}
Controller.prototype.setServConnector=function(v){this.m_servConnector=v;}
Controller.prototype.getParams=function(methId,viewId){var params={};var pm=this.getPublicMethod(methId);params[this.PARAM_CONTROLLER]=this.getId();params[this.PARAM_METH]=methId;params[this.PARAM_VIEW]=viewId||this.PARAM_DEF_VIEW;var set_par_cnt=0,par_cnt=0;for(var id in pm.getFields()){var f=pm.getField(id);var is_null=f.isNull();if(is_null&&f.getValidator().getRequired()){throw Error(CommonHelper.format(this.ER_EMPTY,Array(this.getId(),methId,f.getId())));}
if(f.isSet()){params[id]=f.getValueXHR();}
par_cnt++;}
return params;}
Controller.prototype.run=function(methId,options){options=options||{};var meth=this.getPublicMethod(methId);if(options.get==undefined){options.get=(meth.getRequestType()!=undefined)?meth.getRequestType():true;}
if(options.async==undefined){options.async=(meth.getAsync()!=undefined)?meth.getAsync():true;}
options.retContentType=options.retContentType||"xml";var self=this;options.fail=options.fail||function(resp,errCode,errStr){window.showError(errCode+" "+errStr);};var params=this.getParams(methId,options.viewId);var conn=this.getServConnector();var con_func=(options.get)?conn.sendGet:conn.sendPost;this.m_resp=null;if(!options.async){window.setGlobalWait(true);}
con_func.call(conn,params,options.async,function(errCode,errStr,resp,requestId){if(!options.async){window.setGlobalWait(false);}
if(errCode!=0){options.fail.call(self,resp,errCode,errStr);}
else if(options.ok){self.m_resp=requestId;options.ok.call(self,resp,requestId);}
else{self.m_resp=resp;}},options.retContentType);return this.m_resp;}
Controller.prototype.download=function(methId,viewId){var params=this.getParams(methId,viewId);var form=$('<form></form>').attr('action',this.getApp().getServConnector().getScript()).attr('method','post');for(var id in params){form.append($("<input></input>").attr('type','hidden').attr('name',id).attr('value',params[id]));}
form.appendTo('body').submit().remove();}
Controller.prototype.openHref=function(methId,viewId,winParams){var meth=this.getPublicMethod(methId);this.getApp().getServConnector().openHref(this.getParams(methId,viewId),winParams);} 
function ControllerDb(app,options){options=options||{};if(options.listModel){this.setListModel(options.listModel);}
if(options.objModel){this.setObjModel(options.objModel);}
ControllerDb.superclass.constructor.call(this,app,options);}
extend(ControllerDb,Controller);ControllerDb.prototype.METH_INSERT="insert";ControllerDb.prototype.METH_UPDATE="update";ControllerDb.prototype.METH_GET_OBJ="get_object";ControllerDb.prototype.METH_GET_LIST="get_list";ControllerDb.prototype.METH_DELETE="delete";ControllerDb.prototype.METH_COMPLETE="complete";ControllerDb.prototype.PARAM_COUNT="count";ControllerDb.prototype.PARAM_FROM="from";ControllerDb.prototype.PARAM_IC="ic";ControllerDb.prototype.PARAM_MID="mid";ControllerDb.prototype.PARAM_ORD_FIELDS="ord_fields";ControllerDb.prototype.PARAM_ORD_DIRECTS="ord_directs";ControllerDb.prototype.PARAM_FIELD_SEP_VAL="@";ControllerDb.prototype.PARAM_COND_FIELDS="cond_fields";ControllerDb.prototype.PARAM_COND_SGNS="cond_sgns";ControllerDb.prototype.PARAM_COND_VALS="cond_vals";ControllerDb.prototype.PARAM_COND_ICASE="cond_ic";ControllerDb.prototype.PARAM_SGN_EQUAL="e";ControllerDb.prototype.PARAM_SGN_LESS="l";ControllerDb.prototype.PARAM_SGN_GREATER="g";ControllerDb.prototype.PARAM_SGN_LESS_EQUAL="le";ControllerDb.prototype.PARAM_SGN_GREATER_EQUAL="ge";ControllerDb.prototype.PARAM_SGN_LIKE="lk";ControllerDb.prototype.PARAM_SGN_NOT_EQUAL="ne";ControllerDb.prototype.PARAM_ORD_ASC="a";ControllerDb.prototype.PARAM_ORD_DESC="d";ControllerDb.prototype.PARAM_GRP_FIELDS="grp_fields";ControllerDb.prototype.PARAM_AGG_FIELDS="agg_fields";ControllerDb.prototype.PARAM_AGG_TYPES="agg_types";ControllerDb.prototype.PARAM_RET_ID="ret_id";ControllerDb.prototype.PARAM_FIELD_SEP="field_sep";ControllerDb.prototype.m_listModelId;ControllerDb.prototype.m_objModelId;ControllerDb.prototype.addDefParams=function(pm){pm.addField(new FieldString(this.PARAM_CONTROLLER,{value:this.getId()}));pm.addField(new FieldString(this.PARAM_METH,{value:pm.getId()}));pm.addField(new FieldString(this.PARAM_VIEW,{value:this.PARAM_VIEW_VALUE}));}
ControllerDb.prototype.addInsert=function(){return this.addMethod(this.METH_INSERT);}
ControllerDb.prototype.getInsert=function(){return this.getPublicMethod(this.METH_INSERT);}
ControllerDb.prototype.addUpdate=function(){return this.addMethod(this.METH_UPDATE);}
ControllerDb.prototype.getUpdate=function(){return this.getPublicMethod(this.METH_UPDATE);}
ControllerDb.prototype.addDelete=function(){return this.addMethod(this.METH_DELETE);}
ControllerDb.prototype.getDelete=function(){return this.getPublicMethod(this.METH_DELETE);}
ControllerDb.prototype.addGetObject=function(){return this.addMethod(this.METH_GET_OBJ);}
ControllerDb.prototype.getGetObject=function(){return this.getPublicMethod(this.METH_GET_OBJ);}
ControllerDb.prototype.addGetList=function(){var pm=this.addMethod(this.METH_GET_LIST);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_FIELD_SEP));return pm;}
ControllerDb.prototype.getGetList=function(){return this.getPublicMethod(this.METH_GET_LIST,{controller:this});}
ControllerDb.prototype.setObjModel=function(objModel){this.m_objModel=objModel;}
ControllerDb.prototype.getObjModel=function(){return this.m_objModel;}
ControllerDb.prototype.setListModel=function(listModel){this.m_listModel=listModel;}
ControllerDb.prototype.getListModel=function(){return this.m_listModel;}
ControllerDb.prototype.addComplete=function(){var pm=this.addMethod(this.METH_COMPLETE);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_IC));pm.addField(new FieldInt(this.PARAM_MID));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));return pm;}
ControllerDb.prototype.getComplete=function(){return this.getPublicMethod(this.METH_COMPLETE);}
ControllerDb.prototype.addMethod=function(methId){var pm=new PublicMethod(methId,{controller:this});this.addDefParams(pm);this.addPublicMethod(pm);return pm;} 
function Model(id,options){options=options||{};this.setId(id);this.m_fields=options.fields||{};if(options.data){this.setData(options.data);}}
Model.prototype.ATTR_TOT_COUNT="totalCount";Model.prototype.ATTR_PG_COUNT="rowsPerPage";Model.prototype.ATTR_PG_FROM="listFrom";Model.prototype.m_rowIndex;Model.prototype.m_fields;Model.prototype.m_id;Model.prototype.m_locked;Model.prototype.setData=function(){this.reset();}
Model.prototype.setId=function(id){this.m_id=id;}
Model.prototype.getId=function(){return this.m_id;}
Model.prototype.getNextRow=function(){if(this.m_rowIndex+1==this.getRowCount()){return null;}
this.m_rowIndex++;return this.fetchRow();}
Model.prototype.getPreviousRow=function(){if(this.m_rowIndex==0){return null;}
this.m_rowIndex--;return this.fetchRow();}
Model.prototype.getRow=function(ind){if(isNaN(ind)||ind<0||ind>=this.getRowCount()){return null;}
this.m_rowIndex=ind;return this.fetchRow();}
Model.prototype.fetchRow=function(){}
Model.prototype.getRowCount=function(){}
Model.prototype.getTotCount=function(){}
Model.prototype.getPageFrom=function(){}
Model.prototype.getAttr=function(attr){}
Model.prototype.getPageCount=function(){}
Model.prototype.getFields=function(){return this.m_fields;}
Model.prototype.setFields=function(f){this.m_fields=f;}
Model.prototype.fieldExists=function(id){return(this.m_fields[id]!=undefined);}
Model.prototype.getField=function(id){if(!this.m_fields[id]){throw new Error(CommonHelper.format(this.ER_NO_FIELD,Array(id,this.getId())));}
return this.m_fields[id];}
Model.prototype.addField=function(f){this.m_fields[f.getId()]=f;}
Model.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
Model.prototype.reset=function(){this.m_rowIndex=-1;for(var id in this.m_fields){this.m_fields[id].unsetValue();}}
Model.prototype.delRow=function(ind){if(ind!=undefined){this.getRow(ind);}
if(this.m_rowIndex>=0){}}
Model.prototype.getLocked=function(){return this.m_locked;}
Model.prototype.setLocked=function(v){this.m_locked=v;} 
function ModelXML(id,options){ModelXML.superclass.constructor.call(this,id,options);}
extend(ModelXML,Model);ModelXML.prototype.TAG_MODEL="model";ModelXML.prototype.TAG_ROW="row";ModelXML.prototype.TAG_AT_ID="id";ModelXML.prototype.m_node;ModelXML.prototype.m_rows;ModelXML.prototype.setData=function(data){if(this.getLocked()){throw Error(this.ER_LOCKED);}
if(typeof(data)=="string"){var xml=DOMHelper.xmlDocFromString(data);if(xml.getElementById){this.m_node=xml.getElementById(this.getId());}
if(!this.m_node){var models=xml.getElementsByTagName(this.TAG_MODEL);var id=this.getId();for(var i=0;i<models.length;i++){if(models[i].getAttribute(this.TAG_AT_ID)==id){this.m_node=models[i];break;}}}}
else{this.m_node=data;}
if(!this.m_node){throw new Error(CommonHelper.format(this.ER_NO_MODEL,Array(this.getId())));}
this.m_rows=this.m_node.getElementsByTagName(this.TAG_ROW);ModelXML.superclass.setData.call(this,data);}
ModelXML.prototype.fetchRow=function(){if(!this.m_rows){return;}
var f=this.m_rows[this.m_rowIndex].childNodes;for(var i=0;i<f.length;i++){if(f[i].nodeType==1){var fid=f[i].nodeName;if(this.m_fields[fid]){var t_val="";if(f[i].childNodes.length){for(var t_ind=0;t_ind<f[i].childNodes.length;t_ind++){if(f[i].childNodes[t_ind].nodeType==3){if(!t_val){t_val="";}
t_val+=f[i].childNodes[t_ind].nodeValue;}
else if(f[i].childNodes[t_ind].nodeType==1){var ar_node=f[i].childNodes[t_ind];for(var j=0;j<ar_node.childNodes.length;j++){if(ar_node.childNodes[j].nodeType==3){if(!t_val){t_val=[];}
t_val.push(ar_node.childNodes[j].nodeValue);}}}}}
if(t_val==""&&this.m_fields[fid].getValidator()&&this.m_fields[fid].getValidator().getRequired()){}
else{this.m_fields[fid].setValue(t_val);}}}}
return true;}
ModelXML.prototype.getRowCount=function(){if(this.m_rows){return this.m_rows.length;}}
ModelXML.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelXML.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelXML.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelXML.prototype.getAttr=function(attr){if(this.m_node){return this.m_node.getAttribute(attr);}} 
function ModelJSON(id,options){ModelJSON.superclass.constructor.call(this,id,options);}
extend(ModelJSON,Model);ModelJSON.prototype.TAG_ROW="rows";ModelJSON.prototype.m_node;ModelJSON.prototype.m_rows;ModelJSON.prototype.setData=function(data){if(this.getLocked()){throw Error(this.ER_LOCKED);}
if(typeof(data)=="string"){var json=CommonHelper.unserialize(data);if(json.models&&json.models[this.getId()]){this.m_node=json.models[this.getId()];}}
else{this.m_node=data;}
if(!this.m_node){throw new Error(CommonHelper.format(this.ER_NO_MODEL,Array(this.getId())));}
this.m_rows=this.m_node[this.TAG_ROW];ModelXML.superclass.setData.call(this,data);}
ModelJSON.prototype.fetchRow=function(){if(!this.m_rows){return;}
var fields=this.m_rows[this.m_rowIndex];for(var fid in fields){if(this.m_fields[fid]){var t_val="";if(fields[fid].length){this.m_fields[fid].setValue(fields[fid]);}}}
return true;}
ModelJSON.prototype.getRowCount=function(){if(this.m_rows){return this.m_rows.length;}}
ModelJSON.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelJSON.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelJSON.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelJSON.prototype.getAttr=function(attr){if(this.m_node){return this.m_node[attr];}} 
function ModelObjectXML(id,options){ModelObjectXML.superclass.constructor.call(this,id,options);}
extend(ModelObjectXML,ModelXML);ModelObjectXML.prototype.setData=function(data){ModelObjectXML.superclass.setData.call(this,data);this.getNextRow();} 
function ModelObjectJSON(id,options){ModelObjectJSON.superclass.constructor.call(this,id,options);}
extend(ModelObjectJSON,ModelJSON);ModelObjectJSON.prototype.setData=function(data){ModelObjectJSON.superclass.setData.call(this,data);this.getNextRow(0);} 
function ModelServRespXML(data){ModelServRespXML.superclass.constructor.call(this,"ModelServResponse",{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr")}});}
extend(ModelServRespXML,ModelObjectXML);ModelServRespXML.prototype.result;ModelServRespXML.prototype.descr;ModelServRespXML.prototype.setData=function(data){ModelServRespXML.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");} 
function ModelServRespJSON(resp){ModelServRespXML.superclass.constructor.call(this,"ModelServResponse",{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr")}});}
extend(ModelServRespJSON,ModelObjectJSON);ModelServRespJSON.prototype.result;ModelServRespJSON.prototype.descr;ModelServRespJSON.prototype.setData=function(data){ModelServRespJSON.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");} 
function Validator(options){options=options||{};this.setRequired(options.required);this.setMinLength(options.minLength);this.setFixLength(options.fixLength);this.setMaxLength(options.maxLength);}
Validator.prototype.m_required;Validator.prototype.m_minLength;Validator.prototype.m_maxLength;Validator.prototype.m_fixLength;Validator.prototype.setRequired=function(v){this.m_required=v;}
Validator.prototype.getRequired=function(){return this.m_required;}
Validator.prototype.setMinLength=function(v){this.m_minLength=v;}
Validator.prototype.getMinLength=function(){return this.m_minLength;}
Validator.prototype.setMaxLength=function(v){this.m_maxLength=v;}
Validator.prototype.getMaxLength=function(){return this.m_maxLength;}
Validator.prototype.setFixLength=function(v){this.m_fixLength=v;}
Validator.prototype.getFixLength=function(){return this.m_fixLength;}
Validator.prototype.isTooLong=function(val){return(val&&this.m_maxLength&&val.length&&val.length>this.m_maxLength);}
Validator.prototype.isTooShort=function(val){return(val&&this.m_minLength&&val.length&&val.length<this.m_minLength);}
Validator.prototype.isNotFixed=function(val){return(val&&this.m_fixLength&&val.length&&val.length!=this.m_maxLength);}
Validator.prototype.validate=function(val){if(this.getRequired()&&val===null){throw new Error(this.ER_EMPTY);}
if(this.isTooLong(val)){throw new Error(this.ER_TOO_LONG);}
if(this.isTooShort(val)){throw new Error(this.ER_TOO_SHORT);}
if(this.isNotFixed(val)){throw new Error(this.ER_INVALID);}}
Validator.prototype.correctValue=function(v){return v;} 
function ValidatorString(options){ValidatorString.superclass.constructor.call(this,options);}
extend(ValidatorString,Validator);ValidatorString.prototype.validate=function(val){ValidatorString.superclass.validate.call(this,val);if(this.getRequired()&&val==""){console.trace();throw new Error(this.ER_EMPTY);}} 
function ValidatorBool(options){this.TRUE_VALS=[];ValidatorBool.superclass.constructor.call(this,options);this.TRUE_VALS.push("1");this.TRUE_VALS.push("true");this.TRUE_VALS.push("t");this.TRUE_VALS.push("yes");this.TRUE_VALS.push("y");}
extend(ValidatorBool,Validator);ValidatorBool.prototype.correctValue=function(v){return(v===null||v===undefined||v===true||v===false)?v:(jQuery.inArray(v.toString().toLowerCase(),this.TRUE_VALS)>=0);} 
function ValidatorDate(options){ValidatorDate.superclass.constructor.call(this,options);}
extend(ValidatorDate,Validator);ValidatorDate.prototype.correctValue=function(v){if(!v)return DateHelper.time();if(v instanceof Date)return v;return DateHelper.strtotime(v);} 
function ValidatorDateTime(options){ValidatorDateTime.superclass.constructor.call(this,options);}
extend(ValidatorDateTime,ValidatorDate); 
function ValidatorTime(options){ValidatorTime.superclass.constructor.call(this,options);}
extend(ValidatorTime,ValidatorDate);ValidatorTime.prototype.correctValue=function(v){if(!v)return DateHelper.time();if(v instanceof Date)return v;return DateHelper.strtotime("1970-01-01T"+v);} 
function ValidatorInt(options){ValidatorInt.superclass.constructor.call(this,options);if(options.maxValue){this.setMaxValue(options.maxValue);}
if(options.minValue){this.setMinValue(options.minValue);}
if(options.notZero!=undefined){this.setNotZero(options.notZero);}
if(options.unsigned!=undefined){this.setUnsigned(options.unsigned);}}
extend(ValidatorInt,Validator);ValidatorInt.prototype.m_maxValue;ValidatorInt.prototype.m_minValue;ValidatorInt.prototype.m_notZero;ValidatorInt.prototype.m_unsigned;ValidatorInt.prototype.correctValue=function(v){v=parseInt(v);if(isNaN(v))v=null;return v;}
ValidatorInt.prototype.validate=function(v){var n=parseInt(v);if(this.getRequired()&&isNaN(n)){throw new Error(this.ER_INVALID);}
if(this.m_maxValue&&n>this.m_maxValue){throw new Error(CommonHelper.format(this.ER_VIOL_MAX,Array(n)));}
if(this.m_minValue&&n<this.m_minValue){throw new Error(CommonHelper.format(this.ER_VIOL_MIN,Array(n)));}
if(this.m_notZero&&n==0){throw new Error(this.ER_VIOL_NOT_ZERO);}
if(this.m_unsigned&&n<0){throw new Error(this.ER_VIOL_UNSIGNED);}
return n;}
ValidatorInt.prototype.getMaxValue=function(){return this.m_maxValue;}
ValidatorInt.prototype.setMaxValue=function(v){this.m_maxValue=v;}
ValidatorInt.prototype.getMinValue=function(){return this.m_minValue;}
ValidatorInt.prototype.setMinValue=function(v){this.m_minValue=v;}
ValidatorInt.prototype.getUnsigned=function(){return this.m_unsigned;}
ValidatorInt.prototype.setUnsigned=function(v){this.m_unsigned=v;}
ValidatorInt.prototype.getNotZero=function(){return this.m_notZero;}
ValidatorInt.prototype.setNotZero=function(v){this.m_notZero=v;} 
function ValidatorFloat(options){ValidatorFloat.superclass.constructor.call(this,options);}
extend(ValidatorFloat,ValidatorInt);ValidatorFloat.prototype.correctValue=function(v){var sep=CommonHelper.getDecimalSeparator();if(sep!="."){v=String(v).replace(sep,".");}
return parseFloat(v);} 
function ValidatorEnum(options){options=options||{};this.setEnumValues(options.enumValues);ValidatorEnum.superclass.constructor.call(this,options);}
extend(ValidatorEnum,Validator);ValidatorEnum.prototype.m_enumValues;ValidatorEnum.prototype.setEnumValues=function(v){this.m_enumValues=v;}
ValidatorEnum.prototype.getEnumValues=function(){return this.m_enumValues;}
ValidatorEnum.prototype.validate=function(val){ValidatorEnum.superclass.validate.call(this,val);var vals=this.getEnumValues();if(vals!==undefined&&vals.indexOf(val)<0){throw new Error(this.ER_INVALID);}} 
function ValidatorJSON(options){ValidatorJSON.superclass.constructor.call(this,options);}
extend(ValidatorJSON,Validator);ValidatorJSON.prototype.correctValue=function(v){return CommonHelper.unserialize(v);} 
function ValidatorArray(options){ValidatorArray.superclass.constructor.call(this,options);}
extend(ValidatorArray,Validator);ValidatorArray.prototype.correctValue=function(v){return eval(v);} 
function Field(id,options){options=options||{};if(!options.validator){throw new Error(CommonHelper.format(this.ER_NO_VALIDATOR,Array(id)));}
this.setId(id);this.setValidator(options.validator);this.setDataType(options.dataType);this.setAlias(options.alias);if(options.defValue!=undefined){this.setDefValue(options.defValue);}
else{this.m_defValue=undefined;}
if(options.value!=undefined){this.setValue(options.value);}
else{this.m_value=undefined;}
this.setPrimaryKey((options.primaryKey!=undefined)?options.primaryKey:false);this.setAutoInc((options.autoInc!=undefined)?options.autoInc:false);}
Field.prototype.DT_INT=0;Field.prototype.DT_INT_UNSIGNED=1;Field.prototype.DT_STRING=2;Field.prototype.DT_FLOAT_UNSIGNED=3;Field.prototype.DT_FLOAT=4;Field.prototype.DT_CUR_RUR=5;Field.prototype.DT_CUR_USD=6;Field.prototype.DT_BOOL=7;Field.prototype.DT_TEXT=8;Field.prototype.DT_DATETIME=9;Field.prototype.DT_DATE=10;Field.prototype.DT_TIME=11;Field.prototype.DT_OBJECT=12;Field.prototype.DT_FILE=13;Field.prototype.DT_PWD=14;Field.prototype.DT_EMAIL=15;Field.prototype.DT_ENUM=16;Field.prototype.DT_GEOM_POLYGON=17;Field.prototype.DT_GEOM_POINT=18;Field.prototype.DT_INTERVAL=19;Field.prototype.DT_DATETIMETZ=20;Field.prototype.DT_JSON=21;Field.prototype.DT_JSONB=22;Field.prototype.DT_ARRAY=23;Field.prototype.OLD_PREF="old_";Field.prototype.m_id;Field.prototype.m_alias;Field.prototype.m_value;Field.prototype.m_primaryKey;Field.prototype.m_defValue;Field.prototype.m_validator;Field.prototype.m_dataType;Field.prototype.setId=function(id){this.m_id=id;}
Field.prototype.getId=function(){return this.m_id;}
Field.prototype.getOldId=function(){return this.OLD_PREF+this.m_id;}
Field.prototype.setPrimaryKey=function(v){this.m_primaryKey=v;}
Field.prototype.getPrimaryKey=function(){return this.m_primaryKey;}
Field.prototype.setDefValue=function(v){v=this.m_validator.correctValue(v);this.m_validator.validate(v);this.m_defValue=v;}
Field.prototype.getDefValue=function(){return this.m_defValue;}
Field.prototype.setAlias=function(v){this.m_alias=v;}
Field.prototype.getAlias=function(){return this.m_alias||this.m_id;}
Field.prototype.setValidator=function(v){this.m_validator=v;}
Field.prototype.getValidator=function(){return this.m_validator;}
Field.prototype.setDataType=function(v){this.m_dataType=v;}
Field.prototype.getDataType=function(){return this.m_dataType;}
Field.prototype.setValue=function(v){v=this.m_validator.correctValue(v);this.m_validator.validate(v);this.m_value=v;}
Field.prototype.resetValue=function(){var req=this.m_validator.getRequired();if(req)this.m_validator.setRequired(false);this.setValue(null);this.m_validator.setRequired(req);}
Field.prototype.validate=function(value){this.getValidator().validate(value);}
Field.prototype.getValue=function(arInd){if(arInd&&this.m_value&&this.m_value.length>arInd){return this.m_value[arInd];}
else{return this.m_value;}}
Field.prototype.getValueXHR=function(){return this.getValue();}
Field.prototype.isNull=function(){return((this.getValue()===null)&&(this.getDefValue()===null));}
Field.prototype.isSet=function(){return(this.getValue()!==undefined||this.getDefValue()!==undefined);}
Field.prototype.setAutoInc=function(v){this.m_autoInc=v;}
Field.prototype.getAutoInc=function(){return this.m_autoInc;}
Field.prototype.unsetValue=function(){this.m_value=undefined;} 
function FieldString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);options.dataType=this.DT_STRING;FieldString.superclass.constructor.call(this,id,options);}
extend(FieldString,Field); 
function FieldEnum(id,options){options.dataType=this.DT_ENUM;options.validator=options.validator||new ValidatorEnum(options);options.dataType=this.DT_ENUM;FieldEnum.superclass.constructor.call(this,id,options);}
extend(FieldEnum,FieldString); 
function FieldBool(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.dataType=this.DT_BOOL;FieldBool.superclass.constructor.call(this,id,options);}
extend(FieldBool,Field);FieldBool.prototype.getValueXHR=function(){return((this.getValue())?"1":"0");} 
function FieldDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.dataType=options.dataType||this.DT_DATE;FieldDate.superclass.constructor.call(this,id,options);}
extend(FieldDate,Field);FieldDate.prototype.XHR_FORMAT="Y-m-d";FieldDate.prototype.getValueXHR=function(){return DateHelper.format(this.getValue(),this.XHR_FORMAT);} 
function FieldDateTime(id,options){options=options||{};options.dataType=options.dataType||this.DT_DATETIME;FieldDateTime.superclass.constructor.call(this,id,options);}
extend(FieldDateTime,FieldDate);FieldDateTime.prototype.XHR_FORMAT="Y-m-dTH:i:s"; 
function FieldTime(id,options){options=options||{};options.dataType=this.DT_TIME;options.validator=options.validator||new ValidatorTime(options);FieldTime.superclass.constructor.call(this,id,options);}
extend(FieldTime,FieldDate);FieldTime.prototype.XHR_FORMAT="H:i:s"; 
function FieldInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT;FieldInt.superclass.constructor.call(this,id,options);}
extend(FieldInt,Field); 
function FieldFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);options.dataType=this.DT_FLOAT;FieldFloat.superclass.constructor.call(this,id,options);}
extend(FieldFloat,Field); 
function FieldPassword(id,options){options=options||{};options.dataType=this.DT_PWD;FieldPassword.superclass.constructor.call(this,id,options);}
extend(FieldPassword,FieldString); 
function FieldText(id,options){options=options||{};options.dataType=this.DT_TEXT;FieldText.superclass.constructor.call(this,id,options);}
extend(FieldText,FieldString); 
function FieldJSON(id,options){options=options||{};options.validator=options.validator||new ValidatorJSON(options);options.dataType=this.DT_JSON;FieldJSON.superclass.constructor.call(this,id,options);}
extend(FieldJSON,Field);FieldJSON.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));} 
function FieldArray(id,options){options=options||{};options.validator=options.validator||new ValidatorArray(options);options.dataType=this.DT_ARRAY;FieldArray.superclass.constructor.call(this,id,options);}
extend(FieldArray,Field);FieldJSON.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));} 
function ModelFilter(options){options=options||{};this.setFilters(options.filters);}
ModelFilter.prototype.m_filters;ModelFilter.prototype.getFilterVal=function(filter){var ctrl=filter.binding.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,Array(id)));}
var f=filter.binding.getField();var res={"field":f.getId(),"sign":filter.sign,"val":undefined,"icase":undefined};if(!ctrl.isNull()){ctrl.setValid();try{var fv;if(!ctrl.getIsRef()){fv=ctrl.getValue();}
else{var keys=ctrl.getKeys();for(var kid in keys){fv=keys[kid];break;}}
f.setValue(fv);}
catch(e){ctrl.setNotValid(e.message);struc.incorrect_vals=true;}
res.val=f.getValueXHR();if(filter.sign=="lk"){res.val=((filter.lwcards)?"%":"")+res.val+((filter.rwcards)?"%":"")}
res.icase=(filter.icase)?"1":"0";}
return res;}
ModelFilter.prototype.setFilter=function(id,filter){this.m_filters[id]=filter;}
ModelFilter.prototype.getFilter=function(id){return this.m_filters[id];}
ModelFilter.prototype.getFilters=function(){return this.m_filters;}
ModelFilter.prototype.setFilters=function(v){this.m_filters=v;}
ModelFilter.prototype.applyFilters=function(grid){for(var id in this.m_filters){if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var struc=this.getFilterVal(this.m_filters[id].bindings[i]);if(struc.val!==undefined){grid.setFilter(struc);}
else{grid.unsetFilter(struc);}}}
else{var struc=this.getFilterVal(this.m_filters[id]);if(struc.val!==undefined){grid.setFilter(struc);}
else{grid.unsetFilter(struc);}}}}
ModelFilter.prototype.resetFilters=function(grid){for(var id in this.m_filters){var bind=this.m_filters[id].binding;var ctrl=bind.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,Array(id)));}
ctrl.reset();if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var filter=this.m_filters[id].bindings[i];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}
else{var filter=this.m_filters[id];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}}
ModelFilter.prototype.serialize=function(){var o={};for(var id in this.m_filters){if(this.m_filters[id].bindings){o[id]=[];for(var i=0;i<this.m_filters[id].bindings.length;i++){var ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl){o[id][i]={"field":this.m_filters[id].bindings[i].binding.getField().getId(),"sign":this.m_filters[id].bindings[i].sign,"value":ctrl.getValue()};}}}
else{var ctrl=this.m_filters[id].binding.getControl();if(ctrl){o[id]={"field":this.m_filters[id].binding.getField().getId(),"sign":this.m_filters[id].sign,"value":ctrl.getValue()};}}}
return CommonHelper.serialize(o);}
ModelFilter.prototype.unserialize=function(str){var o=CommonHelper.unserialize(str);for(var id in this.m_filters){if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){debugger
var ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl){if(o[id][i]){if(o[id][i].value&&typeof(o[id][i].value)=="object"&&o[id][i].value.m_keys!==undefined){o[id][i].value=new RefType({"keys":o[id][i].value.m_keys,"descr":o[id][i].value.m_descr});}
ctrl.setValue(o[id][i].value);}
else{ctrl.reset();}}}}
else{var ctrl=this.m_filters[id].binding.getControl();if(ctrl){if(o[id]){if(typeof(o[id].value)=="object"&&o[id].value.m_keys!==undefined){o[id].value=new RefType({"keys":o[id].value.m_keys,"descr":o[id].value.m_descr});}
ctrl.setValue(o[id].value);}
else{ctrl.reset();}}}}
return o;} 
function RefType(options){options=options||{};this.setKeys(options.keys);this.setDescr(options.descr);}
RefType.prototype.m_keys;RefType.prototype.m_descr;RefType.prototype.setKeys=function(v){this.m_keys=v;}
RefType.prototype.getKeys=function(){return this.m_keys;}
RefType.prototype.setDescr=function(v){this.m_descr=v;}
RefType.prototype.getDescr=function(){return this.m_descr;}
RefType.prototype.getKey=function(v){return(this.m_keys)?this.m_keys[v]:null;} 
function EquipServer(options){options=options||{};this.setId(options.id);this.setServer(options.server);this.setPort(options.port);if(this.m_id){this.setEnabled(1);}}
EquipServer.prototype.setId=function(v){this.m_id=v;}
EquipServer.prototype.setServer=function(v){this.m_server=v;}
EquipServer.prototype.setPort=function(v){this.m_port=v;}
EquipServer.prototype.showProperties=function(){this.execute("showProperties","");}
EquipServer.prototype.setEnabled=function(val){this.execute("setEnabled",{"val":parseInt(val)});}
EquipServer.prototype.getEnabled=function(callback){this.execute("getEnabled",null,callback);}
EquipServer.prototype.printX=function(pwd){this.execute("printX",{"pwd":pwd});}
EquipServer.prototype.printX=function(pwd){this.execute("printZ",{"pwd":pwd});}
EquipServer.prototype.printCheck=function(paramStruc){this.execute("printCheck",paramStruc);}
EquipServer.prototype.execute=function(cmd,params,callback){var jqxhr=$.get("http://"+this.m_server+":"+this.m_port,{"id":this.m_id,"cmd":cmd,"params":JSON.stringify(params)}).done(function(resp){var o=JSON.parse(resp);if(o.code!="0"){window.showError(decodeURIComponent(o.descr));}
if(callback){callback.call(this);}}).fail(function(){window.showError("Ошибка связи с ККМ.");});}
EquipServer.prototype.getEnabled=function(){return true;} 
Model.prototype.ER_NO_MODEL="Модель % не найдена.";Model.prototype.ER_NO_FIELD="Поле % модели % не найдено.";Model.prototype.ER_LOCKED="Модель заблокирована.";Validator.prototype.ER_EMPTY="пустое значение";Validator.prototype.ER_TOO_LONG="значение слишком длинное";Validator.prototype.ER_TOO_SHORT="значение слишком короткое";Validator.prototype.ER_INVALID="неверное значение.";ValidatorBool.prototype.TRUE_VALS=["да","д","истина"];ValidatorInt.prototype.ER_VIOL_NOT_ZERO="значение равно нулю";ValidatorInt.prototype.ER_VIOL_MAX="значение больше %";ValidatorInt.prototype.ER_VIOL_MIN="значение меньше %";ValidatorInt.prototype.ER_VIOL_UNSIGNED="значение меньше нуля";Field.prototype.ER_NO_VALIDATOR="Поле:%, не задан валидатор.";DateHelper.MON_LIST=Array("Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря");DateHelper.FORMAT_STR="d/m/Y H:i:s";EventHelper.DEL_ERR="Невозможно удалить событие.";ServResp.prototype.ERR_NO_MODEL="Модель % не найдена.";PublicMethod.prototype.ER_NO_FIELD="Контроллер %, метод %, поле % не найдено.";PublicMethod.prototype.ER_NO_CONTROLLER="Метод %, не задан контроллер.";Controller.prototype.ER_NO_METHOD="Метод % контроллера % не найден.";Controller.prototype.ER_NO_PARAM_APP="Параметр options.app не задан.";Controller.prototype.ER_EMPTY="Контроллер %, метод %, поле %, не задано обязательное значение.";ModelFilter.prototype.ER_NO_CTRL="Фильтр %, не указан контрол."; 
function DataBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_model=options.model;this.m_keyIds=options.keyIds;}
DataBinding.prototype.m_control;DataBinding.prototype.m_field;DataBinding.prototype.m_fieldId;DataBinding.prototype.m_model;DataBinding.prototype.m_keyIds;DataBinding.prototype.getControl=function(){return this.m_control;}
DataBinding.prototype.setControl=function(v){this.m_control=v;}
DataBinding.prototype.getField=function(){return this.m_field;}
DataBinding.prototype.setField=function(v){this.m_field=v;}
DataBinding.prototype.getFieldId=function(){return this.m_fieldId;}
DataBinding.prototype.setFieldId=function(v){this.m_fieldId=v;}
DataBinding.prototype.getModel=function(){return this.m_model;}
DataBinding.prototype.setModel=function(v){this.m_model=v;}
DataBinding.prototype.getKeyIds=function(){return(this.m_keyIds)?this.m_keyIds:((this.m_control&&this.m_control.getKeyIds)?this.m_control.getKeyIds():null);}
DataBinding.prototype.setKeyIds=function(v){this.m_keyIds=v;} 
function Command(id,options){if(typeof(id)=="object"){options=id;if(!options.id){options.id=options.publicMethod.getId();}}
else{options=options||{};options.id=id;}
this.setId(options.id);this.setControl(options.control);this.setPublicMethod(options.publicMethod);this.setBindings(options.bindings||[]);this.setAsync(options.async);}
Command.prototype.m_id;Command.prototype.m_control;Command.prototype.m_publicMethod;Command.prototype.m_bindings;Command.prototype.m_async;Command.prototype.getPublicMethod=function(){return this.m_publicMethod;}
Command.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
Command.prototype.getBindings=function(){return this.m_bindings;}
Command.prototype.setBindings=function(v){this.m_bindings=v;}
Command.prototype.addBinding=function(binding){this.m_bindings.push(binding);}
Command.prototype.getAsync=function(){return this.m_async;}
Command.prototype.setAsync=function(v){this.m_async=v;}
Command.prototype.getControl=function(){return this.m_control;}
Command.prototype.setControl=function(v){this.m_control=v;}
Command.prototype.getId=function(){return this.m_id;}
Command.prototype.setId=function(v){this.m_id=v;} 
function CommandBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;}
CommandBinding.prototype.m_control;CommandBinding.prototype.m_field;CommandBinding.prototype.getControl=function(){return this.m_control;}
CommandBinding.prototype.setControl=function(v){this.m_control=v;}
CommandBinding.prototype.getField=function(){return this.m_field;}
CommandBinding.prototype.setField=function(v){this.m_field=v;}
CommandBinding.prototype.getFieldId=function(){return this.m_fieldId;}
CommandBinding.prototype.setFieldId=function(v){this.m_fieldId=v;} 
function Control(id,tagName,options){options=options||{};tagName=tagName||this.DEF_TAG_NAME;this.setApp(window.getApp());this.setWinObj(options.winObj);var is_template=(tagName.toUpperCase()=="TEMPLATE");if(is_template){options.template=options.template||window.getApp().getTemplate(this.constructor.name);}
var n=(id)?CommonHelper.nd(id,this.getWinObjDocument()):null;if(n){for(var i=0;i<n.attributes.length;i++){options[n.attributes[i].name]=n.attributes[i].value;}
this.m_node=n;if(this.m_node.nodeName!=tagName&&tagName.toUpperCase()!="DIV"){DOMHelper.setTagName(this.m_node,tagName);}}
else if(is_template&&options.template){this.m_tempDiv=document.createElement("DIV");this.m_tempDiv.className=this.CLASS_INVISIBLE;this.m_tempDiv.innerHTML=this.getTemplateHTML(options.template,id);this.m_node=this.m_tempDiv.children[this.m_tempDiv.children.length-1];document.body.appendChild(this.m_tempDiv);options.template=undefined;}
else{this.m_node=document.createElement(tagName);this.setId(id);}
if(options.template){this.setTemplate(options.template);}
if(options.html){this.setHtml(options.html);}
this.setClassName(options.className);if(options.value!=undefined){this.setValue(options.value);}
options.attrs=options.attrs||{};if(options.name){options.attrs.name=options.name;}
if(!options.attrs.name&&id){var id_ar=id.split(this.NAMESPACE_SEP);if(id_ar.length){options.attrs.name=id_ar[id_ar.length-1];}
else{options.attrs.name=id;}}
if(options.maxLength||options.maxlength){options.attrs.maxlength=options.attrs.maxlength||options.maxLength||options.maxlength;}
if(options.placeholder){options.attrs.placeholder=options.placeholder;}
if(options.title){options.attrs.title=options.title;}
if(options.focus||options.autofocus){options.attrs.autofocus="autofocus";}
if(options.tabIndex||options.attrs.tabindex){this.setTabIndex(options.tabIndex||options.attrs.tabindex);}
if(options.attrs.disabled&&options.attrs.disabled==this.ATTR_DISABLED){options.enabled=false;}
this.setEnabled((options.enabled!=undefined)?options.enabled:true);this.setVisible((options.visible!=undefined)?options.visible:true);if(options.required!=undefined){this.setRequired(options.required);}
for(var attr in options.attrs){if(attr!="disabled"){var av;if(attr=="class"){av=DOMHelper.getAttr("class")||"";av=av+((av=="")?"":" ")+options.attrs[attr];}
else if(attr=="style"){av=DOMHelper.getAttr("style")||"";av=av+options.attrs[attr];}
else{av=options.attrs[attr];}
this.setAttr(attr,av);}}
this.setOnValueChange(options.onValueChange);this.setEvents(options.events);}
Control.prototype.DEF_TAG_NAME="DIV";Control.prototype.ATTR_DISABLED="disabled";Control.prototype.ATTR_REQ="required";Control.prototype.CLASS_INVISIBLE="hidden";Control.prototype.NAMESPACE_SEP=":";Control.prototype.m_node;Control.prototype.m_events;Control.prototype.m_eventFuncs;Control.prototype.m_onValueChange;Control.prototype.m_locked;Control.prototype.m_beforeLockEnabled;Control.prototype.correctEvId=function(ev){var id=ev.toLowerCase();if(id.substring(0,2)=="on"){id=id.substring(2);}
return id;}
Control.prototype.eventsToDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);var self=this;this.m_eventFuncs[id]=function(e){self.m_events[ev].call(self,e);};EventHelper.add(this.m_node,id,this.m_eventFuncs[id],true);}}
Control.prototype.eventsFromDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);if(this.m_eventFuncs[id]){EventHelper.del(this.m_node,id,this.m_eventFuncs[id],true);}}}
Control.prototype.nodeToDOM=function(parent){if(this.m_tempDiv){this.m_tempDiv.parentNode.removeChild(this.m_tempDiv);parent.appendChild(this.m_node);}
else{var n=CommonHelper.nd(this.getId(),this.getWinObjDocument());if((!n&&parent)||(n&&!parent)){if(!n){parent.appendChild(this.m_node);}
else if(this.m_node!=n){this.m_node=n;}
if(this.getAttr("autofocus")){this.focus();}}}}
Control.prototype.setText=function(val){if(this.m_node.childNodes!=undefined&&this.m_node.childNodes.length){this.m_node.childNodes[0].nodeValue=val;}
else{this.m_node.appendChild(document.createTextNode(val));}}
Control.prototype.getText=function(){if(this.m_node.childNodes&&this.m_node.childNodes.length){return this.m_node.childNodes[0].nodeValue;}}
Control.prototype.valueChanged=function(){if(this.m_onValueChange){this.m_onValueChange.call(this);}}
Control.prototype.setId=function(id){if(id)this.m_node.id=id;}
Control.prototype.getId=function(){return DOMHelper.getAttr(this.getNode(),"id");}
Control.prototype.setTagName=function(v){if(this.m_node.nodeName!=v){this.m_node.nodeName=v;}}
Control.prototype.setName=function(v){DOMHelper.setAttr(this.getNode(),"name",v);}
Control.prototype.getName=function(){return DOMHelper.getAttr(this.getNode(),"name");}
Control.prototype.setTabIndex=function(v){DOMHelper.setAttr(this.getNode(),"tabindex",v);}
Control.prototype.getTabIndex=function(){return DOMHelper.getAttr(this.getNode(),"tabindex");}
Control.prototype.setEnabled=function(v){if(v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}}
Control.prototype.getEnabled=function(){return!(DOMHelper.getAttr(this.getNode(),this.ATTR_DISABLED));}
Control.prototype.setVisible=function(v){if(v){DOMHelper.delClass(this.m_node,this.CLASS_INVISIBLE);}
else{DOMHelper.addClass(this.m_node,this.CLASS_INVISIBLE);}}
Control.prototype.setRequired=function(v){if(!v){DOMHelper.delAttr(this.m_node,this.ATTR_REQ);}
else{DOMHelper.addAttr(this.m_node,this.ATTR_REQ,this.ATTR_REQ);}}
Control.prototype.getRequired=function(){return(DOMHelper.getAttr(this.m_node,this.ATTR_REQ)!=undefined);}
Control.prototype.getVisible=function(){return!DOMHelper.hasClass(this.m_node,this.CLASS_INVISIBLE);}
Control.prototype.getNode=function(){return this.m_node;}
Control.prototype.appendToNode=function(parent){parent.appendChild(this.m_node);}
Control.prototype.setValue=function(val){this.setText(val);this.valueChanged();}
Control.prototype.getValue=function(){return this.getText();}
Control.prototype.toDOMAfter=function(node){var sibl=node.nextSibling;var p=node.parentNode;if(p&&sibl){p.insertBefore(this.m_node,sibl);}
else if(p){p.appendChild(this.m_node);}
this.eventsToDOM();}
Control.prototype.toDOMInstead=function(node){node.parentNode.replaceChild(this.m_node,node);this.eventsToDOM();}
Control.prototype.toDOM=function(parent){this.nodeToDOM(parent);this.eventsToDOM();}
Control.prototype.setAttr=function(name,value){if(value!=undefined){DOMHelper.setAttr(this.m_node,name,value);}}
Control.prototype.getAttr=function(name){return DOMHelper.getAttr(this.m_node,name);}
Control.prototype.delAttr=function(name){DOMHelper.delAttr(name);}
Control.prototype.setClassName=function(className){if(className&&className.length>0){var cl=this.m_node.className||"";this.m_node.className=cl+((cl=="")?"":" ")+className;}}
Control.prototype.getClassName=function(){return this.m_node.className;}
Control.prototype.delDOM=function(){DOMHelper.delNode(this.m_node);}
Control.prototype.setWinObj=function(winObj){this.m_winObj=winObj;}
Control.prototype.getWinObj=function(winObj){return this.m_winObj;}
Control.prototype.getWinObjDocument=function(){if(this.m_winObj&&this.m_winObj.getWindowForm){return this.m_winObj.getWindowForm().document;}
else{return window.document;}}
Control.prototype.setEvents=function(e){this.m_events=e;this.m_eventFuncs={};}
Control.prototype.getEvents=function(){return this.m_events;}
Control.prototype.getEvent=function(id){return this.m_events[id];}
Control.prototype.focus=function(){if(!(CommonHelper.isIE()&&CommonHelper.getIEVersion()<=8)){this.m_node.focus();}}
Control.prototype.setApp=function(app){this.m_app=app;}
Control.prototype.getApp=function(){return this.m_app;}
Control.prototype.serialize=function(o){var o=o||{};o.value=this.getValue();for(var a in this.m_node.attributes){if(typeof this.m_node.attributes[a]!="object"&&typeof this.m_node.attributes[a]!="function"){o[a]=this.m_node.attributes[a];}}
return CommonHelper.serialize(o);}
Control.prototype.unserialize=function(str){var o=CommonHelper.unserialize(str);for(var a in o){if(a=="value")continue;this.m_node.attributes[a]=o[a];}
if(o.value){this.setValue(o.value);}
return o;}
Control.prototype.getHtml=function(){return this.m_node.innerHTML;}
Control.prototype.setHtml=function(v){if(v){this.m_node.innerHTML=v;}}
Control.prototype.getTemplateHTML=function(t,nId){var res=t.replace(/{{id}}/g,(nId)?nId:this.getId());var matches=res.match(/{{.*}}/g);if(matches){for(var i=0;i<matches.length;i++){res=res.split(matches[i]).join(eval(matches[i].substring(2,matches[i].length-2)));}}
return res;}
Control.prototype.setTemplate=function(v){if(v){this.setHtml(this.getTemplateHTML(v));}}
Control.prototype.getOnValueChange=function(){return this.m_onValueChange;}
Control.prototype.setOnValueChange=function(v){this.m_onValueChange=v;}
Control.prototype.setLocked=function(v){if(v){this.m_beforeLockEnabled=this.getEnabled();}
if((v&&this.m_beforeLockEnabled)||(!v&&this.m_beforeLockEnabled)){if(!v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}}
this.m_locked=v;}
Control.prototype.getLocked=function(){return this.m_locked;} 
Control.prototype.ER_NO_PARENT="Контрол %, родитель не определен.";Control.prototype.ER_NO_AP="Контрол %, параметр app не задан."; 
function ControlContainer(id,tagName,options){if(!id){id=CommonHelper.uniqid();}
options=options||{};ControlContainer.superclass.constructor.call(this,id,tagName,options);this.m_elements={};if(options.elements){for(var i=0;i<options.elements.length;i++){this.addElement(options.elements[i]);}}}
extend(ControlContainer,Control);ControlContainer.prototype.m_elements;ControlContainer.prototype.elementExists=function(id){return(this.m_elements[id]!=undefined);}
ControlContainer.prototype.checkElement=function(id){if(!this.elementExists(id)){throw new Error(CommonHelper.format(this.ER_NO_ELEMENT,Array(id,this.getId())));}
return true;}
ControlContainer.prototype.isEmpty=function(){return CommonHelper.isEmpty(this.m_elements);}
ControlContainer.prototype.getElement=function(id){return this.m_elements[id];}
ControlContainer.prototype.getElements=function(){return this.m_elements;}
ControlContainer.prototype.getElementByIndex=function(ind){var i=0;for(var k in this.m_elements){if(i==ind){return this.m_elements[k];}
i++;}}
ControlContainer.prototype.setElement=function(id,elem){this.m_elements[id||CommonHelper.uniqid()]=elem;}
ControlContainer.prototype.addElement=function(ctrl){this.setElement(ctrl.getName(),ctrl);}
ControlContainer.prototype.appendToNode=function(parent){for(var elem_id in this.m_elements){this.m_elements[elem_id].appendToNode(this.m_node);}
parent.appendChild(this.m_node);}
ControlContainer.prototype.elementsToDOM=function(){var elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];elem.toDOM(this.m_node);}}
ControlContainer.prototype.toDOMAfter=function(node){ControlContainer.superclass.toDOMAfter.call(this,node);this.elementsToDOM();}
ControlContainer.prototype.toDOM=function(parent){this.elementsToDOM();this.nodeToDOM(parent);this.eventsToDOM();}
ControlContainer.prototype.clear=function(){this.m_elements={};}
ControlContainer.prototype.getCount=function(){var len=0;for(var k in this.m_elements)len++;return len;}
ControlContainer.prototype.delDOM=function(){for(var elem_id in this.m_elements){this.m_elements[elem_id].delDOM();}
ControlContainer.superclass.delDOM.call(this);}
ControlContainer.prototype.setEnabled=function(v){for(var elem_id in this.m_elements){this.m_elements[elem_id].setEnabled(v);}
ControlContainer.superclass.setEnabled.call(this,v);}
ControlContainer.prototype.setLocked=function(v){for(var elem_id in this.m_elements){this.m_elements[elem_id].setLocked(v);}
ControlContainer.superclass.setLocked.call(this,v);}
ControlContainer.prototype.setVisible=function(v){for(var elem_id in this.m_elements){this.m_elements[elem_id].setVisible(v);}
ControlContainer.superclass.setVisible.call(this,v);}
ControlContainer.prototype.serialize=function(){var o={};o.elements={};for(var elem_id in this.m_elements){o.elements[elem_id]=this.m_elements[elem_id].serialize();}
return ControlContainer.superclass.serialize.call(this,o);}
ControlContainer.prototype.unserialize=function(str){var o=ControlContainer.superclass.unserialize.call(this,str);for(var id in o.elements){if(this.m_elements[id]){this.m_elements[id].unserialize(o.elements[id]);}}} 
ControlContainer.prototype.ER_NO_ELEMENT="Элемент % контейнера % не найден."; 
function View(id,options){options=options||{};this.setDataBindings(options.dataBindings||[]);this.m_editResult={"newKeys":null,"updated":false};View.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(View,ControlContainer);View.prototype.DEF_TAG_NAME="DIV";View.prototype.m_controlStates;View.prototype.m_dataBindings;View.prototype.m_editResult;View.prototype.onGetData=function(resp){}
View.prototype.setFocus=function(){var set=false,cnt=0;for(var id in this.m_elements){cnt++;if(this.m_elements[id].getAttr("autofocus")){this.m_elements[id].focus();set=true;break;}}
if(!set&&cnt){this.getElementByIndex(0).focus();}}
View.prototype.setReadTempDisabled=function(){this.m_controlStates=[];if(this.m_dataBindings){for(var i=0;i<this.m_dataBindings.length;i++){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){this.m_controlStates.push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":ctrl.getInputEnabled()});ctrl.setEnabled(false);}}}}
View.prototype.setReadTempEnabled=function(){if(this.m_controlStates){for(var i=0;i<this.m_controlStates.length;i++){if(this.m_controlStates[i].enabled){this.m_controlStates[i].ctrl.setEnabled(true);}
this.m_controlStates[i].ctrl.setInputEnabled(this.m_controlStates[i].inputEnabled);}}}
View.prototype.setError=function(s,delay){window.showError(s,null,delay);}
View.prototype.resetError=function(){window.resetError();}
View.prototype.toDOM=function(parent){View.superclass.toDOM.call(this,parent);this.setFocus();}
View.prototype.getDataBindings=function(){return this.m_dataBindings;}
View.prototype.setDataBindings=function(v){this.m_dataBindings=v;}
View.prototype.addDataBinding=function(binding){this.m_dataBindings.push(binding);}
View.prototype.clearDataBinding=function(){this.setDataBindings([]);} 
function ViewAjx(id,options){options=options||{};this.setCommands(options.commands||{});ViewAjx.superclass.constructor.call(this,id,options);}
extend(ViewAjx,View);ViewAjx.prototype.m_commands;ViewAjx.prototype.m_cmdCtrlState;ViewAjx.prototype.defineField=function(i){var f=this.m_dataBindings[i].getField();var m=this.m_dataBindings[i].getModel();if(!f&&this.m_dataBindings[i].getFieldId()&&m.fieldExists(this.m_dataBindings[i].getFieldId())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getFieldId()));}
else if(!f&&this.m_dataBindings[i].getControl()&&m.fieldExists(this.m_dataBindings[i].getControl().getName())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getControl().getName()));}}
ViewAjx.prototype.onGetData=function(resp,cmd){var models={};for(var i=0;i<this.m_dataBindings.length;i++){var m=this.m_dataBindings[i].getModel();var m_id=m.getId();if(models[m_id]==undefined&&resp&&resp.modelExists(m_id)){m.setData(resp.getModelData(m_id));models[m_id]=m.getRowCount();m.getNextRow();}
else if(models[m_id]==undefined&&!resp){models[m_id]=m.getRowCount();if(models[m_id]){m.getNextRow();}}
if(models[m_id]>0){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var init_val=null;var ctrl_format_f=ctrl.getFormatFunction();if(ctrl_format_f){init_val=ctrl_format_f.call(ctrl,this.m_dataBindings[i].getModel().getFields());}
else{this.defineField(i);if(this.m_dataBindings[i].getField()&&!(cmd=="copy"&&f.getPrimaryKey())){init_val=this.m_dataBindings[i].getField().getValue();}}
if(init_val&&!ctrl.getIsRef()){ctrl.setInitValue(init_val);}
else if(ctrl.getIsRef()&&this.m_dataBindings[i].getKeyIds()){var key_ids=this.m_dataBindings[i].getKeyIds();if(!key_ids){throw Error(CommonHelper.format(this.ER_CTRL_KEYS_NOT_BOUND,Array(ctrl.getName())));}
var keys={};for(var n=0;n<key_ids.length;n++){keys[key_ids[n]]=m.getFieldValue(key_ids[n]);}
ctrl.setInitValue(new RefType({"keys":keys,"descr":init_val}));}}}}
this.setReadTempEnabled();}
ViewAjx.prototype.setTempDisabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl){this.m_cmdCtrlState=cmd_ctrl.getEnabled();cmd_ctrl.setEnabled(false);}}
this.m_controlStates={};this.m_controlStates[cmd]=[];if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();for(var i=0;i<b.length;i++){var ctrl=b[i].getControl();this.m_controlStates[cmd].push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":ctrl.getInputEnabled()});ctrl.setEnabled(false);}}}
ViewAjx.prototype.setTempEnabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl&&this.m_cmdCtrlState){cmd_ctrl.setEnabled(true);}}
if(this.m_controlStates&&this.m_controlStates[cmd]){for(var i=0;i<this.m_controlStates[cmd].length;i++){if(this.m_controlStates[cmd][i].enabled){this.m_controlStates[cmd][i].ctrl.setEnabled(true);}
this.m_controlStates[cmd][i].ctrl.setInputEnabled(this.m_controlStates[cmd][i].inputEnabled);}}}
ViewAjx.prototype.getModified=function(cmd){if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();for(var i=0;i<b.length;i++){if(b[i].getControl()&&b[i].getControl().getModified()){return true;}}}}
ViewAjx.prototype.execCommand=function(cmd,sucFunc,failFunc){if(!this.m_commands[cmd]){throw Error(this.ER_CMD_NOT_FOUND);}
var pm=this.m_commands[cmd].getPublicMethod();if(!pm){throw Error(this.ER_NO_PM);}
incorrect_vals=false;modified=this.getModified(cmd);this.resetError();var old_keys={};if(modified&&this.m_commands[cmd].getBindings()){var bindings=this.m_commands[cmd].getBindings();for(var i=0;i<bindings.length;i++){var bind=bindings[i];var ctrl=bind.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,Array(cmd,i)));}
var f=bind.getField();if(!f&&bind.getFieldId()){f=pm.getField(bind.getFieldId());}
else if(!f&&pm.fieldExists(ctrl.getName())){f=pm.getField(ctrl.getName());}
else if(!f){throw Error(CommonHelper.format(this.ER_CTRL_NOT_BOUND,Array(ctrl.getName())));}
if(ctrl.getModified()){if(ctrl.getIsRef()){var keyIds=ctrl.getKeyIds();if(keyIds.length>=1){f.setValue(ctrl.getKeys()[keyIds[0]]);modified=true;}}
else{var val=ctrl.getValue();ctrl.setValid();try{if(ctrl.getRequired()&&val===null){throw new Error(f.getValidator().ER_EMPTY);}
f.setValue(val);modified=true;}
catch(e){ctrl.setNotValid(e.message);incorrect_vals=true;}}}
else if(ctrl.isNull()&&(ctrl.getRequired()||f.getValidator().getRequired())){ctrl.setNotValid(f.getValidator().ER_EMPTY);incorrect_vals=true;}
if(!incorrect_vals&&f.getPrimaryKey()&&pm.fieldExists(f.getOldId())){old_keys[f.getOldId()]=ctrl.getInitValue();}}}
if(incorrect_vals){this.setError(this.ER_ERRORS);}
else if(modified){this.setTempDisabled(cmd);for(oldid in old_keys){pm.setFieldValue(oldid,old_keys[oldid]);}
var self=this;try{this.beforeExecCommand(cmd,pm);pm.run({"async":this.m_commands[cmd].getAsync(),"ok":function(resp){self.setTempEnabled(cmd);if(sucFunc){sucFunc.call(this,resp);}},"fail":function(resp,errCode,errStr){self.onRequestFail(failFunc,cmd,resp,errCode,errStr);}});}
catch(e){this.onRequestFail(failFunc,cmd,null,null,e.message);}}
else{if(sucFunc){sucFunc.call(this,null);}}}
ViewAjx.prototype.onRequestFail=function(failFunc,cmd,resp,errCode,errStr){this.setTempEnabled(cmd);if(failFunc){failFunc.call(this,resp,errCode,errStr);}
else{this.setError(this.getApp().formatError(errCode,errStr));}}
ViewAjx.prototype.getCommands=function(){return this.m_commands;}
ViewAjx.prototype.setCommands=function(v){this.m_commands=v;}
ViewAjx.prototype.addCommand=function(cmd){this.m_commands[cmd.getId()]=cmd;}
ViewAjx.prototype.getCommand=function(id){return this.m_commands[id];}
ViewAjx.prototype.toDOM=function(parent){ViewAjx.superclass.toDOM.call(this,parent);this.onGetData();}
ViewAjx.prototype.beforeExecCommand=function(cmd,pm){} 
ViewAjx.prototype.ER_KEY_NOT_FOUND="Ключ % не найден у контрола %";ViewAjx.prototype.ER_ERRORS="Обнаружены ошибки.";ViewAjx.prototype.ER_NO_PM="Серверный метод не задан.";ViewAjx.prototype.ER_CTRL_NOT_BOUND="Элемент управления % не привязан к полю модели контроллера.";ViewAjx.prototype.ER_NO_CTRL="Команда %, позиция % нет привязки к элементу формы.";ViewAjx.prototype.ER_CTRL_KEYS_NOT_BOUND="Не заданы ключи ссылочного элемент управления %."; 
function ErrorControl(id,options){options=options||{};ErrorControl.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG,options);this.m_errorclassName=options.errorClassName||this.DEF_ERROR_CLASS;}
extend(ErrorControl,Control);ErrorControl.prototype.DEF_ERROR_CLASS="label label-danger";ErrorControl.prototype.DEF_TAG="DIV";ErrorControl.prototype.setValue=function(val){if(!val||val.trim()==""){DOMHelper.delClass(this.getNode(),this.m_errorclassName);}
else{DOMHelper.addClass(this.getNode(),this.m_errorclassName);}
ControlContainer.superclass.setValue.call(this,val);}
ErrorControl.prototype.clear=function(){this.setValue("");} 
function Calculator(options){options=options||{};if(!options.editControl){throw Error(this.ER_NO_EDIT_CONTROL);}
this.m_winObj=options.winObj;this.m_editControl=options.editControl;this.resetVars();}
Calculator.prototype.CALC_CLASS="calc";Calculator.prototype.m_editControl;Calculator.prototype.getVal=function(){return CommonHelper.nd("ekran",this.getWinObjDocument()).value;}
Calculator.prototype.setVal=function(val){CommonHelper.nd("ekran",this.getWinObjDocument()).value=val;}
Calculator.prototype.close=function(cancel){if(!cancel){this.m_editControl.setValue(this.getVal());this.m_editControl.focus();}
if(this.calcNode){this.calcNode.parentNode.removeChild(this.calcNode);}}
Calculator.prototype.wynik=0;Calculator.prototype.op;Calculator.prototype.nowe=0;Calculator.prototype.nowe2=0;Calculator.prototype.done=1;Calculator.prototype.oset=0;Calculator.prototype.kropka;Calculator.prototype.temp;Calculator.prototype.resetVars=function(){this.wynik=0,this.op=0,this.nowe=0,this.nowe2=0,this.done=1,this.oset=0;}
Calculator.prototype.reset=function(value){this.setVal(value);this.resetVars();}
Calculator.prototype.wspolna=function(new_temp){this.kropka=1;if(this.nowe||this.done){this.nowe=0;this.done=0;this.temp=new_temp;}
for(var i=0;i<this.temp.length;i++)if(this.temp[i]=='.')this.kropka=0;}
Calculator.prototype.calcButton=function(ktory,ktory2){this.temp=this.getVal();if(ktory2=='.'){this.wspolna('0');if(this.kropka){this.temp+=ktory2;this.setVal(this.temp);this.oset=0;}}
if(ktory>=0&&ktory<=9){this.wspolna('');if(this.temp==0&&this.kropka==1)this.temp='';this.temp+=ktory;this.setVal(this.temp);this.oset=1;}
if(ktory2=='-'||ktory2=='+'||ktory2=='/'||ktory2=='*'){if(this.nowe)this.op=ktory2
else{if(!this.nowe2){this.op=ktory2;this.wynik=this.temp;this.nowe2=1;}
else{this.wynik=eval(this.wynik+this.op+this.temp);this.op=ktory2;this.setVal(wynik);}
this.oset=0;this.nowe=1;}}
if(ktory2=='1/x'){this.wynik=eval(1/this.temp);this.reset(this.wynik);}
if(ktory2=='sqrt'){this.wynik=Math.sqrt(this.temp);this.reset(this.wynik);}
if(ktory2=='exp'){this.wynik=Math.exp(this.temp);this.reset(this.wynik);}
if(ktory2=='+/-')this.setVal(eval(-this.temp));if(ktory2=='='&&this.oset&&this.op!='0')this.reset(eval(this.wynik+this.op+this.temp));if(ktory2=='C')this.reset(0);if(this.getVal()[0]=='.')
this.setVal('0')+this.getVal();}
Calculator.prototype.getHTML=function(){var input_id=this.m_editControl.getId();var calc_html='<table cellPadding="0" cellSpacing="5">'+'<tbody>'+'<tr align="left">'+'<td colSpan="5" align="right"><div id="'+input_id+':calc_cancel"><img src="img/modal/close.gif"></div></td></tr>'+'<td colSpan="5"><input style="width:100%;" id="ekran" value="0" size="20"/></td></tr>'+'<tr align="middle">'+'<td colSpan="3">'+this.TITLE+'</td>'+'<td><input id="'+input_id+':calc_btn_C" type="button" value="C"/></td>'+'<td><input id="'+input_id+':calc_btn_OK" type="button" value="OK"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_7" class="calc_ctrl" type="button" value="  7  "/></td>'+'<td><input id="calc_btn_8" class="calc_ctrl" type="button" value="  8  "/></td>'+'<td><input id="calc_btn_9" class="calc_ctrl" type="button" value="  9  "/></td>'+'<td><input id="calc_btn_/" class="calc_ctrl" type="button" value="  /  "/></td>'+'<td><input id="calc_btn_sqrt" class="calc_ctrl" type="button" value="sqrt"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_4" class="calc_ctrl" type="button" value="  4  "/></td>'+'<td><input id="calc_btn_5" class="calc_ctrl" type="button" value="  5  "/></td>'+'<td><input id="calc_btn_6" class="calc_ctrl" type="button" value="  6  "/></td>'+'<td><input id="calc_btn_*" class="calc_ctrl" type="button" value=" *  "/></td>'+'<td><input id="calc_btn_exp" class="calc_ctrl" type="button" value="exp"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_1" class="calc_ctrl" type="button" value="  1  "/></td>'+'<td><input id="calc_btn_2" class="calc_ctrl" type="button" value="  2  "/></td>'+'<td><input id="calc_btn_3" class="calc_ctrl" type="button" value="  3  "/></td>'+'<td><input id="calc_btn_-" class="calc_ctrl" type="button" value="  -  "/></td>'+'<td><input id="calc_btn_1/x" class="calc_ctrl" type="button" value="1/x "/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_0" class="calc_ctrl" type="button" value="  0  "/></td>'+'<td><input id="calc_btn_+/-" class="calc_ctrl" class="calc_ctrl" type="button" value=" +/- "/></td>'+'<td><input id="calc_btn_." class="calc_ctrl" type="button" value="  ,  "/></td>'+'<td><input id="calc_btn_+" class="calc_ctrl" type="button" value="  +  "/></td>'+'<td><input id="calc_btn_=" class="calc_ctrl" type="button" value="  =  "/></td>'+'</tr>'+'</tbody>'+'</table>';return calc_html;}
Calculator.prototype.assignControls=function(){var input_id=this.m_editControl.getId();var self=this;CommonHelper.nd(input_id+":calc_cancel",this.getWinObjDocument()).onclick=function(){self.close(true);};CommonHelper.nd(input_id+":calc_btn_OK",this.getWinObjDocument()).onclick=function(){self.close(false);};CommonHelper.nd(input_id+":calc_btn_C",this.getWinObjDocument()).onclick=function(){self.calcButton(11,"C");};var list=DOMHelper.getElementsByAttr('calc_ctrl',this.calcNode,'class');var id;for(var i=0;i<list.length;i++){list[i].onclick=function(event){event=EventHelper.fixMouseEvent(event);id=event.target.id.replace(/calc_btn_/,'');self.calcButton(id,id);};}}
Calculator.prototype.show=function(){var input_id=this.m_editControl.getId();var node=this.m_editControl.getNode();if(node!=undefined&&CommonHelper.nd(input_id+":calc",this.getWinObjDocument())==undefined){this.calcNode=document.createElement('div');this.calcNode.id=input_id+":calc";this.calcNode.className=this.CALC_CLASS;with(this.calcNode.style){border="1px solid gray";background='#FFFFFF';color='#000000';position='absolute';display='block';padding='2px';cursor='default';}
this.calcNode.innerHTML=this.getHTML();this.calcNode.style.top=(CommonHelper.findPosY(node)+node.offsetHeight+2)+"px";this.calcNode.style.left=(CommonHelper.findPosX(node)+node.offsetWidth+2)+"px";this.getWinObjDocument().body.appendChild(this.calcNode);this.assignControls();this.setVal(node.value);}}
Calculator.prototype.refresh=function(){if(this.calcNode!=undefined){this.calcNode.innerHTML=this.getHTML();this.assignControls();}}
Calculator.prototype.getWinObjDocument=function(){if(this.m_winObj){return this.m_winObj.getWindowForm().document;}
else{return window.document;}} 
Calculator.prototype.TITLE="Калькулятор";Calculator.prototype.ER_NO_EDIT_CONTROL="Не задан контрол."; 
function Button(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;Button.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);if(options.caption!=undefined){this.setCaption(options.caption);}
if(options.glyph){this.setGlyph(options.glyph);}
var self=this;this.m_clickFunc=function(e){if(self.getEnabled()&&self.m_onClick){e=EventHelper.fixMouseEvent(e);self.m_onClick.call(self,e);}}
if(options.onClick!=undefined){this.setOnClick(options.onClick);}}
extend(Button,Control);Button.prototype.DEF_TAG_NAME="DIV";Button.prototype.DEF_CLASS="btn btn-default";Button.prototype.setCaption=function(caption){if(this.m_node.childNodes.length==0){this.m_node.appendChild(document.createTextNode(caption));}
else{this.m_node.childNodes[0].nodeValue=caption;}}
Button.prototype.getCaption=function(){return(this.m_node&&this.m_node.childNodes&&this.m_node.childNodes[0])?this.m_node.childNodes[0].nodeValue:"";}
Button.prototype.getGlyph=function(){return this.m_glyph;}
Button.prototype.setGlyph=function(glyph){this.m_glyph=glyph;var n=document.createElement("I");n.className="glyphicon "+glyph;this.m_node.appendChild(n);}
Button.prototype.setOnClick=function(onClick){var self=this;this.m_onClick=function(e){e=EventHelper.fixMouseEvent(e);onClick.call(self,e);}
this.addClick();}
Button.prototype.getOnClick=function(){return this.m_onClick;}
Button.prototype.addClick=function(){var self=this;EventHelper.add(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.removeClick=function(){var self=this;EventHelper.del(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.click=function(){this.m_clickFunc.call(this,null);} 
function ButtonCtrl(id,options){options=options||{};options.className="btn btn-default";ButtonCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonCtrl,Button); 
function ButtonEditCtrl(id,options){options=options||{};options.glyph=options.glyph||"glyphicon-menu-hamburger";options.title=options.title||this.DEF_HINT;var self=this;options.onClick=options.onClick||function(e){self.onClickEvent(EventHelper.fixKeyEvent(e));}
this.setControl(options.control);this.setWinClass(options.winClass||WindowForm);this.setWinParams(options.winParams);ButtonEditCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonEditCtrl,ButtonCtrl);ButtonEditCtrl.prototype.m_winObj;ButtonEditCtrl.prototype.m_winClass;ButtonEditCtrl.prototype.m_winParams;ButtonEditCtrl.prototype.m_control;ButtonEditCtrl.prototype.closeWinObj=function(){this.m_winObj.close();delete this.m_winObj;}
ButtonEditCtrl.prototype.setWinClass=function(v){this.m_winClass=v;}
ButtonEditCtrl.prototype.getWinClass=function(v){return this.m_winClass;}
ButtonEditCtrl.prototype.setWinParams=function(v){this.m_winParams=v;}
ButtonEditCtrl.prototype.getWinParams=function(v){return this.m_winParams;}
ButtonEditCtrl.prototype.setControl=function(v){this.m_control=v;}
ButtonEditCtrl.prototype.getControl=function(v){return this.m_control;}
ButtonEditCtrl.prototype.onClickEvent=function(e){var win_opts={};win_opts.app=this.getApp();var self=this;win_opts.onClose=function(){self.closeWinObj();};win_opts.URLParams=this.getWinParams();temp_o=new this.m_winClass(win_opts);var ctrl=this.getControl();if(ctrl){if(ctrl.getIsRef()){win_opts.keys={};var ctrl_keys=ctrl.getKeys()||{};var ctrl_key_ids=ctrl.getKeyIds();var form_keys={};var form_key_ids=temp_o.getKeyIds();var o_set=false;for(var n=0;n<ctrl_key_ids.length;n++){if(ctrl_keys[ctrl_key_ids[n]]){form_keys[form_key_ids[n]]=ctrl_keys[ctrl_key_ids[n]];o_set=true;}}
if(!o_set){return;}
temp_o.setKeys(form_keys);}}
this.m_winObj=temp_o;this.m_winObj.open();} 
ButtonEditCtrl.prototype.DEF_HINT="выбрать"; 
function ButtonCalc(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;options.title=options.title||this.DEF_TITLE;this.setEditControl(options.editControl);var self=this;options.onClick=options.onClick||function(event){(new Calculator({"editControl":self.m_editControl}).show());};ButtonCalc.superclass.constructor.call(this,id,options);}
extend(ButtonCalc,ButtonCtrl);ButtonCalc.prototype.DEF_GLYPH="glyphicon-th";ButtonCalc.prototype.m_editControl;ButtonCalc.prototype.setEditControl=function(v){this.m_editControl=v;}
ButtonCalc.prototype.getEditControl=function(){return this.m_editControl;} 
ButtonCalc.prototype.DEF_TITLE="открыть калькулятор"; 
function ButtonCalendar(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;options.title=options.title||this.DEF_HINT;this.setEditControl(options.editControl);this.setTimeValueStr(options.timeValueStr||"00:00:00");this.setDateFormat(options.dateFormat||options.app.getDateFormat());var self=this;options.onClick=options.onClick||function(event){var p=$(self.m_editControl.getNode());p.datepicker({format:{toDisplay:function(date,format,language){var d=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0,self.m_time);var fv=DateHelper.format(d,self.m_dateFormat);return fv;},toValue:function(date,format,language){var v=DateHelper.userStrToDate(date);return v;}},language:"ru",daysOfWeekHighlighted:"0,6",autoclose:true,todayHighlight:true,orientation:"bottom right",showOnFocus:false,clearBtn:true});p.on('hide',function(ev){self.m_editControl.applyMask();});p.datepicker("show");};ButtonCalendar.superclass.constructor.call(this,id,options);}
extend(ButtonCalendar,ButtonCtrl);ButtonCalendar.prototype.DEF_GLYPH="glyphicon-calendar";ButtonCalendar.prototype.m_editControl;ButtonCalendar.prototype.m_time;ButtonCalendar.prototype.m_dateFormat;ButtonCalendar.prototype.setEditControl=function(v){this.m_editControl=v;}
ButtonCalendar.prototype.getEditControl=function(){return this.m_editControl;}
ButtonCalendar.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;}
ButtonCalendar.prototype.setTimeValueStr=function(v){this.m_time=DateHelper.timeToMS(v);}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;} 
ButtonCalendar.prototype.DEF_HINT="открыть календарь";ButtonCalendar.prototype.DEF_ALT="кал."; 
function ButtonClear(id,options){options=options||{};options.glyph="glyphicon-remove";this.m_editControl=options.editControl;var self=this;options.onClick=options.onClick||function(event){self.m_editControl.reset();};options.title=options.title||this.DEF_HINT;ButtonClear.superclass.constructor.call(this,id,options);}
extend(ButtonClear,ButtonCtrl);ButtonClear.prototype.m_editControl; 
ButtonClear.prototype.DEF_HINT="очистить значение"; 
function ButtonCmd(id,options){options=options||{};options.className="btn btn-primary btn-cmd";ButtonCmd.superclass.constructor.call(this,id,options);}
extend(ButtonCmd,Button); 
function ButtonExpToExcel(id,options){options=options||{};options.caption=options.caption||this.DEF_CAPTION;options.title=options.title||this.DEF_HINT;ButtonExpToExcel.superclass.constructor.call(this,id,options);}
extend(ButtonExpToExcel,ButtonCmd); 
ButtonExpToExcel.prototype.DEF_HINT="экспорт в Excel";ButtonExpToExcel.prototype.DEF_CAPTION="Excel"; 
function ButtonExpToPDF(id,options){options=options||{};options.caption=options.caption||this.DEF_CAPTION;options.title=options.title||this.DEF_HINT;ButtonExpToPDF.superclass.constructor.call(this,id,options);}
extend(ButtonExpToPDF,ButtonCmd); 
ButtonExpToPDF.prototype.DEF_HINT="экспорт в PDF";ButtonExpToPDF.prototype.DEF_CAPTION="PDF"; 
function ButtonOpen(id,options){options=options||{};options.glyph="glyphicon-pencil";ButtonOpen.superclass.constructor.call(this,id,options);}
extend(ButtonOpen,ButtonEditCtrl); 
ButtonOpen.prototype.DEF_HINT="открыть"; 
function ButtonInsert(id,options){options=options||{};options.glyph="glyphicon-plus";options.title=options.title||this.DEF_HINT;var self=this;options.onClick=options.onClick||function(event){self.doInsert(EventHelper.fixMouseEvent(event));};ButtonInsert.superclass.constructor.call(this,id,options);}
extend(ButtonInsert,ButtonCtrl);ButtonInsert.prototype.doInsert=function(e){console.log("ButtonInsert.prototype.openInsert");} 
ButtonInsert.prototype.DEF_HINT="добавить"; 
function ButtonPrint(id,options){options=options||{};options.caption=options.caption||this.DEF_CAPTION;var self=this;options.onClick=options.onClick||function(){self.onClick();};options.title=options.title||this.DEF_HINT;this.m_fieldId=options.fieldId;this.m_DOMId=options.DOMId;this.m_controller=options.controller;this.m_methodId=options.methodId||this.DEF_METH;ButtonPrint.superclass.constructor.call(this,id,options);}
extend(ButtonPrint,ButtonCmd);ButtonPrint.prototype.onClick=function(){if(this.m_DOMId){var pm=this.m_controller.getPublicMethod();pm.setFieldValue(this.m_paramId,CommonHelper.nd(this.m_DOMId).getAttribute("old_id"));}
this.m_controller.run(this.m_methodId,{xml:false,ok:function(resp){WindowPrint.show({content:resp});}});}
ButtonPrint.prototype.DEF_METH="get_print"; 
ButtonPrint.prototype.DEF_HINT="напечатать";ButtonPrint.prototype.DEF_CAPTION="Печать"; 
function ButtonPrintList(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;var btn_class=(options.buttonClassName||this.DEF_BTN_CLASS)+" dropdown-toggle";this.m_button=new ControlContainer(CommonHelper.uniqid(),"button",{"className":btn_class,"value":this.DEF_CAPTION,"title":this.DEF_TITLE,"attrs":{"type":"button","data-toggle":"dropdown"},"elements":[new Control(CommonHelper.uniqid(),"i",{"className":"glyphicon "+this.DEF_GLYPH})]});this.m_keyIds=options.keyIds;var print_ctrls=[];this.m_objList=[];if(options.printList){for(var i=0;i<options.printList.length;i++){print_ctrls.push(options.printList[i].getControl());this.m_objList.push(options.printList[i]);}}
this.m_buttons=new ControlContainer(CommonHelper.uniqid(),"ul",{"className":"dropdown-menu","elements":print_ctrls});options.elements=[this.m_button,this.m_buttons];ButtonPrintList.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(ButtonPrintList,ControlContainer);ButtonPrintList.prototype.DEF_TAG_NAME="div";ButtonPrintList.prototype.DEF_CLASS="btn dropdown";ButtonPrintList.prototype.DEF_BTN_CLASS="btn btn-primary";ButtonPrintList.prototype.DEF_GLYPH="glyphicon-triangle-bottom";ButtonPrintList.prototype.m_buttons;ButtonPrintList.prototype.m_button;ButtonPrintList.prototype.m_objList;ButtonPrintList.prototype.m_keyIds;ButtonPrintList.prototype.getObjList=function(){return this.m_objList;}
ButtonPrintList.prototype.addToList=function(obj){this.m_buttons.addElement(obj.getControl());this.m_objList.push(obj);}
ButtonPrintList.prototype.setGrid=function(v){for(var i=0;i<this.m_objList.length;i++){this.m_objList[i].setGrid(v);this.m_objList[i].setKeyIds(this.m_keyIds);}}
ButtonPrintList.prototype.getKeyIds=function(v){return this.m_keyIds;} 
ButtonPrintList.prototype.DEF_CAPTION="Печать";ButtonPrintList.prototype.DEF_TITLE="Показать список печатных форм"; 
function ButtonSelectRef(id,options){options=options||{};options.title=options.title||this.DEF_HINT;this.setMultySelect((options.multySelect==undefined)?false:options.multySelect);this.m_descrIds=options.descrIds;this.m_keyIds=options.keyIds;this.setOnSelect(options.onSelect);this.setFormatFunction(options.formatFunction);ButtonSelectRef.superclass.constructor.call(this,id,options);}
extend(ButtonSelectRef,ButtonEditCtrl);ButtonSelectRef.prototype.m_multySelect;ButtonSelectRef.prototype.m_descrIds;ButtonSelectRef.prototype.m_keyIds;ButtonSelectRef.prototype.m_onSelect;ButtonSelectRef.prototype.getMultySelect=function(){return this.m_multySelect;}
ButtonSelectRef.prototype.setMultySelect=function(v){this.m_multySelect=v;}
ButtonSelectRef.prototype.onClickEvent=function(e){var win_opts={};win_opts.app=this.getApp();var self=this;win_opts.onClose=function(){self.closeWinObj();};win_opts.URLParams=this.getWinParams();this.m_winObj=new this.m_winClass(win_opts);var win=this.m_winObj.open();win.onSelect=function(fields){self.onSelect(fields);}}
ButtonSelectRef.prototype.onSelect=function(fields){var ctrl=this.getControl();if(ctrl){var ctrl_keys={};var ctrl_key_ids=ctrl.getKeyIds();var model_key_ids;if(this.m_keyIds){model_key_ids=this.m_keyIds;}
else{model_key_ids=this.m_winObj.getKeyIds();}
for(var n=0;n<ctrl_key_ids.length;n++){if(fields[model_key_ids[n]]){ctrl_keys[ctrl_key_ids[n]]=fields[model_key_ids[n]].getValue();}}
var ctrl_descr="";var format_f=this.getFormatFunction();if(format_f){ctrl_descr=format_f.call(ctrl,fields);}
else if(this.m_descrIds){for(var n=0;n<this.m_descrIds.length;n++){if(fields[this.m_descrIds[n]]){ctrl_descr+=(ctrl_descr=="")?"":" ";ctrl_descr+=fields[this.m_descrIds[n]].getValue();}}}
else{for(var fid in fields){if(!fields[fid].getPrimaryKey()){ctrl_descr+=(ctrl_descr=="")?"":" ";ctrl_descr+=fields[fid].getValue();}}}
ctrl.setValue(new RefType({"keys":ctrl_keys,"descr":ctrl_descr}));}
if(!this.getMultySelect()){this.m_winObj.close();}
if(this.m_onSelect){this.m_onSelect.call(this,fields);}}
ButtonSelectRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
ButtonSelectRef.prototype.getOnSelect=function(){return this.m_onSelect;}
ButtonSelectRef.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
ButtonSelectRef.prototype.getFormatFunction=function(){return this.m_formatFunction;} 
ButtonSelectRef.prototype.DEF_HINT="выбрать из списка";ButtonSelectRef.prototype.DEF_SEL_FORM_TITLE="Выбор"; 
function ButtonToggle(id,options){options=options||{};options.className="btn btn-link";options.glyph="glyphicon-triangle-bottom";options.attrs=options.attrs||{};options.attrs["data-toggle"]="collapse";options.attrs["data-target"]=("#"+options.dataTarget);ButtonToggle.superclass.constructor.call(this,id,options);}
extend(ButtonToggle,Button); 
function Label(id,options){options=options||{};options.className=(options.className!==undefined)?options.className:(this.DEF_CLASS+" "+window.getBsCol(this.DEF_COL_WD));options.value=options.value||options.caption;Label.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(Label,Control);Label.prototype.DEF_TAG_NAME="label";Label.prototype.DEF_CLASS="control-label";Label.prototype.DEF_COL_WD="4"; 
function Edit(id,options){options=options||{};options.attrs=options.attrs||{};if(id){var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}}
else{id=CommonHelper.uniqid();}
if(options.attrs.class!==undefined){options.className=options.attrs.class;options.attrs.class=undefined;}
options.className=(options.className!==undefined)?options.className:this.DEF_CLASS;options.type=options.type||this.DEF_INPUT_TYPE;options.attrs.maxlength=options.attrs.maxlength||((options.editMask)?options.editMask.length:undefined);options.attrs.type=options.type;this.setValidator(options.validator);Edit.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);if(options.editMask){this.setEditMask(options.editMask);}
if(options.label){this.setLabel(options.label);}
else if(options.labelCaption){this.setLabel(new Label(id+":label",{"value":options.labelCaption,"className":options.labelClassName,"visible":this.getVisible(),"app":options.app}));}
this.setErrorControl(options.errorControl||new ErrorControl(id+":error"));this.m_buttons=new ControlContainer(id+":btn-cont","span",{"className":this.BTNS_CONTAINER_CLASS,"enabled":this.getEnabled()});this.setButtonOpen(options.buttonOpen);this.setButtonSelect(options.buttonSelect);this.setButtonClear(options.buttonClear);this.addButtonControls();this.setFormatFunction(options.formatFunction);this.setLabelAlign(options.labelAlign||this.DEF_LABEl_ALIGN);this.setContClassName((options.contClassName!==undefined)?options.contClassName:this.DEF_CONT_CLASS);this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.setEditContClassName((options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(8)));this.setEditContTagName(options.editContTagName||this.DEF_EDIT_CONT_TAG);if(options.inputEnabled!=undefined&&!options.inputEnabled&&this.getEnabled()){this.setInputEnabled(false);}}
extend(Edit,Control);Edit.prototype.DEF_TAG_NAME="INPUT";Edit.prototype.DEF_INPUT_TYPE="text";Edit.prototype.DEF_CLASS="form-control";Edit.prototype.BTNS_CONTAINER_CLASS="input-group-btn";Edit.prototype.INCORRECT_VAL_CLASS="error";Edit.prototype.DEF_CONT_CLASS="form-group";Edit.prototype.DEF_EDIT_CONT_CLASS="input-group";Edit.prototype.DEF_CONT_TAG="DIV";Edit.prototype.DEF_EDIT_CONT_TAG="DIV";Edit.prototype.VAL_INIT_ATTR="initValue";Edit.prototype.DEF_LABEl_ALIGN="left";Edit.prototype.m_editMask;Edit.prototype.m_buttons;Edit.prototype.m_value;Edit.prototype.m_label;Edit.prototype.m_container;Edit.prototype.m_editContainer;Edit.prototype.m_errorControl;Edit.prototype.m_contTagName;Edit.prototype.m_contClassName;Edit.prototype.m_buttonOpen;Edit.prototype.m_buttonSelect;Edit.prototype.m_buttonClear;Edit.prototype.m_formatFunction;Edit.prototype.m_editContTagName;Edit.prototype.m_enabled;Edit.prototype.m_labelAlign;Edit.prototype.m_onKeyPress;Edit.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
Edit.prototype.setEditMask=function(mask){this.m_editMask=mask}
Edit.prototype.getEditMask=function(mask){return this.m_editMask;}
Edit.prototype.applyMask=function(){if(this.getEditMask()){$(this.getNode()).mask(this.getEditMask());}}
Edit.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=val;this.applyMask();}
Edit.prototype.getValue=function(){if(this.m_node){var v=(this.getEditMask())?$(this.getNode()).mask():this.m_node.value;if(!v||v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}}
Edit.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
Edit.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
Edit.prototype.setLabel=function(label){if(typeof label=="string"){throw Error(this.ER_LABEL_OBJECT);}
this.m_label=label;}
Edit.prototype.getLabel=function(){return this.m_label;}
Edit.prototype.setValidator=function(v){this.m_validator=v;}
Edit.prototype.getValidator=function(){return this.m_validator;}
Edit.prototype.setButtonOpen=function(v){this.m_buttonOpen=v;}
Edit.prototype.getButtonOpen=function(){return this.m_buttonOpen;}
Edit.prototype.setButtonClear=function(v){this.m_buttonClear=v;}
Edit.prototype.getButtonClear=function(){return this.m_buttonClear;}
Edit.prototype.setButtonSelect=function(v){this.m_buttonSelect=v;}
Edit.prototype.getButtonSelect=function(){return this.m_buttonSelect;}
Edit.prototype.getButtons=function(){return this.m_buttons;}
Edit.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().setValue(erStr);}
Edit.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().clear();}
Edit.prototype.toDOM=function(parent){var id=this.getId();this.m_container=new ControlContainer(((id)?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control(((id)?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);Edit.superclass.toDOM.call(this,this.m_editContainer.getNode());if(this.m_errorControl){this.m_errorControl.toDOM(this.m_editContainer.getNode());}
if(this.m_editMask){$(this.getNode()).mask(this.getEditMask());}
if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}
if(this.m_label&&this.m_labelAlign=="right"){this.m_label.toDOMAfter(this.getNode());}}
Edit.prototype.delDOM=function(){Edit.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
Edit.prototype.setVisible=function(visible){Edit.superclass.setVisible.call(this,visible);if(this.m_buttons){this.m_buttons.setEnabled(visible);}}
Edit.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);}
this.setInputEnabled(enabled);this.m_enabled=enabled;}
Edit.prototype.getEnabled=function(){return this.m_enabled;}
Edit.prototype.reset=function(){this.setValue("");this.focus();}
Edit.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
Edit.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
Edit.prototype.getIsRef=function(){return false;}
Edit.prototype.getFormatFunction=function(){return this.m_formatFunction;}
Edit.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
Edit.prototype.getContTagName=function(){return this.m_contTagName;}
Edit.prototype.setContTagName=function(v){this.m_contTagName=v;}
Edit.prototype.getContClassName=function(){return this.m_contClassName;}
Edit.prototype.setContClassName=function(v){this.m_contClassName=v;}
Edit.prototype.getEditContClassName=function(){return this.m_editContClassName;}
Edit.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
Edit.prototype.getEditContTagName=function(){return this.m_editContTagName;}
Edit.prototype.setEditContTagName=function(v){this.m_editContTagName=v;}
Edit.prototype.setInputEnabled=function(enabled){Edit.superclass.setEnabled.call(this,enabled);}
Edit.prototype.getInputEnabled=function(){return Edit.superclass.getEnabled.call(this);}
Edit.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Edit.prototype.getErrorControl=function(){return this.m_errorControl;}
Edit.prototype.setLabelAlign=function(v){this.m_labelAlign=v;}
Edit.prototype.getLabelAlign=function(){return this.m_labelAlign;}
Edit.prototype.setOnValueChange=function(v){Edit.superclass.setOnValueChange.call(this,v);if(v){EventHelper.add(this.getNode(),"keypress",this.m_onKeyPress,true);}
else{EventHelper.del(this.getNode(),"keypress",this.m_onKeyPress,true);}} 
Edit.prototype.ER_LABEL_OBJECT="Не верный параметр label"; 
function EditRef(id,options){options=options||{};if(options.keys){this.setKeys(options.keys);}
if(options.keyIds){this.setKeyIds(options.keyIds);}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:true;options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:true;options.cmdAutoComplete=(options.cmdAutoComplete!=undefined)?options.cmdAutoComplete:true;if(options.cmdInsert){options.buttonInsert=options.buttonInsert||new ButtonInsert(id+":btn_insert",{"editControl":this,"app":options.app});}
if(options.cmdSelect&&!options.buttonSelect&&options.selectWinClass){options.buttonSelect=new ButtonSelectRef(id+':btn_select',{"winClass":options.selectWinClass,"winParams":options.selectWinParams,"descrIds":options.selectDescrIds,"keyIds":options.selectKeyIds,"control":this,"onSelect":options.onSelect,"formatFunction":options.selectFormatFunction,"multySelect":options.selectMultySelect,"app":options.app});}
if(options.cmdOpen&&!options.buttonOpen&&options.editWinClass){options.buttonOpen=new ButtonOpen(id+':btn_open',{"winClass":options.editWinClass,"winParams":options.editWinParams,"keyIds":options.openKeyIds,"control":this,"app":options.app});}
if(options.cmdClear){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"app":options.app});}
if(!options.cmdAutoComplete){options.inputEnabled=false;}
this.setOnSelect(options.onSelect);EditRef.superclass.constructor.call(this,id,options);if(!this.getKeyIds().length){throw Error(CommonHelper.format(this.ER_NO_KEY,Array[this.getName()]));}
if(options.cmdAutoComplete||options.autoComplete){if(!options.acPublicMethod&&options.acController){options.acPublicMethod=options.acController.getPublicMethod("complete");}
options.autoComplete=options.autoComplete||new actbAJX({"minLengthForQuery":options.acMinLengthForQuery,"onSelect":options.onSelect,"model":options.acModel,"publicMethod":options.acPublicMethod,"patternFieldId":options.acPatternFieldId,"control":this,"keyFields":options.acKeyFields,"descrFields":options.acDescrFields,"icase":options.acICase,"mid":options.acMid});actb(this.m_node,options.winObj,options.autoComplete);}
this.setAutoComplete(options.autoComplete);this.setButtonInsert(options.buttonInsert);}
extend(EditRef,Edit);EditRef.prototype.KEY_ATTR="keys";EditRef.prototype.KEY_INIT_ATTR="initKeys";EditRef.prototype.m_buttonInsert;EditRef.prototype.m_autoComplete;EditRef.prototype.m_keyIds;EditRef.prototype.addButtonControls=function(){if(this.m_buttonInsert)this.m_buttons.addElement(this.m_buttonInsert);if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditRef.prototype.setButtonInsert=function(v){this.m_buttonInsert=v;}
EditRef.prototype.getButtonInsert=function(){return this.m_buttonInsert;}
EditRef.prototype.setAutoComplete=function(v){this.m_autoComplete=v;}
EditRef.prototype.getAutoComplete=function(){return this.m_autoComplete;}
EditRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.getIsRef=function(){return true;}
EditRef.prototype.getModified=function(){return(this.getAttr(this.KEY_ATTR)!=this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.isNull=function(){return CommonHelper.isEmpty(this.getKeys());}
EditRef.prototype.resetKeys=function(){this.setKeys({});}
EditRef.prototype.reset=function(){EditRef.superclass.reset.call(this);this.resetKeys();}
EditRef.prototype.setValue=function(val){var descr;if(typeof val=="object"){this.setKeys(val.getKeys());descr=val.getDescr();}
else{descr=val;}
EditRef.superclass.setValue.call(this,descr);}
EditRef.prototype.getValue=function(){var descr=EditRef.superclass.getValue.call(this);return new RefType({"keys":this.getKeys(),"descr":descr});}
EditRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"){this.setInitKeys(val.getKeys());}}
EditRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditRef.prototype.getOnSelect=function(v){return this.m_onSelect;} 
function EditString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);if(options.cmdClear==undefined||(options.cmdClear!=undefined&&options.cmdClear)){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"app":options.app});}
EditString.superclass.constructor.call(this,id,options);}
extend(EditString,Edit); 
function EditText(id,options){options=options||{};options.cmdClear=(options.cmdClear==undefined)?options.cmdClear:false;EditText.superclass.constructor.call(this,id,options);this.setRows(options.rows||this.DEF_ROWS);}
extend(EditText,EditString);EditText.prototype.DEF_TAG_NAME='textarea';EditText.prototype.DEF_ROWS="5";EditText.prototype.setRows=function(rows){if(rows)this.setAttr("rows",rows);}
EditText.prototype.getRows=function(){return this.getAttr("rows");} 
function EditInt(id,options){options=options||{};options.type="number";options.validator=options.validator||new ValidatorInt(options);options.attrs=options.attrs||{};if(options.minValue){options.attrs.min=options.minValue;}
if(options.maxValue){options.attrs.max=options.maxValue;}
options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:false;if(options.cmdSelect==undefined||(options.cmdSelect!=undefined&&options.cmdSelect)){options.buttonSelect=options.buttonSelect||new ButtonCalc(id+":btn_open",{"winObj":options.winObj,"enabled":options.enabled,"editControl":this});}
EditInt.superclass.constructor.call(this,id,options);this.m_allowedChars=[8,0];if(this.m_validator&&!this.m_validator.getUnsigned()){this.m_allowedChars.push(45);}}
extend(EditInt,EditString);EditInt.prototype.m_allowedChars;EditInt.prototype.handleKeyPress=function(e){console.log("which="+e.which);if(jQuery.inArray(e.which,this.m_allowedChars)==-1&&(e.which<48||e.which>57)){return false;}}
EditInt.prototype.toDOM=function(parent){EditInt.superclass.toDOM.call(this,parent);var self=this;$(this.getNode()).keypress(function(e){return self.handleKeyPress(e);});} 
function EditFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);this.m_precision=options.precision||this.DEF_PRECISION;EditFloat.superclass.constructor.call(this,id,options);this.m_allowedChars.push(44);this.m_allowedChars.push(46);}
extend(EditFloat,EditInt);EditFloat.prototype.DEF_PRECISION=2;EditFloat.prototype.handleKeyPress=function(e){var res=EditFloat.superclass.handleKeyPress.call(this,e);if(res!==false&&e.which==46){}
return res;}
EditFloat.prototype.setValue=function(val){if(val==undefined){this.getNode().value="";}
else{if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=CommonHelper.numberFormat(val,this.m_precision,".","");}} 
function EditMoney(id,options){options=options||{};options.attrs=options.attrs||{};options.attrs.maxlength="15";options.precision="2";EditMoney.superclass.constructor.call(this,id,options);}
extend(EditMoney,EditFloat); 
function EditPhone(id,options){options=options||{};options.editMask=options.editMask||options.app.getPhoneEditMask();EditPhone.superclass.constructor.call(this,id,options);}
extend(EditPhone,EditString); 
function EditEmail(id,options){options=options||{};EditEmail.superclass.constructor.call(this,id,options);}
extend(EditEmail,EditString); 
function EditPercent(id,options){options=options||{};options.editMask=options.editMask||this.DEF_MASK;EditPercent.superclass.constructor.call(this,id,options);}
extend(EditPercent,EditString);EditPercent.prototype.DEF_MASK="99%"; 
function EditDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.editMask=options.editMask||window.getApp().getDateEditMask();this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());options.attrs=options.attrs||{};options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;this.setTimeValueStr(options.timeValueStr);if(options.cmdSelect){options.buttonSelect=options.buttonSelect||new ButtonCalendar(id+':btn_calend',{"dateFormat":this.getDateFormat(),"editControl":this,"timeValueStr":this.getTimeValueStr(),"app":options.app});}
EditDate.superclass.constructor.call(this,id,options);}
extend(EditDate,EditString);EditDate.prototype.TIME_SEP="T";EditDate.prototype.m_timeValueStr;EditDate.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
EditDate.prototype.getDateFormat=function(){return this.m_dateFormat;}
EditDate.prototype.toISODate=function(str){if(str=="")return"";var t=str.substr(4,4)+"-"+str.substr(2,2)+"-"+str.substr(0,2);if(str.length>8){t+=this.TIME_SEP+str.substr(8,2);}
if(str.length>10){t+=":"+str.substr(10,2);}
if(str.length>12){t+=":"+str.substr(12,2);}
return t;}
EditDate.prototype.getValue=function(v){if(this.m_node){var v=(this.getEditMask())?$(this.m_node).mask():this.m_node.value;v=this.toISODate(v);if(v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}}
EditDate.prototype.setValue=function(val){if(!val){this.getNode().value="";}
else{if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=DateHelper.format(val,this.getDateFormat());this.applyMask();}}
EditDate.prototype.setTimeValueStr=function(v){this.m_timeValueStr=v;}
EditDate.prototype.getTimeValueStr=function(){return this.m_timeValueStr;} 
function EditDateTime(id,options){options=options||{};options.validator=options.validator||new ValidatorDateTime(options);options.editMask=options.editMask||options.app.getDateTimeEditMask();options.dateFormat=options.dateFormat||options.app.getDateTimeFormat();EditDateTime.superclass.constructor.call(this,id,options);}
extend(EditDateTime,EditDate); 
function EditTime(id,options){options=options||{};options.validator=options.validator||new ValidatorTime(options);options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:false;options.editMask=options.editMask||options.app.getTimeEditMask();options.dateFormat=options.dateFormat||options.app.getTimeFormat();EditTime.superclass.constructor.call(this,id,options);}
extend(EditTime,EditDateTime);EditTime.prototype.PART_SEP=":";EditTime.prototype.MSEC_PART_SEP=".";EditTime.prototype.toISODate=function(str){if(str=="")return"";var t=str.substr(0,2);if(str.length>2){t+=this.PART_SEP+str.substr(2,2);}
if(str.length>4){t+=this.PART_SEP+str.substr(4,2);}
if(str.length>6){t+=this.MSEC_PART_SEP+str.substr(6);}
return t;} 
function EditPassword(id,options){options=options||{};options.type=options.type||this.DEF_INPUT_TYPE;options.cmdClear=(options.cmdClear==undefined)?false:options.cmdClear;EditPassword.superclass.constructor.call(this,id,options);}
extend(EditPassword,EditString);EditPassword.prototype.DEF_INPUT_TYPE="password";EditPassword.prototype.getModified=function(){var v=this.getValue();return(v&&v.length);} 
function EditCheckBox(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.cmdClear=false;if(options.checked!=undefined){options.value=options.checked;}
var bs_col=window.getBsCol();options.labelClassName=(options.labelClassName!==undefined)?options.labelClassName:(this.DEF_LABEL_CLASS+" "+bs_col+this.DEF_LABEL_COL_WD);options.editContClassName=(options.contClassName!==undefined)?options.contClassName:(this.DEF_EDIT_CONT_CLASS+" "+bs_col+this.DEF_EDIT_CONT_COL_WD);EditCheckBox.superclass.constructor.call(this,id,options);}
extend(EditCheckBox,Edit);EditCheckBox.prototype.DEF_INPUT_TYPE="checkbox";EditCheckBox.prototype.DEF_LABEL_CLASS="control-label";EditCheckBox.prototype.DEF_LABEL_COL_WD="11";EditCheckBox.prototype.DEF_EDIT_CONT_COL_WD="1";EditCheckBox.prototype.setChecked=function(checked){this.m_node.checked=checked;}
EditCheckBox.prototype.getChecked=function(){return this.m_node.checked;}
EditCheckBox.prototype.getValue=function(){return this.getChecked();}
EditCheckBox.prototype.setValue=function(val){this.setChecked(this.getValidator().correctValue(val));}
EditCheckBox.prototype.getInitValue=function(val){return(this.getAttr(this.VAL_INIT_ATTR)=="true");} 
function EditContainer(id,options){options=options||{};if(!options.optionClass){throw Error(this.ER_NO_OPT_CLASS);}
if(!options.tagName){throw Error(this.ER_NO_TAG);}
var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
options.className=options.className||this.DEF_CLASS;options.elements=options.elements||[];this.setAddNotSelected((options.addNotSelected!=undefined)?options.addNotSelected:true);this.setNotSelectedLast((options.notSelectedLast!=undefined)?options.notSelectedLast:false);this.setOptionClass(options.optionClass);this.setOnSelect(options.onSelect);this.m_initValue=options.value;options.value=undefined;var opt_selected=false;if(this.m_addNotSelected){var def_opt_opts={"value":this.NOT_SELECTED_VAL,"descr":this.NOT_SELECTED_DESCR};}
if(options.options){for(var i=0;i<options.options.length;i++){if(options.options[i]!=undefined&&options.options[i].checked==true){opt_selected=true;break;}}}
var opt_ind=0;if(this.m_addNotSelected&&!this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));opt_ind++;}
if(options.options){for(var i=0;i<options.options.length;i++){options.options[i].app=options.options[i].app||options.app;options.elements.push(new options.optionClass(id+":"+opt_ind,options.options[i]))
opt_ind++;}}
if(this.m_addNotSelected&&this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));}
EditContainer.superclass.constructor.call(this,id,options.tagName,options);if(options.label){this.setLabel(options.label);}
else if(options.labelCaption){this.setLabel(new Label(id+":label",{"value":options.labelCaption,"className":options.labelClassName,"visible":this.getVisible(),"app":options.app}));}
this.m_buttons=new ControlContainer(id+":btn-cont","div",{"className":this.BTNS_CONTAINER_CLASS,"visible":this.getVisible(),"enabled":this.getEnabled(),"readOnly":this.getVisible()});if(options.buttonOpen){this.m_buttons.addElement(options.buttonOpen);}
if(options.buttonSelect){this.m_buttons.addElement(options.buttonSelect);}
if(options.buttonClear){this.m_buttons.addElement(options.buttonClear);}
this.m_contClassName=options.contClassName||this.DEF_CONT_CLASS;this.m_editContClassName=options.editContClassName||(this.DEF_EDIT_CONT_CLASS+" "+this.getApp().getBsCol()+"8");}
extend(EditContainer,ControlContainer);EditContainer.prototype.m_label;EditContainer.prototype.m_buttons;EditContainer.prototype.m_errorControl;EditContainer.prototype.m_editContainer;EditContainer.prototype.m_container;EditContainer.prototype.m_addNotSelected;EditContainer.prototype.m_notSelectedLast;EditContainer.prototype.m_optionClass;EditContainer.prototype.m_formatFunction;EditContainer.prototype.m_initValue;EditContainer.prototype.getErrorControl=function(){return this.m_errorControl;}
EditContainer.prototype.DEF_CLASS="form-control";EditContainer.prototype.DEF_CONT_CLASS="form-group";EditContainer.prototype.BTNS_CONTAINER_CLASS="input-group-btn";EditContainer.prototype.INCORRECT_VAL_CLASS="error";EditContainer.prototype.DEF_EDIT_CONT_CLASS="input-group";EditContainer.prototype.VAL_INIT_ATTR="initValue";EditContainer.prototype.NOT_SELECTED_VAL="null";EditContainer.prototype.addOption=function(opt){this.addElement(opt);}
EditContainer.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditContainer.prototype.setIndex=function(ind){if(this.m_node.options&&this.m_node.options.length>ind){this.m_node.selectedIndex=ind;}}
EditContainer.prototype.getOption=function(){var i=this.getIndex();if(i>=0){return this.getElementByIndex(i);}}
EditContainer.prototype.setValue=function(val){this.setAttr("value",val);}
EditContainer.prototype.getValue=function(){var v=EditContainer.superclass.getValue.call(this);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setInitValue=function(val){this.setAttr(this.VAL_INIT_ATTR,val);this.setValue(val);}
EditContainer.prototype.getInitValue=function(){var v=this.getAttr(this.VAL_INIT_ATTR);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setLabel=function(label){this.m_label=label;}
EditContainer.prototype.getLabel=function(){return this.m_label;}
EditContainer.prototype.setValidator=function(v){this.m_validator=v;}
EditContainer.prototype.getValidator=function(){return this.m_validator;}
EditContainer.prototype.getButtons=function(){return this.m_buttons;}
EditContainer.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().setValue(erStr);}
EditContainer.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().clear();}
EditContainer.prototype.toDOM=function(parent){this.m_container=new ControlContainer(this.getId()+":cont","div",{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control(this.getId()+":edit-cont","div",{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);EditContainer.superclass.toDOM.call(this,this.m_editContainer.getNode());this.m_errorControl=new ErrorControl(this.getId()+":error");this.m_errorControl.toDOM(this.m_editContainer.getNode());if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}}
EditContainer.prototype.delDOM=function(){EditContainer.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
EditContainer.prototype.setVisible=function(visible){if(this.m_label){this.m_label.setVisible(visible);if(this.m_container){this.m_container.setVisible(visible);}
if(this.m_edit_container){this.m_edit_container.setVisible(visible);}}
if(this.m_buttons){this.m_buttons.setVisible(visible);}
EditContainer.superclass.setVisible.call(this,visible);}
EditContainer.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);}
EditContainer.superclass.setEnabled.call(this,enabled);}
EditContainer.prototype.reset=function(){this.setIndex(0);}
EditContainer.prototype.isNull=function(){var v=this.getValue();return(!v||v==this.NOT_SELECTED_VAL);}
EditContainer.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
EditContainer.prototype.clear=function(){for(var id in this.m_elements){DOMHelper.delNode(this.m_elements[id].m_node);}
this.m_elements={};}
EditContainer.prototype.getAddNotSelected=function(){return this.m_addNotSelected;}
EditContainer.prototype.setAddNotSelected=function(v){this.m_addNotSelected=v;}
EditContainer.prototype.getNotSelectedLast=function(){return this.m_notSelectedLast;}
EditContainer.prototype.setNotSelectedLast=function(v){this.m_notSelectedLast=v;}
EditContainer.prototype.getOptionClass=function(){return this.m_optionClass;}
EditContainer.prototype.setOptionClass=function(v){this.m_optionClass=v;}
EditContainer.prototype.getIsRef=function(){return false;}
EditContainer.prototype.getFormatFunction=function(){return this.m_formatFunction;}
EditContainer.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
EditContainer.prototype.getContTagName=function(){return this.m_formatFunction;}
EditContainer.prototype.setContTagName=function(v){this.m_contTagName=v;}
EditContainer.prototype.getContClassName=function(){return this.m_contClassName;}
EditContainer.prototype.setContClassName=function(v){this.m_contClassName=v;}
EditContainer.prototype.getEditContClassName=function(){return this.m_editContClassName;}
EditContainer.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
EditContainer.prototype.getOnSelect=function(){return this.m_onSelect;}
EditContainer.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditContainer.prototype.getInputEnabled=function(){return this.getEnabled();}
EditContainer.prototype.setInputEnabled=function(v){this.setEnabled(v);}
EditContainer.prototype.valueChanged=function(){} 
EditContainer.prototype.ER_NO_OPT_CLASS="Класс опций не задан.";EditContainer.prototype.ER_NO_TAG="Имя узла не задано";EditContainer.prototype.NOT_SELECTED_DESCR="<не выбрано>"; 
function EditRadioGroup(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditRadio;options.className=options.className||"row";EditRadioGroup.superclass.constructor.call(this,id,options);}
extend(EditRadioGroup,EditContainer);EditRadioGroup.prototype.m_label;EditRadioGroup.prototype.DEF_TAG_NAME="div";EditRadioGroup.prototype.addElement=function(ctrl){this.setElement(ctrl.getId(),ctrl);}
EditRadioGroup.prototype.getIndex=function(){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return i;}}}
EditRadioGroup.prototype.setValueById=function(id){for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"){this.m_elements[elem_id].m_node.checked=(this.m_elements[elem_id].m_node.id==id);}}}
EditRadioGroup.prototype.setValueByIndex=function(ind){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"){this.m_elements[elem_id].m_node.checked=(i==ind);i++;}}}
EditRadioGroup.prototype.getValue=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return this.m_elements[elem_id].m_node.value;}}}
EditRadioGroup.prototype.getValueDescr=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return this.m_elements[elem_id].m_node.nodeValue;}}} 
function EditRadio(id,options){options=options||{};options.type=options.type||"radio";options.cmdClear=false;var bs_col=window.getApp().getBsCol();options.labelClassName=options.labelClassName||("control-label "+(bs_col+"11"));options.editContClassName=options.contClassName||("input-group "+bs_col+"1");EditRadio.superclass.constructor.call(this,id,options);if(options.checked){this.setChecked(options.checked);}}
extend(EditRadio,EditString);EditRadio.prototype.setChecked=function(checked){this.m_node.checked=checked;}
EditRadio.prototype.getChecked=function(){return this.m_node.checked;} 
function EditSelect(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditSelectOption;if(options.onSelect){options.events=options.events||{};if(!options.events.change){options.events.change=function(){self.callOnSelect();}}}
EditSelect.superclass.constructor.call(this,id,options);}
extend(EditSelect,EditContainer);EditSelect.prototype.DEF_TAG_NAME="select";EditSelect.prototype.selectOptionById=function(optId){this.m_elements[optId].getNode().selected=true;}
EditSelect.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditSelect.prototype.setValue=function(val){if(val==null)val=this.NOT_SELECTED_VAL;EditSelect.superclass.setValue.call(this,val);for(var id in this.m_elements){if(this.m_elements[id].getValue()==val){this.selectOptionById(id);break;}}}
EditSelect.prototype.setIndex=function(ind){EditSelect.superclass.setIndex.call(this,ind);var i=0;for(var id in this.m_elements){if(i==ind){this.selectOptionById(id);break;}
i++;}}
EditSelect.prototype.getValue=function(){if(this.getIndex()>=0){var v;var el=this.getElement(this.getIndex());if(this.getElement(this.getIndex())){v=el.getValue();}
else{v=this.getNode().options[this.m_node.selectedIndex].value;}
return(v==this.NOT_SELECTED_VAL)?null:v;}}
EditSelect.prototype.callOnSelect=function(){if(this.getOnSelect()){this.getOnSelect().call(this);}} 
function EditSelectRef(id,options){options=options||{};options.optionClass=options.optionClass||EditSelectOptionRef;this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setKeyIds(options.keyIds);this.setModelKeyFields(options.modelKeyFields);this.setModelKeyIds(options.modelKeyIds);this.setModelDescrFields(options.modelDescrFields);this.setModelDescrIds(options.modelDescrIds);this.setModelDescrFormatFunction(options.modelDescrFormatFunction);this.setDependBaseControl(options.dependBaseControl);this.setDependBaseFieldIds(options.dependBaseFieldIds);this.setDependFieldIds(options.dependFieldIds);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:true);var self=this;options.events=options.events||{};if(!options.events.change){options.events.change=function(){self.callOnSelect();}}
EditSelectRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){this.getApp().setCashData(this.m_model.getId(),options.modelDataStr);}
else{this.m_model.setDate(options.modelDataStr);}}}
extend(EditSelectRef,EditSelect);EditSelectRef.prototype.m_oldEnabled;EditSelectRef.prototype.m_cashable;EditSelectRef.prototype.m_readPublicMethod;EditSelectRef.prototype.m_model;EditSelectRef.prototype.m_keyIds;EditSelectRef.prototype.m_modelKeyFields;EditSelectRef.prototype.m_modelKeyIds;EditSelectRef.prototype.m_modelDescrFields;EditSelectRef.prototype.m_modelDescrIds;EditSelectRef.prototype.m_modelDescrFormatFunction;EditSelectRef.prototype.m_dependBaseControl;EditSelectRef.prototype.m_dependBaseFieldIds;EditSelectRef.prototype.m_dependFieldIds;EditSelectRef.prototype.m_dependControl;EditSelectRef.prototype.m_autoRefresh;EditSelectRef.prototype.KEY_ATTR="keys";EditSelectRef.prototype.KEY_INIT_ATTR="initKeys";EditSelectRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditSelectRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditSelectRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.getDependControl()){this.getDependControl().dependOnSelectBase(this.getModelRow());}
if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditSelectRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditSelectRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditSelectRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditSelectRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditSelectRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getModified=function(){return(this.getAttr(this.KEY_ATTR)!=this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getIsRef=function(){return true;}
EditSelectRef.prototype.resetKeys=function(){this.setKeys({});}
EditSelectRef.prototype.reset=function(){EditSelectRef.superclass.reset.call(this);this.resetKeys();}
EditSelectRef.prototype.setValue=function(val){if(val!=null&&typeof val=="object"&&val.getKeys){var val=val.getKeys();if(!this.m_keyIds){this.m_keyIds=[];for(var keyid in val){this.m_keyIds.push(keyid);}}}
else if(this.m_keyIds&&this.m_keyIds.length){val_str=(val!=null)?val.toString():null;val={};val[this.m_keyIds[0]]=val_str;}
else{throw Error(CommonHelper.format(this.ER_NO_KEYS,Array(this.getName())));}
var model_keys={};var ind=0;for(var i=0;i<this.m_modelKeyFields.length;i++){model_keys[this.m_modelKeyFields[i].getId()]=val[this.m_keyIds[ind]];ind++;}
var key_set=false;for(var id in this.m_elements){var v=this.m_elements[id].getValue();for(var vk in v){if(model_keys[vk]&&v[vk]==model_keys[vk]){this.selectOptionById(id);key_set=true;break;}}
if(key_set)break;}
this.setKeys(val);}
EditSelectRef.prototype.getValue=function(){var ind=this.getIndex();if(ind){var elem=this.getElement(ind);return new RefType({"keys":elem.getValue(),"descr":elem.getDescr()});}}
EditSelectRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"){this.setInitKeys(val.getKeys());}}
EditSelectRef.prototype.setCashable=function(v){this.m_cashable=v;}
EditSelectRef.prototype.getCashable=function(){return this.m_cashable;}
EditSelectRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditSelectRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditSelectRef.prototype.defineModelKeyFieds=function(){if(this.getModelKeyIds()){var key_fields=[];var ids=this.getModelKeyIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelKeyFields(key_fields);}}
EditSelectRef.prototype.defineModelDescrFieds=function(){if(this.getModelDescrIds()){var key_fields=[];var ids=this.getModelDescrIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelDescrFields(key_fields);}}
EditSelectRef.prototype.setModel=function(v){this.m_model=v;this.setModelKeyFields(undefined);this.setModelDescrFields(undefined);this.defineModelKeyFieds();this.defineModelDescrFieds();}
EditSelectRef.prototype.getModel=function(){return this.m_model;}
EditSelectRef.prototype.getModelKeyIds=function(){return this.m_modelKeyIds;}
EditSelectRef.prototype.setModelKeyIds=function(v){this.m_modelKeyIds=v;}
EditSelectRef.prototype.getModelKeyFields=function(){return this.m_modelKeyFields;}
EditSelectRef.prototype.setModelKeyFields=function(v){this.m_modelKeyFields=v;}
EditSelectRef.prototype.getModelDescrIds=function(){return this.m_modelDescrIds;}
EditSelectRef.prototype.setModelDescrIds=function(v){this.m_modelDescrIds=v;}
EditSelectRef.prototype.getModelDescrFields=function(){return this.m_modelDescrFields;}
EditSelectRef.prototype.setModelDescrFields=function(v){this.m_modelDescrFields=v;}
EditSelectRef.prototype.getModelDescrFormatFunction=function(){return this.m_modelDescrFormatFunction;}
EditSelectRef.prototype.setModelDescrFormatFunction=function(v){this.m_modelDescrFormatFunction=v;}
EditSelectRef.prototype.toDOM=function(parent){EditSelectRef.superclass.toDOM.call(this,parent);if(this.getAutoRefresh()){this.onRefresh();}}
EditSelectRef.prototype.onGetData=function(resp){if(!this.m_model)return;if(resp&&this.m_model){this.m_model.setData(resp.getModelData(this.m_model.getId()));if(this.getCashable()){this.getApp().setCashData(this.m_model.getId(),resp.getModelData(this.m_model.getId()));}}
var old_key_val;if(this.m_initValue){old_key_val=this.m_initValue;this.m_initValue=undefined;}
else{old_key_val=this.getValue();if(old_key_val){old_key_val=old_key_val.getKeys();}}
if(!this.getModelKeyFields()){this.defineModelKeyFieds();if(!this.getModelKeyFields()){this.m_modelKeyFields=[];var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){this.m_modelKeyFields.push(fields[id]);}}}
if(!this.getModelKeyFields()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}}
if(!this.getModelDescrFormatFunction()&&!this.getModelDescrFields()){this.defineModelDescrFieds();if(!this.getModelDescrFields()){this.m_modelDescrFields=[];var fields=this.m_model.getFields();var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.m_modelDescrFields.push(fields[id]);}}}
if(!this.getModelKeyFields()){this.setModelDescrFields(this.getModelKeyFields());}}
this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var val={};for(var i=0;i<this.m_modelKeyFields.length;i++){val[this.m_modelKeyFields[i].getId()]=this.NOT_SELECTED_VAL;}
var def_opt_opts={"value":val,"descr":this.NOT_SELECTED_DESCR};}
var opt_ind=0;if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));opt_ind++;}
var opt_checked=false;var old_keys;if(typeof(old_key_val)=="object"&&old_key_val.getKeys){old_keys=old_key_val.getKeys();}
var ind=0;while(this.m_model.getNextRow()){var key_val={};for(var i=0;i<this.m_modelKeyFields.length;i++){key_val[this.m_modelKeyFields[i].getId()]=this.m_modelKeyFields[i].getValue();}
var cur_opt_checked=false;if(!opt_checked){if(old_keys){for(var key_val_id in key_val){opt_checked=(old_keys[key_val_id]&&key_val[key_val_id]==old_keys[key_val_id]);if(!opt_checked){break;}}
cur_opt_checked=opt_checked;}
else if(old_key_val){for(var key_val_id in key_val){opt_checked=(key_val[key_val_id]==old_key_val);break;}
cur_opt_checked=opt_checked;}}
var descr_val="";if(this.getModelDescrFormatFunction()){descr_val=this.getModelDescrFormatFunction().call(this,this.m_model.getFields());}
else{for(var i=0;i<this.m_modelDescrFields.length;i++){descr_val+=(descr_val=="")?"":" ";descr_val+=this.m_modelDescrFields[i].getValue();}}
this.addElement(new opt_class(this.getId()+":"+opt_ind,{"checked":cur_opt_checked,"value":key_val,"descr":descr_val,"attrs":{"modelIndex":ind}}));ind++;opt_ind++;}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));}
if(!opt_checked&&this.getCount()){this.setIndex(0);}
for(var elem_id in this.m_elements){this.m_elements[elem_id].toDOM(this.m_node);}
this.setEnabled(this.m_oldEnabled);}
EditSelectRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=this.getApp().getCashData(this.getName());if(cash){this.m_model.setDate(cash);this.onGetData();return;}}
this.m_oldEnabled=this.getEnabled();this.setEnabled(false);var self=this;this.getReadPublicMethod().run({"async":false,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.setEnabled(self.m_oldEnabled);self.getErrorControl().setValue(self.getApp().formatError(erCode,erStr));}});}
EditSelectRef.prototype.callOnSelect=function(){var i=this.getIndex();var model_keys=this.getElement(i).getValue();var key_ids=this.getKeyIds();var keys={};var i=0;for(id in model_keys){keys[key_ids[i]]=model_keys[id];i++;}
this.setKeys(keys);EditSelectRef.superclass.callOnSelect.call(this);}
EditSelectRef.prototype.getModelRow=function(){var ind;if(this.getIndex()>=0){ind=this.getNode().options[this.m_node.selectedIndex].getAttribute("modelIndex");}
if(ind!=undefined&&ind>=0){this.m_model.getRow(ind);}
else{this.m_model.reset();}
return this.m_model.getFields();}
EditSelectRef.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
EditSelectRef.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
EditSelectRef.prototype.setDependBaseControl=function(v){this.m_dependBaseControl=v;if(this.m_dependBaseControl&&this.m_dependBaseControl.setDependentControl){this.setDependentControl(this);}}
EditSelectRef.prototype.getDependBaseControl=function(){return this.m_dependBaseControl;}
EditSelectRef.prototype.setDependBaseFieldIds=function(v){this.m_dependBaseFieldIds=v;}
EditSelectRef.prototype.getDependBaseFieldIds=function(){return this.m_dependBaseFieldIds;}
EditSelectRef.prototype.setDependFieldIds=function(v){this.m_dependFieldIds=v;}
EditSelectRef.prototype.getDependFieldIds=function(){return this.m_dependFieldIds;}
EditSelectRef.prototype.setDependControl=function(v){this.m_dependControl=v;}
EditSelectRef.prototype.getDependControl=function(){return this.m_dependControl;}
EditSelectRef.prototype.dependOnSelectBase=function(baseModelRow){var pm=this.getReadPublicMethod();if(!pm)return;var contr=pm.getController();var cond_fields,cond_sgns,cond_vals;var cond_keys=this.getDependFieldIds();var base_keys=this.getDependBaseFieldIds();var ind=-1;for(var fid in baseModelRow){var cond_key=undefined;if(!base_keys&&baseModelRow[fid].getPrimaryKey()){ind++;cond_key=cond_keys[ind];}
else if(base_keys){for(ind=0;ind<base_keys.length;ind++){if(base_keys[ind]==fid){cond_key=cond_keys[ind];break;}}}
if(cond_key){cond_fields=((cond_fields==undefined)?"":(cond_fields+contr.PARAM_FIELD_SEP_VAL))+cond_key;cond_sgns=((cond_sgns==undefined)?"":(cond_sgns+contr.PARAM_FIELD_SEP_VAL))+contr.PARAM_SGN_EQUAL;cond_vals=((cond_vals==undefined)?"":(cond_vals+contr.PARAM_FIELD_SEP_VAL))+baseModelRow[fid].getValue();}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,cond_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,cond_sgns);pm.setFieldValue(contr.PARAM_COND_VALS,cond_vals);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);this.onRefresh();} 
EditSelectRef.prototype.ER_NO_LOOKUP="Котрол %, не задано ключевое поле.";EditSelectRef.prototype.ER_NO_RESULT="Котрол %, не задано ключевое поле представления.";EditSelectRef.prototype.ER_NO_KEYS="Котрол %, не заданы идентификаторы ключей!"; 
function EditSelectOption(id,options){options=options||{};if(options.checked!=undefined&&options.checked==true){options.attrs=options.attrs||{};options.attrs.selected="selected";}
EditSelectOption.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);if(options.descr){this.setDescr(options.descr);}}
extend(EditSelectOption,Control);EditSelectOption.prototype.DEF_TAG_NAME="option";EditSelectOption.prototype.getValue=function(){return this.getAttr("value");}
EditSelectOption.prototype.setValue=function(id){this.setAttr("value",id);}
EditSelectOption.prototype.getDescr=function(){return this.getText();}
EditSelectOption.prototype.setDescr=function(descr){this.setText(descr);} 
function EditSelectOptionRef(id,options){options=options||{};EditSelectOptionRef.superclass.constructor.call(this,id,options);}
extend(EditSelectOptionRef,EditSelectOption);EditSelectOptionRef.prototype.getValue=function(){var str=EditSelectOptionRef.superclass.getValue.call(this);return CommonHelper.json2obj(str);}
EditSelectOptionRef.prototype.setValue=function(keys){var str=CommonHelper.array2json(keys);EditSelectOptionRef.superclass.setValue.call(this,str);} 
function EditRadioGroupRef(id,options){options=options||{};this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setKeyField(options.keyField);this.setKeyFieldId(options.keyFieldId);this.setDescrField(options.descrField);this.setDescrFieldId(options.descrFieldId);this.setNotSelectedValue(options.notSelectedValue||this.DEF_NOT_SELECTED_VAL);this.setNotSelectedCaption(options.notSelectedCaption||this.DEF_NOT_SELECTED_CAP);this.setColCount(options.colCount||1);EditRadioGroupRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){this.getApp().setCashData(this.m_model.getId(),options.modelDataStr);}
else{this.m_model.setDate(options.modelDataStr);}}}
extend(EditRadioGroupRef,EditRadioGroup);EditRadioGroupRef.prototype.DEF_NOT_SELECTED_VAL="null";EditRadioGroupRef.prototype.m_oldEnabled;EditRadioGroupRef.prototype.m_cashable;EditRadioGroupRef.prototype.m_readPublicMethod;EditRadioGroupRef.prototype.m_model;EditRadioGroupRef.prototype.m_keyFieldId;EditRadioGroupRef.prototype.m_keyField;EditRadioGroupRef.prototype.m_notSelectedCaption;EditRadioGroupRef.prototype.m_notSelectedValue;EditRadioGroupRef.prototype.getCashable=function(){return this.m_cashable;}
EditRadioGroupRef.prototype.setCashable=function(v){this.m_cashable=v;}
EditRadioGroupRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditRadioGroupRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditRadioGroupRef.prototype.setModel=function(v){this.m_model=v;}
EditRadioGroupRef.prototype.getModel=function(){return this.m_model;}
EditRadioGroupRef.prototype.getKeyFieldId=function(){return this.m_keyFieldId;}
EditRadioGroupRef.prototype.setKeyFieldId=function(v){this.m_keyFieldId=v;}
EditRadioGroupRef.prototype.getKeyField=function(){return this.m_keyField;}
EditRadioGroupRef.prototype.setKeyField=function(v){this.m_keyField=v;}
EditRadioGroupRef.prototype.getDescrFieldId=function(){return this.m_descrFieldId;}
EditRadioGroupRef.prototype.setDescrFieldId=function(v){this.m_descrFieldId=v;}
EditRadioGroupRef.prototype.getDescrField=function(){return this.m_descrField;}
EditRadioGroupRef.prototype.setDescrField=function(v){this.m_descrField=v;}
EditRadioGroupRef.prototype.getNotSelectedValue=function(){return this.m_notSelectedValue;}
EditRadioGroupRef.prototype.setNotSelectedValue=function(v){this.m_notSelectedValue=v;}
EditRadioGroupRef.prototype.getNotSelectedCaption=function(){return this.m_notSelectedCaption;}
EditRadioGroupRef.prototype.setNotSelectedCaption=function(v){this.m_notSelectedCaption=v;}
EditRadioGroupRef.prototype.getColCount=function(){return this.m_colCount;}
EditRadioGroupRef.prototype.setColCount=function(v){this.m_colCount=v;}
EditRadioGroupRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=this.getApp().getCashData(this.getName());if(cash){this.m_model.setDate(cash);this.onGetData();return;}}
this.m_oldEnabled=this.getEnabled();this.setEnabled(false);var self=this;this.getReadPublicMethod().run({"async":false,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.setEnabled(self.m_oldEnabled);self.getErrorControl().setValue(self.getApp().formatError(erCode,erStr));}});}
EditRadioGroupRef.prototype.toDOM=function(parent){EditRadioGroupRef.superclass.toDOM.call(this,parent);this.onRefresh();}
EditRadioGroupRef.prototype.onGetData=function(resp){if(!this.m_model)return;if(resp&&this.m_model){this.m_model.setData(resp.getModelData(this.m_model.getId()));if(this.getCashable()){this.getApp().setCashData(this.m_model.getId(),resp.getModelData(this.m_model.getId()));}}
var old_key_val=this.getValue()||this.m_defaultValue;var f=this.getKeyField();if(!f&&this.getKeyFieldId()&&this.m_model.fieldExists(this.getKeyFieldId())){this.setKeyField(this.m_model.getField(this.getKeyFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){this.setKeyField(fields[id]);break;}}}
if(!this.getKeyField()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}
var f=this.getDescrField();if(!f&&this.getDescrFieldId()&&this.m_model.fieldExists(this.getDescrFieldId())){this.setDescrField(this.m_model.getField(this.getDescrFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}
if(!this.getDescrField()){for(var id in fields){if(fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}}}
if(!this.getDescrField()){throw Error(CommonHelper.format(this.ER_NO_RESULT,Array(this.getName())));}
var self=this;this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var def_opt_opts={"className":"a","value":this.getNotSelectedValue(),"labelCaption":this.getNotSelectedCaption(),"app":this.getApp(),"name":this.getId(),"events":{"onclick":function(){if(self.m_onSelect){self.m_onSelect();}}}};}
if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
var opt_checked=false;while(this.m_model.getNextRow()){var key_val=this.getKeyField().getValue();opt_checked=opt_checked||(key_val==old_key_val);this.addElement(new opt_class(this.getId()+":id_"+key_val,{"className":"a","checked":(key_val==old_key_val),"value":key_val,"labelCaption":this.getDescrField().getValue(),"app":this.getApp(),"name":this.getId(),"events":{"click":function(){if(self.m_onSelect){self.m_onSelect();}}}}));}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
if(!opt_checked&&this.getCount()){this.setIndex(0);}
var columns=[];var col_w=12/this.m_colCount;var bs=this.getApp().getBsCol()+col_w;for(var n=0;n<this.m_colCount;n++){columns.push(new Control(CommonHelper.uniqid(),"div",{"className":bs}));}
var elem;var n=0;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];if(n==this.m_colCount)n=0;elem.toDOM(columns[n].getNode());n++;}
for(var n=0;n<this.m_colCount;n++){columns[n].toDOM(this.m_node);}
this.setEnabled(this.m_oldEnabled);} 
EditRadioGroupRef.prototype.ER_NO_LOOKUP="Котрол %, не задано ключевое поле.";EditRadioGroupRef.prototype.DEF_NOT_SELECTED_CAP="Все элементы"; 
function EditCheckSelect(id,options){options=options||{};options.optionClass=options.optionClass||EditSelectOption;options.options=[{"value":options.trueValue||"1","descr":options.trueDescr||this.DEF_TRUE_DESCR},{"value":options.falseValue||"0","descr":options.falseDescr||this.DEF_FALSE_DESCR}];EditCheckSelect.superclass.constructor.call(this,id,options);}
extend(EditCheckSelect,EditSelect); 
EditCheckSelect.prototype.DEF_TRUE_DESCR="Да";EditCheckSelect.prototype.DEF_FALSE_DESCR="Нет"; 
function PrintObj(options){options=options||{};this.setTempl(options.templ);this.setKeys(options.keys);this.setKeyIds(options.keyIds);this.setPublicMethodKeyIds(options.publicMethodKeyIds);this.setPublicMethod(options.publicMethod);this.setEnabled((options.enabled==undefined)?options.enabled:true);this.setDivider((options.divider==undefined)?options.divider:false);this.setWinParams(options.winParams);var self=this;var id=CommonHelper.uniqid();this.m_control=new ControlContainer(id,"li",{"className":(this.getEnabled()==false)?"disabled":((this.getDivider())?"divider":""),"elements":[new Control(id+":a","a",{"value":options.caption,"events":{"click":function(){self.onClick();}},"attrs":{"href":"#","role":"menuitem"}})]});}
PrintObj.prototype.m_caption;PrintObj.prototype.m_templ;PrintObj.prototype.m_publicMethod;PrintObj.prototype.m_keys;PrintObj.prototype.m_publicMethodKeyIds;PrintObj.prototype.m_enabled;PrintObj.prototype.m_divider;PrintObj.prototype.m_winParams;PrintObj.prototype.m_control;PrintObj.prototype.m_grid;PrintObj.prototype.getCaption=function(){return this.m_control.getElement("a").getValue();}
PrintObj.prototype.setCaption=function(v){this.m_control.getElement("a").setCaption(v)}
PrintObj.prototype.getTempl=function(){return this.m_templ;}
PrintObj.prototype.setTempl=function(v){this.m_templ=v;}
PrintObj.prototype.getPublicMethod=function(){return this.m_publicMethod;}
PrintObj.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
PrintObj.prototype.getKeys=function(){if(!this.m_keys&&this.m_grid){if(!this.m_keyIds){return this.m_grid.getSelectedNodeKeys();}
else{var m=this.m_grid.getModel();if(m){var keys={};this.m_grid.setModelToCurrentRow();var fields=m.getFields();for(var i=0;i<this.m_keyIds.length;i++){if(fields[this.m_keyIds[i]]){keys[this.m_keyIds[i]]=fields[this.m_keyIds[i]].getValue();}}
return keys;}}}
else if(this.m_keys){return this.m_keys;}}
PrintObj.prototype.setKeys=function(v){this.m_keys=v;}
PrintObj.prototype.getKeyIds=function(){return this.m_keyIds;}
PrintObj.prototype.setKeyIds=function(v){this.m_keyIds=v;}
PrintObj.prototype.getPublicMethodKeyIds=function(){return this.m_publicMethodKeyIds;}
PrintObj.prototype.setPublicMethodKeyIds=function(v){this.m_publicMethodKeyIds=v;}
PrintObj.prototype.getEnabled=function(){return this.m_enabled;}
PrintObj.prototype.setEnabled=function(v){this.m_enabled=v;}
PrintObj.prototype.getDivider=function(){return this.m_divider;}
PrintObj.prototype.setDivider=function(v){this.m_divider=v;}
PrintObj.prototype.getWinParams=function(){return this.m_winParams;}
PrintObj.prototype.setWinParams=function(v){this.m_winParams=v;}
PrintObj.prototype.getControl=function(){return this.m_control;}
PrintObj.prototype.setGrid=function(v){this.m_grid=v;}
PrintObj.prototype.onClick=function(){var keys=this.getKeys();if(keys&&!CommonHelper.isEmpty(keys)){var pm=this.getPublicMethod();var pm_keys=this.getPublicMethodKeyIds();var ind=0;for(var id in keys){pm.setFieldValue(pm_keys[ind],keys[id]);ind++;}
pm.setFieldValue("templ",this.getTempl());var self=this;pm.run({"viewId":"ViewHTMLXSLT","retContentType":"text","ok":function(resp){WindowPrint.show({"content":resp,"print":false,"title":self.getCaption()});}});}} 
function EditRef(id,options){options=options||{};if(options.keys){this.setKeys(options.keys);}
if(options.keyIds){this.setKeyIds(options.keyIds);}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:true;options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:true;options.cmdAutoComplete=(options.cmdAutoComplete!=undefined)?options.cmdAutoComplete:true;if(options.cmdInsert){options.buttonInsert=options.buttonInsert||new ButtonInsert(id+":btn_insert",{"editControl":this,"app":options.app});}
if(options.cmdSelect&&!options.buttonSelect&&options.selectWinClass){options.buttonSelect=new ButtonSelectRef(id+':btn_select',{"winClass":options.selectWinClass,"winParams":options.selectWinParams,"descrIds":options.selectDescrIds,"keyIds":options.selectKeyIds,"control":this,"onSelect":options.onSelect,"formatFunction":options.selectFormatFunction,"multySelect":options.selectMultySelect,"app":options.app});}
if(options.cmdOpen&&!options.buttonOpen&&options.editWinClass){options.buttonOpen=new ButtonOpen(id+':btn_open',{"winClass":options.editWinClass,"winParams":options.editWinParams,"keyIds":options.openKeyIds,"control":this,"app":options.app});}
if(options.cmdClear){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"app":options.app});}
if(!options.cmdAutoComplete){options.inputEnabled=false;}
this.setOnSelect(options.onSelect);EditRef.superclass.constructor.call(this,id,options);if(!this.getKeyIds().length){throw Error(CommonHelper.format(this.ER_NO_KEY,Array[this.getName()]));}
if(options.cmdAutoComplete||options.autoComplete){if(!options.acPublicMethod&&options.acController){options.acPublicMethod=options.acController.getPublicMethod("complete");}
options.autoComplete=options.autoComplete||new actbAJX({"minLengthForQuery":options.acMinLengthForQuery,"onSelect":options.onSelect,"model":options.acModel,"publicMethod":options.acPublicMethod,"patternFieldId":options.acPatternFieldId,"control":this,"keyFields":options.acKeyFields,"descrFields":options.acDescrFields,"icase":options.acICase,"mid":options.acMid});actb(this.m_node,options.winObj,options.autoComplete);}
this.setAutoComplete(options.autoComplete);this.setButtonInsert(options.buttonInsert);}
extend(EditRef,Edit);EditRef.prototype.KEY_ATTR="keys";EditRef.prototype.KEY_INIT_ATTR="initKeys";EditRef.prototype.m_buttonInsert;EditRef.prototype.m_autoComplete;EditRef.prototype.m_keyIds;EditRef.prototype.addButtonControls=function(){if(this.m_buttonInsert)this.m_buttons.addElement(this.m_buttonInsert);if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditRef.prototype.setButtonInsert=function(v){this.m_buttonInsert=v;}
EditRef.prototype.getButtonInsert=function(){return this.m_buttonInsert;}
EditRef.prototype.setAutoComplete=function(v){this.m_autoComplete=v;}
EditRef.prototype.getAutoComplete=function(){return this.m_autoComplete;}
EditRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.getIsRef=function(){return true;}
EditRef.prototype.getModified=function(){return(this.getAttr(this.KEY_ATTR)!=this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.isNull=function(){return CommonHelper.isEmpty(this.getKeys());}
EditRef.prototype.resetKeys=function(){this.setKeys({});}
EditRef.prototype.reset=function(){EditRef.superclass.reset.call(this);this.resetKeys();}
EditRef.prototype.setValue=function(val){var descr;if(typeof val=="object"){this.setKeys(val.getKeys());descr=val.getDescr();}
else{descr=val;}
EditRef.superclass.setValue.call(this,descr);}
EditRef.prototype.getValue=function(){var descr=EditRef.superclass.getValue.call(this);return new RefType({"keys":this.getKeys(),"descr":descr});}
EditRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"){this.setInitKeys(val.getKeys());}}
EditRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditRef.prototype.getOnSelect=function(v){return this.m_onSelect;} 
function HiddenKey(id,options){options=options||{};options.visible=false;this.setValidator(options.validator);HiddenKey.superclass.constructor.call(this,id,"div",options);}
extend(HiddenKey,Control);HiddenKey.prototype.VAL_INIT_ATTR="initValue";HiddenKey.prototype.m_formatFunction;HiddenKey.prototype.setValidator=function(v){this.m_validator=v;}
HiddenKey.prototype.getValidator=function(){return this.m_validator;}
HiddenKey.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
HiddenKey.prototype.getInitValue=function(val){return this.getAttr(this.VAL_INIT_ATTR);}
HiddenKey.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
HiddenKey.prototype.getModified=function(){var v=this.getValue();return(this.getValue()!=this.getInitValue());}
HiddenKey.prototype.getIsRef=function(){return false;}
HiddenKey.prototype.setValid=function(v){return false;}
HiddenKey.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
HiddenKey.superclass.setValue.call(this,val);}
HiddenKey.prototype.getFormatFunction=function(){return this.m_formatFunction;}
HiddenKey.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
HiddenKey.prototype.getInputEnabled=function(){return this.getEnabled();}
HiddenKey.prototype.setInputEnabled=function(v){this.setEnabled(v);} 
function GridColumn(id,options){if(typeof(id)=="object"){options=CommonHelper.clone(id);if(options.field){id=options.field.getId();}
else{id=CommonHelper.uniqid();}}
options=options||{};this.m_id=id;options.ctrlId=id;this.m_headCell=options.headCell;this.m_cellClass=options.cellClass||GridCell;this.m_cellOptions=options.cellOptions;this.m_cellElements=options.cellElements;if(!options.field&&options.model&&options.model.fieldExists(id)){options.field=options.model.getField(id);}
this.m_field=options.field;this.m_format=options.format;this.m_formatFunction=options.formatFunction;this.m_mask=options.mask;this.m_assocImageList=options.assocImageList;this.m_assocValueList=options.assocValueList;this.m_assocClassList=options.assocClassList;this.m_ctrlId=options.ctrlId;this.m_ctrlClass=options.ctrlClass;this.m_ctrlOptions=options.ctrlOptions;this.m_ctrlBindFieldId=options.ctrlBindFieldId;this.m_ctrlBindField=options.ctrlBindField;}
GridColumn.prototype.m_id;GridColumn.prototype.m_headCell;GridColumn.prototype.m_cellClass;GridColumn.prototype.m_cellOptions;GridColumn.prototype.m_cellElements;GridColumn.prototype.m_field;GridColumn.prototype.m_format;GridColumn.prototype.m_formatFunction;GridColumn.prototype.m_mask;GridColumn.prototype.m_assocImageList;GridColumn.prototype.m_assocValueList;GridColumn.prototype.m_assocClassList;GridColumn.prototype.m_ctrlId;GridColumn.prototype.m_ctrlClass;GridColumn.prototype.m_ctrlOptions;GridColumn.prototype.m_ctrlBindFieldId;GridColumn.prototype.m_grid;GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getCellOptions=function(){return this.m_cellOptions;}
GridColumn.prototype.setCellOptions=function(v){this.m_cellOptions=v;}
GridColumn.prototype.getField=function(){return this.m_field;}
GridColumn.prototype.setField=function(v){this.m_field=v;}
GridColumn.prototype.getFormat=function(){return this.m_format;}
GridColumn.prototype.setFormat=function(v){this.m_format=v;}
GridColumn.prototype.getHeadCell=function(){return this.m_headCell;}
GridColumn.prototype.setHeadCell=function(v){this.m_headCell=v;}
GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getMask=function(){return this.m_mask;}
GridColumn.prototype.setMask=function(v){this.m_mask=v;}
GridColumn.prototype.getCtrlClass=function(){return this.m_ctrlClass;}
GridColumn.prototype.setCtrlClass=function(v){this.m_ctrlClass=v;}
GridColumn.prototype.getCtrlOptions=function(){return this.m_ctrlOptions;}
GridColumn.prototype.setCtrlOptions=function(v){this.m_ctrlOptions=v;}
GridColumn.prototype.getCtrlBindFieldId=function(){return this.m_ctrlBindFieldId;}
GridColumn.prototype.setCtrlBindFieldId=function(v){this.m_ctrlBindFieldId=v;}
GridColumn.prototype.getCtrlBindField=function(){return this.m_ctrlBindField;}
GridColumn.prototype.setCtrlBindField=function(v){this.m_ctrlBindField=v;}
GridColumn.prototype.getCtrlId=function(){return this.m_ctrlId;}
GridColumn.prototype.setCtrlId=function(v){this.m_ctrlId=v;}
GridColumn.prototype.getAssocValueList=function(){return this.m_assocValueList;}
GridColumn.prototype.setAssocValueList=function(v){this.m_assocValueList=v;}
GridColumn.prototype.getAssocImageList=function(){return this.m_assocImageList;}
GridColumn.prototype.setAssocImageList=function(v){this.m_assocImageList=v;}
GridColumn.prototype.getAssocClassList=function(){return this.m_assocClassList;}
GridColumn.prototype.setAssocClassList=function(v){this.m_assocClassList=v;}
GridColumn.prototype.getGrid=function(){return this.m_grid;}
GridColumn.prototype.setGrid=function(v){this.m_grid=v;}
GridColumn.prototype.getFormatFunction=function(){return this.m_formatFunction;}
GridColumn.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
GridColumn.prototype.getId=function(){return this.m_id;}
GridColumn.prototype.setId=function(v){this.m_id=v;}
GridColumn.prototype.formatVal=function(v){return v;}
GridColumn.prototype.getCellElements=function(){return this.m_cellElements;} 
function GridColumnBool(id,options){options=options||{};options.assocClassList={"true":"glyphicon glyphicon-ok","false":"glyphicon glyphicon-remove"};GridColumnBool.superclass.constructor.call(this,id,options);}
extend(GridColumnBool,GridColumn); 
function GridColumnPhone(id,options){options=options||{};options.mask=options.app.getPhoneEditMask();GridColumnPhone.superclass.constructor.call(this,id,options);}
extend(GridColumnPhone,GridColumn); 
function GridColumnFloat(id,options){options=options||{};this.m_precision=options.precision||this.DEF_PRECISION;GridColumnFloat.superclass.constructor.call(this,id,options);}
extend(GridColumnFloat,GridColumn);GridColumnFloat.prototype.DEF_PRECISION=2;GridColumnFloat.prototype.DEF_SEPAR=" ";GridColumnFloat.prototype.formatVal=function(v){if(isNaN(v)){return"";}
else{return CommonHelper.numberFormat(v,this.m_precision,CommonHelper.getDecimalSeparator(),this.DEF_SEPAR);}} 
function GridColumnDate(id,options){options=options||{};this.m_dateFormat=options.dateFormat||((options.app)?options.app.getDateFormat():this.DEF_FORMAT);GridColumnDate.superclass.constructor.call(this,id,options);}
extend(GridColumnDate,GridColumn);GridColumnDate.prototype.DEF_FORMAT="d/m/Y";GridColumnDate.prototype.formatVal=function(v){return DateHelper.format(v,this.m_dateFormat);} 
function GridColumnEnum(id,options){options=options||{};options.assocValueList=options.multyLangValues[options.app.getLocale()];GridColumnEnum.superclass.constructor.call(this,id,options);}
extend(GridColumnEnum,GridColumn); 
function GridCell(id,options){options=options||{};if(options.gridColumn){options.attrs=options.attrs||{};if(options.gridColumn.getHeadCell()){var col_attrs=options.gridColumn.getHeadCell().getColAttrs()||{};for(col_attr_id in col_attrs){if(typeof col_attrs[col_attr_id]=="function"){options.attrs[col_attr_id]=col_attrs[col_attr_id].call(this,options.fields);}
else{options.attrs[col_attr_id]=col_attrs[col_attr_id];}}}
if(options.gridColumn.getField()){options.attrs.fieldId=options.gridColumn.getField().getId();options.value=options.gridColumn.getField().getValue();}}
this.setGridColumn(options.gridColumn);var val=options.value;options.value=undefined;GridCell.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setColSpan(options.colSpan);this.setRowSpan(options.rowSpan);this.m_modelIndex=options.modelIndex;this.m_row=options.row;if(val!=undefined||(this.m_gridColumn&&this.m_gridColumn.getFormatFunction())){this.setValue(val);}}
extend(GridCell,ControlContainer);GridCell.prototype.DEF_TAG_NAME="TD";GridCell.prototype.m_gridColumn;GridCell.prototype.m_value;GridCell.prototype.setColSpan=function(v){if(v)this.setAttr("colspan",v);}
GridCell.prototype.getColSpan=function(){return this.getAttr("colspan");}
GridCell.prototype.setRowSpan=function(v){if(v)this.setAttr("rowspan",v);}
GridCell.prototype.getRowSpan=function(){return this.getAttr("rowspan");}
GridCell.prototype.setGridColumn=function(v){this.m_gridColumn=v;}
GridCell.prototype.getGridColumn=function(){return this.m_gridColumn;}
GridCell.prototype.setValue=function(val){this.m_value=val;if(this.m_gridColumn){var elem_cnt=0;if(this.m_elements){elem_cnt=this.getCount();}
var f_func=this.m_gridColumn.getFormatFunction();if(f_func){val=f_func.call(this,this.m_gridColumn.getGrid().getModel().getFields());}
else if(elem_cnt==1){for(var k in this.m_elements){this.m_elements[k].setValue(val);val="";break;}}
else if(elem_cnt){}
else{val=this.m_gridColumn.formatVal(val);if(this.m_gridColumn.getFormat()){val=CommonHelper.format(this.m_gridColumn.getFormat(),val);}
else if(this.m_gridColumn.getMask()){var input=new Control(this.getId()+":mask","input",{"attrs":{"value":val},"visible":false});$(input.getNode()).mask(this.m_gridColumn.getMask());val=input.m_node.value;}
else if(this.m_gridColumn.getAssocClassList()){this.addElement(new Control(this.getId()+":assoc-img","i",{"className":this.m_gridColumn.getAssocClassList()[val.toString()]}));val="";}
else if(this.m_gridColumn.getAssocImageList()){this.addElement(new Control(this.getId()+":assoc-img","img",{"attrs":{"src":this.m_gridColumn.getAssocImageList()[val]}}));val="";}
else if(this.m_gridColumn.getAssocValueList()){val=(val===null||val=="")?"null":val;val=this.m_gridColumn.getAssocValueList()[val];}}}
GridCell.superclass.setValue.call(this,val);}
GridCell.prototype.getValue=function(){return this.m_value;} 
function GridCellHead(id,options){options=options||{};options.attrs=options.attrs||{};if(!options.columns){var ns=id+":";var fid=id.substring(ns.length);options.columns=[new GridColumn({"fieldId":fid})];}
options.value=options.value||options.labelCaption||options.alias;if(options.value==undefined){options.value="";for(var i=0;i<options.columns.length;i++){if(options.columns[i].getField()){options.value+=((options.value=="")?"":" ")+options.columns[i].getField().getAlias();}}}
if(options.visible!=undefined&&!options.visible){options.colAttrs=options.colAttrs||{};options.attrs["class"]=this.CLASS_INVISIBLE;options.colAttrs["class"]=this.CLASS_INVISIBLE;}
options.attrs.align=options.attrs.align||this.DEF_ALIGN;if(options.colAlign){options.colAttrs=options.colAttrs||{};options.colAttrs.align=options.colAlign;}
if(options.sortable){options.attrs.title=options.attrs.title||this.TITLE;}
GridCellHead.superclass.constructor.call(this,id,options);if(options.sortable){if(options.sort){this.setSort(options.sort);}
if(options.sortFieldId){this.setSortFieldId(options.sortFieldId);}
this.setSortable(true);options.attrs.title=options.attrs.title||this.TITLE;}
this.setColumns(options.columns);this.setColAttrs(options.colAttrs);if(options.colControlContainer){this.m_colControlContainer=options.colControlContainer;}
var self=this;this.m_sorting=function(event){self.sorting(event);}}
extend(GridCellHead,GridCell);GridCellHead.prototype.SORT_UP_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes";GridCellHead.prototype.SORT_DOWN_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes-alt";GridCellHead.prototype.SORT_UP="asc";GridCellHead.prototype.SORT_DOWN="desc";GridCellHead.prototype.SORT_CLASS="sortable";GridCellHead.prototype.DEF_ALIGN="center";GridCellHead.prototype.DEF_TAG_NAME="th";GridCellHead.prototype.GLYPH_TAG="span";GridCellHead.prototype.m_colAttrs;GridCellHead.prototype.m_columns;GridCellHead.prototype.m_onRefresh;GridCellHead.prototype.initSort=function(sort){var el=document.createElement(this.GLYPH_TAG);el.className=(sort==this.SORT_UP)?this.SORT_UP_CLASS:this.SORT_DOWN_CLASS;var divs=this.m_node.getElementsByTagName("div");var parent=this.m_node;if(divs&&divs.length){parent=divs[0];}
var els=parent.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.delNode(els[0]);}
parent.appendChild(el);}
GridCellHead.prototype.updateColManager=function(){if(this.m_colManager&&this.m_colManager.getColOrder()){var col_order=this.m_colManager.getColOrder();var name=this.getName();for(var i=0;i<col_order.length;i++){var this_col=(col_order.colId=name);if(this_col){col_order.directs=this.getAttr("sort");}
col_order.checked=this_col;}}}
GridCellHead.prototype.sorting=function(event){event=EventHelper.fixMouseEvent(event);var th;if(event.target.nodeName.toLowerCase()=="th"){th=event.target;}
else{th=DOMHelper.getParentByTagName(event.target,"th");}
if(th){var sort=th.getAttribute("sort");if(sort==this.SORT_UP){this.setSort(this.SORT_DOWN);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else if(sort==this.SORT_DOWN){this.setSort(this.SORT_UP);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else{var trs=th.parentNode.childNodes;for(var i=0;i<trs.length;i++){if(trs[i].getAttribute("sort")){DOMHelper.delAttr(trs[i],"sort");var imgs=trs[i].getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){DOMHelper.delNode(imgs[0]);}
break;}}
this.makeSortable();this.setAttr("sort",this.SORT_UP);this.initSort();this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}}}
GridCellHead.prototype.makeSortable=function(){EventHelper.add(this.m_node,"click",this.m_sorting,true);}
GridCellHead.prototype.makeUnSortable=function(){EventHelper.del(this.m_node,"click",this.m_sorting,true);}
GridCellHead.prototype.getColAttrs=function(){return this.m_colAttrs;}
GridCellHead.prototype.setColAttrs=function(v){this.m_colAttrs=v;}
GridCellHead.prototype.getColControlContainer=function(){return this.m_colControlContainer;}
GridCellHead.prototype.getAlign=function(){return this.m_node.align;}
GridCellHead.prototype.setAlign=function(v){this.m_node.align=v;}
GridCellHead.prototype.getSortable=function(){return(DOMHelper.hasClass(this.m_node,this.SORT_CLASS));}
GridCellHead.prototype.setSortable=function(v){if(v){DOMHelper.addClass(this.m_node,this.SORT_CLASS);}
else{DOMHelper.delClass(this.m_node,this.SORT_CLASS);}}
GridCellHead.prototype.setColumns=function(v){this.m_columns=v;}
GridCellHead.prototype.getColumns=function(){return this.m_columns;}
GridCellHead.prototype.setSortFieldId=function(v){this.setAttr("sortFieldId",v);}
GridCellHead.prototype.getSortFieldId=function(){return this.getAttr("sortFieldId");}
GridCellHead.prototype.getSort=function(){return this.getAttr("sort");}
GridCellHead.prototype.setSort=function(v){this.setAttr("sort",v);var imgs=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){imgs[0].className=(v==this.SORT_DOWN)?this.SORT_DOWN_CLASS:this.SORT_UP_CLASS;}}
GridCellHead.prototype.toDOM=function(parent){GridCellHead.superclass.toDOM.call(this,parent);if(this.getSortable()){var sort=this.getSort();if(sort){this.initSort(sort);}
this.makeSortable();}}
GridCellHead.prototype.delDOM=function(){if(this.getSortable()){this.makeUnSortable();}
GridCellHead.superclass.delDOM.call(this);}
GridCellHead.prototype.setEnabled=function(v){if(v){this.makeSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.delClass(els[0],this.ATTR_DISABLED);}}
else{this.makeUnSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.addClass(els[0],this.ATTR_DISABLED);}}
GridCellHead.superclass.setEnabled.call(this,v);}
GridCellHead.prototype.setColManager=function(v){this.m_colManager=v;} 
function GridCellFoot(id,options){options=options||{};GridCellFoot.superclass.constructor.call(this,id,options);this.setCalc(options.calc);this.setCalcBegin(options.calcBegin);this.setCalcEnd(options.calcEnd);this.setCalcOper(options.calcOper);this.setCalcFieldId(options.calcFieldId);}
extend(GridCellFoot,GridCell);GridCellFoot.prototype.CALC_OPER_SUM="sum";GridCellFoot.prototype.CALC_OPER_AVG="avg";GridCellFoot.prototype.m_calc;GridCellFoot.prototype.m_calcBegin;GridCellFoot.prototype.m_calcEnd;GridCellFoot.prototype.m_calcOper;GridCellFoot.prototype.m_total;GridCellFoot.prototype.m_calcFieldId;GridCellFoot.prototype.m_count;GridCellFoot.prototype.getCalcFieldId=function(v){return this.m_calcFieldId;}
GridCellFoot.prototype.setCalcFieldId=function(v){this.m_calcFieldId=v;}
GridCellFoot.prototype.getTotal=function(v){return this.m_total;}
GridCellFoot.prototype.setTotal=function(v){this.m_total=v;}
GridCellFoot.prototype.getCalcTotal=function(v){return this.m_calcTotal;}
GridCellFoot.prototype.setCalcOper=function(v){this.m_calcOper=v;var self=this;if(this.m_calcOper){this.m_calc=this.m_calc||function(model){self.setTotal(self.getTotal()+model.getFieldValue(this.m_calcFieldId));if(self.m_calcOper==self.CALC_OPER_AVG){this.m_count+=1;}}
this.m_calcBegin=this.m_calcBegin||function(){self.setTotal(0);this.m_count=0;}
this.m_calcEnd=this.m_calcEnd||function(){var res;if(self.m_calcOper==self.CALC_OPER_AVG){res=(this.m_count>0)?(self.getTotal()/this.m_count):0;}
else{res=self.getTotal();}
self.setValue(res);}}}
GridCellFoot.prototype.setCalc=function(f){this.m_calc=f;}
GridCellFoot.prototype.getCalc=function(){return this.m_calc;}
GridCellFoot.prototype.setCalcBegin=function(f){this.m_calcBegin=f;}
GridCellFoot.prototype.getCalcBegin=function(f){return this.m_calcBegin;}
GridCellFoot.prototype.setCalcEnd=function(f){this.m_calcEnd=f;}
GridCellFoot.prototype.getCalcEnd=function(){return this.m_calcEnd;} 
function GridHead(id,options){options=options||{};GridHead.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setRowClass(options.rowClass);this.setRowOptions(options.rowOptions);}
extend(GridHead,ControlContainer);GridHead.prototype.DEF_TAG_NAME="THEAD";GridHead.prototype.m_rowClass;GridHead.prototype.m_rowClassOptions;GridHead.prototype.getColumns=function(){var col_list=[];for(var row_id in this.m_elements){var row_cols=this.m_elements[row_id].m_elements;for(var col_id in row_cols){var columns=row_cols[col_id].getColumns();for(var i=0;i<columns.length;i++){columns[i].setHeadCell(row_cols[col_id]);col_list.push(columns[i]);}}}
return col_list;}
GridHead.prototype.setRowClass=function(v){this.m_rowClass=v;}
GridHead.prototype.getRowClass=function(ind){return(this.m_rowClass)?this.m_rowClass[ind]:GridRow;}
GridHead.prototype.setRowOptions=function(v){this.m_rowOptions=v;}
GridHead.prototype.getRowOptions=function(ind){return(this.m_rowOptions)?this.m_rowOptions[ind]:{};} 
function GridRow(id,options){options=options||{};GridRow.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridRow,ControlContainer);GridRow.prototype.DEF_TAG_NAME="tr";GridRow.prototype.m_initColumns;GridRow.prototype.setInitColumnOrder=function(){this.m_initColumns={};for(var id in this.m_elements){this.m_initColumns[id]=CommonHelper.clone(this.m_elements[id]);}}
GridRow.prototype.setColumnOrder=function(orderArray){this.m_elements={};for(var i=0;i<orderArray.length;i++){if(!orderArray[i].checked)continue;if(this.m_initColumns[orderArray[i].colId]){this.m_elements[orderArray[i].colId]=this.m_initColumns[orderArray[i].colId];}}}
GridRow.prototype.getInitColumns=function(){return this.m_initColumns;} 
function GridFoot(id,options){options=options||{};this.setAutoCalc(options.autoCalc);GridFoot.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridFoot,ControlContainer);GridFoot.prototype.DEF_TAG_NAME="tfoot";GridFoot.prototype.m_autoCalc;GridFoot.prototype.calc=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalc)?cell.getCalc():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcBegin=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcBegin)?cell.getCalcBegin():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcEnd=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcEnd)?cell.getCalcEnd():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.getAutoCalc=function(){return this.m_autoCalc;}
GridFoot.prototype.setAutoCalc=function(v){this.m_autoCalc=v;} 
function GridBody(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;GridBody.superclass.constructor.call(this,id,options.tagName,options);}
extend(GridBody,ControlContainer);GridBody.prototype.DEF_TAG_NAME="tbody"; 
function Grid(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
this.setOnSelect(options.onSelect||window.onSelect);this.setOnSearch(options.onSearch);this.setCmdInsert((options.cmdInsert!=undefined)?options.cmdInsert:true);this.setCmdEdit((options.cmdEdit!=undefined)?options.cmdEdit:this.getCmdInsert());this.setCmdCopy((options.cmdCopy!=undefined)?options.cmdCopy:this.getCmdInsert());this.setCmdDelete((options.cmdDelete!=undefined)?options.cmdDelete:this.getCmdInsert());this.setCmdPrint((options.cmdPrint!=undefined)?options.cmdPrint:true);Grid.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setModel(options.model);this.setEditWinClass(options.editWinClass);this.setEditViewClass(options.editViewClass);this.setEditViewOptions(options.editViewOptions);this.setEditInline(options.editInline);this.setRefreshInterval(options.refreshInterval||this.DEF_REFRESH_INTERVAL);this.setRowCommandClass(options.rowCommandClass);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:false);this.setHead(options.head);this.setShowHead((options.showHead!=undefined)?options.showHead:true);this.setBody(options.body||new GridBody(id+":body",{"app":this.getApp()}));this.setFoot(options.foot);if(options.commands){options.commands.setGrid(this);this.setCommands(options.commands);this.setCmdInsert(options.commands.getCmdInsert());this.setCmdEdit(options.commands.getCmdEdit());this.setCmdCopy(options.commands.getCmdCopy());this.setCmdDelete(options.commands.getCmdDelete());this.setCmdPrint(options.commands.getCmdPrint());}
var self=this;if(options.pagination){this.setPagination(options.pagination);if(options.model){options.pagination.setFrom(options.model.getPageFrom());}
options.pagination.setGrid(this)}
this.setPopUpMenu(options.popUpMenu);this.setRowSelect((options.rowSelect!=undefined)?options.rowSelect:true);this.setLastRowSelectOnInit((options.lastRowSelectOnInit!=undefined)?options.lastRowSelectOnInit:false);this.setContClassName(options.contClassName);this.setLastRowFooter(options.lastRowFooter);this.m_onEventSetRowClass=options.onEventSetRowClass;this.m_onEventAddRow=options.onEventAddRow;this.m_onEventAddCell=options.onEventAddCell;this.setResize((options.resize!=undefined)?options.resize:true);this.setNavigate((options.navigate!=undefined)?options.navigate:true);this.setNavigateClick((options.navigateClick!=undefined)?options.navigate:true);this.m_onRefresh=options.onRefresh;this.m_keyIds=options.keyIds||["id"];this.m_keyDown=function(e){self.onKeyDown(e);};this.m_keyPress=function(e){self.onKeyPress(e);};this.m_wheelEvent=function(e){self.onWheel(e);};this.m_focusEvent=function(){self.setFocused(true);}
this.m_blurEvent=function(){self.setFocused(false);}
this.m_clickEvent=function(ev){self.onClick(ev);};this.m_dblClickEvent=function(ev){self.onDblClick(ev);};var head=this.getHead();if(head){var col_man,col_order,col_visib,col_filter;var cmd=this.getCommands();if(cmd&&cmd.getCmdColManager){col_man=cmd.getCmdColManager();if(col_man){col_order=col_man.getColOrder();col_visib=col_man.getColVisibility();col_filter=col_man.getColFilter();}}
var col_names={};for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.setInitColumnOrder();for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var f_name=head_row.m_elements[col].getName();if(f_name){col_names[f_name]=head_row.m_elements[col];}
head_row.m_elements[col].m_onRefresh=function(){self.onRefresh();}
head_row.m_elements[col].setColManager(col_man);if(col_order){head_row.m_elements[col].setSortable(false);}}}
if(col_visib){head_row.setColumnOrder(col_visib);}}
if(col_man){col_man.init();}
if(col_order){for(var i=0;i<col_order.length;i++){var f_name=col_order[i].colId;if(col_names[f_name]){if(col_order[i].checked&&col_order[i].direct!="undefined"&&col_names[f_name]){col_names[f_name].setSortable(true);col_names[f_name].setSort(col_order[i].direct);}}}}}
if(options.fixedHeader){this.m_fixedHeader=true;this.m_fixedOffset=options.fixedOffset||0;}
this.m_editWinObjList={};}
extend(Grid,Control);Grid.prototype.DEF_TAG_NAME="TABLE";Grid.prototype.DEF_ROW_TAG_NAME="TR";Grid.prototype.DEF_CELL_TAG_NAME="TD";Grid.prototype.SELECTED_ROW_CLASS="success";Grid.prototype.SELECTED_CELL_CLASS="info";Grid.prototype.FOCUSED_CLASS="focused";Grid.prototype.DEF_CLASS="table table-bordered table-responsive table-striped";Grid.prototype.DEF_TAB_INDEX="100";Grid.prototype.DEF_REFRESH_INTERVAL="0";Grid.prototype.m_commands;Grid.prototype.m_pagination;Grid.prototype.m_head;Grid.prototype.m_body;Grid.prototype.m_foot;Grid.prototype.m_editInline;Grid.prototype.m_editWinClass;Grid.prototype.m_editWinObj;Grid.prototype.m_editWinObjList;Grid.prototype.m_editViewClass;Grid.prototype.m_editViewOptions;Grid.prototype.m_editViewObj;Grid.prototype.m_rowCommandPanelClass;Grid.prototype.m_refInterval;Grid.prototype.m_refIntervalObj;Grid.prototype.m_onSelect;Grid.prototype.m_onEventSetRowClass;Grid.prototype.m_onEventDelete;Grid.prototype.m_onEventInsert;Grid.prototype.m_contClassName;Grid.prototype.m_popUpMenu;Grid.prototype.m_rowSelect;Grid.prototype.m_lastRowSelectOnInit;Grid.prototype.m_resize;Grid.prototype.m_navigate;Grid.prototype.m_navigateClick;Grid.prototype.m_cmdInsert;Grid.prototype.m_cmdEdit;Grid.prototype.m_cmdCopy;Grid.prototype.m_cmdDelete;Grid.prototype.m_cmdPrint;Grid.prototype.m_model;Grid.prototype.m_selectedRowKeys;Grid.prototype.m_selectedRowId;Grid.prototype.m_rowClass;Grid.prototype.m_container;Grid.prototype.m_containerScroll;Grid.prototype.m_lastRowFooter;Grid.prototype.m_keyDown;Grid.prototype.m_keyPress;Grid.prototype.m_wheelEvent;Grid.prototype.m_interval;Grid.prototype.m_parent;Grid.prototype.m_showHead;Grid.prototype.getRowHeight=function(){var row_n=this.getSelectedRow();if(row_n){return $(row_n).height();}}
Grid.prototype.initNavigation=function(){this.setFocused(true);EventHelper.add(this.m_node,"focus",this.m_focusEvent,false);EventHelper.add(this.m_node,"blur",this.m_blurEvent,false);}
Grid.prototype.addEvents=function(){EventHelper.add(this.m_node,'keydown',this.m_keyDown,false);EventHelper.add(this.m_node,'keypress',this.m_keyPress,false);EventHelper.add(this.m_node,"click",this.m_clickEvent,false);EventHelper.add(this.m_node,"contextmenu",this.m_clickEvent,false);EventHelper.addWheelEvent(this.m_node,this.m_wheelEvent,false);if(this.m_cmdEdit){EventHelper.add(this.m_node,'dblclick',this.m_dblClickEvent,false);}}
Grid.prototype.delEvents=function(){EventHelper.del(this.m_node,'keydown',this.m_keyDown,false);EventHelper.del(this.m_node,'keypress',this.m_keyPress,false);EventHelper.del(this.m_node,"click",this.m_clickEvent,false);EventHelper.del(this.m_node,"contextevent",this.m_clickEvent,false);EventHelper.delWheelEvent(this.m_node,this.m_wheelEvent,false);if(this.m_cmdEdit){EventHelper.del(this.m_node,'dblclick',this.m_dblClickEvent,false);}}
Grid.prototype.selectFirstSelectableCell=function(row){var cells=row.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<cells.length;i++){if(this.getCellSelectable(cells[i])){this.selectCell(cells[i]);return cells[i];}}}
Grid.prototype.setSelection=function(){var selected=false;if(this.m_selectedRowKeys){var rows=this.m_body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("keys")==this.m_selectedRowKeys){if(this.m_rowSelect){this.selectRow(rows[i]);selected=true;}
else{if(rows[i].childNodes.length>this.m_selectedCellInd){this.selectCell(rows[i].childNodes[this.m_selectedCellInd]);}
else{this.selectFirstSelectableCell(rows[i]);}
selected=true;}
break;}}}
if(!selected){var rows=this.m_body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);if(rows&&rows.length>0){var sel_node;if(this.m_rowSelect){if(this.m_lastRowSelectOnInit){for(var i=rows.length-1;i>0;i--){if(this.getRowSelectable(rows[i])){sel_node=rows[i];this.selectRow(sel_node);break;}}}
else{for(var i=0;i<rows.length;i++){if(this.getRowSelectable(rows[i])){this.selectRow(rows[i]);break;}}}}
else{var sel_node=this.selectFirstSelectableCell((this.m_lastRowSelectOnInit)?rows[rows.length-1]:rows[0]);}
if(this.m_lastRowSelectOnInit){$(sel_node).get(0).scrollIntoView();}}}}
Grid.prototype.keyPressEvent=function(keyCode,event){var res=false;if(keyCode==13){res=this.onEditSelect(event);}
else if(keyCode==33){}
else if(keyCode==34){}
else if(keyCode==35){}
else if(keyCode==36){}
else if(keyCode==37){res=this.onPreviousColumn();}
else if(keyCode==38){res=this.onPreviousRow();}
else if(keyCode==39){res=this.onNextColumn();}
else if(keyCode==40){res=this.onNextRow();}
else if(keyCode==45){res=this.onInsert();}
else if(keyCode==46){res=this.onDelete();}
else if(keyCode==120){res=this.onCopy();}
else if(keyCode==80&&event.ctrlKey){res=this.onPrint();}
else if(keyCode==70&&event.ctrlKey&&this.m_onSearchDialog){this.m_onSearchDialog();res=true;}
else if(keyCode==71&&event.ctrlKey&&this.m_onSearchReset){this.m_onSearchReset();res=true;}
return res;}
Grid.prototype.onPreviousColumn=function(){res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.previousSibling&&this.getCellSelectable(selected_node.previousSibling)){this.selectCell(selected_node.previousSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onNextColumn=function(){var res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.nextSibling&&this.getCellSelectable(selected_node.nextSibling)){this.selectCell(selected_node.nextSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onPreviousRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.previousSibling&&(selected_node.previousSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.previousSibling)){new_node=selected_node.previousSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.previousSibling&&(selected_node.parentNode.previousSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.previousSibling)){new_node=selected_node.parentNode.previousSibling.childNodes[DOMHelper.getElementIndex(selected_node)];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.onNextRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.nextSibling&&(selected_node.nextSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.nextSibling)){new_node=selected_node.nextSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.nextSibling&&(selected_node.parentNode.nextSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.nextSibling)){var ind=DOMHelper.getElementIndex(selected_node);new_node=selected_node.parentNode.nextSibling.childNodes[ind];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.delRow=function(rowNode){this.deleteRowNode(rowNode);}
Grid.prototype.deleteRowNode=function(rowNode){if(!rowNode){rowNode=this.getSelectedRow();}
if(rowNode){var new_node=rowNode.nextSibling;if(!new_node){new_node=rowNode.previousSibling;}
if(this.m_model){this.setModelToCurrentRow(rowNode);this.m_model.delRow();}
DOMHelper.delNode(rowNode);if(new_node){if(this.m_rowSelect){this.selectRow(new_node);}
else{var tds=new_node.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<tds.length;i++){if(!DOMHelper.hasClass(tds[i],this.CLASS_INVISIBLE)){this.selectCell(tds[i]);break;}}}}}}
Grid.prototype.onDelete=function(){var res=false;if(this.m_cmdDelete){var selected_node=this.getSelectedRow();if(selected_node){var self=this;this.setFocused(false);WindowQuestion.show({"cancel":false,"text":this.Q_DELETE,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delRow(selected_node);}
else{self.focus();}}});res=true;}}
return res;}
Grid.prototype.onSelect=function(){this.m_onSelect(this.getModelRow());}
Grid.prototype.onEditSelect=function(event){var res=false;if(this.m_cmdEdit&&(!this.m_onSelect||(this.m_onSelect&&event.ctrlKey))){this.edit("edit");res=true;}
else if(this.m_onSelect&&!event.ctrlKey){this.onSelect();res=true;}
return res;}
Grid.prototype.onDblClick=function(ev){ev=EventHelper.fixMouseEvent(ev);this.onEditSelect(ev);}
Grid.prototype.onClick=function(ev){ev=EventHelper.fixMouseEvent(ev);if(this.getEnabled()&&ev.target.nodeName==this.DEF_CELL_TAG_NAME&&DOMHelper.getParentByTagName(ev.target,"TBODY")){if(!this.getFocused()){this.setFocused(true);}
if(this.m_rowSelect){var row=DOMHelper.getParentByTagName(ev.target,this.DEF_ROW_TAG_NAME);if(row&&this.getRowSelectable(row)){this.selectRow(row,this.getSelectedNode());}}
else if(!this.m_rowSelect&&this.getCellSelectable(ev.target)){this.selectCell(ev.target,this.getSelectedNode());}}}
Grid.prototype.onKeyDown=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixKeyEvent(e);this.m_curKeyDown=e;if(this.keyPressEvent(e.keyCode,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onKeyPress=function(e){if(this.getEnabled()&&this.getFocused()&&!this.m_rowSelect&&this.m_onSearch&&!this.m_curKeyDown.ctrlKey){e=EventHelper.fixKeyEvent(e);if(this.m_onSearch.call(this,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onWheel=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixWheelEvent(e);var moved;if(e.delta>0){moved=this.onNextRow();}
else{moved=this.onPreviousRow();}
if(moved){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();}
return false;}}
Grid.prototype.initEditWinObj=function(cmd){var keys={};if(cmd!="insert"){var fields=this.m_model.getFields();var key_fields=this.getKeyIds();if(key_fields&&key_fields.length){for(var i=0;i<key_fields.length;i++){if(fields[key_fields[i]]){keys[key_fields[i]]=fields[key_fields[i]].getValue();}}}
else{for(var id in fields){if(fields[id].getPrimaryKey()){keys[id]=fields[id].getValue();}}}}
var self=this;var win_id=CommonHelper.uniqid();this.m_editWinObjList[win_id]=new this.m_editWinClass({"id":win_id,"app":this.getApp(),"onClose":function(res){res=res||{"updated":false};self.closeEditWinObj(res,this.getId());},"keys":keys,"params":{"cmd":cmd,"editViewOptions":this.getEditViewOptions()}});this.m_editWinObjList[win_id].open();}
Grid.prototype.closeEditWinObj=function(res,winId){if(this.m_editWinObjList[winId]){this.m_editWinObjList[winId].close();delete this.m_editWinObjList[winId];}
this.refreshAfterEdit(res);}
Grid.prototype.initEditView=function(parent,replacedNode,cmd){this.setLocked(true);var view_opts=this.getEditViewOptions()||{};view_opts.grid=this;view_opts.onClose=function(res){self.closeEditView(res);};view_opts.app=this.getApp();view_opts.keys=this.getSelectedNodeKeys();view_opts.cmd=cmd;view_opts.winObj=(this.m_editWinClass)?this.m_editWinObj:this.getWinObj();view_opts.row=this.getRow();var self=this;this.m_editViewObj=new this.m_editViewClass(this.getId()+":edit-view",view_opts);this.m_editViewObj.setReplacedNode(replacedNode);this.m_editViewObj.toDOM(parent);}
Grid.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.m_editViewObj.read(cmd);}
else if(this.m_model){}}
Grid.prototype.closeEditView=function(res){if(this.m_editViewObj.m_replacedNode){this.m_editViewObj.m_node.parentNode.replaceChild(this.m_editViewObj.m_replacedNode,this.m_editViewObj.m_node);}
this.m_editViewObj.delDOM();delete this.m_editViewObj;this.refreshAfterEdit(res);}
Grid.prototype.refreshAfterEdit=function(res){if(CommonHelper.nd(this.getId())){if(this.m_parent){this.delDOM();this.toDOM(this.m_parent);}
if(this.getLocked()){this.setLocked(false);}
this.focus();console.log("Grid.prototype.refreshAfterEdit res.newKeys="+res.newKeys)
if(res&&res.updated){if(res.newKeys){this.m_selectedRowKeys=CommonHelper.array2json(res.newKeys);}
this.onRefresh();}}}
Grid.prototype.read=function(isCopy){}
Grid.prototype.edit=function(cmd){if(this.m_model&&this.m_model.getLocked()){return 0;}
var sel_n=this.getSelectedRow();this.setModelToCurrentRow(sel_n);if(this.getEditInline()){this.initEditView(this.getBody().m_node,(cmd=="insert")?null:sel_n,cmd);}
else if(this.m_editWinClass&&!this.m_editViewClass){this.initEditWinObj(cmd);}
else if(!this.m_editWinClass&&this.m_editViewClass){var parent=this.m_parent;this.removeDOM();this.initEditView(this.getBody().m_node,null,cmd);}
else if(this.m_editWinClass&&this.m_editViewClass){}
else{}
if(this.m_editViewObj)this.fillEditView(cmd);}
Grid.prototype.getRowSelectable=function(row){return(!DOMHelper.hasClass(row,"grid_foot")&&!DOMHelper.hasClass(row,"grid_details"));}
Grid.prototype.getCellSelectable=function(cell){return(!DOMHelper.hasClass(cell,"grid_sys_col")&&!DOMHelper.hasClass(cell.parentNode,"grid_foot"));}
Grid.prototype.selectNode=function(newNode,oldNode){if(oldNode){if(!this.m_rowSelect){DOMHelper.delClass(oldNode,this.SELECTED_CELL_CLASS);DOMHelper.delClass(oldNode.parentNode,this.SELECTED_ROW_CLASS);}
else{DOMHelper.delClass(oldNode,this.SELECTED_ROW_CLASS);}}
if(newNode){if(!this.m_rowSelect){DOMHelper.addClass(newNode,this.SELECTED_CELL_CLASS);DOMHelper.addClass(newNode.parentNode,this.SELECTED_ROW_CLASS);}
else{DOMHelper.addClass(newNode,this.SELECTED_ROW_CLASS);}}}
Grid.prototype.selectRow=function(newRow,oldRow){if(newRow){this.m_selectedRowKeys=newRow.getAttribute("keys");this.m_selectedRowId=newRow.getAttribute("id");this.selectNode(newRow,oldRow);}}
Grid.prototype.selectCell=function(newCell,oldCell){if(newCell){var tr=DOMHelper.getParentByTagName(newCell,this.DEF_ROW_TAG_NAME);if(tr){this.m_selectedRowKeys=tr.getAttribute("keys");this.m_selectedRowId=tr.getAttribute("id");this.m_selectedCellInd=DOMHelper.getElementIndex(newCell);this.selectNode(newCell,oldCell);}}}
Grid.prototype.getSelectedRow=function(){if(!this.getRowSelect){var sel=this.getSelectedCell();if(sel){return sel.parentNode;}}
else{var sel=DOMHelper.getElementsByAttr(this.SELECTED_ROW_CLASS,this.m_body.getNode(),"class",true,this.DEF_ROW_TAG_NAME);return(sel.length)?sel[0]:null;}}
Grid.prototype.getSelectedCell=function(){var sel=DOMHelper.getElementsByAttr(this.SELECTED_CELL_CLASS,this.m_body.getNode(),"class",true,this.DEF_CELL_TAG_NAME);return(sel.length)?sel[0]:null;}
Grid.prototype.getSelectedNode=function(){return(this.m_rowSelect)?this.getSelectedRow():this.getSelectedCell();}
Grid.prototype.getSelectedNodeKeys=function(){var selected_node=this.getSelectedRow();if(selected_node){return CommonHelper.unserialize(selected_node.getAttribute("keys"));}}
Grid.prototype.fixHeader=function(){}
Grid.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;while(this.m_model.getNextRow()){var row_id=this.getId()+":"+body.getName()+":"+row_cnt;var r_class=this.getHead().getRowClass(h_row_ind);var row_opts=CommonHelper.clone(this.getHead().getRowOptions(h_row_ind));row_opts.attrs=row_opts.attrs||{};row_opts.attrs.class=row_opts.attrs.class||row_opts.className;row_opts.app=this.getApp();if(this.m_onSelect){row_opts.attrs.class+=((row_opts.attrs.class)?" ":"")+"for_select";}
if(this.m_onEventSetRowClass){this.m_onEventSetRowClass(this.m_model,row_opts.attrs.class);}
row=new r_class(row_id,row_opts);row_keys={};for(var k=0;k<this.m_keyIds.length;k++){if(this.m_model.fieldExists(this.m_keyIds[k])){row_keys[this.m_keyIds[k]]=this.m_model.getFieldValue(this.m_keyIds[k]);}}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell_class=columns[col_id].getCellClass();var cell_opts=CommonHelper.clone(columns[col_id].getCellOptions()||{});cell_opts.modelIndex=row_cnt;cell_opts.fields=this.m_model.getFields();cell_opts.row=row;cell_opts.gridColumn=columns[col_id];var cell_elements=columns[col_id].getCellElements();if(cell_elements){cell_opts.elements=[];for(var cel_el_i=0;cel_el_i<cell_elements.length;cel_el_i++){var cel_el_opts=CommonHelper.clone(cell_elements[cel_el_i].elementOptions);cel_el_opts.app=this.getApp();var elem_obj;var elem_class=cell_elements[cel_el_i].elementClass;if(elem_class.name=="Control"||elem_class.name=="ControlContainer"){elem_obj=new elem_class(null,cel_el_opts.tagName,cel_el_opts);}
else{elem_obj=new elem_class(null,cel_el_opts);}
cell_opts.elements.push(elem_obj);}}
cell_opts.app=this.getApp();var cell;if(cell_class.name=="Control"||cell_class.name=="ControlContainer"){cell=new cell_class(row_id+":"+columns[col_id].getId(),cell_opts.tagName,cell_opts);}
else{cell=new cell_class(row_id+":"+columns[col_id].getId(),cell_opts);}
if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));row.setAttr("modelIndex",row_cnt);var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this,"app":this.getApp()};row.addElement(new row_cmd_class(row_id+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
Grid.prototype.setCommands=function(commands){this.m_commands=commands;}
Grid.prototype.getCommands=function(){return this.m_commands;}
Grid.prototype.setPagination=function(pagination){this.m_pagination=pagination;}
Grid.prototype.getPagination=function(){return this.m_pagination;}
Grid.prototype.setFoot=function(foot){this.m_foot=foot;}
Grid.prototype.getFoot=function(){return this.m_foot;}
Grid.prototype.setHead=function(head){this.m_head=head;}
Grid.prototype.getHead=function(){return this.m_head;}
Grid.prototype.setBody=function(body){this.m_body=body;}
Grid.prototype.getBody=function(){return this.m_body;}
Grid.prototype.getRowCommandClass=function(){return this.m_rowCommandClass;}
Grid.prototype.setRowCommandClass=function(v){this.m_rowCommandClass=v;}
Grid.prototype.getEditInline=function(){return this.m_editInline;}
Grid.prototype.setEditInline=function(v){this.m_editInline=v;}
Grid.prototype.getOnSelect=function(){return this.m_onSelect;}
Grid.prototype.setOnSelect=function(v){this.m_onSelect=v;}
Grid.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
Grid.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
Grid.prototype.setPopUpMenu=function(menu){this.m_popUpMenu=menu;}
Grid.prototype.getPopUpMenu=function(){return this.m_popUpMenu;}
Grid.prototype.setRowSelect=function(v){this.m_rowSelect=v;}
Grid.prototype.getRowSelect=function(){return this.m_rowSelect;}
Grid.prototype.setLastRowSelectOnInit=function(v){this.m_lastRowSelectOnInit=v;}
Grid.prototype.getLastRowSelectOnInit=function(){return this.m_lastRowSelectOnInit;}
Grid.prototype.setContClassName=function(v){this.m_contClassName=v;}
Grid.prototype.getContClassName=function(){return this.m_contClassName;}
Grid.prototype.setLastRowFooter=function(v){this.m_lastRowFooter=v;}
Grid.prototype.getLastRowFooter=function(){return this.m_lastRowFooter;}
Grid.prototype.setResize=function(v){this.m_resize=v;}
Grid.prototype.getResize=function(){return this.m_resize;}
Grid.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
Grid.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
Grid.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
Grid.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
Grid.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
Grid.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
Grid.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
Grid.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
Grid.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
Grid.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
Grid.prototype.setNavigate=function(v){this.m_navigate=v;if(this.m_navigate){this.setTabIndex(this.getTabIndex()||this.DEF_TAB_INDEX);}}
Grid.prototype.getNavigate=function(){return this.m_navigate;}
Grid.prototype.setNavigateClick=function(v){this.m_navigateClick=v;}
Grid.prototype.getNavigateClick=function(){return this.m_navigateClick;}
Grid.prototype.setRefreshInterval=function(v){this.m_refInterval=v;if(v==0&&this.m_refIntervalObj!=undefined){window.clearInterval(this.m_refIntervalObj);}
else if(v>0){var self=this;this.m_refIntervalObj=setInterval(function(){self.onRefresh();},v);}}
Grid.prototype.getRefreshInterval=function(){return this.m_refInterval;}
Grid.prototype.setEditViewClass=function(v){this.m_editViewClass=v;}
Grid.prototype.getEditViewClass=function(){return this.m_editViewClass;}
Grid.prototype.setEditViewOptions=function(v){this.m_editViewOptions=v;}
Grid.prototype.getEditViewOptions=function(){return this.m_editViewOptions;}
Grid.prototype.setEditWinClass=function(v){this.m_editWinClass=v;}
Grid.prototype.getEditWinClass=function(){return this.m_editWinClass;}
Grid.prototype.lockRefresh=function(v){if(v){this.m_interval=this.getRefreshInterval();this.setRefreshInterval(0);if(this.m_model)this.m_model.setLocked(true);}
else{if(this.m_model)this.m_model.setLocked(false);this.setRefreshInterval(this.m_interval);}}
Grid.prototype.setEnabled=function(v){if(this.m_head)this.m_head.setEnabled(v);if(this.m_body)this.m_body.setEnabled(v);if(this.m_foot)this.m_foot.setEnabled(v);if(this.m_commands)this.m_commands.setEnabled(v);this.lockRefresh(!v);Grid.superclass.setEnabled.call(this,v);}
Grid.prototype.setLocked=function(v){if(this.m_head)this.m_head.setLocked(v);if(this.m_body)this.m_body.setLocked(v);if(this.m_foot)this.m_foot.setLocked(v);if(this.m_commands)this.m_commands.setLocked(v);this.lockRefresh(v);Grid.superclass.setLocked.call(this,v);}
Grid.prototype.toDOM=function(parent){this.m_container=new Control(this.getId()+":cont","div");if(this.m_commands)this.m_commands.toDOM(this.m_container.getNode());this.m_containerScroll=new Control(this.getId()+":cont-scroll","div",{className:"scrollable-area "+this.getId()+" "+this.m_contClassName});if(this.m_head&&this.getShowHead())this.m_head.toDOM(this.m_node);if(this.m_body)this.m_body.toDOM(this.m_node);if(this.m_foot)this.m_foot.toDOM(this.m_node);Grid.superclass.toDOM.call(this,this.m_containerScroll.getNode());this.m_containerScroll.toDOM(this.m_container.getNode());if(this.m_pagination)this.m_pagination.toDOM(this.m_container.getNode());this.m_container.toDOM(parent);if(this.m_autoRefresh){this.onRefresh();}
if(this.m_resize){}
if(this.m_navigate){this.initNavigation();this.setSelection();}
if(this.getPopUpMenu()!=undefined){this.getPopUpMenu().bind(this.m_body.getNode());}
this.fixHeader();this.m_rendered=true;if(!this.m_autoRefresh){this.onGetData();}}
Grid.prototype.delDOM=function(){this.setRefreshInterval(0);if(this.m_commands)this.m_commands.delDOM();if(this.m_pagination)this.m_pagination.delDOM();if(this.m_head)this.m_head.delDOM();if(this.m_body)this.m_body.delDOM();if(this.m_foot)this.m_foot.delDOM();EventHelper.del(this.m_node,'focus',this.m_focusEvent,false);EventHelper.del(this.m_node,'blur',this.m_blurEvent,false);Grid.superclass.delDOM.call(this);this.m_containerScroll.delDOM();this.m_container.delDOM();this.m_rendered=false;}
Grid.prototype.getFocused=function(){return DOMHelper.hasClass(this.m_node,this.FOCUSED_CLASS);}
Grid.prototype.setFocused=function(focused){if(this.m_node&&focused&&!this.getFocused()){var tables=this.getWinObjDocument().getElementsByTagName("table");for(var i=0;i<tables.length;i++){DOMHelper.delClass(tables[i],this.FOCUSED_CLASS);}
DOMHelper.addClass(this.m_node,this.FOCUSED_CLASS);this.addEvents();}
else if(this.m_node&&!focused){DOMHelper.delClass(this.m_node,this.FOCUSED_CLASS);if(!CommonHelper.isIE()){this.delEvents();}}}
Grid.prototype.focus=function(){this.setFocused(true);this.getNode().focus();}
Grid.prototype.getModel=function(){return this.m_model;}
Grid.prototype.setModel=function(m){this.m_model=m;}
Grid.prototype.onError=function(erStr){var self=this;window.showError(erStr,function(){self.setFocused(true);});}
Grid.prototype.onEdit=function(){if(this.m_cmdEdit){this.edit("edit");}}
Grid.prototype.onCopy=function(){if(this.m_cmdCopy){this.edit("copy");}}
Grid.prototype.onInsert=function(){if(this.m_cmdInsert){this.edit("insert");}}
Grid.prototype.onPrint=function(){if(this.m_cmdPrint){WindowPrint.show({content:this.getNode().outerHTML});}}
Grid.prototype.onRefresh=function(callBack){this.onGetData();if(this.callBack){this.callBack();}}
Grid.prototype.onRowUp=function(){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.previousSibling){selected_node.parentNode.insertBefore(selected_node,selected_node.previousSibling);}}
Grid.prototype.onRowDown=function(){var selected_node=this.getSelectedNode();if(selected_node){var n_up=selected_node.nextSibling;if(n_up){n_up.parentNode.insertBefore(n_up,n_up.previousSibling);}}}
Grid.prototype.setModelToCurrentRow=function(rowNode){if(!rowNode){rowNode=this.getSelectedRow();}
var ind=parseInt(DOMHelper.getAttr(rowNode,"modelIndex"));if(!isNaN(ind)){this.m_model.getRow(ind);}}
Grid.prototype.getModelRow=function(){this.setModelToCurrentRow();return this.m_model.getFields();}
Grid.prototype.getRow=function(){var row_n=this.getSelectedRow();if(row_n){return this.getBody().getElement(row_n.getAttribute("modelIndex"));}}
Grid.prototype.setKeyIds=function(v){this.m_keyIds=v;}
Grid.prototype.getKeyIds=function(){return this.m_keyIds;}
Grid.prototype.setOnSearch=function(v){this.m_onSearch=v;}
Grid.prototype.getOnSearch=function(){return this.m_onSearch;}
Grid.prototype.setOnSearchDialog=function(v){this.m_onSearchDialog=v;}
Grid.prototype.getOnSearchDialog=function(){return this.m_onSearchDialog;}
Grid.prototype.setOnSearchReset=function(v){this.m_onSearchReset=v;}
Grid.prototype.getOnSearchReset=function(){return this.m_onSearchReset;}
Grid.prototype.setShowHead=function(v){this.m_showHead=v;}
Grid.prototype.getShowHead=function(){return this.m_showHead;} 
Grid.prototype.Q_DELETE="Удалить запись?";Grid.prototype.NT_REC_DELETED="Запись удалена.";Grid.prototype.ER_COL_NOT_BOUND="Колонка % грида % не привязана к полю модели."; 
function GridCommands(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;GridCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:false;options.cmdPrintObj=(options.cmdPrintObj!=undefined)?options.cmdPrintObj:false;options.cmdPrintObj=(options.printObjList!=undefined)?true:options.cmdPrintObj;options.cmdSearch=(options.cmdSearch!=undefined)?true:options.cmdSearch;var self=this;if(options.cmdInsert||options.controlInsert){this.setControlInsert(options.controlInsert||new ButtonCtrl(id+":cmdInsert",{"glyph":"glyphicon-plus","onClick":function(){self.m_grid.onInsert();},"attrs":{"title":this.BTN_INSERT_TITLE}}));}
if(options.cmdEdit||options.controlEdit){this.setControlEdit(options.controlEdit||new ButtonCtrl(id+":cmdEdit",{"glyph":"glyphicon-pencil","onClick":function(){self.m_grid.onEdit();},"attrs":{"title":this.BTN_EDIT_TITLE}}));}
if(options.cmdCopy||options.controlCopy){this.setControlCopy(options.controlCopy||new ButtonCtrl(id+":cmdCopy",{"glyph":"glyphicon-copy","onClick":function(event){self.m_grid.onCopy();},"attrs":{"title":this.BTN_COPY_TITLE}}));}
if(options.cmdDelete||options.controlDelete){this.setControlDelete(options.controlDelete||new ButtonCtrl(id+":cmdDelete",{"glyph":"glyphicon-remove","onClick":function(){self.m_grid.onDelete();},"attrs":{"title":this.BTN_DELETE_TITLE}}));}
if(options.cmdColumnManager||options.controlColumnManager){this.setControlDelete(options.controlColumnManager||new ButtonCtrl(id+":cmdColumnManager",{"glyph":"glyphicon-th-list","onClick":function(){self.onColumnManager();},"attrs":{"title":this.BTN_COL_MANAGER_TITLE}}));}
if(options.cmdPrint||options.controlPrint){this.setControlPrint(options.controlPrint||new ButtonCtrl(id+":cmdPrint",{"glyph":"glyphicon-print","onClick":function(e){self.m_grid.onPrint();},"attrs":{"title":this.BTN_PRINT_TITLE}}));}
if(options.cmdRefresh||options.controlRefresh){this.setControlRefresh(options.controlRefresh||new ButtonCtrl(id+":cmdRefresh",{"glyph":"glyphicon-refresh","onClick":function(){self.m_grid.onRefresh();},"attrs":{"title":this.BTN_REFRESH_TITLE}}));}
if(options.cmdPrintObj){this.setControlPrintObj(options.controlPrintObj||new ButtonPrintList(id+":cmdPrintObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds,"app":options.app}));}
if(options.cmdSearch||options.controlSearch){this.setControlSearch(options.controlSearch||new ButtonCtrl(id+":cmdSearch",{"glyph":"glyphicon-search","onClick":function(){self.onSearch();},"attrs":{"title":this.BTN_SEARCH_TITLE}}));}
if(options.cmdFilter){this.setControlFilter(options.controlFilter||new GridFilter(CommonHelper.uniqid(),{"filters":options.filters,"app":options.app}));this.setControlFilterToggle(options.controlFilterToggle||new ButtonCtrl(id+":cmdToggle",{"attrs":{"title":this.m_controlFilter.DEF_TOGGLE_CTRL_TITLE},"onClick":function(){var filter=self.getControlFilter();$(filter.getNode()).collapse("toggle");if(!DOMHelper.hasClass(filter.getNode(),"in")){var filters=filter.getFilter().getFilters();for(var id in filters){filters[id].binding.getControl().focus();break;}}},"caption":this.m_controlFilter.DEF_TOGGLE_CTRL_CAP,"glyph":"glyphicon-triangle-bottom","app":options.app}));}
this.m_popUpMenu=options.popUpMenu;this.addControls();}
extend(GridCommands,ControlContainer);GridCommands.prototype.DEF_TAG_NAME="div";GridCommands.prototype.DEF_CLASS_NAME="btn-group";GridCommands.prototype.m_grid;GridCommands.prototype.m_controlInsert;GridCommands.prototype.m_controlEdit;GridCommands.prototype.m_controlCopy;GridCommands.prototype.m_controlDelete;GridCommands.prototype.m_controlPrint;GridCommands.prototype.m_controlRefresh;GridCommands.prototype.m_controlFilterToggle;GridCommands.prototype.m_controlFilter;GridCommands.prototype.m_controlColumnManager;GridCommands.prototype.m_controlPrintObj;GridCommands.prototype.m_controlSearch;GridCommands.prototype.popUpMenu;GridCommands.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlColumnManager)this.addElement(this.m_controlColumnManager);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlSearch)this.addElement(this.m_controlSearch);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCommands.prototype.setGrid=function(v){this.m_grid=v;if(this.m_controlFilter){var self=this;this.m_controlFilter.setOnRefresh(function(){self.m_grid.onRefresh();});}
if(this.m_controlPrintObj){this.m_controlPrintObj.setGrid(this.m_grid);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCommands.prototype.getGrid=function(){return this.m_grid;}
GridCommands.prototype.setEnabled=function(en){if(this.m_controlInsert)this.m_controlInsert.setEnabled(en);if(this.m_controlEdit)this.m_controlEdit.setEnabled(en);if(this.m_controlCopy)this.m_controlCopy.setEnabled(en);if(this.m_controlDelete)this.m_controlDelete.setEnabled(en);if(this.m_controlPrint)this.m_controlPrint.setEnabled(en);if(this.m_controlColumnManager)this.m_controlColumnManager.setEnabled(en);if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);if(this.m_controlSearch)this.m_controlSearch.setEnabled(en);if(this.m_controlFilterToggle)this.m_controlFilterToggle.setEnabled(en);if(this.m_controlFilter)this.m_controlFilter.setEnabled(en);GridCommands.superclass.setEnabled.call(this,en);}
GridCommands.prototype.printObjToPopUp=function(){if(this.m_controlPrintObj&&this.m_popUpMenu){this.m_popUpMenu.addSeparator();var id=this.getId();this.m_printObjList=this.m_controlPrintObj.getObjList();var self=this;for(var i=0;i<this.m_printObjList.length;i++){this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.m_printObjList[i].getCaption(),"attrs":{"objInd":i},"onClick":function(){self.m_printObjList[this.getAttr("objInd")].onClick();}}));}}}
GridCommands.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_controlInsert||this.m_controlEdit||this.m_controlCopy||this.m_controlDelete||this.m_controlPrint||this.m_controlColumnManager||this.m_controlRefresh||this.m_controlSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":"Выбрать","onClick":function(){self.m_grid.onSelect();}}));}}
GridCommands.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlSearch)this.m_popUpMenu.addButton(this.m_controlSearch);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);this.printObjToPopUp();}
GridCommands.prototype.getControlInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.getCmdInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.setControlInsert=function(v){this.m_controlInsert=v;}
GridCommands.prototype.getControlEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.getCmdEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.setControlEdit=function(v){this.m_controlEdit=v;}
GridCommands.prototype.getControlCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.getCmdCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.setControlCopy=function(v){this.m_controlCopy=v;}
GridCommands.prototype.getControlDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.getCmdDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.setControlDelete=function(v){this.m_controlDelete=v;}
GridCommands.prototype.getControlPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.getCmdPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
GridCommands.prototype.getControlRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.getCmdRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.setControlRefresh=function(v){this.m_controlRefresh=v;}
GridCommands.prototype.getControlFilter=function(){return this.m_controlFilter;}
GridCommands.prototype.setControlFilter=function(v){this.m_controlFilter=v;}
GridCommands.prototype.getControlFilterToggle=function(){return this.m_controlFilterToggle;}
GridCommands.prototype.setControlFilterToggle=function(v){this.m_controlFilterToggle=v;}
GridCommands.prototype.getControlColumnManager=function(){return this.m_controlColumnManager;}
GridCommands.prototype.setControlColumnManager=function(v){this.m_controlColumnManager=v;}
GridCommands.prototype.getControlPrintObj=function(){return this.m_controlPrintObj;}
GridCommands.prototype.setControlPrintObj=function(v){this.m_controlPrintObj=v;}
GridCommands.prototype.getControlSearch=function(){return this.m_controlSearch;}
GridCommands.prototype.setControlSearch=function(v){this.m_controlSearch=v;}
GridCommands.prototype.onColumnManager=function(){var btnCont=this;var self=this;this.m_colManform=new WindowFormModalBS(uuid(),{"content":new ViewGridColumnManager(uuid(),{"grid":this.m_grid,"onClose":function(){btnCont.m_colManform.close();self.m_grid.onRefresh.call(self.m_grid);},"app":this.getApp()})});this.m_colManform.open();} 
function GridCmd(id,options){options=options||{};this.m_id=id;this.m_grid=options.grid;this.m_app=options.app;this.setShowCmdControl((options.showCmdControl!=undefined)?options.showCmdControl:true);this.setShowCmdControlInPopup((options.showCmdControlInPopup!=undefined)?options.showCmdControlInPopup:true);var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_onCommand=options.onCommand||this.onCommand;this.m_controls=options.controls||[new btn_class(id,{"glyph":options.glyph,"caption":options.caption,"onClick":function(e){self.m_onCommand.call(self,e);},"attrs":{"title":this.TITLE},"app":options.app})];}
GridCmd.prototype.m_id;GridCmd.prototype.m_controls;GridCmd.prototype.m_app;GridCmd.prototype.m_grid;GridCmd.prototype.m_showCmdControl;GridCmd.prototype.m_showCmdControlInPopup;GridCmd.prototype.getShowCmdControl=function(){return this.m_showCmdControl;}
GridCmd.prototype.setShowCmdControl=function(v){this.m_showCmdControl=v;}
GridCmd.prototype.getShowCmdControlInPopup=function(){return this.m_showCmdControlInPopup;}
GridCmd.prototype.setShowCmdControlInPopup=function(v){this.m_showCmdControlInPopup=v;}
GridCmd.prototype.setGrid=function(v){this.m_grid=v;}
GridCmd.prototype.addControl=function(control){this.m_controls.push(control);}
GridCmd.prototype.getControl=function(ind){return(ind>=0&&ind<this.m_controls.length)?this.m_controls[ind]:undefined;}
GridCmd.prototype.controlsToContainer=function(container){this.m_container=container;for(var i=0;i<this.m_controls.length;i++){container.addElement(this.m_controls[i]);}}
GridCmd.prototype.controlsToPopUp=function(popUp){for(var i=0;i<this.m_controls.length;i++){popUp.addButton(this.m_controls[i]);}}
GridCmd.prototype.getApp=function(){return this.m_app;}
GridCmd.prototype.setApp=function(v){this.m_app=v;}
GridCmd.prototype.onCommand=function(){} 
function GridCmdContainer(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;GridCmdContainer.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdPrintObj=(options.printObjList!=undefined)?true:((options.cmdPrintObj!=undefined)?options.cmdPrintObj:false);options.cmdSearch=(options.cmdSearch!=undefined)?options.cmdSearch:true;options.cmdColManager=(options.cmdColManager!=undefined)?options.cmdColManager:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:(options.filters!=undefined);options.cmdFilterSave=(options.cmdFilterSave!=undefined)?options.cmdFilterSave:(options.cmdFilter==true);options.cmdFilterOpen=(options.cmdFilterOpen!=undefined)?options.cmdFilterOpen:(options.cmdFilter==true);options.cmdAllCommands=(options.cmdAllCommands!=undefined)?options.cmdAllCommands:true;if(options.cmdInsert){this.setCmdInsert((typeof(options.cmdInsert)=="object")?options.cmdInsert:new GridCmdInsert(id+":insert",{"app":options.app}));}
if(options.cmdEdit){this.setCmdEdit((typeof(options.cmdEdit)=="object")?options.cmdEdit:new GridCmdEdit(id+":edit",{"app":options.app}));}
if(options.cmdCopy){this.setCmdCopy((typeof(options.cmdCopy)=="object")?options.cmdCopy:new GridCmdCopy(id+":copy",{"app":options.app}));}
if(options.cmdDelete){this.setCmdDelete((typeof(options.cmdDelete)=="object")?options.cmdDelete:new GridCmdDelete(id+":delete",{"app":options.app}));}
if(options.cmdColManager){this.setCmdColManager((typeof(options.cmdColManager)=="object")?options.cmdColManager:new GridCmdColManager(id+":colManager",{"colTemplate":options.colTemplate,"colVisivilityParamId":options.colVisivilityParamId,"colOrderParamId":options.colOrderParamId,"colFilterParamId":options.colFilterParamId,"app":options.app}));}
if(options.cmdPrint){this.setCmdPrint((typeof(options.cmdPrint)=="object")?options.cmdPrint:new GridCmdPrint(id+":print",{"app":options.app}));}
if(options.cmdRefresh){this.setCmdRefresh((typeof(options.cmdRefresh)=="object")?options.cmdRefresh:new GridCmdRefresh(id+":print",{"app":options.app}));}
if(options.cmdPrintObj){this.setCmdPrintObj((typeof(options.cmdPrintObj)=="object")?options.PrintObj:new GridCmdPrintObj(id+":printObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds,"app":options.app}));}
if(options.cmdSearch){this.setCmdSearch((typeof(options.cmdSearch)=="object")?options.cmdSearch:new GridCmdSearch(id+":search",{"app":options.app}));}
if(options.cmdFilter){if(options.cmdFilterSave){this.setCmdFilterSave((typeof(options.cmdFilterSave)=="object")?options.cmdFilterSave:new GridCmdFilterSave(id+":filterSave",{"storageName":options.colTemplate,"dataCol":"filter_data","app":options.app}));}
if(options.cmdFilterOpen){this.setCmdFilterOpen((typeof(options.cmdFilterOpen)=="object")?options.cmdFilterOpen:new GridCmdFilterOpen(id+":filterOpen",{"storageName":options.colTemplate,"dataCol":"filter_data","app":options.app}));}
this.setCmdFilter((typeof(options.cmdFilter)=="object")?options.cmdFilter:new GridCmdFilter(id+":filter",{"filters":options.filters,"controlSave":this.getCmdFilterSave(),"controlOpen":this.getCmdFilterOpen(),"variantStorageModel":options.variantStorageModel,"app":options.app}));}
if(options.cmdAllCommands){this.setCmdAllCommands((typeof(options.cmdAllCommands)=="object")?options.cmdAllCommands:new GridCmdAllCommands(id+":allCommands",{"app":options.app}));}
this.m_popUpMenu=options.popUpMenu;this.m_commands=options.commands||[];this.addControls();}
extend(GridCmdContainer,ControlContainer);GridCmdContainer.prototype.DEF_TAG_NAME="div";GridCmdContainer.prototype.DEF_CLASS_NAME="cmdButtons";GridCmdContainer.prototype.m_grid;GridCmdContainer.prototype.m_cmdInsert;GridCmdContainer.prototype.m_cmdEdit;GridCmdContainer.prototype.m_cmdCopy;GridCmdContainer.prototype.m_cmdDelete;GridCmdContainer.prototype.m_cmdPrint;GridCmdContainer.prototype.m_cmdRefresh;GridCmdContainer.prototype.m_cmdColManager;GridCmdContainer.prototype.m_cmdPrintObj;GridCmdContainer.prototype.m_cmdSearch;GridCmdContainer.prototype.m_cmdFilter;GridCmdContainer.prototype.m_cmdFilterSave;GridCmdContainer.prototype.m_cmdFilterOpen;GridCmdContainer.prototype.m_cmdAllCommands;GridCmdContainer.prototype.m_popUpMenu;GridCmdContainer.prototype.addCommands=function(){if(this.m_cmdInsert){this.m_commands.push(this.m_cmdInsert);}
if(this.m_cmdEdit){this.m_commands.push(this.m_cmdEdit);}
if(this.m_cmdCopy){this.m_commands.push(this.m_cmdCopy);}
if(this.m_cmdDelete){this.m_commands.push(this.m_cmdDelete);}
if(this.m_cmdPrint){this.m_commands.push(this.m_cmdPrint);}
if(this.m_cmdColManager){this.m_commands.push(this.m_cmdColManager);}
if(this.m_cmdRefresh){this.m_commands.push(this.m_cmdRefresh);}
if(this.m_cmdPrintObj){this.m_commands.push(this.m_cmdPrintObj);}
if(this.m_cmdSearch){this.m_commands.push(this.m_cmdSearch);}
if(this.m_cmdFilter){this.m_commands.push(this.m_cmdFilter);}
if(this.m_cmdFilterSave){this.m_commands.push(this.m_cmdFilterSave);}
if(this.m_cmdFilterOpen){this.m_commands.push(this.m_cmdFilterOpen);}
if(this.m_cmdAllCommands){this.m_commands.push(this.m_cmdAllCommands);}}
GridCmdContainer.prototype.addControls=function(){this.addCommands();for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}
if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCmdContainer.prototype.setGrid=function(v){this.m_grid=v;for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].setGrid(v);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCmdContainer.prototype.getGrid=function(){return this.m_grid;}
GridCmdContainer.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_cmdInsert||this.m_cmdEdit||this.m_cmdCopy||this.m_cmdDelete||this.m_cmdPrint||this.m_cmdColManager||this.m_cmdRefresh||this.m_cmdSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.GRID_SELECT_POPUP_CAPTION,"onClick":function(){self.m_grid.onSelect();}}));}}
GridCmdContainer.prototype.toPopUp=function(){for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControlInPopup()){this.m_commands[i].controlsToPopUp(this.m_popUpMenu);}}}
GridCmdContainer.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
GridCmdContainer.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
GridCmdContainer.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
GridCmdContainer.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
GridCmdContainer.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
GridCmdContainer.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
GridCmdContainer.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
GridCmdContainer.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
GridCmdContainer.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
GridCmdContainer.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
GridCmdContainer.prototype.getCmdRefresh=function(){return this.m_cmdRefresh;}
GridCmdContainer.prototype.setCmdRefresh=function(v){this.m_cmdRefresh=v;}
GridCmdContainer.prototype.getCmdColManager=function(){return this.m_cmdColManager;}
GridCmdContainer.prototype.setCmdColManager=function(v){this.m_cmdColManager=v;}
GridCmdContainer.prototype.getCmdPrintObj=function(){return this.m_cmdPrintObj;}
GridCmdContainer.prototype.setCmdPrintObj=function(v){this.m_cmdPrintObj=v;}
GridCmdContainer.prototype.getCmdSearch=function(){return this.m_cmdSearch;}
GridCmdContainer.prototype.setCmdSearch=function(v){this.m_cmdSearch=v;}
GridCmdContainer.prototype.getCmdFilter=function(){return this.m_cmdFilter;}
GridCmdContainer.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
GridCmdContainer.prototype.getCmdFilterSave=function(){return this.m_cmdFilterSave;}
GridCmdContainer.prototype.setCmdFilterSave=function(v){this.m_cmdFilterSave=v;}
GridCmdContainer.prototype.getCmdFilterOpen=function(){return this.m_cmdFilterOpen;}
GridCmdContainer.prototype.setCmdFilterOpen=function(v){this.m_cmdFilterOpen=v;}
GridCmdContainer.prototype.getCmdAllCommands=function(){return this.m_cmdAllCommands;}
GridCmdContainer.prototype.setCmdAllCommands=function(v){this.m_cmdAllCommands=v;} 
GridCmdContainer.prototype.GRID_SELECT_POPUP_CAPTION="Выбрать"; 
function GridCmdContainerAjx(id,options){options=options||{};options.tagName="template";options.template=options.template||options.app.getTemplate("GridCmdContainerAjx");options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;if(options.cmdExport){this.setCmdExport((typeof(options.cmdExport)=="object")?options.cmdExport:new GridCmdExport(id+":export",{"app":options.app}));}
GridCmdContainerAjx.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerAjx,GridCmdContainer);GridCmdContainerAjx.prototype.m_cmdExport;GridCmdContainerAjx.prototype.addCommands=function(){GridCmdContainerAjx.superclass.addCommands.call(this);if(this.m_cmdExport){this.m_commands.push(this.m_cmdExport);}}
GridCmdContainerAjx.prototype.getCmdExport=function(){return this.m_cmdExport;}
GridCmdContainerAjx.prototype.setCmdExport=function(v){this.m_cmdExport=v;} 
function GridCmdContainerDOC(id,options){options=options||{};options.cmdDOCUnprocess=(options.cmdDOCUnprocess!=undefined)?options.cmdDOCUnprocess:false;options.cmdDOCShowActs=(options.cmdDOCShowActs!=undefined)?options.cmdDOCShowActs:options.cmdDOCUnprocess;if(options.cmdDOCUnprocess){this.setCmdDOCUnprocess((typeof(options.cmdDOCUnprocess)=="object")?options.cmdDOCUnprocess:new GridCmdDOCUnprocess(id+":unprocess",{"app":options.app}));}
if(options.cmdDOCShowActs){this.setCmdDOCShowActs((typeof(options.cmdDOCShowActs)=="object")?options.cmdDOCShowActs:new GridCmdDOCShowActs(id+":showActs",{"app":options.app}));}
GridCmdContainerDOC.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerDOC,GridCmdContainerAjx);GridCmdContainerDOC.prototype.m_cmdDOCUnprocess;GridCmdContainerDOC.prototype.m_cmdDOCShowActs;GridCmdContainerDOC.prototype.addCommands=function(){GridCmdContainerDOC.superclass.addCommands.call(this);if(this.m_cmdDOCUnprocess){this.m_commands.push(this.m_cmdDOCUnprocess);}
if(this.m_cmdDOCShowActs){this.m_commands.push(this.m_cmdDOCShowActs);}}
GridCmdContainerDOC.prototype.getCmdDOCUnprocess=function(){return this.m_cmdDOCUnprocess;}
GridCmdContainerDOC.prototype.setCmdDOCUnprocess=function(v){this.m_cmdDOCUnprocess=v;}
GridCmdContainerDOC.prototype.getCmdDOCShowActs=function(){return this.m_cmdDOCShowActs;}
GridCmdContainerDOC.prototype.setCmdDOCShowActs=function(v){this.m_cmdDOCShowActs=v;} 
function GridCmdInsert(id,options){options=options||{};options.caption=this.CAPTION;options.showCmdControl=true;GridCmdInsert.superclass.constructor.call(this,id,options);}
extend(GridCmdInsert,GridCmd);GridCmdInsert.prototype.onCommand=function(){this.m_grid.onInsert();} 
GridCmdInsert.prototype.TITLE="Создать новую запись";GridCmdInsert.prototype.CAPTION="Добавить"; 
function GridCmdEdit(id,options){options=options||{};options.glyph="glyphicon-pencil";options.showCmdControl=false;GridCmdEdit.superclass.constructor.call(this,id,options);}
extend(GridCmdEdit,GridCmd);GridCmdEdit.prototype.onCommand=function(){this.m_grid.onEdit();} 
GridCmdEdit.prototype.TITLE="Редактировать текущую запись"; 
function GridCmdCopy(id,options){options=options||{};options.glyph="glyphicon-copy";options.showCmdControl=false;GridCmdCopy.superclass.constructor.call(this,id,options);}
extend(GridCmdCopy,GridCmd);GridCmdCopy.prototype.onCommand=function(){this.m_grid.onCopy();} 
GridCmdCopy.prototype.TITLE="Скопировать текущую запись"; 
function GridCmdDelete(id,options){options=options||{};options.glyph="glyphicon-remove";options.showCmdControl=false;GridCmdDelete.superclass.constructor.call(this,id,options);}
extend(GridCmdDelete,GridCmd);GridCmdDelete.prototype.onCommand=function(){this.m_grid.onDelete();} 
GridCmdDelete.prototype.TITLE="Удалить текущую запись"; 
function GridCmdColManager(id,options){options=options||{};options.glyph="glyphicon-th-list";options.showCmdControl=false;this.m_colOrderParamId=options.colOrderParamId||this.DEF_ORDER_PARAM_ID;this.m_colVisibilityParamId=options.colVisibilityParamId||this.DEF_VISIBILITY_PARAM_ID;this.m_colFilterParamId=options.colFilterParamId||this.DEF_FILTER_PARAM_ID;this.m_colTemplate=options.colTemplate;GridCmdColManager.superclass.constructor.call(this,id,options);}
extend(GridCmdColManager,GridCmd);GridCmdColManager.prototype.colManform;GridCmdColManager.prototype.m_colTemplate;GridCmdColManager.prototype.m_colOrderParamId;GridCmdColManager.prototype.m_colVisibilityParamId;GridCmdColManager.prototype.m_colFilterParamId;GridCmdColManager.prototype.DEF_VISIBILITY_PARAM_ID="gridColVisibility";GridCmdColManager.prototype.DEF_FILTER_PARAM_ID="gridColFilter";GridCmdColManager.prototype.DEF_ORDER_PARAM_ID="gridColOrder";GridCmdColManager.prototype.onCommand=function(){var btnCont=this;var self=this;this.m_colManform=new WindowFormModalBS(CommonHelper.uniqid(),{"content":new ViewGridColManager("ViewGridColManager",{"grid":this.m_grid,"colTemplate":this.m_colTemplate,"colOrderParamId":this.m_colOrderParamId,"colVisibilityParamId":this.m_colVisibilityParamId,"colFilterParamId":this.m_colFilterParamId,"onClose":function(){btnCont.m_colManform.close();self.m_grid.onRefresh.call(self.m_grid);},"app":this.getApp()})});this.m_colManform.open();}
GridCmdColManager.prototype.getColOrder=function(){return this.getApp().getTemplateParam(this.m_colTemplate,this.m_colOrderParamId);}
GridCmdColManager.prototype.getColVisibility=function(){return this.getApp().getTemplateParam(this.m_colTemplate,this.m_colVisibilityParamId);}
GridCmdColManager.prototype.getColFilter=function(){return this.getApp().getTemplateParam(this.m_colTemplate,this.m_colFilterParamId);}
GridCmdColManager.prototype.saveTemplate=function(templateId,paramId,paramVal,callBackOk){var self=this;var contr=new TemplateParam_Controller(this.getApp());var pm=contr.getPublicMethod("set_value");pm.setFieldValue("template",templateId);pm.setFieldValue("param",paramId);pm.setFieldValue("val",paramVal);pm.run({"ok":function(resp){callBackOk.call(this);window.showNote(self.NOTE_SAVED);}});}
GridCmdColManager.prototype.init=function(){var t_params=this.getApp().getTemplateParams(this.m_colTemplate);t_params[this.m_colVisibilityParamId]=t_params[this.m_colVisibilityParamId]||[];t_params[this.m_colOrderParamId]=t_params[this.m_colOrderParamId]||[];t_params[this.m_colFilterParamId]=t_params[this.m_colFilterParamId]||[];var head=this.m_grid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.getInitColumns();var vis_cols={};for(var ind=0;ind<t_params[this.m_colVisibilityParamId].length;ind++){var col=t_params[this.m_colVisibilityParamId][ind].colId;t_params[this.m_colVisibilityParamId][ind].colRef=columns[col];vis_cols[col]=col;}
var ord_cols={};for(var ind=0;ind<t_params[this.m_colOrderParamId].length;ind++){var col=t_params[this.m_colOrderParamId][ind].colId;t_params[this.m_colOrderParamId][ind].colRef=columns[col];ord_cols[col]=col;}
for(var col in columns){if(!vis_cols[col]){t_params[this.m_colVisibilityParamId].push({"colId":col,"checked":true,"colRef":columns[col]});}
if(!ord_cols[col]&&columns[col].getSortable()){var sort_cols=columns[col].getSortFieldId();var sort_dir=columns[col].getSort();if(!sort_cols){sort_dir="";sort_cols="";var cols=columns[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols+=(sort_cols=="")?"":",";sort_cols+=cols[i].getField().getId();sort_dir+=(sort_dir=="")?"":",";sort_dir+="asc";}}
t_params[this.m_colOrderParamId].push({"colId":col,"fields":sort_cols,"directs":sort_dir,"checked":(sort_dir.length>0),"colRef":columns[col]});}}}} 
GridCmdColManager.prototype.TITLE="Открыть форму настройки колонок";GridCmdColManager.prototype.NOTE_SAVED="Сохранение выполнено"; 
function GridCmdPrint(id,options){options=options||{};options.glyph="glyphicon-print";options.showCmdControl=false;GridCmdPrint.superclass.constructor.call(this,id,options);}
extend(GridCmdPrint,GridCmd);GridCmdPrint.prototype.onCommand=function(){this.m_grid.onPrint();} 
GridCmdPrint.prototype.TITLE="Распечатать список"; 
function GridCmdRefresh(id,options){options=options||{};options.glyph="glyphicon-refresh";options.showCmdControl=false;GridCmdRefresh.superclass.constructor.call(this,id,options);}
extend(GridCmdRefresh,GridCmd);GridCmdRefresh.prototype.onCommand=function(){this.m_grid.onRefresh();} 
GridCmdRefresh.prototype.TITLE="Обновить содержимое списка"; 
function GridCmdPrintObj(id,options){options=options||{};options.showCmdControlInPopup=false;var self=this;options.controls=[new ButtonPrintList(id,{"printList":options.printList,"keyIds":options.keyIds,"app":options.app})];GridCmdPrintObj.superclass.constructor.call(this,id,options);}
extend(GridCmdPrintObj,GridCmd);GridCmdPrintObj.prototype.controlsToPopUp=function(popUp){if(this.m_controls.length){var self=this;popUp.addButton(new ButtonCtrl(null,{"caption":"Печатные формы","attrs":{"objInd":0},"onClick":function(){}}));}}
GridCmdPrintObj.prototype.setGrid=function(v){GridCmdPrintObj.superclass.setGrid.call(this,v);if(this.m_controls.length){this.m_controls[0].setGrid(v);}} 
function GridCmdSearch(id,options){options=options||{};options.showCmdControl=true;var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_setCtrl=new btn_class(id+":set",{"glyph":"glyphicon-zoom-in","onClick":function(){self.onCommand();},"attrs":{"title":this.TITLE},"app":options.app});this.m_unsetCtrl=new btn_class(id+":unset",{"glyph":"glyphicon-zoom-out","onClick":function(){self.onUnset();},"enabled":false,"attrs":{"title":this.TITLE_UNSET},"app":options.app});options.controls=[this.m_setCtrl,this.m_unsetCtrl];GridCmdSearch.superclass.constructor.call(this,id,options);}
extend(GridCmdSearch,GridCmd);GridCmdSearch.prototype.m_paramWhere;GridCmdSearch.prototype.m_paramSgn;GridCmdSearch.prototype.m_paramVal;GridCmdSearch.prototype.showDialog=function(str){var selected_node=this.m_grid.getSelectedNode();var cur_field_id=selected_node.getAttribute("fieldId");var columns=[];var rows=this.m_grid.getHead().m_elements;for(var r_id in rows){for(var col_id in rows[r_id].m_elements){columns.push({"id":col_id,"descr":rows[r_id].m_elements[col_id].getValue(),"current":(cur_field_id==col_id)});}}
var self=this;WindowSearch.show({"text":str,"columns":columns,"callBack":function(res,params){self.m_grid.focus();if(res==WindowSearch.RES_OK){self.doSearch(params);}},"app":this.m_app});}
GridCmdSearch.prototype.onCommand=function(){this.showDialog("");}
GridCmdSearch.prototype.onUnset=function(){if(this.m_filter){this.m_grid.unsetFilter(this.m_filter);var pag=this.m_grid.getPagination();if(pag)pag.reset();var self=this;this.m_grid.onRefresh(function(){self.m_unsetCtrl.setEnabled(false);self.m_grid.focus();});}}
GridCmdSearch.prototype.doSearch=function(params){if(params.search_str){var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();var s_pref=(params.how=="on_part")?"%":"";var s_posf=(params.how=="on_part"||params.how=="on_beg")?"%":"";var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();this.m_filter={"field":params.where,"sign":(params.how!="on_match")?contr.PARAM_SGN_LIKE:contr.PARAM_SGN_EQUAL,"val":s_pref+params.search_str+s_posf,"icase":"1"};this.m_grid.setFilter(this.m_filter);var pag=this.m_grid.getPagination();if(pag)pag.reset();var self=this;this.m_grid.onRefresh(function(){self.m_unsetCtrl.setEnabled(true);});}}
GridCmdSearch.prototype.setGrid=function(v){GridCmdSearch.superclass.setGrid.call(this,v);var self=this;v.setOnSearch(function(e){var ch=(e&&e.char)?e.char:null;if(ch){self.m_grid.setFocused(false);self.showDialog(ch);return true;}});v.setOnSearchDialog(function(){self.onCommand();});v.setOnSearchReset(function(){self.onUnset();});} 
GridCmdSearch.prototype.TITLE="Открыть форму поиска (ctrl+F)";GridCmdSearch.prototype.TITLE_UNSET="Отменить поиск (ctrl+G)"; 
function GridCmdExport(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-download-alt";GridCmdExport.superclass.constructor.call(this,id,options);}
extend(GridCmdExport,GridCmd);GridCmdExport.prototype.onCommand=function(){this.m_grid.getReadPublicMethod().download("ViewExcel");} 
GridCmdExport.prototype.TITLE="Экспорт списка в файл Excel"; 
function GridCmdAllCommands(id,options){options=options||{};options.glyph="glyphicon-collapse-down";options.caption=this.CAPTION;options.showCmdControl=true;options.showCmdControlInPopup=false;GridCmdAllCommands.superclass.constructor.call(this,id,options);}
extend(GridCmdAllCommands,GridCmd);GridCmdAllCommands.prototype.onCommand=function(e){var m=this.m_grid.getPopUpMenu();if(m){if(m.getVisible()){m.hide();}
else{m.show(e,this.m_controls[0].getNode());}}} 
GridCmdAllCommands.prototype.TITLE="Показать все команды";GridCmdAllCommands.prototype.CAPTION="Все команды"; 
function GridCmdDOCUnprocess(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-unchecked";GridCmdDOCUnprocess.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCUnprocess,GridCmd);GridCmdDOCUnprocess.prototype.onCommand=function(){var self=this;WindowQuestion.show({"cancel":false,"text":this.CONFIRM,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.doDelete();}}});}
GridCmdDOCUnprocess.prototype.doDelete=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.NOTE_DELETED);}})}} 
GridCmdDOCUnprocess.prototype.TITLE="Отменить проведение документа";GridCmdDOCUnprocess.prototype.CONFIRM="Отменить проведение документа?";GridCmdDOCUnprocess.prototype.NOTE_DELETED="Отменено проведение документа."; 
function GridCmdDOCShowActs(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-log-in";GridCmdDOCShowActs.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCShowActs,GridCmd);GridCmdDOCShowActs.prototype.onCommand=function(){alert("GridCmdDOCShowActs.prototype.onCommand");} 
GridCmdDOCShowActs.prototype.TITLE="Показать движения документа"; 
function GridCmdRowUp(id,options){options=options||{};options.glyph="glyphicon-arrow-up";options.showCmdControl=true;GridCmdRowUp.superclass.constructor.call(this,id,options);}
extend(GridCmdRowUp,GridCmd);GridCmdRowUp.prototype.onCommand=function(){this.m_grid.onRowUp();} 
GridCmdRowUp.prototype.TITLE="На одну строку вверх"; 
function GridCmdRowDown(id,options){options=options||{};options.glyph="glyphicon-arrow-down";options.showCmdControl=true;GridCmdRowDown.superclass.constructor.call(this,id,options);}
extend(GridCmdRowDown,GridCmd);GridCmdRowDown.prototype.onCommand=function(){this.m_grid.onRowDown();} 
GridCmdRowDown.prototype.TITLE="На одну строку вниз"; 
function GridCmdFilter(id,options){options=options||{};options.glyph="glyphicon-filter";this.m_variantStorageModel=options.variantStorageModel;this.setFilters(options.filters);this.setControlSave(options.controlSave);this.setControlOpen(options.controlOpen);GridCmdFilter.superclass.constructor.call(this,id,options);this.m_controls[0].setVisible(true);}
extend(GridCmdFilter,GridCmd);GridCmdFilter.prototype.m_filter;GridCmdFilter.prototype.m_controlSave;GridCmdFilter.prototype.m_controlOpen;GridCmdFilter.prototype.m_gridRefresh;GridCmdFilter.prototype.m_pop;GridCmdFilter.prototype.m_variantStorageModel;GridCmdFilter.prototype.setFilterVisibile=function(v){this.m_grid.setRefreshInterval((v)?0:this.m_gridRefresh);this.m_pop.setVisible(v);if(!v){this.m_grid.focus();}}
GridCmdFilter.prototype.refreshGrid=function(){var pag=this.m_grid.getPagination();if(pag){pag.reset();}
var self=this;this.m_grid.onRefresh(function(){self.setFilterVisibile(false);});}
GridCmdFilter.prototype.onCommand=function(e){if(!this.m_pop){var self=this;this.m_pop=new PopOver(this.m_id+":popover",{"caption":this.TITLE,"className":window.getBsCol(8),"contentElements":[new GridCmdFilterView(this.m_id+":cont",{"filter":this.m_filter,"onApplyFilters":function(){self.m_filter.applyFilters(self.m_grid);self.refreshGrid();},"onResetFilters":function(){self.m_filter.resetFilters(self.m_grid);self.refreshGrid();},"controlSave":this.getControlSave(),"controlOpen":this.getControlOpen()})],"app":this.m_app});this.m_gridRefresh=this.m_grid.getRefreshInterval();this.m_grid.setRefreshInterval(0)
this.m_pop.toDOM(e,this.m_controls[0].getNode());}
else{this.setFilterVisibile(!this.m_pop.getVisible());}}
GridCmdFilter.prototype.getFilters=function(){return this.m_filter;}
GridCmdFilter.prototype.setFilters=function(v){this.m_filter=new ModelFilter({"filters":v});if(this.m_variantStorageModel&&this.m_variantStorageModel.getRow(0)){this.getFilters().unserialize(this.m_variantStorageModel.getFieldValue("filter_data"));}}
GridCmdFilter.prototype.applyFilters=function(){if(this.m_pop){this.m_filter.applyFilters(this.m_grid);}}
GridCmdFilter.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilter.prototype.setControlSave=function(v){this.m_controlSave=v;this.m_controlSave.setCmdFilter(this);}
GridCmdFilter.prototype.getControlOpen=function(v){return this.m_controlOpen;}
GridCmdFilter.prototype.setControlOpen=function(v){this.m_controlOpen=v;this.m_controlOpen.setCmdFilter(this);} 
GridCmdFilter.prototype.TITLE="Настройка отбора"; 
function GridCmdFilterView(id,options){options=options||{};options.template=window.getApp().getTemplate("GridCmdFilterView");GridCmdFilterView.superclass.constructor.call(this,id,"template",options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet||options.controlSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":set",{"caption":this.SET_CAP,"onClick":function(){self.applyFilters();},"attrs":{"title":this.SET_TITLE},"app":window.getApp()}));}
if(options.cmdUnset||options.controlUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":unset",{"caption":this.UNSET_CAP,"onClick":function(){self.resetFilters();},"attrs":{"title":this.UNSET_TITLE},"app":window.getApp()}));}
if(options.controlSave){this.m_origSave=options.controlSave.getControl(0);this.setControlSave(new ButtonCmd(id+":save",{"glyph":this.m_origSave.getGlyph(),"onClick":function(){options.controlSave.onCommand();},"attrs":{"title":this.m_origSave.getAttr("title")},"app":window.getApp()}));}
if(options.controlOpen){this.m_origOpen=options.controlOpen.getControl(0);this.setControlSave(new ButtonCmd(id+":open",{"glyph":this.m_origOpen.getGlyph(),"onClick":function(){options.controlOpen.onCommand();},"attrs":{"title":this.m_origOpen.getAttr("title")},"app":window.getApp()}));}
this.setFilter(options.filter);this.setOnApplyFilters(options.onApplyFilters);this.setOnResetFilters(options.onResetFilters);}
extend(GridCmdFilterView,ControlContainer);GridCmdFilterView.prototype.m_controlSet;GridCmdFilterView.prototype.m_controlUnset;GridCmdFilterView.prototype.m_controlSave;GridCmdFilterView.prototype.m_controlOpen;GridCmdFilterView.prototype.addControls=function(v){this.clear();if(this.m_filter){var filters=this.m_filter.getFilters();for(var id in filters){this.addElement(filters[id].binding.getControl());}}
if(this.m_controlSet)this.addElement(this.m_controlSet);if(this.m_controlUnset)this.addElement(this.m_controlUnset);if(this.m_controlSave)this.addElement(this.m_controlSave);if(this.m_controlOpen)this.addElement(this.m_controlOpen);}
GridCmdFilterView.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridCmdFilterView.prototype.getControlSet=function(){return this.m_controlSet;}
GridCmdFilterView.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridCmdFilterView.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridCmdFilterView.prototype.setFilter=function(v){this.m_filter=v;this.addControls();}
GridCmdFilterView.prototype.getFilter=function(){return this.m_filter;}
GridCmdFilterView.prototype.setOnApplyFilters=function(v){this.m_onApplyFilters=v;}
GridCmdFilterView.prototype.getOnApplyFilters=function(){return this.m_onApplyFilters;}
GridCmdFilterView.prototype.setOnResetFilters=function(v){this.m_onResetFilters=v;}
GridCmdFilterView.prototype.getOnResetFilters=function(){return this.m_onResetFilters;}
GridCmdFilterView.prototype.applyFilters=function(){if(this.m_filter){if(this.m_onApplyFilters){this.m_onApplyFilters();}}}
GridCmdFilterView.prototype.resetFilters=function(){if(this.m_filter){if(this.m_onResetFilters){this.m_onResetFilters();}}}
GridCmdFilterView.prototype.setControlSave=function(v){this.m_controlSave=v;}
GridCmdFilterView.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilterView.prototype.setControlOpen=function(v){this.m_controlOpen=v;}
GridCmdFilterView.prototype.getControlOpen=function(v){return this.m_controlOpen;} 
GridCmdFilterView.prototype.SET_CAP="Отобрать";GridCmdFilterView.prototype.SET_TITLE="Применить выбранные параметры отбора";GridCmdFilterView.prototype.UNSET_CAP="Отменить";GridCmdFilterView.prototype.UNSET_TITLE="Сбросить настройки отбора"; 
function GridCmdFilterSave(id,options){options=options||{};options.glyph="glyphicon-save";options.showCmdControl=false;this.m_storageName=options.storageName;this.m_dataCol=options.dataCol;GridCmdFilterSave.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterSave,GridCmd);GridCmdFilterSave.prototype.m_form;GridCmdFilterSave.prototype.m_view;GridCmdFilterSave.prototype.m_cmdFilter;GridCmdFilterSave.prototype.m_storageName;GridCmdFilterSave.prototype.m_dataCol;GridCmdFilterSave.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);this.m_view=new VariantStorageSaveView("VariantStorageSaveView",{"storageName":this.m_storageName,"onClose":function(){self.formClose();},"app":this.getApp()});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.saveVariant();},"onClickCancel":function(){self.formClose();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
GridCmdFilterSave.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
GridCmdFilterSave.prototype.saveVariant=function(v){var pm=(new VariantStorage_Controller(window.getApp())).getPublicMethod("upsert_"+this.m_dataCol);pm.setFieldValue("storage_name",this.m_storageName);pm.setFieldValue("variant_name",this.m_view.getElement("name").getValue());pm.setFieldValue("default_variant",this.m_view.getElement("default_variant").getValue());pm.setFieldValue(this.m_dataCol,this.m_cmdFilter.getFilters().serialize());var self=this;pm.run({"ok":function(resp){self.formClose();}});}
GridCmdFilterSave.prototype.formClose=function(){this.m_form.close();this.m_cmdFilter.setFilterVisibile(true);} 
GridCmdFilterSave.prototype.TITLE="Сохранить настройку"; 
function GridCmdFilterOpen(id,options){options=options||{};options.glyph="glyphicon-open";options.showCmdControl=false;this.m_storageName=options.storageName;this.m_dataCol=options.dataCol;GridCmdFilterOpen.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterOpen,GridCmd);GridCmdFilterOpen.prototype.m_cmdFilter;GridCmdFilterOpen.prototype.m_storageName;GridCmdFilterOpen.prototype.m_form;GridCmdFilterOpen.prototype.m_dataCol;GridCmdFilterOpen.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);this.m_view=new VariantStorageOpenView("VariantStorageOpenView",{"storageName":this.m_storageName,"onClose":function(){self.closeForm();},"onSelect":function(fields){self.loadVariant(fields);},"app":this.getApp()});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.loadVariant(self.m_view.getElement("variants").getModelRow());},"onClickCancel":function(){self.closeForm();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
GridCmdFilterOpen.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
GridCmdFilterOpen.prototype.loadVariant=function(fields){var pm=(new VariantStorage_Controller(window.getApp())).getPublicMethod("get_"+this.m_dataCol);pm.setFieldValue("storage_name",this.m_storageName);pm.setFieldValue("variant_name",fields.variant_name.getValue());var self=this;pm.run({"ok":function(resp){var m=new VariantStorage_Model({"data":resp.getModelData("VariantStorage_Model")});if(m.getNextRow()){self.m_cmdFilter.getFilters().unserialize(m.getFieldValue(self.m_dataCol));self.closeForm();}}});}
GridCmdFilterOpen.prototype.closeForm=function(){this.m_form.close();this.m_cmdFilter.setFilterVisibile(true);} 
GridCmdFilterOpen.prototype.TITLE="Выбрать настройку"; 
function ViewGridColManager(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;ViewGridColManager.superclass.constructor.call(this,id,"template",options);this.addElement(new ViewGridColVisibility(id+":view-visibility",{"template":options.colTemplate,"paramId":options.colVisibilityParamId,"grid":options.grid,"app":options.app}));this.addElement(new ViewGridColOrder(id+":view-order",{"template":options.colTemplate,"paramId":options.colOrderParamId,"grid":options.grid,"app":options.app}));this.addElement(new ButtonCmd(id+":cmdClose",{"caption":this.CLOSE_CAP,"attrs":{"title":this.CLOSE_TITLE},"onClick":function(){self.m_onClose.call(self);},"app":options.app}));}
extend(ViewGridColManager,ControlContainer); 
ViewGridColManager.prototype.VISIB_MENU_CAP="Видимость";ViewGridColManager.prototype.SORT_MENU_CAP="Сортировка";ViewGridColManager.prototype.CLOSE_CAP="Закрыть";ViewGridColManager.prototype.CLOSE_TITLE="Закрыть форму";ViewGridColManager.prototype.TAB_COLUMNS="Колонки";ViewGridColManager.prototype.TAB_SORT="Сортировка";ViewGridColManager.prototype.HEADER="Настройка списка"; 
function ViewGridColParam(id,options){options=options||{};ViewGridColParam.superclass.constructor.call(this,id,"div",options);this.m_paramId=options.paramId;this.m_template=options.template;this.m_dataGrid=options.grid;var head=new GridHead();var row=new GridRow(id+":row1");this.addHeadCells(row);head.addElement(row);var body=new GridBody();this.m_onAfterSave=options.onAfterSave;this.m_initVal=options.app.getTemplateParam(this.m_template,this.m_paramId);for(var col_ind=0;col_ind<this.m_initVal.length;col_ind++){var row=new GridRow(this.getId()+":grid:row-"+this.m_initVal[col_ind].colId,{"attrs":{"colId":this.m_initVal[col_ind].colId}});this.addCells(row,this.m_initVal[col_ind]);body.addElement(row);}
var popup_menu=new PopUpMenu();this.m_grid=new Grid(id+":grid",{"head":head,"body":body,"commands":new GridCmdContainer(id+":grid:cmd",{"cmdInsert":false,"cmdRefresh":false,"cmdPrint":false,"cmdSearch":false,"cmdColManager":false,"cmdAllCommands":false,"commands":[new GridCmdRowUp(id+":grid:cmd:rowUp"),new GridCmdRowDown(id+":grid:cmd:rowDown"),],"popUpMenu":popup_menu,}),"popUpMenu":popup_menu,"rowCommandPanelClass":null,"filter":null,"refreshInterval":0,"winObj":options.winObj});this.addElement(this.m_grid);var self=this;this.addElement(new ButtonCmd(id+":save",{"caption":this.SAVE_CAPTION,"attrs":{"title":this.SAVE_TITLE},"onClick":function(){self.save();}}));}
extend(ViewGridColParam,ControlContainer);ViewGridColParam.prototype.COL_CHECK_ID="check";ViewGridColParam.prototype.COL_NAME_ID="name";ViewGridColParam.prototype.save=function(){var b=this.m_grid.getBody();var param_val=[];for(var row_id in b.m_elements){this.getRowData(b.m_elements[row_id],param_val);}
var param_val_str=CommonHelper.serialize(param_val);if(param_val_str!=CommonHelper.serialize(this.m_initVal)){var self=this;var contr=new TemplateParam_Controller(this.getApp());var pm=contr.getPublicMethod("set_value");pm.setFieldValue("template",this.m_template);pm.setFieldValue("param",this.m_paramId);pm.setFieldValue("val",param_val_str);pm.run({"ok":function(resp){for(var i=0;i<self.m_initVal.length;i++){param_val[i].colRef=self.m_initVal[i].colRef;}
self.m_initVal=param_val;self.onAfterSave();window.showNote(self.NOTE_SAVED);}});}}
ViewGridColParam.prototype.onAfterSave=function(){this.getApp().setTemplateParam(this.m_template,this.m_paramId,this.m_initVal);} 
ViewGridColParam.prototype.COLUMNS_COL_CAP="Колонки";ViewGridColParam.prototype.SAVE_CAPTION="Применить";ViewGridColParam.prototype.SAVE_TITLE="Применить изменения";ViewGridColParam.prototype.NOTE_SAVED="Изменения записаны."; 
function ViewGridColVisibility(id,options){options=options||{};ViewGridColVisibility.superclass.constructor.call(this,id,options);}
extend(ViewGridColVisibility,ViewGridColParam);ViewGridColVisibility.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));}
ViewGridColVisibility.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"},"app":this.getApp()})]}));row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));}
ViewGridColVisibility.prototype.getRowData=function(rowElem,struc){struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"checked":rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked()};}
ViewGridColVisibility.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.delDOM();head_row.setColumnOrder(this.m_initVal);}
head.toDOM(this.m_dataGrid.m_node);this.m_dataGrid.onRefresh();} 
ViewGridColVisibility.prototype.COLUMNS_CHECK_CAP="Видимость"; 
function ViewGridColOrder(id,options){options=options||{};ViewGridColOrder.superclass.constructor.call(this,id,options);}
extend(ViewGridColOrder,ViewGridColParam);ViewGridColOrder.prototype.COL_DIR_ID="dir";ViewGridColOrder.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_DIR_ID,{"value":this.COLUMNS_DIR_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));}
ViewGridColOrder.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.setAttr("fields",fStruc.fields);row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"},"app":this.getApp()})]}));var at_asc={};var at_desc={};if(fStruc.checked&&fStruc.directs=="asc"){at_asc.checked="checked";}
if(fStruc.checked&&fStruc.directs=="desc"){at_desc.checked="checked";}
row.addElement(new GridCell(pref+":"+this.COL_DIR_ID,{"elements":[new EditRadioGroup(pref+":"+this.COL_DIR_ID+":radiogroup",{"elements":[new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-asc",{"value":"asc","labelCaption":this.ASC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_asc,"app":this.getApp()}),new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-desc",{"value":"desc","labelCaption":this.DESC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_desc,"app":this.getApp()})],"app":this.getApp()})]}));row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));}
ViewGridColOrder.prototype.getRowData=function(rowElem,struc){var checked=rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked();var directs="undefined";if(checked){directs=rowElem.getElement(this.COL_DIR_ID).getElement("radiogroup").getValue();}
struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"fields":rowElem.getAttr("fields"),"directs":directs,"checked":checked};}
ViewGridColOrder.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var cols={};for(var i=0;i<this.m_initVal.length;i++){cols[this.m_initVal[i].colId]=this.m_initVal[i];}
var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.m_elements;for(var col_id in columns){if(cols[col_id]&&cols[col_id].checked){cols[col_id].colRef.setSortFieldId(cols[col_id].fields);cols[col_id].colRef.setSort(cols[col_id].directs);}
else{columns[col_id].setSort("");}}}
this.m_dataGrid.onRefresh();} 
ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Порядок";ViewGridColOrder.prototype.COLUMNS_CHECK_CAP="Сортировать";ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Направление возр./убыв.";ViewGridColOrder.prototype.ASC_CAP="По возр.";ViewGridColOrder.prototype.DESC_CAP="По убыв."; 
function VariantStorageSaveView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller(window.getApp());var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.storageName);VariantStorageSaveView.superclass.constructor.call(this,id,"template",options);this.addElement(new GridAjx(id+":variants",{"model":model,"keyIds":["storage_name"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"navigate":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false,"app":window.getApp()}),"head":new GridHead(id+"-variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:default_variant",{"colAttrs":{"colspan":2},"columns":[new GridColumn("default_variant",{"field":model.getField("default_variant"),"assocClassList":{"true":"glyphicon glyphicon-ok"}})]}),new GridCellHead(id+":variants:head:variant_name",{"columns":[new GridColumn("variant_name",{"field":model.getField("variant_name")})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true,"app":window.getApp()}));this.addElement(new EditString(id+":name",{"focus":true,"labelCaption":this.VARIANT_NAME_CAP,"className":window.getApp().getBsCol(12)}));this.addElement(new EditCheckBox(id+":default_variant",{"labelCaption":this.DEF_VARIANT_CAP,"className":window.getApp().getBsCol(12)}));var grid=this.getElement("variants");this.m_gridOnClick=grid.onClick;var self=this;grid.onClick=function(ev){var grid=self.getElement("variants");self.m_gridOnClick.call(grid,ev);var row=grid.getModelRow();self.getElement("default_variant").setValue(row.default_variant.getValue());var ctrl=self.getElement("name");ctrl.setValue(row.variant_name.getValue());ctrl.focus();}}
extend(VariantStorageSaveView,ControlContainer); 
VariantStorageSaveView.prototype.VARIANT_NAME_CAP="Наименование:";VariantStorageSaveView.prototype.DEF_VARIANT_CAP="Использовать при открытии:";VariantStorageSaveView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageSaveView.prototype.CMD_CANCEL_TITLE="Отменить запись";VariantStorageSaveView.prototype.CMD_OK_CAP="Записать";VariantStorageSaveView.prototype.CMD_OK_TITLE="Записать настройку";VariantStorageSaveView.prototype.HEAD_TITLE="Сохранение настройки"; 
function VariantStorageOpenView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller(window.getApp());var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.storageName);VariantStorageOpenView.superclass.constructor.call(this,id,"template",options);this.addElement(new GridAjx(id+":variants",{"model":model,"keyIds":["storage_name"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":true,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false,"app":window.getApp()}),"head":new GridHead(id+"-variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:variant_name",{"columns":[new GridColumn("variant_name",{"field":model.getField("variant_name")})],"sortable":true})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true,"onSelect":options.onSelect,"app":window.getApp()}));}
extend(VariantStorageOpenView,ControlContainer); 
VariantStorageOpenView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageOpenView.prototype.CMD_CANCEL_TITLE="Отменить выбор";VariantStorageOpenView.prototype.CMD_OK_CAP="Выбрать";VariantStorageOpenView.prototype.CMD_OK_TITLE="Выбрать настройку и закрыть форму";VariantStorageOpenView.prototype.HEAD_TITLE="Выбор сохраненной настройки"; 
function GridAjx(id,options){options=options||{};if(options.editInline){options.editViewClass=options.editViewClass||ViewGridEditInlineAjx;}
GridAjx.superclass.constructor.call(this,id,options);if(options.controller){options.readPublicMethod=options.readPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_LIST))?options.controller.getPublicMethod(options.controller.METH_GET_LIST):null);options.insertPublicMethod=options.insertPublicMethod||((options.controller.publicMethodExists(options.controller.METH_INSERT))?options.controller.getPublicMethod(options.controller.METH_INSERT):null);options.updatePublicMethod=options.updatePublicMethod||((options.controller.publicMethodExists(options.controller.METH_UPDATE))?options.controller.getPublicMethod(options.controller.METH_UPDATE):null);options.deletePublicMethod=options.deletePublicMethod||((options.controller.publicMethodExists(options.controller.METH_DELETE))?options.controller.getPublicMethod(options.controller.METH_DELETE):null);options.editPublicMethod=options.editPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_OBJ))?options.controller.getPublicMethod(options.controller.METH_GET_OBJ):null);}
this.setReadPublicMethod(options.readPublicMethod);this.setInsertPublicMethod(options.insertPublicMethod);this.setUpdatePublicMethod(options.updatePublicMethod);this.setDeletePublicMethod(options.deletePublicMethod);this.setExportPublicMethod(options.exportPublicMethod);this.setEditPublicMethod(options.editPublicMethod);this.setRefreshAfterDelRow(options.refreshAfterDelRow);this.m_filters={};if(options.filters&&options.filters.length){for(var i=0;i<options.filters.length;i++){this.setFilter(options.filters[i]);}}}
extend(GridAjx,Grid);GridAjx.prototype.m_readPublicMethod;GridAjx.prototype.m_insertPublicMethod;GridAjx.prototype.m_updatePublicMethod;GridAjx.prototype.m_deletePublicMethod;GridAjx.prototype.m_exportPublicMethod;GridAjx.prototype.m_editPublicMethod;GridAjx.prototype.m_refreshAfterDelRow;GridAjx.prototype.m_filters;GridAjx.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
GridAjx.superclass.onGetData.call(this);}
GridAjx.prototype.initEditView=function(parent,replacedNode,cmd){GridAjx.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm;if(cmd=="insert"){pm=this.getInsertPublicMethod();}
else{pm=this.getUpdatePublicMethod();}
this.m_editViewObj.setWritePublicMethod(pm);this.m_editViewObj.setReadPublicMethod(this.getEditPublicMethod());}
GridAjx.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.keysToPublicMethod(this.m_editViewObj.getReadPublicMethod());}
GridAjx.superclass.fillEditView.call(this,cmd);}
GridAjx.prototype.keysToPublicMethod=function(pm){var pm_fields=pm.getFields();var fields=this.m_model.getFields();for(id in pm_fields){if(fields[id]&&fields[id].getPrimaryKey()){pm_fields[id].setValue(fields[id].getValue());}}}
GridAjx.prototype.read=function(cmd){if(this.m_editViewObj){this.m_editViewObj.read(cmd,function(resp,erCode,erStr){self.onError(resp,erCode,erStr)});}}
GridAjx.prototype.delRow=function(rowNode){var pm=this.getDeletePublicMethod();if(!pm){throw Error(this.ER_NO_DEL_PM);}
this.setEnabled(false);this.setModelToCurrentRow(rowNode);this.keysToPublicMethod(pm);var self=this;pm.run({"async":false,"ok":function(){self.afterServerDelRow();},"fail":function(resp,erCode,erStr){self.setEnabled(true);self.onError(resp,erCode,erStr);}});}
GridAjx.prototype.afterServerDelRow=function(){this.deleteRowNode();this.setEnabled(true);var self=this;window.showNote(this.NT_REC_DELETED,function(){self.focus();if(self.getRefreshAfterDelRow()){self.onRefresh();}},2000);}
GridAjx.prototype.filtersToMethod=function(sep){var pm=this.getReadPublicMethod();var contr=pm.getController();sep=(sep==undefined)?contr.PARAM_FIELD_SEP_VAL:sep;var s_fields,s_signs,s_vals,s_icases;for(var fid in this.m_filters){if(this.m_filters[fid]&&this.m_filters[fid].field&&this.m_filters[fid].sign){s_fields=((!s_fields)?"":s_fields+sep)+this.m_filters[fid].field;s_signs=((!s_signs)?"":s_signs+sep)+this.m_filters[fid].sign;s_vals=((!s_vals)?"":s_vals+sep)+this.m_filters[fid].val;s_icases=((!s_icases)?"":s_icases+sep)+(this.m_filters[fid].icase||"0");}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);}
GridAjx.prototype.onRefresh=function(callBack){var self=this;var pm=this.getReadPublicMethod();if(!pm){throw Error(this.ER_NO_READ_PM[this.getApp().getLocale()]);}
var contr=pm.getController();var pag=this.getPagination();if(pag&&!isNaN(pag.getFrom())){pm.setFieldValue(contr.PARAM_FROM,pag.getFrom());pm.setFieldValue(contr.PARAM_COUNT,pag.getCountPerPage());}
else if(pag){pm.getField(contr.PARAM_FROM).unsetValue();pm.getField(contr.PARAM_COUNT).unsetValue();}
this.filtersToMethod(contr.PARAM_FIELD_SEP_VAL);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);var sort_cols,sort_dirs;var head=this.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var sort_dir=head_row.m_elements[col].getSort();if(sort_dir=="asc"||sort_dir=="desc"){var sort_col=head_row.m_elements[col].getSortFieldId();if(!sort_col){var cols=head_row.m_elements[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=cols[i].getField().getId();sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}
else{sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=sort_col;sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}}}}
pm.setFieldValue(contr.PARAM_ORD_FIELDS,sort_cols);pm.setFieldValue(contr.PARAM_ORD_DIRECTS,sort_dirs);pm.run({"ok":function(resp){self.onGetData(resp);if(callBack){callBack();}},"fail":function(resp,erCode,erStr){self.onError(resp,erCode,erStr);}});}
GridAjx.prototype.onError=function(resp,erCode,erStr){GridAjx.superclass.onError.call(this,this.getApp().formatError(erCode,erStr));}
GridAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
GridAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
GridAjx.prototype.setInsertPublicMethod=function(v){this.m_insertPublicMethod=v;}
GridAjx.prototype.getInsertPublicMethod=function(){return this.m_insertPublicMethod;}
GridAjx.prototype.setUpdatePublicMethod=function(v){this.m_updatePublicMethod=v;}
GridAjx.prototype.getUpdatePublicMethod=function(){return this.m_updatePublicMethod;}
GridAjx.prototype.setDeletePublicMethod=function(v){this.m_deletePublicMethod=v;}
GridAjx.prototype.getDeletePublicMethod=function(){return this.m_deletePublicMethod;}
GridAjx.prototype.setExportPublicMethod=function(v){this.m_exportPublicMethod=v;}
GridAjx.prototype.getExportPublicMethod=function(){return this.m_exportPublicMethod;}
GridAjx.prototype.setEditPublicMethod=function(v){this.m_editPublicMethod=v;}
GridAjx.prototype.getEditPublicMethod=function(){return this.m_editPublicMethod;}
GridAjx.prototype.setRefreshAfterDelRow=function(v){this.m_refreshAfterDelRow=v;}
GridAjx.prototype.getRefreshAfterDelRow=function(){return this.m_refreshAfterDelRow;}
GridAjx.prototype.getFilters=function(){return this.m_filters;}
GridAjx.prototype.getFilterKey=function(filterOrField,sign){var key;if(typeof(filterOrField)=="object"){key=filterOrField.field+filterOrField.sign;}
else{key=filterOrField+sign;}
return key;}
GridAjx.prototype.setFilter=function(filter){this.m_filters[this.getFilterKey(filter)]=filter;}
GridAjx.prototype.getFilter=function(filterOrField,sign){return this.m_filters[this.getFilterKey(filterOrField,sign)];}
GridAjx.prototype.unsetFilter=function(filterOrField,sign){this.m_filters[this.getFilterKey(filterOrField,sign)]=undefined;} 
GridAjx.prototype.ER_NO_DEL_PM="Метод для команды удаления не определен";GridAjx.prototype.ER_NO_UPDATE_PM="Метод для команды обновления не определен";GridAjx.prototype.ER_NO_EDIT_PM="Метод для команды изменения не определен";GridAjx.prototype.ER_NO_READ_PM="Метод для команды чтения не определен"; 
function GridAjxDOCT(id,options){options=options||{};options.refreshAfterDelRow=true;options.refreshInterval=0;GridAjxDOCT.superclass.constructor.call(this,id,options);}
extend(GridAjxDOCT,GridAjx);GridAjxDOCT.prototype.m_modified;GridAjxDOCT.prototype.afterServerDelRow=function(){this.setModified(true);GridAjxDOCT.superclass.afterServerDelRow.call(this);}
GridAjxDOCT.prototype.refreshAfterEdit=function(res){GridAjxDOCT.superclass.refreshAfterEdit.call(this,res);if(res.updated){this.setModified(true);}}
GridAjxDOCT.prototype.getModified=function(){return this.m_modified;}
GridAjxDOCT.prototype.setModified=function(v){this.m_modified=v;} 
function GridCommandsAjx(id,options){options=options||{};options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;var self=this;if(options.cmdExport){this.setControlExport(options.controlExport||new ButtonCtrl(id+":cmdExport",{"glyph":"glyphicon-download-alt","onClick":function(){self.m_grid.getReadPublicMethod().download("ViewExcel");},"attrs":{"title":this.BTN_EXPORT_TITLE}}));}
GridCommandsAjx.superclass.constructor.call(this,id,options);}
extend(GridCommandsAjx,GridCommands);GridCommandsAjx.prototype.m_controlExport;GridCommandsAjx.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsAjx.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlExport)this.m_popUpMenu.addButton(this.m_controlExport);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);this.printObjToPopUp();}
GridCommandsAjx.prototype.getControlExport=function(){return this.m_controlExport;}
GridCommandsAjx.prototype.setControlExport=function(v){this.m_controlExport=v;}
GridCommandsAjx.prototype.setEnabled=function(en){if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);GridCommandsAjx.superclass.setEnabled.call(this,en);} 
GridCommandsAjx.prototype.BTN_EXPORT_TITLE="Экспорт в Excel"; 
function GridCommandsDOC(id,options){options=options||{};options.cmdUnprocess=(options.cmdUnprocess!=undefined)?options.cmdUnprocess:true;options.cmdPrintDoc=(options.cmdPrintDoc!=undefined)?options.cmdPrintDoc:true;options.cmdShowActs=(options.cmdShowActs!=undefined)?options.cmdShowActs:true;var self=this;if(options.cmdUnprocess||options.controlUnprocess){this.setControlUnprocess(options.controlUnprocess||new ButtonCtrl(id+":cmdUnprocess",{"glyph":"glyphicon-unchecked","onClick":function(){WindowQuestion.show({"cancel":false,"text":self.ACTS_DEL_CONF,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delActs();}}});},"attrs":{"title":this.BTN_UNPROCESS_TITLE}}));}
if(options.cmdShowActs||options.controlShowActs){this.setControlShowActs(options.controlShowActs||new ButtonCtrl(id+":cmdShowActs",{"glyph":"glyphicon-log-in","onClick":function(){},"attrs":{"title":this.BTN_SHOWACT_TITLE}}));}
GridCommandsDOC.superclass.constructor.call(this,id,options);}
extend(GridCommandsDOC,GridCommandsAjx);GridCommandsDOC.prototype.m_controlUnprocess;GridCommandsDOC.prototype.m_controlShowActs;GridCommandsDOC.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlUnprocess)this.addElement(this.m_controlUnprocess);if(this.m_controlShowActs)this.addElement(this.m_controlShowActs);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsDOC.prototype.toPopUp=function(){GridCommandsDOC.superclass.toPopUp.call(this);if(this.m_controlUnprocess||this.m_controlShowActs){this.m_popUpMenu.addSeparator();if(this.m_controlUnprocess)this.m_popUpMenu.addButton(this.m_controlUnprocess);if(this.m_controlShowActs)this.m_popUpMenu.addButton(this.m_controlShowActs);}}
GridCommandsDOC.prototype.setControlUnprocess=function(v){this.m_controlUnprocess=v;}
GridCommandsDOC.prototype.getControlUnprocess=function(){return this.m_controlUnprocess;}
GridCommandsDOC.prototype.setControlShowActs=function(v){this.m_controlShowActs=v;}
GridCommandsDOC.prototype.getControlShowActs=function(){return this.m_controlShowActs;}
GridCommandsDOC.prototype.delActs=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.ACTS_DELETED);}})}} 
GridCommandsDOC.prototype.BTN_UNPROCESS_TITLE="Отменить проведение документа";GridCommandsDOC.prototype.BTN_SHOWACT_TITLE="Показать движения документа";GridCommandsDOC.prototype.ACTS_DEL_CONF="Отменить проведение документа?";GridCommandsDOC.prototype.ACTS_DELETED="Отменено проведение документа."; 
function GridPagination(id,options){options=options||{};GridPagination.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);var self=this;this.m_inf=new Control(id+":inf","span");this.m_showPageCount=(options.showPageCount)?parseInt(options.showPageCount):this.DEF_PAGES;if(this.m_showPageCount){this.m_pages=new ControlContainer(id+":pages","span",{"className":"pagination-pages"});}
this.m_btnsCont=new ControlContainer(id+":bns_cont","span",{"className":"pagination-pages"});var ctrl_class="btn btn-xs";this.m_ctrlGoFirst=new Button(id+":go_first",{"glyph":"glyphicon-fast-backward","className":ctrl_class,"onClick":function(){self.setFrom(0);self.m_grid.onRefresh();self.m_grid.focus();},"attrs":{"title":this.CONTR_GO_FIRST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoFirst);this.m_ctrlGoPrev=new Button(id+":go_prev",{"glyph":"glyphicon-step-backward","className":ctrl_class,"onClick":function(){self.setFrom(Math.max(0,self.m_from-self.m_countPerPage));self.m_grid.onRefresh();self.m_grid.focus();},"attrs":{"title":this.CONTR_GO_PREV_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoPrev);this.m_ctrlGoNext=new Button(id+":go_next",{"glyph":"glyphicon-step-forward","className":ctrl_class,"onClick":function(){var from=self.m_from+self.m_countPerPage;from=(from>=self.m_countTotal)?self.m_from:from;self.setFrom(from);self.m_grid.onRefresh();self.m_grid.focus();},"attrs":{"title":this.CONTR_GO_NEXT_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoNext);this.m_ctrlGoLast=new Button(id+":go_last",{"glyph":"glyphicon-fast-forward","className":ctrl_class,"onClick":function(){var pages=Math.floor(self.m_countTotal/self.m_countPerPage);if((self.m_countTotal%self.m_countPerPage)==0){pages--;}
self.setFrom(pages*self.m_countPerPage);self.m_grid.onRefresh();self.m_grid.focus();},"attrs":{"title":this.CONTR_GO_LAST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoLast);options.from=options.from||0;this.setFrom(options.from);if(options.countPerPage){this.setCountPerPage(options.countPerPage);}}
extend(GridPagination,Control);GridPagination.prototype.DEF_PAGES=10;GridPagination.prototype.DEF_TAG_NAME="div";GridPagination.prototype.m_countTotal;GridPagination.prototype.m_countPerPage;GridPagination.prototype.m_from;GridPagination.prototype.m_inf;GridPagination.prototype.m_grid;GridPagination.prototype.getFrom=function(){return this.m_from;}
GridPagination.prototype.getCountPerPage=function(){return this.m_countPerPage;}
GridPagination.prototype.setCountTotal=function(countTotal){this.m_countTotal=parseInt(countTotal);this.setInf();}
GridPagination.prototype.setCountPerPage=function(countPerPage){this.m_countPerPage=parseInt(countPerPage);}
GridPagination.prototype.setFrom=function(from){this.m_from=parseInt(from);this.setInf();}
GridPagination.prototype.reset=function(){this.m_from=undefined;}
GridPagination.prototype.setGrid=function(v){this.m_grid=v;}
GridPagination.prototype.setFirstEnabled=function(enabled){}
GridPagination.prototype.setInf=function(){var pages=Math.ceil(this.m_countTotal/this.m_countPerPage);var page=Math.ceil(this.m_from/this.m_countPerPage)+1;if(isNaN(pages))pages=1;if(isNaN(page))page=1;this.m_inf.setValue(this.CONTR_INF_PAGE+pages);this.m_ctrlGoFirst.setEnabled((page>1));this.m_ctrlGoPrev.setEnabled((page>1));if(page==pages){this.m_ctrlGoLast.setEnabled(false);this.m_ctrlGoNext.setEnabled(false);}
else{this.m_ctrlGoLast.setEnabled(true);this.m_ctrlGoNext.setEnabled(true);}
if(this.m_showPageCount&&this.m_inf.getNode().parentNode){this.m_pages.delDOM();this.m_pages.clear();var self=this;var prev_from=page-this.m_showPageCount;if(prev_from<1)prev_from=1;for(var pg=prev_from;pg<page;pg++){this.m_pages.addElement(new Control(CommonHelper.uniqid(),"span",{"className":"pagination-page","attrs":{"title":this.GO_TO_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
if(pages>1){this.m_pages.addElement(new Control(CommonHelper.uniqid(),"span",{"className":"pagination-page badge pagination-page-cur","attrs":{"title":this.CONTR_PG_CNT},"value":page}));}
var nxt_to=page+this.m_showPageCount;if(nxt_to>pages)nxt_to=pages;for(var pg=page+1;pg<=nxt_to;pg++){this.m_pages.addElement(new Control(CommonHelper.uniqid(),"span",{"className":"pagination-page","attrs":{"title":this.CONTR_INF_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
this.m_pages.toDOMAfter(this.m_btnsCont.getNode());}}
GridPagination.prototype.goToPageFromEvent=function(e){e=EventHelper.fixMouseEvent(e);var pg=DOMHelper.getAttr(e.target,"to_page");this.setFrom((pg-1)*this.m_countPerPage);this.m_grid.onRefresh();}
GridPagination.prototype.toDOM=function(parent){GridPagination.superclass.toDOM.call(this,parent);this.m_inf.toDOM(this.m_node);this.m_btnsCont.toDOM(this.m_node);this.setInf();}
GridPagination.prototype.delDOM=function(){if(this.m_showPageCount){this.m_pages.delDOM();}
this.m_inf.delDOM();this.m_btnsCont.delDOM();GridPagination.superclass.delDOM.call(this);} 
GridPagination.prototype.CONTR_GO_FIRST_TITLE="в начало";GridPagination.prototype.CONTR_GO_PREV_TITLE="предыдущая";GridPagination.prototype.CONTR_GO_NEXT_TITLE="следующая";GridPagination.prototype.CONTR_GO_LAST_TITLE="в конец";GridPagination.prototype.CONTR_INF_PAGE="Страниц:";GridPagination.prototype.CONTR_INF_FROM="из";GridPagination.prototype.GO_TO_PAGE="Перейти на страницу ";GridPagination.prototype.CONTR_PG_CNT="Страниц:"; 
function GridFilter(id,options){options=options||{};options.className=options.className||this.DEF_CLASS_NAME;GridFilter.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":cmdSet",{"caption":this.DEF_SET_CTRL_CAP,"onClick":function(){self.setFilter();},"attrs":{"title":this.DEF_SET_CTRL_TITLE},"app":options.app}));}
if(options.cmdUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":cmdUnset",{"caption":this.DEF_UNSET_CTRL_CAP,"onClick":function(){self.unsetFilter();},"attrs":{"title":this.DEF_UNSET_CTRL_TITLE},"app":options.app}));}
this.m_filter=new ModelFilter({"filters":options.filters,"app":options.app});this.addControls();}
extend(GridFilter,ControlContainer);GridFilter.prototype.DEF_TAG_NAME="form";GridFilter.prototype.DEF_CLASS_NAME="form-horizontal collapse";GridFilter.prototype.m_controlSet;GridFilter.prototype.m_controlUnset;GridFilter.prototype.m_filter;GridFilter.prototype.m_onRefresh;GridFilter.prototype.addControls=function(){var filters=this.m_filter.getFilters();for(var id in filters){this.addElement(filters[id].binding.getControl());}
this.m_contCommands=new ControlContainer(this.getId()+":cont-cmd","div",{"className":window.getBsCol()+"12"});if(this.m_controlSet)this.m_contCommands.addElement(this.m_controlSet);if(this.m_controlUnset)this.m_contCommands.addElement(this.m_controlUnset);this.addElement(this.m_contCommands);}
GridFilter.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridFilter.prototype.getControlSet=function(){return this.m_controlSet;}
GridFilter.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridFilter.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridFilter.prototype.setFilter=function(v){this.m_filter=v;}
GridFilter.prototype.getFilter=function(){return this.m_filter;}
GridFilter.prototype.setOnRefresh=function(v){this.m_onRefresh=v;}
GridFilter.prototype.getOnRefresh=function(){return this.m_onRefresh;}
GridFilter.prototype.setFilter=function(){if(this.m_onRefresh){this.m_onRefresh();}}
GridFilter.prototype.unsetFilter=function(){this.m_filter.resetFilters();if(this.m_onRefresh){this.m_onRefresh();}} 
GridFilter.prototype.DEF_SET_CTRL_CAP="Применить";GridFilter.prototype.DEF_SET_CTRL_TITLE="Применить отбор";GridFilter.prototype.DEF_UNSET_CTRL_CAP="Сбросить";GridFilter.prototype.DEF_UNSET_CTRL_TITLE="Отменить отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_CAP="Отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_TITLE="показать отбор"; 
function EditPeriodDate(id,options){options=options||{};options.template=window.getApp().getTemplate("EditPeriodDate");EditPeriodDate.superclass.constructor.call(this,id,"template",options);var edit_class=options.editClass||EditDate;options.cmdDownFast=(options.cmdDownFast!==undefined)?options.cmdDownFast:true;options.cmdDown=(options.cmdDown!==undefined)?options.cmdDown:true;options.cmdUpFast=(options.cmdUpFast!==undefined)?options.cmdUpFast:true;options.cmdUp=(options.cmdUp!==undefined)?options.cmdUp:true;options.cmdPeriodSelect=(options.cmdPeriodSelect!==undefined)?options.cmdPeriodSelect:true;var self=this;if(options.cmdDownFast){this.setControlDownFast(options.controlDownFast||new Button(id+":downFast",{"glyph":"glyphicon-triangle-left","onClick":function(){},"app":options.app}));}
if(options.cmdDown){this.setControlDown(options.controlDown||new Button(id+":down",{"glyph":"glyphicon-menu-left","onClick":function(){},"app":options.app}));}
if(options.cmdUp){this.setControlUp(options.controlUp||new Button(id+":up",{"glyph":"glyphicon-menu-right","onClick":function(){},"app":options.app}));}
this.setControlFrom(options.controlFrom||new edit_class(id+":from",{"value":options.valueFrom,"timeValueStr":(options.valueFrom)?DateHelper.format(options.valueFrom,"H:i:s"):this.DEF_FROM_TIME,"contClassName":" ","editContClassName":"input-group "+window.getBsCol(12),"app":options.app}));this.setControlTo(options.controlTo||new edit_class(id+":to",{"value":options.valueTo,"timeValueStr":(options.valueTo)?DateHelper.format(options.valueTo,"H:i:s"):this.DEF_TO_TIME,"contClassName":" ","editContClassName":"input-group "+window.getBsCol(12),"app":options.app}));this.setField(options.field);if(options.cmdUpFast){this.setControlUpFast(options.controlUpFast||new Button(id+":upFast",{"glyph":"glyphicon-triangle-right","onClick":function(){},"app":options.app}));}
if(options.cmdPeriodSelect){this.setControlPeriodSelect(options.controlPeriodSelect||new PeriodSelect(this.getId()+":periodSelect",{"onValueChange":function(){self.setPredefinedPeriod(this.getValue());}}));}
this.addControls();}
extend(EditPeriodDate,ControlContainer);EditPeriodDate.prototype.DEF_FROM_TIME="00:00:00";EditPeriodDate.prototype.DEF_TO_TIME="23:59:59";EditPeriodDate.prototype.m_controlFrom;EditPeriodDate.prototype.m_controlTo;EditPeriodDate.prototype.m_controlUp;EditPeriodDate.prototype.m_controlUpFast;EditPeriodDate.prototype.m_controlDown;EditPeriodDate.prototype.m_controlDownFast;EditPeriodDate.prototype.m_controlPeriodSelect;EditPeriodDate.prototype.m_field;EditPeriodDate.prototype.addControls=function(){if(this.m_controlDownFast)this.addElement(this.m_controlDownFast);if(this.m_controlDown)this.addElement(this.m_controlDown);if(this.m_controlPeriodSelect)this.addElement(this.m_controlPeriodSelect);this.addElement(this.m_controlFrom);this.addElement(this.m_controlTo);if(this.m_controlUp)this.addElement(this.m_controlUp);if(this.m_controlUpFast)this.addElement(this.m_controlUpFast);}
EditPeriodDate.prototype.getControlFrom=function(){return this.m_controlFrom;}
EditPeriodDate.prototype.setControlFrom=function(v){this.m_controlFrom=v;}
EditPeriodDate.prototype.getControlTo=function(){return this.m_controlTo;}
EditPeriodDate.prototype.setControlTo=function(v){this.m_controlTo=v;}
EditPeriodDate.prototype.getControlUp=function(){return this.m_controlUp;}
EditPeriodDate.prototype.setControlUp=function(v){this.m_controlUp=v;}
EditPeriodDate.prototype.getControlUpFast=function(){return this.m_controlUpFast;}
EditPeriodDate.prototype.setControlUpFast=function(v){this.m_controlUpFast=v;}
EditPeriodDate.prototype.getControlDownFast=function(){return this.m_controlDownFast;}
EditPeriodDate.prototype.setControlDownFast=function(v){this.m_controlDownFast=v;}
EditPeriodDate.prototype.getControlDown=function(){return this.m_controlDown;}
EditPeriodDate.prototype.setControlDown=function(v){this.m_controlDown=v;}
EditPeriodDate.prototype.getControlPeriodSelect=function(){return this.m_controlPeriodSelect;}
EditPeriodDate.prototype.setControlPeriodSelect=function(v){this.m_controlPeriodSelect=v;}
EditPeriodDate.prototype.getField=function(){return this.m_field;}
EditPeriodDate.prototype.setField=function(v){this.m_field=v;}
EditPeriodDate.prototype.reset=function(){this.m_controlFrom.reset();this.m_controlTo.reset();}
EditPeriodDate.prototype.focus=function(){this.getControlFrom().focus();}
EditPeriodDate.prototype.getValue=function(){return{"from":this.getControlFrom().getValue(),"to":this.getControlTo().getValue(),"period":this.getControlPeriodSelect().getValue()};}
EditPeriodDate.prototype.setValue=function(v){if(v.from)this.getControlFrom().setValue(v.from);if(v.to)this.getControlTo().setValue(v.to);if(v.period)this.getControlPeriodSelect().setValue(v.period);}
EditPeriodDate.prototype.reset=function(){if(this.getControlPeriodSelect())this.getControlPeriodSelect().setValue("all");}
EditPeriodDate.prototype.setCtrlDateTime=function(ctrl,dt){dt.setHours(0);dt.setMinutes(0);dt.setSeconds(0);dt.setTime(dt.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr()));ctrl.setValue(dt);}
EditPeriodDate.prototype.setPredefinedPeriod=function(per){if(per=="all"){this.getControlFrom().reset();this.getControlTo().reset();}
else if(per=="day"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.time());this.setCtrlDateTime(this.getControlTo(),DateHelper.time());}
else if(per=="week"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.weekStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.weekEnd());}
else if(per=="month"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.monthStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.monthEnd());}
else if(per=="quarter"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.quarterStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.quarterEnd());}
else if(per=="year"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.yearStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.yearEnd());}} 
EditPeriodDate.prototype.DEF_CAP_FROM="Период с:";EditPeriodDate.prototype.DEF_CAP_TO="-";EditPeriodDate.prototype.CONTR_DOWN_FAST_TITLE="несколько периодов назад";EditPeriodDate.prototype.CONTR_DOWN_TITLE="период назад";EditPeriodDate.prototype.CONTR_UP_FAST_TITLE="период вперед";EditPeriodDate.prototype.CONTR_UP_TITLE="несколько периодов вперед"; 
function EditPeriodDateTime(id,options){options=options||{};options.editClass=EditDateTime;EditPeriodDateTime.superclass.constructor.call(this,id,options);}
extend(EditPeriodDateTime,EditPeriodDate); 
function ButtonOK(id,options){options=options||{};options.caption=options.caption||this.DEF_CAPTION;options.title=options.title||this.DEF_TITLE;ButtonOK.superclass.constructor.call(this,id,options);}
extend(ButtonOK,ButtonCmd); 
ButtonOK.prototype.DEF_CAPTION="ОК";ButtonOK.prototype.DEF_TITLE="записать,закрыть"; 
function ButtonSave(id,options){ButtonSave.superclass.constructor.call(this,id,options);}
extend(ButtonSave,ButtonOK); 
ButtonSave.prototype.DEF_CAPTION="Записать";ButtonSave.prototype.DEF_TITLE="записать"; 
function ButtonCancel(id,options){options=options||{};options.caption=options.caption||this.DEF_CAPTION;options.title=options.title||this.DEF_TITLE;ButtonCancel.superclass.constructor.call(this,id,options);}
extend(ButtonCancel,ButtonCmd); 
ButtonCancel.prototype.DEF_CAPTION="Отмена";ButtonCancel.prototype.DEF_TITLE="отказаться от записи"; 
function ViewObjectAjx(id,options){options=options||{};ViewObjectAjx.superclass.constructor.call(this,id,options);this.addCommand(new Command(this.CMD_OK,{"publicMethod":undefined,"control":this.getControlOK(),"async":true}));this.m_detailDataSets={};this.setCmd(options.cmd);this.setOnClose(options.onClose);if(!options.readPublicMethod&&options.controller){options.readPublicMethod=options.controller.getGetObject();}
this.setReadPublicMethod(options.readPublicMethod);this.setController(options.controller);this.setModel(options.model);var self=this;if(options.controlOk||((options.cmdOk!=undefined)?options.cmdOk:true)){this.setControlOK(options.controlOk||new ButtonOK(id+":cmdOk",{"onClick":function(){self.onOK();},"app":options.app}));}
if(options.cmdSave||((options.cmdSave!=undefined)?options.cmdSave:true)){this.setControlSave(options.controlSave||new ButtonSave(id+":cmdSave",{"onClick":function(){self.onSave();},"app":options.app}));}
if(options.controlCancel||((options.cmdCancel!=undefined)?options.cmdCancel:true)){this.setControlCancel(options.controlCancel||new ButtonCancel(id+":cmdCancel",{"onClick":function(){self.onCancel();},"app":options.app}));}
options.cmdPrint=(options.printList!=undefined)?true:((options.cmdPrint!=undefined)?options.cmdPrint:false);if(options.controlPrint||options.cmdPrint){this.setControlPrint(options.controlPrint||new ButtonPrintList(id+":cmdPrint",{"printList":options.printList,"keyIds":options.printListKeyIds,"app":options.app}));}
this.m_commandContainer=options.commandContainer||new ControlContainer(id+":cmd-cont","div",{app:options.app});this.setWritePublicMethod(options.writePublicMethod);this.addControls();this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();e.stopPropagation();return false;}};}
extend(ViewObjectAjx,ViewAjx);ViewObjectAjx.prototype.DEF_SAVE_CH_TIMEOUT=30000;ViewObjectAjx.prototype.CMD_OK="ok";ViewObjectAjx.prototype.m_controlCancel;ViewObjectAjx.prototype.m_controlOK;ViewObjectAjx.prototype.m_controlSave;ViewObjectAjx.prototype.m_controlPrint;ViewObjectAjx.prototype.m_onClose;ViewObjectAjx.prototype.m_readPublicMethod;ViewObjectAjx.prototype.m_commandContainer;ViewObjectAjx.prototype.m_replacedNode;ViewObjectAjx.prototype.m_cmd;ViewObjectAjx.prototype.m_controller;ViewObjectAjx.prototype.m_model;ViewObjectAjx.prototype.m_detailDataSets;ViewObjectAjx.prototype.addKeyEvents=function(){for(var elem_id in this.m_elements){EventHelper.add(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}
ViewObjectAjx.prototype.delKeyEvents=function(){for(var elem_id in this.m_elements){EventHelper.del(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}
ViewObjectAjx.prototype.keyPressEvent=function(keyCode,event){var res=false;switch(keyCode){case 27:res=true;this.onCancel();break;case 13:if(event.ctrlKey){res=true;this.onOK();}
break;}
return res;}
ViewObjectAjx.prototype.addControls=function(){if(this.m_controlOK)this.m_commandContainer.addElement(this.m_controlOK);if(this.m_controlSave)this.m_commandContainer.addElement(this.m_controlSave);if(this.m_controlPrint)this.m_commandContainer.addElement(this.m_controlPrint);if(this.m_controlCancel)this.m_commandContainer.addElement(this.m_controlCancel);}
ViewObjectAjx.prototype.close=function(res){if(this.m_onClose){this.m_onClose.call(this,res);}
else if(window.onClose){window.closeResult=res;window.close();}}
ViewObjectAjx.prototype.onAfterUpsert=function(resp,setControls){this.m_editResult.updated=true;if(resp&&resp.modelExists("InsertedId_Model")&&this.m_dataBindings&&this.m_dataBindings.length){this.m_editResult.newKeys={};var model_obj=this.getWritePublicMethod().getController().getObjModel();var ret_model=new model_obj({"data":resp.getModelData("InsertedId_Model")});ret_model.getNextRow();var ret_fields=ret_model.getFields();for(ret_id in ret_fields){if(ret_fields[ret_id].isSet()){this.m_editResult.newKeys[ret_id]=ret_fields[ret_id].getValue();}}
if(setControls){for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var val;if(ret_fields[f.getId()]&&ret_fields[f.getId()].isSet()){val=ret_fields[f.getId()].getValue();}
else{val=this.m_dataBindings[i].getControl().getValue();}
this.m_dataBindings[i].getControl().setInitValue(val);f.setValue(val);}}}}
else{for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var val;val=ctrl.getValue();if(setControls){ctrl.setInitValue(val);}
if(val!=null&&typeof val=="object"&&val.getKeys){var keys=val.getKeys();for(key in keys){val=keys[key];break;}}
f.setValue(val);}}}}}
ViewObjectAjx.prototype.onOK=function(){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onAfterUpsert(resp,false);self.close(self.m_editResult);});}
ViewObjectAjx.prototype.onSave=function(){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onSaveOk.call(self,resp);});}
ViewObjectAjx.prototype.onCancel=function(){if(this.getModified(this.CMD_OK)){var self=this;WindowQuestion.show({"text":this.Q_SAVE_CHANGES,"timeout":this.SAVE_CH_TIMEOUT,"winObj":this.m_winObj,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.onOK();}
else{self.close(this.m_editResult);}}});}
else{this.close(this.m_editResult);}}
ViewObjectAjx.prototype.setWriteTempEnabled=function(cmd){ViewObjectAjx.superclass.setWriteTempEnabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(true);}
ViewObjectAjx.prototype.setWriteTempDisabled=function(cmd){ViewObjectAjx.superclass.setWriteTempDisabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(false);}
ViewObjectAjx.prototype.toDOM=function(parent){ViewObjectAjx.superclass.toDOM.call(this,parent);this.m_commandContainer.toDOM(parent);this.addKeyEvents();this.setDefRefVals();}
ViewObjectAjx.prototype.delDOM=function(){this.delKeyEvents();this.m_commandContainer.delDOM();ViewObjectAjx.superclass.delDOM.call(this);}
ViewObjectAjx.prototype.setControlOK=function(v){this.m_controlOK=v;}
ViewObjectAjx.prototype.getControlOK=function(){return this.m_controlOK;}
ViewObjectAjx.prototype.setControlSave=function(v){this.m_controlSave=v;}
ViewObjectAjx.prototype.getControlSave=function(){return this.m_controlSave;}
ViewObjectAjx.prototype.setControlCancel=function(v){this.m_controlCancel=v;}
ViewObjectAjx.prototype.getControlCancel=function(){return this.m_controlCancel;}
ViewObjectAjx.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
ViewObjectAjx.prototype.getControlPrint=function(){return this.m_controlPrint;}
ViewObjectAjx.prototype.setWritePublicMethod=function(v){if(v&&window.getParam){var opts=window.getParam("editViewOptions");if(opts&&opts.keys){for(var key in opts.keys){v.setFieldValue(key,opts.keys[key]);}}}
this.getCommands()[this.CMD_OK].setPublicMethod(v);}
ViewObjectAjx.prototype.getWritePublicMethod=function(){return this.getCommands()[this.CMD_OK].getPublicMethod();}
ViewObjectAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
ViewObjectAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
ViewObjectAjx.prototype.setOnClose=function(v){this.m_onClose=v;}
ViewObjectAjx.prototype.getOnClose=function(){return this.m_onClose;}
ViewObjectAjx.prototype.setReplacedNode=function(v){this.m_replacedNode=v;}
ViewObjectAjx.prototype.getReplacedNode=function(){return this.m_replacedNode;}
ViewObjectAjx.prototype.setCmd=function(v){this.m_cmd=v;}
ViewObjectAjx.prototype.getCmd=function(){if(this.m_cmd!=undefined){return this.m_cmd;}
else if(window.getParam){return window.getParam("cmd");}}
ViewObjectAjx.prototype.setWritePublicMethodOnController=function(){if(this.m_controller){var frm_cmd=this.getCmd();if(frm_cmd){this.setWritePublicMethod(this.m_controller.getPublicMethod((frm_cmd=="insert"||frm_cmd=="copy")?this.m_controller.METH_INSERT:this.m_controller.METH_UPDATE));}}}
ViewObjectAjx.prototype.setController=function(v){this.m_controller=v;this.setWritePublicMethodOnController();}
ViewObjectAjx.prototype.getController=function(){return this.m_controller;}
ViewObjectAjx.prototype.onSaveOk=function(resp){this.onAfterUpsert(resp,false);this.setCmd("update");this.setWritePublicMethod(null);this.setDetailKey();window.showNote(this.NOTE_SAVED);}
ViewObjectAjx.prototype.execCommand=function(cmd,sucFunc,failFunc){if(cmd==this.CMD_OK&&!this.getWritePublicMethod()&&this.getController()){this.setWritePublicMethodOnController();}
ViewObjectAjx.superclass.execCommand.call(this,cmd,sucFunc,failFunc);}
ViewObjectAjx.prototype.read=function(cmd,failFunc){var self=this;this.setReadTempDisabled();this.getReadPublicMethod().run({"ok":function(resp){self.onGetData(resp,cmd);},"fail":function(resp,erCode,erStr){self.setTempEnabled();if(failFunc){failFunc.call(self,resp,erCode,erStr);}}});}
ViewObjectAjx.prototype.setDetailKey=function(){for(var id in this.m_detailDataSets){var key=(this.m_detailDataSets[id].value)?this.m_detailDataSets[id].value:this.m_detailDataSets[id].field.getValue();if(key){var ds=this.m_detailDataSets[id].control;var pm=ds.getInsertPublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getUpdatePublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getReadPublicMethod();var contr=pm.getController();ds.setFilter({"field":this.m_detailDataSets[id].controlFieldId,"sign":contr.PARAM_SGN_EQUAL,"val":key});ds.onRefresh(function(){ds.setEnabled(true);});}}}
ViewObjectAjx.prototype.onGetData=function(resp,cmd){ViewObjectAjx.superclass.onGetData.call(this,resp,cmd);if(!cmd&&!window.getParam&&this.m_dataBindings.length){var m=this.m_dataBindings[0].getModel();cmd=(m.getRowCount())?"edit":"insert";}
this.setCmd(cmd);if(!CommonHelper.isEmpty(this.m_detailDataSets)){this.setDetailKey();}
if(this.m_controlPrint&&this.m_model){var list=this.m_controlPrint.getObjList();var keys={};var keyIds=this.m_controlPrint.getKeyIds();var fields=this.m_model.getFields();if(!keyIds){for(var fid in fields){if(fields[fid].getPrimaryKey()){keys[fid]=fields[fid].getValue();}}}
else{for(var i=0;i<keyIds.length;i++){if(fields[keyIds[i]]){keys[keyIds[i]]=fields[keyIds[i]].getValue();}}}
for(var i=0;i<list.length;i++){list[i].setKeys(keys);}}}
ViewObjectAjx.prototype.addDetailDataSet=function(dsParams){this.m_detailDataSets[dsParams.control.getId()]=dsParams;var self=this;dsParams.control.initEditWinObjOrig=dsParams.control.initEditWinObj;dsParams.control.initEditWinObj=function(cmd){var ds_id=this.getId();var key=(self.m_detailDataSets[ds_id].value)?self.m_detailDataSets[ds_id].value:self.m_detailDataSets[ds_id].field.getValue();var o=this.getEditViewOptions()||{};o.keys={};o.keys[self.m_detailDataSets[ds_id].controlFieldId]=key;this.setEditViewOptions(o);this.initEditWinObjOrig(cmd);}}
ViewObjectAjx.prototype.copyControl=function(fromName,toName){var name=this.getElement(fromName).getValue();if(name&&!this.getElement(toName).getValue()){this.getElement(toName).setValue(name);}}
ViewObjectAjx.prototype.setDefRefVals=function(){}
ViewObjectAjx.prototype.setModel=function(v){this.m_model=v;}
ViewObjectAjx.prototype.getModel=function(){return this.m_model;}
ViewObjectAjx.prototype.setDataBindings=function(bindings){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){if(!bindings[b_ind].getModel()){bindings[b_ind].setModel(this.m_model);}
if(bindings[b_ind].getControl()){bd_ids.push(bindings[b_ind].getControl().getName());}}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){var ctrl=this.getElement(f);if(!ctrl){ctrl=new HiddenKey(this.getId()+":"+f);this.addElement(ctrl);}
if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new DataBinding({"model":this.m_model,"control":ctrl,"field":fields[f]}));}}}}
ViewObjectAjx.superclass.setDataBindings.call(this,bindings);}
ViewObjectAjx.prototype.addDataBinding=function(bind){if(this.m_model&&!bind.getModel()){bind.setModel(this.m_model);}
ViewObjectAjx.superclass.addDataBinding.call(this,bind);}
ViewObjectAjx.prototype.setWriteBindings=function(bindings,cmd){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){bd_ids.push(bindings[b_ind].getControl().getName());}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new CommandBinding({"control":this.getElement(f),"fieldId":f}));}}}}
this.getCommands()[((cmd)?cmd:this.CMD_OK)].setBindings(bindings);} 
ViewObjectAjx.prototype.Q_SAVE_CHANGES="Сохранить изменения?";ViewObjectAjx.prototype.NOTE_SAVED="Объект записан"; 
function ViewGridEditInlineAjx(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.cmdSave=false;options.commandContainer=new ControlContainer(id+":cmd-cont","td")
this.setGrid(options.grid);this.setKeys(options.keys);this.m_row=options.row;ViewGridEditInlineAjx.superclass.constructor.call(this,id,options);}
extend(ViewGridEditInlineAjx,ViewObjectAjx);ViewGridEditInlineAjx.prototype.DEF_TAG_NAME="tr";ViewGridEditInlineAjx.prototype.m_grid;ViewGridEditInlineAjx.prototype.m_row;ViewGridEditInlineAjx.prototype.addEditControls=function(){var view_id=this.getId();var columns=this.getGrid().getHead().getColumns();var focus_set=false;for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[col_id].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
var ctrl_opts={"visible":columns[col_id].getHeadCell().getVisible(),"app":this.getApp()};CommonHelper.merge(ctrl_opts,column.getCtrlOptions());var ctrl_class=column.getCtrlClass();var f=column.getField();if(!f){continue;}
if(!ctrl_class){var tp=f.getDataType();if(tp==f.DT_BOOL){ctrl_class=EditCheckBox;}
else if(tp==f.DT_DATE){ctrl_class=EditDate;}
else if(tp==f.DT_DATETIME){ctrl_class=EditDateTime;}
else if(tp==f.DT_ENUM){ctrl_class=EditSelect;}
else if(tp==f.DT_FLOAT){ctrl_class=EditFloat;}
else if(tp==f.DT_INT){ctrl_class=EditInt;}
else if(tp==f.DT_STRING){ctrl_class=EditString;}
else if(tp==f.DT_PWD){ctrl_class=EditPassword;}
else if(tp==f.DT_TEXT){ctrl_class=EditText;}}
if(f.getValidator().getMaxLength()){ctrl_opts.maxLength=f.getValidator().getMaxLength();}
if(f.getValidator().getRequired()){ctrl_opts.reauired=true;}
var focus_skeep=false;if(f.getPrimaryKey()){ctrl_opts.noSelect=true;ctrl_opts.noClear=true;focus_skeep=f.getAutoInc();}
if(!focus_skeep&&!focus_set){ctrl_opts.autofocus=true;focus_set=true;}
this.addElement(new ctrl_class(view_id+":"+column.getId(),ctrl_opts));}}
ViewGridEditInlineAjx.prototype.addControls=function(){this.addEditControls();ViewGridEditInlineAjx.superclass.addControls.call(this);}
ViewGridEditInlineAjx.prototype.setKeysPublicMethod=function(pm){for(var k in this.m_keys){var fid="old_"+k;if(pm.fieldExists(fid)){pm.setFieldValue(fid,this.m_keys[k]);}}}
ViewGridEditInlineAjx.prototype.setWritePublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setWritePublicMethod.call(this,pm);if(pm){var columns=this.getGrid().getHead().getColumns();var com_b=this.getCommands()[this.CMD_OK].getBindings();for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(col_id);if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
if(column.getField()){var f_id=(column.getCtrlBindField())?column.getCtrlBindField().getId():((column.getCtrlBindFieldId())?column.getCtrlBindFieldId():column.getField().getId());if(pm.fieldExists(f_id)){com_b.push(new CommandBinding({"field":pm.getField(f_id),"control":this.getElement(column.getId())}));}}}
this.setKeysPublicMethod(pm);}}
ViewGridEditInlineAjx.prototype.setReadBinds=function(pm){if(pm){var model_obj=pm.getController().getObjModel();var model=new model_obj();var columns=this.getGrid().getHead().getColumns();var bindings=[];for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(col_id);if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
if(column.getField()){var new_f=CommonHelper.clone(column.getField());if(column.getCtrlBindField()){model.addField(CommonHelper.clone(column.getCtrlBindField()));}
bindings.push(new DataBinding({"field":new_f,"model":model,"control":this.getElement(column.getId())}));}}
this.setDataBindings(bindings);}}
ViewGridEditInlineAjx.prototype.setReadPublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setReadPublicMethod.call(this,pm);this.setReadBinds(pm);}
ViewGridEditInlineAjx.prototype.toDOM=function(parent){var elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];elem.toDOM(this.m_node);}
this.m_commandContainer.toDOM(this.m_node);if(this.m_replacedNode){parent.replaceChild(this.m_node,this.m_replacedNode);}
else{var rows=parent.getElementsByTagName(this.m_node.nodeName);if(rows.length==0){parent.appendChild(this.m_node);}
else{parent.insertBefore(this.m_node,rows[0]);}}
this.setFocus();this.addKeyEvents();}
ViewGridEditInlineAjx.prototype.setGrid=function(v){this.m_grid=v;}
ViewGridEditInlineAjx.prototype.getGrid=function(){return this.m_grid;}
ViewGridEditInlineAjx.prototype.setKeys=function(v){this.m_keys=v;}
ViewGridEditInlineAjx.prototype.getKeys=function(){return this.m_keys;}
ViewGridEditInlineAjx.prototype.addElement=function(ctrl){if(ctrl.setContTagName){ctrl.setContTagName("td");}
if(ctrl.setEditContClassName){ctrl.setEditContClassName("input-group "+window.getBsCol(12));}
ViewGridEditInlineAjx.superclass.addElement.call(this,ctrl);}  
function ViewDOC(id,options){options=options||{};this.setProcessable(options.processable||true);var self=this;options.controlOk=options.controlOk||new ButtonCmd(id+":cmdOk",{"caption":this.BTN_OK_CAP,"title":this.BTN_OK_TITLE,"onClick":function(){if(self.getProcessable()){self.getElement("processed").setValue(true);}
self.onOK();},"app":options.app});options.controlSave=options.controlSave||new ButtonCmd(id+":cmdSave",{"caption":this.BTN_SAVE_CAP,"title":this.BTN_SAVE_TITLE,"onClick":function(){if(self.getProcessable()&&!self.getElement("processed").getValue()){self.getElement("processed").setValue(false);}
self.onSave();},"app":options.app});options.controlCancel=options.controlCancel||new ButtonCmd(id+":cmdCancel",{"caption":this.BTN_CLOSE_CAP,"title":this.BTN_CLOSE_TITLE,"onClick":function(){self.onCancel();},"app":options.app});this.m_detailDataSetsExist=(options.detailDataSetsExist===true||options.detailDataSetsExist==undefined)?true:false;ViewDOC.superclass.constructor.call(this,id,options);this.addElement(new HiddenKey(id+":id"));if(this.getProcessable()){this.addElement(new HiddenKey(id+":processed",{}));}
if(this.m_detailDataSetsExist){this.addElement(new HiddenKey(id+":view_id",{"value":CommonHelper.md5(CommonHelper.uniqid())}));}}
extend(ViewDOC,ViewObjectAjx);ViewDOC.prototype.m_model;ViewDOC.prototype.m_detailDataSetsExist;ViewDOC.prototype.m_processable;ViewDOC.prototype.addDetailDataSet=function(grid){ViewDOC.superclass.addDetailDataSet.call(this,{"control":grid,"controlFieldId":"view_id","value":this.getElement("view_id").getValue()});}
ViewDOC.prototype.getViewId=function(){return(this.m_detailDataSetsExist)?this.getElement("view_id").getValue():null;}
ViewDOC.prototype.setDetailKey=function(){var contr=this.getReadPublicMethod().getController();var doc_id=0;if(this.getCmd()!="insert"){doc_id=this.getElement("id").getValue();}
var pm=contr.getPublicMethod("before_open");pm.setFieldValue("doc_id",doc_id);pm.setFieldValue("view_id",this.getElement("view_id").getValue());pm.run({"async":false});ViewDOC.superclass.setDetailKey.call(this);}
ViewDOC.prototype.getModified=function(cmd){var modified=ViewDOC.superclass.getModified.call(this,cmd);if(!modified){if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){if(this.m_detailDataSets[id].control.getModified()){modified=true;break;}}}}
return modified;}
ViewDOC.prototype.addDefDataBindings=function(){this.addDataBinding(new DataBinding({"control":this.getElement("id"),"model":this.m_model}));if(this.getProcessable()){this.addDataBinding(new DataBinding({"control":this.getElement("processed"),"model":this.m_model}));}
var cmd_ok=this.getCommand(this.CMD_OK);cmd_ok.addBinding(new CommandBinding({"control":this.getElement("id")}));if(this.getProcessable()){cmd_ok.addBinding(new CommandBinding({"control":this.getElement("processed")}));}}
ViewDOC.prototype.execCommand=function(cmd,sucFunc,failFunc){if(this.getCmd()=="insert"){var dt_ctrl=this.getElement("date_time");if(dt_ctrl){var dt_ctrl_val=dt_ctrl.getValue();if(dt_ctrl_val.getHours()==0&&dt_ctrl_val.getMinutes()==0&&dt_ctrl_val.getSeconds()==0){tm=DateHelper.time();dt_ctrl_val.setHours(tm.getHours(),tm.getMinutes(),tm.getSeconds());dt_ctrl.setValue(dt_ctrl_val);}}}
ViewDOC.superclass.execCommand.call(this,cmd,sucFunc,failFunc);}
ViewAjx.prototype.beforeExecCommand=function(cmd,pm){if(this.m_detailDataSetsExist&&pm.fieldExists("view_id")){pm.setFieldValue("view_id",this.getViewId());}}
ViewDOC.prototype.getProcessable=function(){return this.m_processable;}
ViewDOC.prototype.setProcessable=function(v){this.m_processable=v;}
ViewDOC.prototype.onSaveOk=function(resp){ViewDOC.superclass.onSaveOk.call(this,resp);if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){this.m_detailDataSets[id].control.setModified(false);}}} 
ViewDOC.prototype.BTN_OK_CAP="Провести";ViewDOC.prototype.BTN_OK_TITLE="Провести документ и закрыть форму";ViewDOC.prototype.BTN_SAVE_CAP="Записать";ViewDOC.prototype.BTN_SAVE_TITLE="Записать документ";ViewDOC.prototype.BTN_CLOSE_CAP="Закрыть";ViewDOC.prototype.BTN_CLOSE_TITLE="Закрыть форму";ViewDOC.prototype.CTRL_NUM_LABEL="№";ViewDOC.prototype.CTRL_DATE_LABEL="от";ViewDOC.prototype.NOTE_SAVED="Документ записан"; 
var WindowPrint={show:function(options){options=options||{};var win_opts={"name":"Print"+CommonHelper.uniqid()};var print_and_close=(options.print!=undefined)?options.print:true;win_opts.title=(options.title!=undefined)?(this.TITLE+" "+options.title):this.TITLE;win_opts.content=options.template||window.getApp().getTemplate("WindowPrint");var matches=win_opts.content.match(/{{.*}}/g);if(matches){for(var i=0;i<matches.length;i++){win_opts.content=win_opts.content.split(matches[i]).join(eval(matches[i].substring(2,matches[i].length-2)));}}
var winObj=new WindowForm(win_opts);var newWin=winObj.open();newWin.document.close();var win_del=setInterval(check_state,10);function check_state(){if(newWin.document.readyState=="complete"){clearInterval(win_del);newWin.focus();if(print_and_close){newWin.print();newWin.close();}}}}} 
WindowPrint.TITLE="Печать";WindowPrint.CHROME_NOTE="используйте кнопку 'Отмена' для закрытия окна предварительного просмотра.\n"; 
var WindowQuestion={RES_YES:0,RES_NO:1,RES_CANCEL:2,show:function(options){options=options||{};var self=this;var yes=(options.yes!=undefined)?options.yes:true;var no=(options.no!=undefined)?options.no:true;var cancel=(options.cancel!=undefined)?options.cancel:true;var timeout=options.timeout||0;this.m_callBack=options.callBack;this.m_modalId="quest-modal";this.m_modal=new WindowFormModalBS(this.m_modalId,{content:new Control(this.m_modalId+":cont","div",{value:options.text})});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-yes").getNode().focus();}
this.m_modal.close=function(res){self.delEvents();self.m_modalCloseFunc.call(self.m_modal);self.m_callBack(res);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};if(yes){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-yes",{"caption":this.BTN_YES_CAP,"focus":true,"attrs":{"title":this.YES_TITLE,"tabindex":0},"onClick":function(){self.m_modal.close(self.RES_YES);}}));}
if(no){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-no",{"caption":this.BTN_NO_CAP,"attrs":{"title":this.NO_TITLE,"tabindex":1},"onClick":function(){self.m_modal.close(self.RES_NO);}}));}
if(cancel){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-cancel",{"caption":this.BTN_CANCEL_CAP,"attrs":{"data-dismiss":"modal","title":this.CANCEL_TITLE,"tabindex":2},"onClick":function(){self.m_modal.close(self.RES_CANCEL);}}));}
this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 39:break;case 37:break;case 13:this.m_modal.close(this.RES_YES);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;}} 
WindowQuestion.YES_TITLE="ответить утвердительно";WindowQuestion.NO_TITLE="ответить отрицательно";WindowQuestion.CANCEL_TITLE="отменить действие";WindowQuestion.BTN_YES_CAP="Да";WindowQuestion.BTN_NO_CAP="Нет";WindowQuestion.BTN_CANCEL_CAP="Отмена"; 
var WindowSearch={RES_OK:0,RES_CANCEL:2,show:function(options){options=options||{};var self=this;this.m_callBack=options.callBack;this.m_modalId="search-modal";var select_opts=[];for(var i=0;i<options.columns.length;i++){select_opts.push(new EditSelectOption(this.m_modalId+":where:"+i,{"value":options.columns[i].id,"checked":options.columns[i].current,"descr":options.columns[i].descr}));}
this.m_modal=new WindowFormModalBS(this.m_modalId,{"content":new ControlContainer(this.m_modalId+":cont","div",{"elements":[new EditString(this.m_modalId+":cont:search_str",{"labelCaption":this.STR_CAP,"placeholder":this.STR_PLACEHOLDER,"title":this.STR_TITLE,"maxlength":"500","value":options.text,"focus":true,"app":options.app}),new EditSelect(this.m_modalId+":where",{"labelCaption":this.PAR_WHERE_CAP,"app":options.app,"elements":select_opts}),new EditRadioGroup(this.m_modalId+":how",{"labelCaption":this.PAR_HOW_CAP,"elements":[new EditRadio(this.m_modalId+":cont:on_beg",{"labelCaption":this.PAR_HOW_ON_BEG,"name":"how_opt","value":"on_beg","app":options.app}),new EditRadio(this.m_modalId+":cont:on_part",{"labelCaption":this.PAR_HOW_ON_PART,"name":"how_opt","value":"on_part","checked":true,"app":options.app}),new EditRadio(this.m_modalId+":cont:on_match",{"labelCaption":this.PAR_HOW_ON_MATCH,"name":"how_opt","value":"on_match","app":options.app})],"app":options.app})]}),"controlOk":new ButtonCmd(this.m_modalId+":btn-ok",{"caption":this.BTN_FIND_CAP,"title":this.BTN_FIND_TITLE,"onClick":function(){self.m_modal.close(self.RES_OK);}}),"cmdCancel":true});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-ok").getNode().focus();}
this.m_modal.close=function(res){self.delEvents();var cont=self.m_modal.m_body.getElement("cont");self.m_callBack(res,{"search_str":cont.getElement("search_str").getValue(),"where":cont.getElement("where").getValue(),"how":cont.getElement("how").getValue()});self.m_modalCloseFunc.call(self.m_modal);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 13:this.m_modal.close(this.RES_OK);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;}} 
WindowSearch.STR_CAP="Что искать:";WindowSearch.STR_PLACEHOLDER="Строка поиска";WindowSearch.STR_TITLE="Поиск будет выполнен по данной строке в соответствии с выбранными параметрами";WindowSearch.PAR_WHERE_CAP="Где искать:";WindowSearch.PAR_HOW_CAP="Как искать:";WindowSearch.PAR_HOW_ON_BEG="По началу строки";WindowSearch.PAR_HOW_ON_PART="По части строки";WindowSearch.PAR_HOW_ON_MATCH="По точному совпадению";WindowSearch.BTN_FIND_CAP="Найти";WindowSearch.BTN_FIND_TITLE="Выполнить поиск"; 
function WindowForm(options){options=options||{};this.m_id=options.id||CommonHelper.uniqid();options.height=options.height||this.DEF_HEIGHT;options.width=options.width||this.DEF_WIDTH;options.fullScreen=options.fullScreen||this.DEF_FULL_SCREEN;if(options.fullScreen){options.width=CommonHelper.getViewportWidth();options.height=CommonHelper.getViewportHeight();}
this.setFullScreen(options.fullScreen);this.setDirectories(options.directories||this.DEF_DIRECTORIES);this.setChannelMode(options.channelMode||this.DEF_CHANNEL_MODE);this.setHeight(options.height);if(options.center){this.m_center=true;this.setCenter(options.height||this.DEF_HEIGHT,options.width||this.DEF_WIDTH);}
else{if(options.centerLeft){this.setLeftCenter(options.width||this.DEF_WIDTH);}
else{this.setLeft(options.left||this.DEF_LEFT);}
if(options.centerTop){this.setTopCenter(options.height||this.DEF_HEIGHT);}
else{this.setTop(options.top||this.DEF_TOP);}}
this.setLocation(options.location||this.DEF_LOCATION);this.setMenuBar(options.menuBar||this.DEF_MENU_BAR);this.setResizable(options.resizable||this.DEF_RESIZABLE);this.setScrollBars(options.scrollBars||this.DEF_SCROLL_BARS);this.setStatus(options.status||this.DEF_STATUS);this.setTitleBar(options.titleBar||this.DEF_TITLE_BAR);this.setWidth(options.width);this.setName(options.name||this.DEF_WIN_NAME);if(options.host){this.setHost(options.host);this.setScript(options.script||this.DEF_SCRIPT);this.setURLParams(options.URLParams);}
this.setCaption(options.caption||options.title||"");this.m_content=options.content;this.setOnClose(options.onClose);this.setParams(options.params);this.m_app=options.app;}
WindowForm.prototype.DEF_DIRECTORIES="0";WindowForm.prototype.DEF_CHANNEL_MODE="0";WindowForm.prototype.DEF_FULL_SCREEN=0;WindowForm.prototype.DEF_HEIGHT="500";WindowForm.prototype.DEF_LEFT="0";WindowForm.prototype.DEF_LOCATION="0";WindowForm.prototype.DEF_MENU_BAR=0;WindowForm.prototype.DEF_RESIZABLE="1";WindowForm.prototype.DEF_SCROLL_BARS="1";WindowForm.prototype.DEF_STATUS="0";WindowForm.prototype.DEF_TITLE_BAR="0";WindowForm.prototype.DEF_TOP="0";WindowForm.prototype.DEF_WIDTH="600";WindowForm.prototype.DEF_WIN_NAME="_blank";WindowForm.prototype.DEF_SCRIPT="index.php";WindowForm.prototype.DEF_CENTER_TOP_OFFSET="20";WindowForm.prototype.LEFT_STEP=50;WindowForm.prototype.LEFT_MAX=500;WindowForm.prototype.TOP_STEP=50;WindowForm.prototype.TOP_MAX=500;WindowForm.prototype.m_directories;WindowForm.prototype.m_channelMode;WindowForm.prototype.m_fullScreen;WindowForm.prototype.m_height;WindowForm.prototype.m_left;WindowForm.prototype.m_location;WindowForm.prototype.m_menuBar;WindowForm.prototype.m_resizable;WindowForm.prototype.m_scrollBars;WindowForm.prototype.m_status;WindowForm.prototype.m_titleBar;WindowForm.prototype.m_top;WindowForm.prototype.m_width;WindowForm.prototype.m_name;WindowForm.prototype.m_host;WindowForm.prototype.m_script;WindowForm.prototype.m_URLParams;WindowForm.prototype.m_WindowForm;WindowForm.prototype.m_app;WindowForm.prototype.m_onClose;WindowForm.prototype.m_params;WindowForm.prototype.open=function(){var win_opts="directories="+this.m_directories+","+"channelMode="+this.m_channelMode+","+"fullScreen="+this.m_fullScreen+","+"height="+this.m_height+","+"left="+this.m_left+","+"location="+this.m_location+","+"menubar="+this.m_menuBar+","+"resizable="+this.m_resizable+","+"scrollbars="+this.m_scrollBars+","+"status="+this.m_status+","+"titlebar="+this.m_titleBar+","+"top="+this.m_top+","+"width="+this.m_width;var url="";if(this.m_host){url=this.getURL();}
var name=(CommonHelper.isIE()&&CommonHelper.getIEVersion()<=8)?"":this.m_name;this.m_WindowForm=window.open(url,name,(this.m_name=="_blank")?"":win_opts);if(url==""&&this.m_content){this.m_WindowForm.document.write(this.m_content);}
var self=this;this.m_WindowForm.onClose=function(res){if(self.m_onClose){self.m_onClose.call(self,self.m_WindowForm.closeResult);self.m_WindowForm.onClose=undefined;}}
this.m_WindowForm.getParam=function(id){return self.getParam(id);}
this.m_WindowForm.getApp=function(){return self.m_app;}
window.m_childForms=window.m_childForms||{};window.m_childForms[this.m_id]=this.m_WindowForm;return this.m_WindowForm;}
WindowForm.prototype.close=function(){if(this.m_WindowForm){this.m_WindowForm.close();}}
WindowForm.prototype.setDirectories=function(directories){this.m_directories=directories;}
WindowForm.prototype.setChannelMode=function(channelMode){this.m_channelMode=channelMode;}
WindowForm.prototype.setFullScreen=function(fullScreen){this.m_fullScreen=fullScreen;}
WindowForm.prototype.setHeight=function(height){if(height){this.m_height=height;}}
WindowForm.prototype.setLeft=function(left){this.m_left=left;}
WindowForm.prototype.setLocation=function(location){this.m_location=location;}
WindowForm.prototype.setMenuBar=function(menuBar){this.m_menuBar=menuBar;}
WindowForm.prototype.setResizable=function(resizable){this.m_resizable=resizable;}
WindowForm.prototype.setScrollBars=function(scrollBars){this.m_scrollBars=scrollBars;}
WindowForm.prototype.setStatus=function(status){this.m_status=status;}
WindowForm.prototype.setTitleBar=function(titleBar){this.m_titleBar=titleBar;}
WindowForm.prototype.setTop=function(top){if(top){this.m_top=top;}}
WindowForm.prototype.setWidth=function(width){if(width){this.m_width=width;}}
WindowForm.prototype.setSize=function(w,h){this.m_w=width;this.m_h=h;}
WindowForm.prototype.setName=function(name){this.m_name=name;}
WindowForm.prototype.getScript=function(){return this.m_script;}
WindowForm.prototype.setScript=function(script){this.m_script=script;}
WindowForm.prototype.getHost=function(){var host=this.m_host;if(host&&host.length&&host.substring(host.length-1,host.length)!="/"){host+="/";}
return host;}
WindowForm.prototype.setHost=function(host){this.m_host=host;}
WindowForm.prototype.getURL=function(){var h=this.getHost();if(!h){return;}
var s=this.getScript();if(!s){return;}
var p=this.getURLParams();if(p){p="?"+p;}
else{p="";}
return(h+s+p);}
WindowForm.prototype.setURLParams=function(URLParams){this.m_URLParams=URLParams;}
WindowForm.prototype.getURLParams=function(){return this.m_URLParams;}
WindowForm.prototype.setLeftCenter=function(width){var l=Math.floor(CommonHelper.getViewportWidth()/2)-Math.floor(width/2);this.setLeft(l);}
WindowForm.prototype.setTopCenter=function(height){var t=Math.floor(CommonHelper.getViewportHeight()/2)-Math.floor(height/2);this.setTop(t+this.DEF_CENTER_TOP_OFFSET);}
WindowForm.prototype.setCenter=function(height,width){this.setLeftCenter(width);this.setTopCenter(height);}
WindowForm.prototype.getWindowForm=function(){return this.m_WindowForm;}
WindowForm.prototype.getContentParent=function(){return this.m_WindowForm.document.body;}
WindowForm.prototype.setFocus=function(){return this.m_WindowForm.focus();}
WindowForm.prototype.setTitle=function(title){this.m_title=title;}
WindowForm.prototype.setCaption=function(caption){this.setTitle(caption);}
WindowForm.prototype.setOnClose=function(f){this.m_onClose=f;}
WindowForm.prototype.setParams=function(params){this.m_params=params||{};}
WindowForm.prototype.setParam=function(id,val){this.m_params[id]=val;}
WindowForm.prototype.getParam=function(id){return this.m_params[id];}
WindowForm.prototype.getId=function(){return this.m_id;} 
function WindowFormObject(options){options=options||{};if(!options.method){throw Error(this.ER_NO_METHOD);}
options.host=options.host||options.app.getHost();options.script=options.script||options.app.getScript();options.URLParams=options.URLParams||"";if(options.formName){options.controller=options.controller||options.formName+"_Controller";options.template=options.template||options.formName;}
options.view=options.view||"Child";options.keys=options.keys||{"id":null};if(options.fullScreen==undefined&&options.width==undefined&&options.height==undefined){options.fullScreen=true;}
options.name=options.formName+CommonHelper.array2json(options.keys);this.setController(options.controller);this.setMethod(options.method);this.setTemplate(options.template);this.setView(options.view);this.setKeys(options.keys);WindowFormObject.superclass.constructor.call(this,options);}
extend(WindowFormObject,WindowForm);WindowFormObject.prototype.m_controller;WindowFormObject.prototype.m_method;WindowFormObject.prototype.m_template;WindowFormObject.prototype.m_view;WindowFormObject.prototype.m_keys;WindowFormObject.prototype.m_keyIds;WindowFormObject.prototype.getURLParams=function(){var str="c="+this.m_controller;str+="&f="+this.m_method;if(this.m_template)str+="&t="+this.m_template;str+="&v="+this.m_view;for(var fid in this.m_keys){if(this.m_keys[fid]!=undefined){str+="&"+fid+"="+this.m_keys[fid];}}
if(this.m_URLParams){str+="&"+this.m_URLParams;}
return str;}
WindowFormObject.prototype.setKeys=function(v){this.m_keyIds=[];for(var keyid in v){this.m_keyIds.push(keyid);}
this.m_keys=v}
WindowFormObject.prototype.getKeys=function(){return this.m_keys;}
WindowFormObject.prototype.getKeyIds=function(){return this.m_keyIds;}
WindowFormObject.prototype.setController=function(v){this.m_controller=v}
WindowFormObject.prototype.getController=function(){return this.m_controller;}
WindowFormObject.prototype.setMethod=function(v){this.m_method=v}
WindowFormObject.prototype.getMethod=function(){return this.m_method;}
WindowFormObject.prototype.setView=function(v){this.m_view=v}
WindowFormObject.prototype.getView=function(){return this.m_view;}
WindowFormObject.prototype.setTemplate=function(v){this.m_template=v}
WindowFormObject.prototype.getTemplate=function(){return this.m_template;} 
WindowFormObject.prototype.ER_NO_CONTROLLER="Не задан котроллер.";WindowFormObject.prototype.ER_NO_METHOD="Не задан метод."; 
function WindowFormModalBS(id,options){options=options||{};options.className=options.className||"modal";options.attrs=options.attrs||{};options.attrs.role="dialog";WindowFormModalBS.superclass.constructor.call(this,id,"div",options);this.m_dialog=new ControlContainer(id+"_dial","div",{className:"modal-dialog"});this.m_content=new ControlContainer(id+"_cont","div",{className:"modal-content"});this.m_header=new ControlContainer(id+"_head","div",{className:(options.headerClassName||"modal-header")});this.m_header.addElement(new Control(id+"_close","button",{className:"close",attrs:{"data-dismiss":"modal","aria-label":"Close"}}));if(options.contentHead){if(typeof(options.contentHead)=="object"){this.m_header.addElement(options.contentHead);}
else{this.m_header.addElement(new Control(id+":head:label","h4",{"className":"modal-title","value":options.contentHead}));}}
this.m_body=new ControlContainer(id+":body","div",{className:"modal-body"});if(options.content){this.m_body.addElement(options.content);}
this.m_footer=new ControlContainer(id+":footer","div",{className:"modal-footer"});if(options.contentFoot){this.m_footer.addElement(options.contentFoot);}
var self=this;if(options.cmdOk||options.controlOk||options.onClickOk){this.m_footer.addElement(options.controlOk||new ButtonCmd(id+":btn-ok",{"caption":options.controlOkCaption||this.BTN_OK_CAP,"title":options.controlOkTitle||this.BTN_OK_TITLE,"onClick":options.onClickOk}));}
if(options.cmdCancel||options.controlCancel||options.onClickCancel){this.m_footer.addElement(options.controlCancel||new ButtonCmd(id+":btn-cancel",{"caption":options.controlCancelCaption||this.BTN_CANCEL_CAP,"title":options.controlCancelTitle||this.BTN_CANCEL_TITLE,"onClick":options.onClickCancel||function(){self.close();}}));}
this.m_content.addElement(this.m_header);this.m_content.addElement(this.m_body);this.m_content.addElement(this.m_footer);this.m_dialog.addElement(this.m_content);}
extend(WindowFormModalBS,ControlContainer);WindowFormModalBS.prototype.m_header;WindowFormModalBS.prototype.m_body;WindowFormModalBS.prototype.m_foot;WindowFormModalBS.prototype.toDOM=function(parent){WindowFormModalBS.superclass.toDOM.call(this,parent);this.m_dialog.toDOM(this.getNode());$(this.getNode()).on('shown.bs.modal',function(){$('[autofocus]',this).focus();});$(this.getNode()).modal({show:true,keyboard:true});}
WindowFormModalBS.prototype.delDOM=function(){$(this.getNode()).modal("hide");this.m_dialog.delDOM();WindowFormModalBS.superclass.toDOM.call(this);}
WindowFormModalBS.prototype.open=function(){this.toDOM(document.body);}
WindowFormModalBS.prototype.close=function(){this.delDOM();}
WindowFormModalBS.prototype.getContentParent=function(){return this.m_body.getNode();}
WindowFormModalBS.prototype.setCaption=function(caption){}
WindowFormModalBS.prototype.setFocus=function(){} 
WindowFormModalBS.prototype.BTN_OK_CAP="OK";WindowFormModalBS.prototype.BTN_OK_TITLE="Записать и закрыть форму";WindowFormModalBS.prototype.BTN_CANCEL_CAP="Закрыть";WindowFormModalBS.prototype.BTN_CANCEL_TITLE="Закрыть форму"; 
function WindowMessage(){this.m_messages=[];this.m_window=null;this.m_model=null;this.m_bsCol=null;}
WindowMessage.prototype.ID="windowMessage";WindowMessage.prototype.FLASH_TIME=1000;WindowMessage.prototype.BS_COL=3;WindowMessage.prototype.TP_ER="danger";WindowMessage.prototype.TP_WARN="warning";WindowMessage.prototype.TP_INFO="info";WindowMessage.prototype.TP_OK="success";WindowMessage.prototype.m_messages;WindowMessage.prototype.m_window;WindowMessage.prototype.m_model;WindowMessage.prototype.m_bsCol;WindowMessage.prototype.show=function(options){options=options||{};var mes_id=CommonHelper.uniqid();options.type=options.type||this.TP_INFO;this.m_messages.push({id:mes_id,date_time:DateHelper.time(),subject:null,content:options.text,user_descr:null,message_type:options.type,importance_level:null,require_view:null});this.m_messages.sort(function(a,b){if(a.date_time>b.date_time){return 1;}
if(a.date_time<b.date_time){return-1;}
return 0;});this.m_bsCol=options.bsCol;this.toDOM();if(options.callBack){options.callBack();}
return mes_id;};WindowMessage.prototype.toDOM=function(){var self=this;if(!this.m_window){var n=DOMHelper.getElementsByAttr("windowMessage",window.body,"class",true);if(!n.length){throw Error("Message window not found!");}
if(!n[0].id){n[0].id=CommonHelper.uniqid();}
this.m_window=new ControlContainer(n[0].id,"div",{"className":"panel panel-default windowMessage"});var head=new ControlContainer(this.ID+":head","div",{"className":"panel-heading","value":"окно сообщений"});var head_cont=new ControlContainer(this.ID+":head-cont","div");head_cont.addElement(new ButtonCtrl(this.ID+":close",{"title":"закрыть","caption":"Закрыть","onClick":function(){self.delDOM();}}));head_cont.addElement(new ButtonCtrl(this.ID+":clear",{"title":"очистить","caption":"Очистить","onClick":function(){self.m_messages=[];self.toDOM();}}));head.addElement(head_cont);this.m_content=new ControlContainer(this.ID+":content","div");var body=new ControlContainer(this.ID+":body","div",{"className":"panel-body"});body.addElement(this.m_content);this.m_window.addElement(head);this.m_window.addElement(body);}
var dwin=CommonHelper.nd("windowData");if(dwin){DOMHelper.setAttr(dwin,"class",this.m_bsCol+(12-this.BS_COL));}
this.m_content.delDOM();this.m_content.clear();var t=0;for(var i=this.m_messages.length-1;i>=0;i--){var item_class="alert alert-"+this.m_messages[i].message_type;item_class+=(i==this.m_messages.length-1)?" flashit":"";var cont=new ControlContainer(this.m_messages[i].id,"p",{"className":item_class});if(i==this.m_messages.length-1){this.m_flashCont=cont;setTimeout(function(){DOMHelper.delClass(self.m_flashCont.getNode(),"flashit");},this.FLASH_TIME);}
cont.addElement(new Control(this.m_messages[i].id+":head","div",{"value":DateHelper.format(this.m_messages[i].date_time,"H:i:s")}));cont.addElement(new Control(this.m_messages[i].id+":title","div",{"value":this.m_messages[i].content}));this.m_content.addElement(cont);t++;}
this.m_window.setClassName("panel panel-default windowMessage"+((dwin)?(" "+this.m_bsCol+this.BS_COL):""));this.m_window.toDOM();};WindowMessage.prototype.delDOM=function(){if(this.m_window){this.m_window.setClassName("hidden");var dwin=CommonHelper.nd("windowData");if(dwin){DOMHelper.setAttr(dwin,"class",this.m_bsCol+"12");}}} 
function GridCellHeadDOCProcessed(id,options){options=options||{};options.value=" ",options.className=window.getBsCol(1),options.columns=[new GridColumn("processed",{"field":options.model.getField("processed"),"assocClassList":{"true":"glyphicon glyphicon-check","false":"glyphicon glyphicon-unchecked"}})];GridCellHeadDOCProcessed.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCProcessed,GridCellHead); 
function GridCellHeadDOCDate(id,options){options=options||{};options.value="Дата",options.sortable=true;options.sort="asc";options.columns=[new GridColumnDate("date_time",{"field":options.model.getField("date_time"),"dateFormat":options.app.getJournalDateFormat()})];GridCellHeadDOCDate.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCDate,GridCellHead); 
function GridCellHeadDOCNumber(id,options){options=options||{};options.value="Номер",options.sortable=true;options.columns=[new GridColumn("number",{"field":options.model.getField("number")})];GridCellHeadDOCNumber.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCNumber,GridCellHead); 
function stopEvent(evt){evt||window.event;if(evt.stopPropagation){evt.stopPropagation();evt.preventDefault();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;evt.returnValue=false;}
return false;}
function getElement(evt){if(window.event){return window.event.srcElement;}else{return evt.currentTarget;}}
function getTargetElement(evt){if(window.event){return window.event.srcElement;}else{return evt.target;}}
function stopSelect(obj){if(typeof obj.onselectstart!='undefined'){EventHelper.add(obj,"selectstart",function(){return false;});}}
function getCaretEnd(obj,winDocum){if(typeof obj.selectionEnd!="undefined"){return obj.selectionEnd;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToEnd",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function getCaretStart(obj,winDocum){if(typeof obj.selectionStart!="undefined"){return obj.selectionStart;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToStart",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function setCaret(obj,l){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(l,l);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',l);m.collapse();m.select();}}
function setSelection(obj,s,e){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(s,e);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',s);m.moveEnd('character',e);m.select();}}
String.prototype.addslashes=function(){return this.replace(/(["\\\.\|\[\]\^\*\+\?\$\(\)])/g,'\\$1');}
String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");};function curTop(obj){toreturn=0;while(obj){toreturn+=obj.offsetTop;obj=obj.offsetParent;}
return toreturn;}
function curLeft(obj){toreturn=0;while(obj){toreturn+=obj.offsetLeft;obj=obj.offsetParent;}
return toreturn;}
function isNumber(a){return typeof a=='number'&&isFinite(a);}
function replaceHTML(obj,text,winDocum){while(el=obj.childNodes[0]){obj.removeChild(el);};obj.appendChild(winDocum.createTextNode(text));}
function actbAJX(options){options=options||{};this.setMinLengthForQuery(options.minLengthForQuery||this.MIN_LEN_FOR_QUERY);this.setOnSelect(options.onSelect);this.setPatternFieldId(options.patternFieldId||this.DEF_PATTERN_FIELD);this.setPublicMethod(options.publicMethod);this.setModel(options.model);this.setControl(options.control);this.setKeyFields(options.keyFields);this.setDescrFields(options.descrFields);this.setIc(options.icase||this.DEF_IC);this.setMid(options.mid||this.DEF_MID);}
actbAJX.prototype.DEF_PATTERN_FIELD='pattern';actbAJX.prototype.MIN_LEN_FOR_QUERY=4;actbAJX.prototype.SERV_Q_DELAY=250;actbAJX.prototype.DEF_IC="1";actbAJX.prototype.DEF_MID="0";actbAJX.prototype.m_minLengthForQuery;actbAJX.prototype.m_ic;actbAJX.prototype.m_mid;actbAJX.prototype.m_patternFieldId;actbAJX.prototype.m_publicMethod;actbAJX.prototype.m_model;actbAJX.prototype.m_control;actbAJX.prototype.m_keyFields;actbAJX.prototype.m_descrFields;actbAJX.prototype.fillArrayOnPattern=function(inputNode){var currValue=inputNode.value;this.m_control.resetKeys();this.m_keywords=[];this.m_keywordKeys=[];if(currValue.length<this.getMinLengthForQuery()){this.onFillArrayEnd();return;}
var self=this;var pm=this.getPublicMethod();var contr=pm.getController();pm.setFieldValue(this.getPatternFieldId(),inputNode.value);pm.setFieldValue(contr.PARAM_IC,this.getIc());pm.setFieldValue(contr.PARAM_MID,this.getMid());pm.run({"async":"true","ok":function(resp){self.onGetData(resp);},"fail":function(resp,errCode,errStr){self.m_control.getErrorControl(self.m_control.getApp().formatError(errCode,errStr));}});}
actbAJX.prototype.onGetData=function(resp){if(resp.modelExists(this.m_model.getId())){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
else{this.m_control.getErrorControl(CommonHelper.format(this.ER_NO_MODEL,Array(this.m_model.getId())));return;}
var ctrl_key_ids=this.m_control.getKeyIds();while(this.m_model.getNextRow()){var res_val="";for(var fid in this.m_descrFields){res_val+=(res_val)?" ":"";res_val+=this.m_descrFields[fid].getValue();}
var keys={};for(var fn=0;fn<this.m_keyFields.length;fn++){keys[ctrl_key_ids[fn]]=this.m_keyFields[fn].getValue();}
this.m_keywordKeys.push(keys);this.m_keywords.push(res_val);}
this.onFillArrayEnd();this.m_timeoutId=undefined;}
actbAJX.prototype.setRefKeys=function(wordPos){this.m_control.setKeys(this.m_keywordKeys[wordPos]);if(this.m_onSelect){this.m_model.getRow(wordPos);this.m_onSelect.call(this,this.m_model.getFields());}}
actbAJX.prototype.getMinLengthForQuery=function(){return this.m_minLengthForQuery;}
actbAJX.prototype.setMinLengthForQuery=function(v){this.m_minLengthForQuery=v;}
actbAJX.prototype.getIc=function(){return this.m_ic;}
actbAJX.prototype.setIc=function(v){this.m_ic=v;}
actbAJX.prototype.getMid=function(){return this.m_mid;}
actbAJX.prototype.setMid=function(v){this.m_mid=v;}
actbAJX.prototype.setOnSelect=function(v){this.m_onSelect=v;}
actbAJX.prototype.getOnSelect=function(){return this.m_onSelect;}
actbAJX.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
actbAJX.prototype.getPublicMethod=function(){return this.m_publicMethod;}
actbAJX.prototype.setPatternFieldId=function(v){this.m_patternFieldId=v;}
actbAJX.prototype.getPatternFieldId=function(){return this.m_patternFieldId;}
actbAJX.prototype.setModel=function(v){this.m_model=v;}
actbAJX.prototype.getModel=function(){return this.m_model;}
actbAJX.prototype.setControl=function(v){this.m_control=v;}
actbAJX.prototype.getControl=function(){return this.m_control;}
actbAJX.prototype.setDescrFields=function(v){this.m_descrFields=v;}
actbAJX.prototype.getDescrFields=function(){return this.m_descrFields;}
actbAJX.prototype.setKeyFields=function(v){this.m_keyFields=v;}
actbAJX.prototype.getKeyFields=function(){return this.m_keyFields;}
function actb(obj,winObj,servConnect){var winDocum=(winObj==undefined)?window.document:(winObj.getWindowForm==undefined)?window.document:winObj.getWindowForm().document;var obj=typeof(obj)=="string"?CommonHelper.nd(obj,winDocum):obj;if(obj==null)
{alert("Error:ctrl {"+obj+"} does not exist!");return false;}
var ajxCon=servConnect;var slef=this;ajxCon.onFillArrayEnd=function(){_actb_tocomplete();if(!actb_display){actb_generate();actb_display=true;}}
this.actb_timeOut=-1;this.actb_lim=4;this.actb_firstText=false;this.actb_mouse=true;this.actb_delimiter=new Array(';',',');this.actb_startcheck=1;this.actb_bgColor='#888888';this.actb_textColor='#FFFFFF';this.actb_hColor='#000000';this.actb_fFamily='Verdana';this.actb_fSize='11px';this.actb_hStyle='text-decoration:underline;font-weight="bold"';var actb_delimwords=new Array();var actb_cdelimword=0;var actb_delimchar=new Array();var actb_display=false;var actb_pos=0;var actb_total=0;var actb_curr=null;var actb_rangeu=0;var actb_ranged=0;var actb_bool=new Array();var actb_pre=0;var actb_toid;var actb_tomake=false;var actb_getpre="";var actb_mouse_on_list=1;var actb_kwcount=0;var actb_caretmove=false;this.actb_keywords=[];var actb_self=this;actb_curr=obj;actb_curr.setAttribute("autocomplete","off");EventHelper.add(actb_curr,"focus",function(){EventHelper.add(winDocum,"keydown",actb_checkkey,false);EventHelper.add(winDocum,"keypress",actb_keypress,false);DOMHelper.delClass(actb_curr,"null-ref");},false);EventHelper.add(actb_curr,"blur",function(){EventHelper.del(winDocum,"keydown",actb_checkkey,false);EventHelper.del(winDocum,"keypress",actb_keypress,false);if(actb_curr.value.length&&servConnect.getControl().getIsRef()&&servConnect.getControl().isNull()){DOMHelper.addClass(actb_curr,"null-ref");}
actb_removedisp();},false);function actb_clear(evt){if(!evt)evt=event;EventHelper.del(winDocum,"keydown",actb_checkkey,false);EventHelper.del(actb_curr,"blur",actb_clear,false);EventHelper.del(winDocum,"keypress",actb_keypress,false);actb_removedisp();}
function actb_parse(n){if(actb_self.actb_delimiter.length>0){var t=actb_delimwords[actb_cdelimword].trim().addslashes();var plen=actb_delimwords[actb_cdelimword].trim().length;}else{var t=actb_curr.value.addslashes();var plen=actb_curr.value.length;}
var tobuild='';var i;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
var p=n.search(re);for(i=0;i<p;i++){tobuild+=n.substr(i,1);}
tobuild+="<font style='"+(actb_self.actb_hStyle)+"'>"
for(i=p;i<plen+p;i++){tobuild+=n.substr(i,1);}
tobuild+="</font>";for(i=plen+p;i<n.length;i++){tobuild+=n.substr(i,1);}
return tobuild;}
function unfocus_cur_table(){var tables=winDocum.getElementsByTagName("table");if(tables&&tables.length){for(var i=0;i<tables.length;i++){if(DOMHelper.hasClass(tables[i],"focused")){DOMHelper.delClass(tables[i],"focused");break;}}}}
function actb_generate(){var node=CommonHelper.nd('tat_table',winDocum);if(node){actb_display=false;node.parentNode.removeChild(node);}
if(actb_kwcount==0){actb_display=false;return;}
unfocus_cur_table();var a_cont=winDocum.createElement("div");a_cont.id='tat_table';a_cont.className="popover";a_cont.setAttribute("role","tooltip");a_cont.style.position="absolute";a_cont.style.top=eval(curTop(actb_curr)+actb_curr.offsetHeight)+"px";a_cont.style.left=curLeft(actb_curr)+"px";a_cont.style.display="block";a_cont_t=document.createElement("div");a_cont_t.className="tooltip-arrow";a_cont_c=document.createElement('div');a_cont_c.className="popover-content";a=winDocum.createElement("table");a.className="table table-hover act";a_cont_c.appendChild(a);a_cont.appendChild(a_cont_t);a_cont.appendChild(a_cont_c);winDocum.body.appendChild(a_cont);var i;var first=true;var j=1;if(actb_self.actb_mouse){a.onmouseout=actb_table_unfocus;a.onmouseover=actb_table_focus;}
var counter=0;for(i=0;i<actb_self.actb_keywords.length;i++){if(actb_bool[i]){counter++;r=a.insertRow(-1);if(first&&!actb_tomake){first=false;actb_pos=counter;}else if(actb_pre==i){first=false;actb_pos=counter;}else{}
r.id='tat_tr'+(j);c=r.insertCell(-1);c.innerHTML=actb_parse(actb_self.actb_keywords[i]);c.id='tat_td'+(j);c.setAttribute('pos',j);if(actb_self.actb_mouse){c.style.cursor='pointer';c.onclick=actb_mouseclick;c.onmouseover=actb_table_highlight;}
j++;}
if(j-1==actb_self.actb_lim&&j<actb_total){r=a.insertRow(-1);c=r.insertCell(-1);c.align='center';replaceHTML(c,'\\/',winDocum);if(actb_self.actb_mouse){c.style.cursor='pointer';c.onclick=actb_mouse_down;}
break;}}
actb_rangeu=1;actb_ranged=j-1;actb_display=true;if(actb_pos<=0)actb_pos=1;}
function actb_remake(){actb_generate();return;}
function actb_goup(){if(!actb_display)return;if(actb_pos==1)return;actb_pos--;if(actb_pos<actb_rangeu)actb_moveup();if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_godown(){if(!actb_display)return;if(actb_pos==actb_total)return;actb_pos++;if(actb_pos>actb_ranged)actb_movedown();if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_movedown(){actb_rangeu++;actb_ranged++;actb_remake();}
function actb_moveup(){actb_rangeu--;actb_ranged--;actb_remake();}
function actb_mouse_down(){actb_pos++;actb_movedown();actb_curr.focus();actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_mouse_up(evt){if(!evt)evt=event;if(evt.stopPropagation){evt.stopPropagation();}else{evt.cancelBubble=true;}
actb_pos--;actb_moveup();actb_curr.focus();actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_mouseclick(evt){if(!evt)evt=event;if(!actb_display)return;actb_mouse_on_list=0;actb_pos=this.getAttribute('pos');actb_penter();}
function actb_table_focus(){actb_mouse_on_list=1;}
function actb_table_unfocus(){actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_table_highlight(){actb_mouse_on_list=1;actb_pos=this.getAttribute('pos');while(actb_pos<actb_rangeu)actb_moveup();while(actb_pos>actb_ranged)actb_movedown();if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_insertword(a,wPos){if(actb_self.actb_delimiter.length>0){str='';l=0;for(i=0;i<actb_delimwords.length;i++){if(actb_cdelimword==i){prespace=postspace='';gotbreak=false;for(j=0;j<actb_delimwords[i].length;++j){if(actb_delimwords[i].charAt(j)!=' '){gotbreak=true;break;}
prespace+=' ';}
for(j=actb_delimwords[i].length-1;j>=0;--j){if(actb_delimwords[i].charAt(j)!=' ')break;postspace+=' ';}
str+=prespace;str+=a;l=str.length;if(gotbreak)str+=postspace;}else{str+=actb_delimwords[i];}
if(i!=actb_delimwords.length-1){str+=actb_delimchar[i];}}
actb_curr.value=str;setCaret(actb_curr,l);}else{actb_curr.value=a;}
if(ajxCon!=undefined&&ajxCon.getControl().getIsRef()){ajxCon.setRefKeys(wPos);}
actb_mouse_on_list=0;actb_removedisp();}
function actb_penter(evt){if(!actb_display)return;actb_display=false;var word='';var c=0;var w_pos;for(w_pos=0;w_pos<=actb_self.actb_keywords.length;w_pos++){if(actb_bool[w_pos])c++;if(c==actb_pos){word=actb_self.actb_keywords[w_pos];break;}}
actb_insertword(word,w_pos);l=getCaretStart(actb_curr,winDocum);}
function actb_removedisp(){if(actb_mouse_on_list==0){actb_display=0;if(winDocum.getElementById('tat_table')){winDocum.body.removeChild(winDocum.getElementById('tat_table'));}
if(actb_toid)clearTimeout(actb_toid);}}
function actb_keypress(e){if(actb_caretmove)stopEvent(e);return!actb_caretmove;}
function actb_checkkey(evt){if(!evt)evt=event;a=evt.keyCode;caret_pos_start=getCaretStart(actb_curr,winDocum);actb_caretmove=0;switch(a){case 38:actb_goup();actb_caretmove=1;return false;break;case 40:actb_godown();actb_caretmove=1;return false;break;case 13:case 9:if(actb_display){actb_caretmove=1;actb_penter(evt);return false;}else{return true;}
break;default:setTimeout(function(){actb_tocomplete(a)},50);break;}}
function actb_tocomplete(kc){if(kc==38||kc==40||kc==13)return;if(ajxCon!=undefined&&actb_curr.value!=""){ajxCon.fillArrayOnPattern(actb_curr);}
_actb_tocomplete();}
function _actb_tocomplete(){if(ajxCon!=undefined&&actb_curr.value!=""){actb_keywords=ajxCon.m_keywords;}
var i;if(actb_display){var word=0;var c=0;for(var i=0;i<=actb_self.actb_keywords.length;i++){if(actb_bool[i])c++;if(c==actb_pos){word=i;break;}}
actb_pre=word;}else{actb_pre=-1};if(actb_curr.value==''){actb_mouse_on_list=0;actb_removedisp();return;}
if(actb_self.actb_delimiter.length>0){caret_pos_start=getCaretStart(actb_curr,winDocum);caret_pos_end=getCaretEnd(actb_curr,winDocum);delim_split='';for(i=0;i<actb_self.actb_delimiter.length;i++){delim_split+=actb_self.actb_delimiter[i];}
delim_split=delim_split.addslashes();delim_split_rx=new RegExp("(["+delim_split+"])");c=0;actb_delimwords=new Array();actb_delimwords[0]='';for(i=0,j=actb_curr.value.length;i<actb_curr.value.length;i++,j--){if(actb_curr.value.substr(i,j).search(delim_split_rx)==0){ma=actb_curr.value.substr(i,j).match(delim_split_rx);actb_delimchar[c]=ma[1];c++;actb_delimwords[c]='';}else{actb_delimwords[c]+=actb_curr.value.charAt(i);}}
var l=0;actb_cdelimword=-1;for(i=0;i<actb_delimwords.length;i++){if(caret_pos_end>=l&&caret_pos_end<=l+actb_delimwords[i].length){actb_cdelimword=i;}
l+=actb_delimwords[i].length+1;}
var ot=actb_delimwords[actb_cdelimword].trim();var t=actb_delimwords[actb_cdelimword].addslashes().trim();}else{var ot=actb_curr.value;var t=actb_curr.value.addslashes();}
if(ot.length==0){actb_mouse_on_list=0;actb_removedisp();}
if(ot.length<actb_self.actb_startcheck)return this;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
actb_total=0;actb_tomake=false;actb_kwcount=0;for(i=0;i<actb_self.actb_keywords.length;i++){actb_bool[i]=false;if(re.test(actb_self.actb_keywords[i])){actb_total++;actb_bool[i]=true;actb_kwcount++;if(actb_pre==i)actb_tomake=true;}}
if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);actb_generate();}
return this;} 
actbAJX.prototype.ER_NO_MODEL="Модель % не найдена в ответе сервера.";actbAJX.prototype.ER_NOT_SELECTED="Значение не выбрано."; 
function RepCommands(id,options){options=options||{};RepCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdMake=(options.cmdMake!=undefined)?options.cmdMake:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:true;options.cmdExcel=(options.cmdExcel!=undefined)?options.cmdExcel:false;options.cmdPdf=(options.cmdPdf!=undefined)?options.cmdPdf:false;options.expanded=(options.expanded==undefined)?options.expanded:true;var self=this;if(options.cmdMake){this.setControlMake(options.controlMake||new ButtonCmd(id+":cmdMake",{"caption":this.BTN_MAKE_CAP,"onClick":function(){options.onReport();},"attrs":{"title":this.BTN_MAKE_TITLE}}));}
if(options.cmdPrint){this.setControlPrint(options.controlPrint||new ButtonCmd(id+":cmdPrint",{"caption":this.BTN_PRINT_CAP,"onClick":function(e){options.onPrint();},"attrs":{"title":this.BTN_PRINT_TITLE}}));}
if(options.cmdExcel){this.setControlExcel(options.controlExcel||new ButtonCmd(id+":cmdExcel",{"caption":this.BTN_EXCEL_CAP,"onClick":function(e){options.onExcel();},"attrs":{"title":this.BTN_EXCEL_TITLE}}));}
if(options.cmdExcel){this.setControlExcel(options.controlExcel||new ButtonCmd(id+":cmdPDF",{"caption":this.BTN_PDF_CAP,"onClick":function(e){options.onPDF();},"attrs":{"title":this.BTN_PDF_TITLE}}));}
if(options.cmdFilter){this.setControlFilter(options.controlFilter||new GridFilter(CommonHelper.uniqid(),{"cmdSet":false,"cmdUnset":false,"className":("form-horizontal collapse"+(options.expanded)?" in":""),"filters":options.filters,"app":options.app}));this.setControlFilterToggle(options.controlFilterToggle||new ButtonCmd(id+":cmdToggle",{"attrs":{"title":this.BTN_FILTER_TITLE},"onClick":function(){var filter=self.getControlFilter();$(filter.getNode()).collapse("toggle");if(!DOMHelper.hasClass(filter.getNode(),"in")){var filters=filter.getFilter().getFilters();for(var id in filters){filters[id].binding.getControl().focus();break;}}},"caption":this.BTN_FILTER_CAP,"glyph":"glyphicon-triangle-bottom","app":options.app}));}
this.addControls();}
extend(RepCommands,ControlContainer);RepCommands.prototype.DEF_TAG_NAME="div";RepCommands.prototype.DEF_CLASS_NAME="rep_commands";RepCommands.prototype.m_controlMake;RepCommands.prototype.m_controlPrint;RepCommands.prototype.m_controlExcel;RepCommands.prototype.m_controlPdf;RepCommands.prototype.m_controlFilterToggle;RepCommands.prototype.m_controlFilter;RepCommands.prototype.addControls=function(){if(this.m_controlMake)this.addElement(this.m_controlMake);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExcel)this.addElement(this.m_controlExcel);if(this.m_controlPdf)this.addElement(this.m_controlPdf);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}}
RepCommands.prototype.setEnabled=function(en){if(this.m_controlMake)this.m_controlMake.setEnabled(en);if(this.m_controlPrint)this.m_controlPrint.setEnabled(en);if(this.m_controlExcel)this.m_controlExcel.setEnabled(en);if(this.m_controlPdf)this.m_controlPdf.setEnabled(en);if(this.m_controlFilter)this.m_controlFilter.setEnabled(en);RepCommands.superclass.setEnabled.call(this,en);}
RepCommands.prototype.getControlMake=function(){return this.m_controlMake;}
RepCommands.prototype.setControlMake=function(v){this.m_controlMake=v;}
RepCommands.prototype.getControlExcel=function(){return this.m_controlEdit;}
RepCommands.prototype.setControlExcel=function(v){this.m_controlExcel=v;}
RepCommands.prototype.getControlPdf=function(){return this.m_controllPdf;}
RepCommands.prototype.setControlPdf=function(v){this.m_controlPdf=v;}
RepCommands.prototype.getControlPrint=function(){return this.m_controlPrint;}
RepCommands.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
RepCommands.prototype.getControlFilter=function(){return this.m_controlFilter;}
RepCommands.prototype.setControlFilter=function(v){this.m_controlFilter=v;}
RepCommands.prototype.getControlFilterToggle=function(){return this.m_controlFilterToggle;}
RepCommands.prototype.setControlFilterToggle=function(v){this.m_controlFilterToggle=v;} 
RepCommands.prototype.BTN_MAKE_CAP="Сформировать";RepCommands.prototype.BTN_MAKE_TITLE="Сформировать отчет";RepCommands.prototype.BTN_PRINT_CAP="Печать";RepCommands.prototype.BTN_PRINT_TITLE="Напечатать отчет";RepCommands.prototype.BTN_EXCEL_CAP="Excel";RepCommands.prototype.BTN_EXCEL_TITLE="Экспорт отчета в excel";RepCommands.prototype.BTN_PDF_CAP="PDF";RepCommands.prototype.BTN_PDF_TITLE="Экспорт отчета в pdf";RepCommands.prototype.BTN_FILTER_CAP="Параметры";RepCommands.prototype.BTN_FILTER_TITLE="Показать/скрыть параметры отчета"; 
function ViewReport(id,options){options=options||{};ViewReport.superclass.constructor.call(this,id,"div",options);this.setPublicMethod(options.publicMethod);this.setReportViewId(options.reportViewId);this.setExcelViewId(options.excelViewId||this.DEF_EXCEL_VIEW);this.setPdfViewId(options.pdfViewId||this.DEF_PDF_VIEW);this.setTemplateId(options.templateId);this.setReportControl(options.reportControl||new Control(id+":report","div",{"app":options.app}));var self=this;var def_cmd_opts={"cmdMake":options.cmdMake,"cmdPrint":options.cmdPrint,"cmdFilter":options.cmdFilter,"cmdExcel":options.cmdExcel,"cmdPdf":options.cmdPdf,"filters":options.filters,"app":options.app};if(def_cmd_opts.cmdMake)def_cmd_opts.onReport=function(){self.onReport();};if(def_cmd_opts.cmdPrint)def_cmd_opts.onPrint=function(){self.onPrint();};if(def_cmd_opts.cmdExcel)def_cmd_opts.onExcel=function(){self.onExcel();};if(def_cmd_opts.cmdPdf)def_cmd_opts.onPdf=function(){self.onPdf();};this.m_commands=options.commands||new RepCommands(id+":repCommands",def_cmd_opts);this.m_winObj=options.winObj;if(options.reportType){this.m_variant=new EditReportVariant(id+":variant",{"report_type":options.reportType,"onStoreVariant":function(id){self.storeControls(id);},"onRestoreVariant":function(keys,descr){self.restoreControls(keys,descr);}});}
this.m_storingControl={};}
extend(ViewReport,ControlContainer);ViewReport.prototype.DEF_EXCEL_VIEW="ViewExcel";ViewReport.prototype.DEF_PDF_VIEW="ViewPDF";ViewReport.prototype.m_publicMethod;ViewReport.prototype.m_templateId;ViewReport.prototype.m_reportViewId;ViewReport.prototype.m_excelViewId;ViewReport.prototype.m_pdfViewId;ViewReport.prototype.m_commands;ViewReport.prototype.m_groupper;ViewReport.prototype.m_reportControl;ViewReport.prototype.getFilter=function(){return this.m_filter;}
ViewReport.prototype.setFilter=function(filter){this.m_filter=filter;}
ViewReport.prototype.setGroupper=function(v){this.m_groupper=v;}
ViewReport.prototype.getGroupper=function(v){return this.m_groupper;}
ViewReport.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
ViewReport.prototype.getPublicMethod=function(){return this.m_publicMethod;}
ViewReport.prototype.setReportViewId=function(v){this.m_reportViewId=v;}
ViewReport.prototype.getReportViewId=function(){return this.m_reportViewId;}
ViewReport.prototype.setExcelViewId=function(v){this.m_excelViewId=v;}
ViewReport.prototype.getExcelViewId=function(){return this.m_excelViewId;}
ViewReport.prototype.setPdfViewId=function(v){this.m_pdfViewId=v;}
ViewReport.prototype.getPdfViewId=function(){return this.m_pdfViewId;}
ViewReport.prototype.setReportControl=function(reportControl){this.m_reportControl=reportControl;}
ViewReport.prototype.getReportControl=function(){return this.m_reportControl;}
ViewReport.prototype.setCommands=function(v){this.m_commands=v;}
ViewReport.prototype.getCommands=function(){return this.m_commands;}
ViewReport.prototype.setTemplateId=function(v){this.m_templateId=v;}
ViewReport.prototype.getTemplateId=function(){return this.m_templateId;}
ViewReport.prototype.toDOM=function(parent){ViewReport.superclass.toDOM.call(this,parent);if(this.m_variant){this.m_variant.toDOM(this.m_node);}
this.m_commands.toDOM(this.m_node);this.m_reportControl.toDOM(this.m_node);}
ViewReport.prototype.delDOM=function(){if(this.m_variant){this.m_variant.delDOM();}
this.m_commands.delDOM();this.m_reportControl.delDOM();ViewReport.superclass.delDOM.call(this);}
ViewReport.prototype.fillParams=function(){var pm=this.getPublicMethod();var contr=pm.getController();if(this.m_commands.getControlFilter()){var model_filter=this.m_commands.getControlFilter().getFilter();var struc=model_filter.getVals(contr.PARAM_FIELD_SEP_VAL);if(!struc.incorrect_vals){pm.setFieldValue(contr.PARAM_COND_FIELDS,struc.fields);pm.setFieldValue(contr.PARAM_COND_SGNS,struc.signs);pm.setFieldValue(contr.PARAM_COND_VALS,struc.vals);pm.setFieldValue(contr.PARAM_COND_ICASE,struc.icase);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);}}
if(this.m_groupper){this.m_groupper.getParams(filter_struc);if(!filter_struc.grp_fields){throw Error(this.NO_GRP_SELECTED);}
pm.setFieldValue(contr.PARAM_GRP_FIELDS,filter_struc.grp_fields);}}
ViewReport.prototype.downloadReport=function(view){this.getPublicMethod().download(view);}
ViewReport.prototype.onReport=function(){this.fillParams();var self=this;this.m_commands.setEnabled(false);var pm=this.getPublicMethod();pm.setFieldValue("templ",this.getTemplateId());pm.run({"viewId":this.getReportViewId(),"get":true,"retContentType":"text","ok":function(respText){self.m_reportControl.m_node.innerHTML=respText;self.m_commands.setEnabled(true);},"fail":function(){self.m_commands.setEnabled(true);}});}
ViewReport.prototype.onPrint=function(){var ctrl=this.getReportControl();if(ctrl){WindowPrint.show({"content":ctrl.getNode().outerHTML});}}
ViewReport.prototype.onExcel=function(){this.downloadReport(this.getExcelViewId());}
ViewReport.prototype.onPdf=function(){this.downloadReport(this.getPdfViewId());}
ViewReport.prototype.addStoringControl=function(control){this.m_storingControl[control.getId()]=control;}
ViewReport.prototype.storeControls=function(variantId){var data={};var cnt=0;for(var id in this.m_storingControl){data[id]=this.m_storingControl[id].getValueAsObj();cnt++;}
if(cnt){var contr=new ReportVariant_Controller(new ServConnector(HOST_NAME));var pm=contr.getPublicMethod("update");pm.setFieldValue("old_id",variantId);pm.setFieldValue("data",CommonHelper.array2json(data));pm.run({"ok":function(){this.getApp().showNote(this.VARIANT_SAVED);}});}}
ViewReport.prototype.restoreControls=function(keys,descrs){var self=this;var contr=new ReportVariant_Controller(new ServConnector(HOST_NAME));var pm=contr.getPublicMethod("get_object");pm.setFieldValue("id",keys.id);pm.run({"ok":function(resp){var m=new ReportVariant_Model({"data":resp.getModelData("ReportVariant_Model")});if(m.getNextRow()){var data=CommonHelper.json2obj(m.getFieldValue("data"));for(var id in data){if(self.m_storingControl[id]){self.m_storingControl[id].setValueFromObj(data[id]);}}}}});} 
ViewReport.prototype.VARIANT_SAVED="Сохранение настроек выполнено.";ViewReport.prototype.NO_GRP_SELECTED="Не выбрано ни одного поля!"; 
function PopUpMenu(options){options=options||{};this.items=[];this.width=0;this.height=0;this.m_caption=options.caption;var self=this;this.m_evShow=function(e){e=EventHelper.fixMouseEvent(e);self.show.call(self,e);if(e.preventDefault){e.preventDefault();}
return false;};}
PopUpMenu.prototype.SEPARATOR='PopUpMenu.SEPARATOR';PopUpMenu.prototype.current=null;PopUpMenu.prototype.unbind=function(){EventHelper.del(this.target,"contextmenu",this.m_evShow,true);if(this.element){this.element.delDOM();}}
PopUpMenu.prototype.bind=function(element){if(!this.items.length){return;}
var self=this;if(!element){element=document;}else if(typeof element=='string'){element=document.getElementById(element);}
this.target=element;EventHelper.add(this.target,"contextmenu",this.m_evShow,true);}
PopUpMenu.prototype.add=function(action){this.items.push(action);}
PopUpMenu.prototype.addButton=function(btn){this.items.push({caption:btn.getCaption()||btn.getAttr("title"),glyph:btn.getGlyph(),onClick:btn.getOnClick()});}
PopUpMenu.prototype.addSeparator=function(){this.items.push(PopUpMenu.SEPARATOR);}
PopUpMenu.prototype.show=function(e,fixToElement){if(this.current&&this.current!=this)return;this.current=this;if(this.element){this.element.setPosition(e,fixToElement);this.element.setVisible(true);}else{this.element=this.createMenu(this.items);this.element.toDOM(e,fixToElement);}}
PopUpMenu.prototype.hide=function(){this.current=null;if(this.element)this.element.setVisible(false);}
PopUpMenu.prototype.getVisible=function(){if(this.element)return this.element.getVisible();}
PopUpMenu.prototype.createMenu=function(items){var self=this;var menu_cont=[];for(var i=0;i<items.length;i++){var item;if(items[i]==PopUpMenu.SEPARATOR){item=this.createSeparator();}else{item=this.createItem(items[i]);}
menu_cont.push(item);}
var menu=new PopOver(CommonHelper.uniqid(),{"fixToElement":this.fixToElement,"attrs":{"style":((self.width)?("width:"+self.width+"px;"):"")
+
((self.height)?("height:"+self.height+"px;"):"")},"caption":this.m_caption,"contentElements":[new ControlContainer(CommonHelper.uniqid(),"ul",{"elements":menu_cont,"className":"nav"})]});return menu;}
PopUpMenu.prototype.createItem=function(item){var self=this;var callback=item.onClick;var elem=new Control(null,"a",{"attrs":{"href":"#"},"enabled":!item.disabled,"className":"nav-link","events":{"click":function(_callback){return function(){self.hide();_callback(self.target);};}(callback)}});if(item.glyph){var i=document.createElement("span");i.className="glyphicon "+item.glyph;elem.m_node.appendChild(i);}
elem.m_node.appendChild(document.createTextNode(" "+item.caption));return new ControlContainer(null,"li",{"className":"nav-item","elements":[elem]});}
PopUpMenu.prototype.createSeparator=function(){return new Control(null,"div",{"attrs":{"style":"borderTop='1px dotted #CCCCCC';fontSize='0px';height='0px';"}})} 
function PopOver(id,options){options=options||{};options.template=window.getApp().getTemplate("PopOver");PopOver.superclass.constructor.call(this,id,"template",options);this.addElement(new Control(id+":title","div",{"value":options.caption}));this.addElement(new ControlContainer(id+":content","div",{elements:options.contentElements}));var self=this;this.m_evHide=function(event){event=EventHelper.fixMouseEvent(event);if(event.pageX<self.m_posMinX||event.pageX>self.m_posMaxX||event.pageY<self.m_posMinY||event.pageY>self.m_posMaxY){var el=event.target;var other_popover=false;el=el.parentNode;while(el){if(DOMHelper.hasClass(el,"popover")||DOMHelper.hasClass(el,"datepicker")){other_popover=true;break;}
el=el.parentNode;}
if(!other_popover&&self.getVisible()){self.setVisible(false);event.stopPropagation();}}}}
extend(PopOver,ControlContainer);PopOver.prototype.setPosition=function(e,fixToElement){var x,y;if(fixToElement){var rect=fixToElement.getBoundingClientRect();y=rect.top+$(fixToElement).outerHeight();x=rect.left;}
else{x=e.pageX;y=e.pageY;}
var n=this.getNode();n.style.display="block";n.style.position="absolute";n.style.top=y+'px';n.style.left=x+'px';}
PopOver.prototype.setVisible=function(v){PopOver.superclass.setVisible.call(this,v);if(v){this.addClick();}
else{this.delClick();}}
PopOver.prototype.addClick=function(){EventHelper.add(document,"click",this.m_evHide,true);}
PopOver.prototype.delClick=function(){EventHelper.del(document,"click",this.m_evHide,true);}
PopOver.prototype.toDOM=function(e,fixToElement){this.setPosition(e,fixToElement);PopOver.superclass.toDOM.call(this,document.body);var rect=this.m_node.getBoundingClientRect();this.m_posMinY=rect.top;this.m_posMaxY=rect.top+$(this.m_node).outerHeight();this.m_posMinX=rect.left;this.m_posMaxX=rect.left+$(this.m_node).outerWidth();this.m_zIndex=parseInt($(this.m_node).css("z-index"),10);this.addClick();}
PopOver.prototype.delDOM=function(){PopOver.superclass.delDOM.call(this);this.delClick();} 
function PeriodSelect(id,options){options=options||{};var self=this;options.events={"onClick":function(e){self.onClick(e);}};options.attrs=options.attrs||{};options.attrs.style="cursor:pointer;";options.value=options.value||options.period||this.PERIOD_ALIASES[0];PeriodSelect.superclass.constructor.call(this,id,"a",options);}
extend(PeriodSelect,Control);PeriodSelect.prototype.PERIOD_ALIASES=["all","day","week","month","quarter","year"];PeriodSelect.prototype.CLASS_SELECTED="alert-success";PeriodSelect.prototype.m_pop;PeriodSelect.prototype.onClick=function(e){if(!this.m_pop){var self=this;var cont_el=[];var cur=this.getValue();console.log("cur="+cur)
for(var i=0;i<this.PERIOD_ALIASES.length;i++){cont_el.push(new Control(CommonHelper.uniqid(),"p",{"className":"forSelect"+((cur==this.PERIOD_ALIASES[i])?" "+this.CLASS_SELECTED:""),"value":this.PERIODS[i],"attrs":{"period":this.PERIOD_ALIASES[i],"style":"cursor:pointer;"},"events":{"onClick":function(e){self.m_pop.setVisible(false);var par=e.target.parentNode;for(var j=0;j<par.childNodes.length;j++){if(par.childNodes[j]==e.target){DOMHelper.addClass(e.target,self.CLASS_SELECTED);}
else if(DOMHelper.hasClass(par.childNodes[j],self.CLASS_SELECTED)){DOMHelper.delClass(par.childNodes[j],self.CLASS_SELECTED);}}
self.setValue(e.target.getAttribute("period"));}}}));}
var cont=new ControlContainer(null,"div",{"elements":cont_el});this.m_pop=new PopOver(this.getId()+":popover",{"contentElements":[cont]});this.m_pop.toDOM(e,this.getNode());}
else{this.m_pop.setVisible(!this.m_pop.getVisible());}}
PeriodSelect.prototype.setValue=function(v){var p=CommonHelper.inArray(v,this.PERIOD_ALIASES);if(p==-1){throw Error(this.ER_PERIOD_NOT_FOUND);}
this.setAttr("period",v);PeriodSelect.superclass.setValue.call(this,this.PERIODS[p]);}
PeriodSelect.prototype.getValue=function(v){return this.getAttr("period");} 
PeriodSelect.prototype.PERIODS=["Весь период","День","Неделя","Месяц","Квартал","Год"];PeriodSelect.prototype.ER_PERIOD_NOT_FOUND="Период не определен!"; 
function Constant_Controller(app,options){options=options||{};options.listModel=ConstantList_Model;options.objModel=ConstantList_Model;Constant_Controller.superclass.constructor.call(this,app,options);this.add_set_value();this.addGetList();this.addGetObject();this.add_get_values();}
extend(Constant_Controller,ControllerDb);Constant_Controller.prototype.add_set_value=function(){var pm=new PublicMethod('set_value',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldString("val",options));}
Constant_Controller.prototype.addGetList=function(){Constant_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Описание";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Значение";pm.addField(new FieldText("val_descr",f_opts));var f_opts={};f_opts.alias="Имя значения";pm.addField(new FieldText("val_type",f_opts));var f_opts={};pm.addField(new FieldInt("val_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Constant_Controller.prototype.addGetObject=function(){Constant_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));}
Constant_Controller.prototype.add_get_values=function(){var pm=new PublicMethod('get_values',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("id_list",options));} 
function Enum_Controller(servConnector){options={};Enum_Controller.superclass.constructor.call(this,"Enum_Controller",servConnector,options);this.add_get_enum_list();}
extend(Enum_Controller,ControllerDb);Enum_Controller.prototype.add_get_enum_list=function(){var pm=this.addMethodById('get_enum_list');pm.addParam(new FieldString("id"));} 
function MaterialGroup_Controller(app,options){options=options||{};options.listModel=MaterialGroup_Model;options.objModel=MaterialGroup_Model;MaterialGroup_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_list_for_florist();}
extend(MaterialGroup_Controller,ControllerDb);MaterialGroup_Controller.prototype.addInsert=function(){MaterialGroup_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Для флориста";var field=new FieldBool("for_florist",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MaterialGroup_Controller.prototype.addUpdate=function(){MaterialGroup_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Для флориста";var field=new FieldBool("for_florist",options);pm.addField(field);}
MaterialGroup_Controller.prototype.addDelete=function(){MaterialGroup_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MaterialGroup_Controller.prototype.addGetList=function(){MaterialGroup_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Для флориста";pm.addField(new FieldBool("for_florist",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
MaterialGroup_Controller.prototype.addGetObject=function(){MaterialGroup_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
MaterialGroup_Controller.prototype.addComplete=function(){MaterialGroup_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
MaterialGroup_Controller.prototype.add_get_list_for_florist=function(){var pm=new PublicMethod('get_list_for_florist',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));} 
function Material_Controller(app,options){options=options||{};options.listModel=MaterialList_Model;options.objModel=Material_Model;Material_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_list_with_balance();this.add_get_balance_list();this.add_get_list_for_sale();this.add_material_procur_plan_report();this.add_procur_avg_price_report();this.add_actions_report();this.add_print_barcode();}
extend(Material_Controller,ControllerDb);Material_Controller.prototype.addInsert=function(){Material_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Описание";options.required=true;var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Розничная цена";options.required=true;var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Для продажи";var field=new FieldBool("for_sale",options);pm.addField(field);var options={};options.alias="Наценка (%)";var field=new FieldInt("margin_percent",options);pm.addField(field);var options={};options.alias="Группа";options.required=true;var field=new FieldInt("material_group_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Material_Controller.prototype.addUpdate=function(){Material_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Розничная цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Для продажи";var field=new FieldBool("for_sale",options);pm.addField(field);var options={};options.alias="Наценка (%)";var field=new FieldInt("margin_percent",options);pm.addField(field);var options={};options.alias="Группа";var field=new FieldInt("material_group_id",options);pm.addField(field);}
Material_Controller.prototype.addDelete=function(){Material_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Material_Controller.prototype.addGetList=function(){Material_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Розничная цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Для продажи";pm.addField(new FieldBool("for_sale",f_opts));var f_opts={};pm.addField(new FieldString("material_group_id",f_opts));}
Material_Controller.prototype.addGetObject=function(){Material_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));}
Material_Controller.prototype.addComplete=function(){Material_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Material_Controller.prototype.add_get_list_with_balance=function(){var pm=new PublicMethod('get_list_with_balance',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("field_sep",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
Material_Controller.prototype.add_get_balance_list=function(){var pm=new PublicMethod('get_balance_list',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
Material_Controller.prototype.add_get_list_for_sale=function(){var pm=new PublicMethod('get_list_for_sale',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
Material_Controller.prototype.add_material_procur_plan_report=function(){var pm=new PublicMethod('material_procur_plan_report',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));}
Material_Controller.prototype.add_procur_avg_price_report=function(){var pm=new PublicMethod('procur_avg_price_report',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));}
Material_Controller.prototype.add_actions_report=function(){var pm=new PublicMethod('actions_report',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));}
Material_Controller.prototype.add_print_barcode=function(){var pm=new PublicMethod('print_barcode',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("material_id",options));var options={};pm.addField(new FieldString("templ",options));}
Material_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Этикетка","publicMethod":this.getPublicMethod("print_barcode"),"templ":"MaterialBarcode","publicMethodKeyIds":["material_id"]})];} 
function Product_Controller(app,options){options=options||{};options.listModel=ProductList_Model;options.objModel=Product_Model;Product_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_complete_for_spec();this.add_get_list_with_balance();this.add_get_list_for_sale();this.add_get_price();}
extend(Product_Controller,ControllerDb);Product_Controller.prototype.addInsert=function(){Product_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Описание";options.required=true;var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Розничная цена";options.required=true;var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Для продажи";var field=new FieldBool("for_sale",options);pm.addField(field);var options={};options.alias="Заказывать автоматически";var field=new FieldBool("make_order",options);pm.addField(field);var options={};options.alias="Минимальный остаток";var field=new FieldFloat("min_stock_quant",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Product_Controller.prototype.addUpdate=function(){Product_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Описание";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Розничная цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Для продажи";var field=new FieldBool("for_sale",options);pm.addField(field);var options={};options.alias="Заказывать автоматически";var field=new FieldBool("make_order",options);pm.addField(field);var options={};options.alias="Минимальный остаток";var field=new FieldFloat("min_stock_quant",options);pm.addField(field);}
Product_Controller.prototype.addDelete=function(){Product_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Product_Controller.prototype.addGetList=function(){Product_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Розничная цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Для продажи";pm.addField(new FieldBool("for_sale",f_opts));}
Product_Controller.prototype.addGetObject=function(){Product_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));}
Product_Controller.prototype.addComplete=function(){Product_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldFloat("price",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("price");}
Product_Controller.prototype.add_complete_for_spec=function(){var pm=new PublicMethod('complete_for_spec',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("name",options));}
Product_Controller.prototype.add_get_list_with_balance=function(){var pm=new PublicMethod('get_list_with_balance',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("field_sep",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
Product_Controller.prototype.add_get_list_for_sale=function(){var pm=new PublicMethod('get_list_for_sale',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
Product_Controller.prototype.add_get_price=function(){var pm=new PublicMethod('get_price',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("product_id",options));} 
function Specification_Controller(app,options){options=options||{};options.listModel=SpecificationList_Model;options.objModel=SpecificationList_Model;Specification_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(Specification_Controller,ControllerDb);Specification_Controller.prototype.addInsert=function(){Specification_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Продукция";options.required=true;var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Кол.продукции";var field=new FieldFloat("product_quant",options);pm.addField(field);var options={};options.alias="Кол.материала";options.required=true;var field=new FieldFloat("material_quant",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Specification_Controller.prototype.addUpdate=function(){Specification_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Продукция";var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Кол.продукции";var field=new FieldFloat("product_quant",options);pm.addField(field);var options={};options.alias="Кол.материала";var field=new FieldFloat("material_quant",options);pm.addField(field);}
Specification_Controller.prototype.addDelete=function(){Specification_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Specification_Controller.prototype.addGetList=function(){Specification_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("product_id",f_opts));var f_opts={};pm.addField(new FieldString("product_descr",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};pm.addField(new FieldInt("product_quant",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("material_quant",f_opts));}
Specification_Controller.prototype.addGetObject=function(){Specification_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));} 
function Store_Controller(app,options){options=options||{};options.listModel=StoreList_Model;options.objModel=StoreList_Model;Store_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Store_Controller,ControllerDb);Store_Controller.prototype.addInsert=function(){Store_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Store_Controller.prototype.addUpdate=function(){Store_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);}
Store_Controller.prototype.addDelete=function(){Store_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Store_Controller.prototype.addGetList=function(){Store_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));}
Store_Controller.prototype.addGetObject=function(){Store_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
Store_Controller.prototype.addComplete=function(){Store_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function Supplier_Controller(app,options){options=options||{};options.listModel=SupplierList_Model;options.objModel=Supplier_Model;Supplier_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Supplier_Controller,ControllerDb);Supplier_Controller.prototype.addInsert=function(){Supplier_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";options.required=true;var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Email";var field=new FieldString("email",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Supplier_Controller.prototype.addUpdate=function(){Supplier_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Email";var field=new FieldString("email",options);pm.addField(field);}
Supplier_Controller.prototype.addDelete=function(){Supplier_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Supplier_Controller.prototype.addGetList=function(){Supplier_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Email";pm.addField(new FieldString("email",f_opts));}
Supplier_Controller.prototype.addGetObject=function(){Supplier_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));}
Supplier_Controller.prototype.addComplete=function(){Supplier_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function User_Controller(app,options){options=options||{};options.listModel=UserList_Model;options.objModel=UserDialog_Model;User_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_profile();this.addComplete();this.add_reset_pwd();this.add_login();this.add_login_refresh();this.add_logout();this.add_logout_html();}
extend(User_Controller,ControllerDb);User_Controller.prototype.addInsert=function(){User_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;options.enumValues='admin,store_manager,florist,cashier';field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Привязвывать к магазину";var field=new FieldBool("constrain_to_store",options);pm.addField(field);var options={};var field=new FieldInt("cash_register_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
User_Controller.prototype.addUpdate=function(){User_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.enumValues='admin,store_manager,florist,cashier';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Привязвывать к магазину";var field=new FieldBool("constrain_to_store",options);pm.addField(field);var options={};var field=new FieldInt("cash_register_id",options);pm.addField(field);}
User_Controller.prototype.addDelete=function(){User_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
User_Controller.prototype.addGetList=function(){User_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Имя";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Роль";pm.addField(new FieldString("role_descr",f_opts));var f_opts={};f_opts.alias="Моб.телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};pm.addField(new FieldBool("constrain_to_store",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};pm.addField(new FieldString("store_descr",f_opts));}
User_Controller.prototype.addGetObject=function(){User_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));}
User_Controller.prototype.add_get_profile=function(){var pm=new PublicMethod('get_profile',{controller:this});this.addPublicMethod(pm);}
User_Controller.prototype.addComplete=function(){User_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
User_Controller.prototype.add_reset_pwd=function(){var pm=new PublicMethod('reset_pwd',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("user_id",options));}
User_Controller.prototype.add_login=function(){var pm=new PublicMethod('login',{controller:this});this.addPublicMethod(pm);var options={};options.alias="Имя пользователя";options.required=true;options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.alias="Пароль";options.required=true;options.maxlength="20";pm.addField(new FieldPassword("pwd",options));}
User_Controller.prototype.add_login_refresh=function(){var pm=new PublicMethod('login_refresh',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("refresh_token",options));}
User_Controller.prototype.add_logout=function(){var pm=new PublicMethod('logout',{controller:this});this.addPublicMethod(pm);}
User_Controller.prototype.add_logout_html=function(){var pm=new PublicMethod('logout_html',{controller:this});this.addPublicMethod(pm);} 
function DOCMaterialDisposal_Controller(app,options){options=options||{};options.listModel=DOCMaterialDisposalList_Model;options.objModel=DOCMaterialDisposalList_Model;DOCMaterialDisposal_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_get_actions();this.add_set_unprocessed();this.add_get_print();this.add_get_details();}
extend(DOCMaterialDisposal_Controller,ControllerDb);DOCMaterialDisposal_Controller.prototype.addInsert=function(){DOCMaterialDisposal_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Причина списания";var field=new FieldText("explanation",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCMaterialDisposal_Controller.prototype.addUpdate=function(){DOCMaterialDisposal_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Причина списания";var field=new FieldText("explanation",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCMaterialDisposal_Controller.prototype.addDelete=function(){DOCMaterialDisposal_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCMaterialDisposal_Controller.prototype.addGetList=function(){DOCMaterialDisposal_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("processed",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};f_opts.alias="Стоимость";pm.addField(new FieldFloat("cost",f_opts));var f_opts={};f_opts.alias="Причина";pm.addField(new FieldString("explanation",f_opts));}
DOCMaterialDisposal_Controller.prototype.addGetObject=function(){DOCMaterialDisposal_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCMaterialDisposal_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));var options={};pm.addField(new FieldInt("doc_id",options));}
DOCMaterialDisposal_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCMaterialDisposal_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCMaterialDisposal_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCMaterialDisposal_Controller.prototype.add_get_details=function(){var pm=new PublicMethod('get_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
DOCMaterialDisposal_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Акт списания","publicMethod":this.getPublicMethod("get_print"),"templ":"DOCMaterialDisposalPrint","publicMethodKeyIds":["doc_id"]})];} 
function DOCMaterialDisposalDOCTMaterial_Controller(app,options){options=options||{};options.listModel=DOCMaterialDisposalDOCTMaterialList_Model;options.objModel=DOCMaterialDisposalDOCTMaterialList_Model;DOCMaterialDisposalDOCTMaterial_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCMaterialDisposalDOCTMaterial_Controller,ControllerDb);DOCMaterialDisposalDOCTMaterial_Controller.prototype.addInsert=function(){DOCMaterialDisposalDOCTMaterial_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCMaterialDisposalDOCTMaterial_Controller.prototype.addUpdate=function(){DOCMaterialDisposalDOCTMaterial_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCMaterialDisposalDOCTMaterial_Controller.prototype.addDelete=function(){DOCMaterialDisposalDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCMaterialDisposalDOCTMaterial_Controller.prototype.addGetList=function(){DOCMaterialDisposalDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));}
DOCMaterialDisposalDOCTMaterial_Controller.prototype.addGetObject=function(){DOCMaterialDisposalDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function DOCMaterialProcurement_Controller(app,options){options=options||{};options.listModel=DOCMaterialProcurementList_Model;options.objModel=DOCMaterialProcurementList_Model;DOCMaterialProcurement_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_set_unprocessed();this.add_get_actions();this.add_get_print();this.add_get_details();}
extend(DOCMaterialProcurement_Controller,ControllerDb);DOCMaterialProcurement_Controller.prototype.addInsert=function(){DOCMaterialProcurement_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Поставщик";options.required=true;var field=new FieldInt("supplier_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCMaterialProcurement_Controller.prototype.addUpdate=function(){DOCMaterialProcurement_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Поставщик";var field=new FieldInt("supplier_id",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCMaterialProcurement_Controller.prototype.addDelete=function(){DOCMaterialProcurement_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCMaterialProcurement_Controller.prototype.addGetList=function(){DOCMaterialProcurement_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};f_opts.alias="Идентификатор";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("processed",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};f_opts.alias="Поставщик";pm.addField(new FieldInt("supplier_id",f_opts));var f_opts={};f_opts.alias="Поставщик";pm.addField(new FieldString("supplier_descr",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));}
DOCMaterialProcurement_Controller.prototype.addGetObject=function(){DOCMaterialProcurement_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Идентификатор";pm.addField(new FieldInt("id",f_opts));}
DOCMaterialProcurement_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));}
DOCMaterialProcurement_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCMaterialProcurement_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCMaterialProcurement_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCMaterialProcurement_Controller.prototype.add_get_details=function(){var pm=new PublicMethod('get_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
DOCMaterialProcurement_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":this.PRINT_OBJ_CAP,"publicMethod":this.getPublicMethod("get_print"),"templ":"DOCMaterialProcurementPrint","publicMethodKeyIds":["doc_id"]})];} 
function DOCMaterialProcurementDOCTMaterial_Controller(app,options){options=options||{};options.listModel=DOCMaterialProcurementDOCTMaterialList_Model;options.objModel=DOCMaterialProcurementDOCTMaterialList_Model;DOCMaterialProcurementDOCTMaterial_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCMaterialProcurementDOCTMaterial_Controller,ControllerDb);DOCMaterialProcurementDOCTMaterial_Controller.prototype.addInsert=function(){DOCMaterialProcurementDOCTMaterial_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCMaterialProcurementDOCTMaterial_Controller.prototype.addUpdate=function(){DOCMaterialProcurementDOCTMaterial_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCMaterialProcurementDOCTMaterial_Controller.prototype.addDelete=function(){DOCMaterialProcurementDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCMaterialProcurementDOCTMaterial_Controller.prototype.addGetList=function(){DOCMaterialProcurementDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));}
DOCMaterialProcurementDOCTMaterial_Controller.prototype.addGetObject=function(){DOCMaterialProcurementDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function DOCProductDisposal_Controller(app,options){options=options||{};options.listModel=DOCProductDisposalList_Model;options.objModel=DOCProductDisposalList_Model;DOCProductDisposal_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_actions();this.add_set_unprocessed();this.add_get_print();}
extend(DOCProductDisposal_Controller,ControllerDb);DOCProductDisposal_Controller.prototype.addInsert=function(){DOCProductDisposal_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Комплектация";options.required=true;var field=new FieldInt("doc_production_id",options);pm.addField(field);var options={};options.alias="Причина списания";var field=new FieldText("explanation",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DOCProductDisposal_Controller.prototype.addUpdate=function(){DOCProductDisposal_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Комплектация";var field=new FieldInt("doc_production_id",options);pm.addField(field);var options={};options.alias="Причина списания";var field=new FieldText("explanation",options);pm.addField(field);}
DOCProductDisposal_Controller.prototype.addDelete=function(){DOCProductDisposal_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCProductDisposal_Controller.prototype.addGetList=function(){DOCProductDisposal_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldString("date_time_descr",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("processed",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldInt("product_id",f_opts));var f_opts={};f_opts.alias="Продукция";pm.addField(new FieldString("product_descr",f_opts));var f_opts={};f_opts.alias="Причина списания";pm.addField(new FieldString("explanation",f_opts));var f_opts={};f_opts.alias="Поставка";pm.addField(new FieldString("doc_production_descr",f_opts));var f_opts={};pm.addField(new FieldInt("doc_production_id",f_opts));var f_opts={};f_opts.alias="Номер комеплектации";pm.addField(new FieldString("doc_production_number",f_opts));var f_opts={};f_opts.alias="Дата комеплектации";pm.addField(new FieldDateTime("doc_production_date_time",f_opts));}
DOCProductDisposal_Controller.prototype.addGetObject=function(){DOCProductDisposal_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCProductDisposal_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCProductDisposal_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCProductDisposal_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCProductDisposal_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Акт списания","publicMethod":this.getPublicMethod("get_print"),"templ":"DOCProductDisposalPrint","publicMethodKeyIds":["doc_id"]})];} 
function DOCProduction_Controller(app,options){options=options||{};options.listModel=DOCProductionList_Model;options.objModel=DOCProductionList_Model;DOCProduction_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_set_unprocessed();this.add_fill_on_spec();this.add_get_balance_list();this.add_get_current_doc_cost();this.add_add_to_open_doc();this.add_get_actions();this.add_get_print();this.add_print_barcode();this.add_calc_mat_costs();this.add_get_details();}
extend(DOCProduction_Controller,ControllerDb);DOCProduction_Controller.prototype.addInsert=function(){DOCProduction_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Букет";options.required=true;var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("florist_comment",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCProduction_Controller.prototype.addUpdate=function(){DOCProduction_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Флорист";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Букет";var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("florist_comment",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCProduction_Controller.prototype.addDelete=function(){DOCProduction_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCProduction_Controller.prototype.addGetList=function(){DOCProduction_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("processed",f_opts));var f_opts={};f_opts.alias="По норме";pm.addField(new FieldBool("on_norm",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldInt("product_id",f_opts));var f_opts={};f_opts.alias="Продукция";pm.addField(new FieldString("product_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Сумма материалов";pm.addField(new FieldFloat("material_retail_cost",f_opts));var f_opts={};f_opts.alias="Себестоимость материалов";pm.addField(new FieldFloat("material_cost",f_opts));var f_opts={};f_opts.alias="Наценка,%";pm.addField(new FieldFloat("income_percent",f_opts));var f_opts={};f_opts.alias="Наценка,руб";pm.addField(new FieldFloat("income",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("florist_comment",f_opts));var f_opts={};f_opts.alias="Период после продажи";pm.addField(new FieldText("after_prod_interval",f_opts));var f_opts={};f_opts.alias="Представление документа";pm.addField(new FieldString("doc_descr",f_opts));}
DOCProduction_Controller.prototype.addGetObject=function(){DOCProduction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCProduction_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));}
DOCProduction_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCProduction_Controller.prototype.add_fill_on_spec=function(){var pm=new PublicMethod('fill_on_spec',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("product_id",options));var options={};options.required=true;pm.addField(new FieldFloat("product_quant",options));var options={};pm.addField(new FieldInt("store_id",options));}
DOCProduction_Controller.prototype.add_get_balance_list=function(){var pm=new PublicMethod('get_balance_list',{controller:this});this.addPublicMethod(pm);}
DOCProduction_Controller.prototype.add_get_current_doc_cost=function(){var pm=new PublicMethod('get_current_doc_cost',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("store_id",options));}
DOCProduction_Controller.prototype.add_add_to_open_doc=function(){var pm=new PublicMethod('add_to_open_doc',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("product_id",options));var options={};options.required=true;pm.addField(new FieldInt("material_id",options));}
DOCProduction_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCProduction_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCProduction_Controller.prototype.add_print_barcode=function(){var pm=new PublicMethod('print_barcode',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCProduction_Controller.prototype.add_calc_mat_costs=function(){var pm=new PublicMethod('calc_mat_costs',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));var options={};pm.addField(new FieldInt("doc_id",options));}
DOCProduction_Controller.prototype.add_get_details=function(){var pm=new PublicMethod('get_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
DOCProduction_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Комплектация","publicMethod":this.getPublicMethod("get_print"),"templ":"DOCProductionPrint","publicMethodKeyIds":["doc_id"]}),new PrintObj({"caption":"Этикетка","publicMethod":this.getPublicMethod("print_barcode"),"templ":"DOCProductionBarcode","publicMethodKeyIds":["doc_id"]})];} 
function DOCProductionDOCTMaterial_Controller(app,options){options=options||{};options.listModel=DOCProductionDOCTMaterialList_Model;options.objModel=DOCProductionDOCTMaterialList_Model;DOCProductionDOCTMaterial_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_florist_list();}
extend(DOCProductionDOCTMaterial_Controller,ControllerDb);DOCProductionDOCTMaterial_Controller.prototype.addInsert=function(){DOCProductionDOCTMaterial_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCProductionDOCTMaterial_Controller.prototype.addUpdate=function(){DOCProductionDOCTMaterial_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);}
DOCProductionDOCTMaterial_Controller.prototype.addDelete=function(){DOCProductionDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCProductionDOCTMaterial_Controller.prototype.addGetList=function(){DOCProductionDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));}
DOCProductionDOCTMaterial_Controller.prototype.addGetObject=function(){DOCProductionDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));}
DOCProductionDOCTMaterial_Controller.prototype.add_get_florist_list=function(){var pm=new PublicMethod('get_florist_list',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("store_id",options));} 
function DOCSale_Controller(app,options){options=options||{};options.listModel=DOCSaleList_Model;options.objModel=DOCSaleDialog_Model;DOCSale_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_set_unprocessed();this.add_get_actions();this.add_get_print();this.add_get_mat_details();this.add_get_prod_details();}
extend(DOCSale_Controller,ControllerDb);DOCSale_Controller.prototype.addInsert=function(){DOCSale_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Продавец";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("payment_type_for_sale_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Себест.материалов";var field=new FieldFloat("total_material_cost",options);pm.addField(field);var options={};options.alias="Себест.продукции";var field=new FieldFloat("total_product_cost",options);pm.addField(field);var options={};options.alias="Клиент";var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="Вид скидки";var field=new FieldInt("discount_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCSale_Controller.prototype.addUpdate=function(){DOCSale_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Продавец";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("payment_type_for_sale_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Себест.материалов";var field=new FieldFloat("total_material_cost",options);pm.addField(field);var options={};options.alias="Себест.продукции";var field=new FieldFloat("total_product_cost",options);pm.addField(field);var options={};options.alias="Клиент";var field=new FieldInt("client_id",options);pm.addField(field);var options={};options.alias="Вид скидки";var field=new FieldInt("discount_id",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCSale_Controller.prototype.addDelete=function(){DOCSale_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCSale_Controller.prototype.addGetList=function(){DOCSale_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("processed",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldInt("payment_type_for_sale_id",f_opts));var f_opts={};f_opts.alias="Вид оплаты";pm.addField(new FieldString("payment_type_for_sale_descr",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Клиент";pm.addField(new FieldString("client_descr",f_opts));var f_opts={};f_opts.alias="Доставка";pm.addField(new FieldString("delivery",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));var f_opts={};f_opts.alias="Стоимость";pm.addField(new FieldFloat("cost",f_opts));var f_opts={};f_opts.alias="Наценка,руб";pm.addField(new FieldFloat("income",f_opts));var f_opts={};f_opts.alias="Наценка,%";pm.addField(new FieldFloat("income_percent",f_opts));}
DOCSale_Controller.prototype.addGetObject=function(){DOCSale_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCSale_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));var options={};pm.addField(new FieldInt("doc_id",options));}
DOCSale_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCSale_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCSale_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCSale_Controller.prototype.add_get_mat_details=function(){var pm=new PublicMethod('get_mat_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
DOCSale_Controller.prototype.add_get_prod_details=function(){var pm=new PublicMethod('get_prod_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));}
DOCSale_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Товарный чек","publicMethod":this.getPublicMethod("get_print"),"templ":"DOCSalePrint","publicMethodKeyIds":["doc_id"]})];} 
function DOCSaleDOCTProduct_Controller(app,options){options=options||{};options.listModel=DOCSaleDOCTProductList_Model;options.objModel=DOCSaleDOCTProductList_Model;DOCSaleDOCTProduct_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCSaleDOCTProduct_Controller,ControllerDb);DOCSaleDOCTProduct_Controller.prototype.addInsert=function(){DOCSaleDOCTProduct_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Поставка";options.required=true;var field=new FieldInt("doc_production_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Скидка";var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};options.alias="Цена без скидки";var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма без скидки";var field=new FieldFloat("total_no_disc",options);pm.addField(field);}
DOCSaleDOCTProduct_Controller.prototype.addUpdate=function(){DOCSaleDOCTProduct_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Поставка";var field=new FieldInt("doc_production_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Скидка";var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};options.alias="Цена без скидки";var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма без скидки";var field=new FieldFloat("total_no_disc",options);pm.addField(field);}
DOCSaleDOCTProduct_Controller.prototype.addDelete=function(){DOCSaleDOCTProduct_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCSaleDOCTProduct_Controller.prototype.addGetList=function(){DOCSaleDOCTProduct_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("product_id",f_opts));var f_opts={};f_opts.alias="Комплектация";pm.addField(new FieldInt("doc_production_id",f_opts));var f_opts={};pm.addField(new FieldInt("doc_production_number",f_opts));var f_opts={};pm.addField(new FieldDateTime("doc_production_date_time",f_opts));var f_opts={};pm.addField(new FieldString("product_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));var f_opts={};f_opts.alias="Скидка";pm.addField(new FieldFloat("disc_percent",f_opts));var f_opts={};f_opts.alias="Цена без скидки";pm.addField(new FieldFloat("price_no_disc",f_opts));var f_opts={};f_opts.alias="Сумма без скидки";pm.addField(new FieldFloat("total_no_disc",f_opts));}
DOCSaleDOCTProduct_Controller.prototype.addGetObject=function(){DOCSaleDOCTProduct_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function DOCSaleDOCTMaterial_Controller(app,options){options=options||{};options.listModel=DOCSaleDOCTMaterialList_Model;options.objModel=DOCSaleDOCTMaterialList_Model;DOCSaleDOCTMaterial_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCSaleDOCTMaterial_Controller,ControllerDb);DOCSaleDOCTMaterial_Controller.prototype.addInsert=function(){DOCSaleDOCTMaterial_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Скидка";var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};options.alias="Цена без скидки";var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма буз скидки";var field=new FieldFloat("total_no_disc",options);pm.addField(field);}
DOCSaleDOCTMaterial_Controller.prototype.addUpdate=function(){DOCSaleDOCTMaterial_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Скидка";var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};options.alias="Цена без скидки";var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма буз скидки";var field=new FieldFloat("total_no_disc",options);pm.addField(field);}
DOCSaleDOCTMaterial_Controller.prototype.addDelete=function(){DOCSaleDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCSaleDOCTMaterial_Controller.prototype.addGetList=function(){DOCSaleDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));var f_opts={};f_opts.alias="Скидка";pm.addField(new FieldFloat("disc_percent",f_opts));var f_opts={};f_opts.alias="Цена без скидки";pm.addField(new FieldFloat("price_no_disc",f_opts));var f_opts={};f_opts.alias="Сумма буз скидки";pm.addField(new FieldFloat("total_no_disc",f_opts));}
DOCSaleDOCTMaterial_Controller.prototype.addGetObject=function(){DOCSaleDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function Receipt_Controller(app,options){options=options||{};options.listModel=ReceiptList_Model;Receipt_Controller.superclass.constructor.call(this,app,options);this.addGetList();this.addDelete();this.add_add_material();this.add_set_disc_percent();this.add_add_product();this.add_edit_item();this.add_clear();this.add_close();this.add_add_by_code();this.add_fill_on_client_order();this.add_save_head();this.add_add_payment_type();this.add_set_payment_type_total();this.add_del_payment_type();this.add_get_payment_type_list();}
extend(Receipt_Controller,ControllerDb);Receipt_Controller.prototype.addGetList=function(){Receipt_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("item_id",f_opts));var f_opts={};pm.addField(new FieldInt("item_type",f_opts));var f_opts={};pm.addField(new FieldInt("doc_production_id",f_opts));var f_opts={};pm.addField(new FieldString("item_name",f_opts));var f_opts={};pm.addField(new FieldFloat("quant",f_opts));var f_opts={};pm.addField(new FieldFloat("price",f_opts));var f_opts={};pm.addField(new FieldFloat("total",f_opts));var f_opts={};pm.addField(new FieldFloat("total_no_disc",f_opts));var f_opts={};pm.addField(new FieldFloat("price_no_disc",f_opts));var f_opts={};pm.addField(new FieldFloat("disc_percent",f_opts));}
Receipt_Controller.prototype.addDelete=function(){Receipt_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));var options={"required":true};pm.addField(new FieldInt("item_id",options));var options={"required":true};pm.addField(new FieldInt("item_type",options));}
Receipt_Controller.prototype.add_add_material=function(){var pm=new PublicMethod('add_material',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("item_id",options));}
Receipt_Controller.prototype.add_set_disc_percent=function(){var pm=new PublicMethod('set_disc_percent',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldFloat("disc_percent",options));}
Receipt_Controller.prototype.add_add_product=function(){var pm=new PublicMethod('add_product',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("item_id",options));var options={};pm.addField(new FieldInt("doc_production_id",options));}
Receipt_Controller.prototype.add_edit_item=function(){var pm=new PublicMethod('edit_item',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("item_id",options));var options={};pm.addField(new FieldInt("item_type",options));var options={};pm.addField(new FieldInt("doc_production_id",options));var options={};pm.addField(new FieldInt("quant",options));var options={};pm.addField(new FieldFloat("disc_percent",options));}
Receipt_Controller.prototype.add_clear=function(){var pm=new PublicMethod('clear',{controller:this});this.addPublicMethod(pm);}
Receipt_Controller.prototype.add_close=function(){var pm=new PublicMethod('close',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("payment_type_for_sale_id",options));var options={};pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldInt("doc_client_order_id",options));}
Receipt_Controller.prototype.add_add_by_code=function(){var pm=new PublicMethod('add_by_code',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("barcode",options));}
Receipt_Controller.prototype.add_fill_on_client_order=function(){var pm=new PublicMethod('fill_on_client_order',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_client_order_id",options));}
Receipt_Controller.prototype.add_save_head=function(){var pm=new PublicMethod('save_head',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("client_id",options));var options={};pm.addField(new FieldInt("discount_id",options));var options={};pm.addField(new FieldInt("doc_client_order_id",options));}
Receipt_Controller.prototype.add_add_payment_type=function(){var pm=new PublicMethod('add_payment_type',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("payment_type_for_sale_id",options));}
Receipt_Controller.prototype.add_set_payment_type_total=function(){var pm=new PublicMethod('set_payment_type_total',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("dt",options));var options={};options.maxlength="15";pm.addField(new FieldFloat("total",options));}
Receipt_Controller.prototype.add_del_payment_type=function(){var pm=new PublicMethod('del_payment_type',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("dt",options));}
Receipt_Controller.prototype.add_get_payment_type_list=function(){var pm=new PublicMethod('get_payment_type_list',{controller:this});this.addPublicMethod(pm);} 
function ExpenceType_Controller(app,options){options=options||{};options.listModel=ExpenceType_Model;options.objModel=ExpenceType_Model;ExpenceType_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(ExpenceType_Controller,ControllerDb);ExpenceType_Controller.prototype.addInsert=function(){ExpenceType_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ExpenceType_Controller.prototype.addUpdate=function(){ExpenceType_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);}
ExpenceType_Controller.prototype.addDelete=function(){ExpenceType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ExpenceType_Controller.prototype.addGetList=function(){ExpenceType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
ExpenceType_Controller.prototype.addGetObject=function(){ExpenceType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
ExpenceType_Controller.prototype.addComplete=function(){ExpenceType_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function DOCExpence_Controller(app,options){options=options||{};options.listModel=DOCExpenceList_Model;options.objModel=DOCExpenceList_Model;DOCExpence_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_before_open();this.add_get_actions();this.add_set_unprocessed();this.add_get_print();this.add_get_details();}
extend(DOCExpence_Controller,ControllerDb);DOCExpence_Controller.prototype.addInsert=function(){DOCExpence_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Дата";options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCExpence_Controller.prototype.addUpdate=function(){DOCExpence_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Дата";var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.alias="Автор";var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCExpence_Controller.prototype.addDelete=function(){DOCExpence_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCExpence_Controller.prototype.addGetList=function(){DOCExpence_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Номер";pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Дата";pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Салон";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};f_opts.alias="Автор";pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldString("processed",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));}
DOCExpence_Controller.prototype.addGetObject=function(){DOCExpence_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCExpence_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));var options={};pm.addField(new FieldInt("doc_id",options));}
DOCExpence_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCExpence_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCExpence_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCExpence_Controller.prototype.add_get_details=function(){var pm=new PublicMethod('get_details',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("cond_fields",options));var options={};options.required=true;pm.addField(new FieldString("cond_vals",options));var options={};options.required=true;pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));} 
function DOCExpenceDOCTExpenceType_Controller(app,options){options=options||{};options.listModel=DOCExpenceDOCTExpenceTypeList_Model;options.objModel=DOCExpenceDOCTExpenceTypeList_Model;DOCExpenceDOCTExpenceType_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCExpenceDOCTExpenceType_Controller,ControllerDb);DOCExpenceDOCTExpenceType_Controller.prototype.addInsert=function(){DOCExpenceDOCTExpenceType_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Вид затрат";options.required=true;var field=new FieldInt("expence_type_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("expence_comment",options);pm.addField(field);var options={};options.alias="Дата расхода";var field=new FieldDate("expence_date",options);pm.addField(field);}
DOCExpenceDOCTExpenceType_Controller.prototype.addUpdate=function(){DOCExpenceDOCTExpenceType_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Вид затрат";var field=new FieldInt("expence_type_id",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("expence_comment",options);pm.addField(field);var options={};options.alias="Дата расхода";var field=new FieldDate("expence_date",options);pm.addField(field);}
DOCExpenceDOCTExpenceType_Controller.prototype.addDelete=function(){DOCExpenceDOCTExpenceType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCExpenceDOCTExpenceType_Controller.prototype.addGetList=function(){DOCExpenceDOCTExpenceType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};pm.addField(new FieldInt("expence_type_id",f_opts));var f_opts={};f_opts.alias="Вид затрат";pm.addField(new FieldString("expence_type_descr",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("expence_comment",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));var f_opts={};f_opts.alias="Дата расхода";pm.addField(new FieldDate("expence_date",f_opts));}
DOCExpenceDOCTExpenceType_Controller.prototype.addGetObject=function(){DOCExpenceDOCTExpenceType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function RepBalance_Controller(app,options){options=options||{};RepBalance_Controller.superclass.constructor.call(this,app,options);this.add_get();this.add_balance();}
extend(RepBalance_Controller,ControllerDb);RepBalance_Controller.prototype.add_get=function(){var pm=new PublicMethod('get',{controller:this});this.addPublicMethod(pm);}
RepBalance_Controller.prototype.add_balance=function(){var pm=new PublicMethod('balance',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));} 
function RepSaleForAcc_Controller(app,options){options=options||{};RepSaleForAcc_Controller.superclass.constructor.call(this,app,options);this.addGetObject();this.add_report();}
extend(RepSaleForAcc_Controller,ControllerDb);RepSaleForAcc_Controller.prototype.addGetObject=function(){RepSaleForAcc_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();}
RepSaleForAcc_Controller.prototype.add_report=function(){var pm=new PublicMethod('report',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));} 
function DOCClientOrder_Controller(app,options){options=options||{};options.listModel=DOCClientOrderList_Model;options.objModel=DOCClientOrderList_Model;DOCClientOrder_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_print();this.add_before_open();this.add_set_unprocessed();this.add_get_actions();this.add_get_print();this.add_set_state();this.add_set_payed();}
extend(DOCClientOrder_Controller,ControllerDb);DOCClientOrder_Controller.prototype.addInsert=function(){DOCClientOrder_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Номер с сайта";var field=new FieldString("number_from_site",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.required=true;options.enumValues='courier,by_client';field=new FieldEnum("delivery_type",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("client_name",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("client_tel",options);pm.addField(field);var options={};options.required=true;options.enumValues='self,other';field=new FieldEnum("recipient_type",options);pm.addField(field);var options={};var field=new FieldString("recipient_name",options);pm.addField(field);var options={};var field=new FieldString("recipient_tel",options);pm.addField(field);var options={};var field=new FieldText("address",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("delivery_date",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("delivery_hour_id",options);pm.addField(field);var options={};var field=new FieldString("delivery_comment",options);pm.addField(field);var options={};var field=new FieldBool("card",options);pm.addField(field);var options={};var field=new FieldText("card_text",options);pm.addField(field);var options={};var field=new FieldBool("anonym_gift",options);pm.addField(field);var options={};options.enumValues='by_call,by_sms';field=new FieldEnum("delivery_note_type",options);pm.addField(field);var options={};var field=new FieldText("extra_comment",options);pm.addField(field);var options={};options.enumValues='cash,bank,yandex,trans_to_card,web_money';field=new FieldEnum("payment_type",options);pm.addField(field);var options={};options.enumValues='to_noone,checked,to_florist,to_courier,closed';field=new FieldEnum("client_order_state",options);pm.addField(field);var options={};var field=new FieldBool("payed",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCClientOrder_Controller.prototype.addUpdate=function(){DOCClientOrder_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};options.alias="Номер";var field=new FieldInt("number",options);pm.addField(field);var options={};options.alias="Номер с сайта";var field=new FieldString("number_from_site",options);pm.addField(field);var options={};options.alias="Проведен";var field=new FieldBool("processed",options);pm.addField(field);var options={};options.enumValues='courier,by_client';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';field=new FieldEnum("delivery_type",options);pm.addField(field);var options={};var field=new FieldString("client_name",options);pm.addField(field);var options={};var field=new FieldString("client_tel",options);pm.addField(field);var options={};options.enumValues='self,other';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';field=new FieldEnum("recipient_type",options);pm.addField(field);var options={};var field=new FieldString("recipient_name",options);pm.addField(field);var options={};var field=new FieldString("recipient_tel",options);pm.addField(field);var options={};var field=new FieldText("address",options);pm.addField(field);var options={};var field=new FieldDate("delivery_date",options);pm.addField(field);var options={};var field=new FieldInt("delivery_hour_id",options);pm.addField(field);var options={};var field=new FieldString("delivery_comment",options);pm.addField(field);var options={};var field=new FieldBool("card",options);pm.addField(field);var options={};var field=new FieldText("card_text",options);pm.addField(field);var options={};var field=new FieldBool("anonym_gift",options);pm.addField(field);var options={};options.enumValues='by_call,by_sms';field=new FieldEnum("delivery_note_type",options);pm.addField(field);var options={};var field=new FieldText("extra_comment",options);pm.addField(field);var options={};options.enumValues='cash,bank,yandex,trans_to_card,web_money';field=new FieldEnum("payment_type",options);pm.addField(field);var options={};options.enumValues='to_noone,checked,to_florist,to_courier,closed';field=new FieldEnum("client_order_state",options);pm.addField(field);var options={};var field=new FieldBool("payed",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);var options={};options.alias="Магазин";var field=new FieldInt("store_id",options);pm.addField(field);var options={};options.required=true;pm.addField(new FieldString("view_id",options));}
DOCClientOrder_Controller.prototype.addDelete=function(){DOCClientOrder_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DOCClientOrder_Controller.prototype.addGetList=function(){DOCClientOrder_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldBool("processed",f_opts));var f_opts={};pm.addField(new FieldString("number",f_opts));var f_opts={};f_opts.alias="Номер с сайта";pm.addField(new FieldString("number_from_site",f_opts));var f_opts={};pm.addField(new FieldString("delivery_type",f_opts));var f_opts={};pm.addField(new FieldString("client_name",f_opts));var f_opts={};pm.addField(new FieldString("client_tel",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};f_opts.alias="Покупатель из справочника";pm.addField(new FieldString("client_descr",f_opts));var f_opts={};pm.addField(new FieldString("recipient_type",f_opts));var f_opts={};pm.addField(new FieldString("recipient_name",f_opts));var f_opts={};pm.addField(new FieldString("recipient_tel",f_opts));var f_opts={};pm.addField(new FieldText("address",f_opts));var f_opts={};pm.addField(new FieldDate("delivery_date",f_opts));var f_opts={};pm.addField(new FieldInt("delivery_hour_id",f_opts));var f_opts={};pm.addField(new FieldString("delivery_hour_descr",f_opts));var f_opts={};pm.addField(new FieldBool("card",f_opts));var f_opts={};pm.addField(new FieldText("card_text",f_opts));var f_opts={};pm.addField(new FieldBool("anonym_gift",f_opts));var f_opts={};pm.addField(new FieldString("delivery_note_type",f_opts));var f_opts={};pm.addField(new FieldText("extra_comment",f_opts));var f_opts={};pm.addField(new FieldText("delivery_comment",f_opts));var f_opts={};pm.addField(new FieldString("payment_type",f_opts));var f_opts={};pm.addField(new FieldString("client_order_state",f_opts));var f_opts={};pm.addField(new FieldBool("payed",f_opts));var f_opts={};pm.addField(new FieldFloat("total",f_opts));var f_opts={};pm.addField(new FieldInt("store_id",f_opts));var f_opts={};f_opts.alias="Проведен";pm.addField(new FieldString("store_descr",f_opts));var f_opts={};pm.addField(new FieldString("doc_client_order_descr",f_opts));var f_opts={};f_opts.alias="Сумма";pm.addField(new FieldFloat("total",f_opts));}
DOCClientOrder_Controller.prototype.addGetObject=function(){DOCClientOrder_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
DOCClientOrder_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCClientOrder_Controller.prototype.add_before_open=function(){var pm=new PublicMethod('before_open',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("view_id",options));var options={};pm.addField(new FieldInt("doc_id",options));}
DOCClientOrder_Controller.prototype.add_set_unprocessed=function(){var pm=new PublicMethod('set_unprocessed',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));}
DOCClientOrder_Controller.prototype.add_get_actions=function(){var pm=new PublicMethod('get_actions',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCClientOrder_Controller.prototype.add_get_print=function(){var pm=new PublicMethod('get_print',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("templ",options));}
DOCClientOrder_Controller.prototype.add_set_state=function(){var pm=new PublicMethod('set_state',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));var options={};pm.addField(new FieldString("state",options));}
DOCClientOrder_Controller.prototype.add_set_payed=function(){var pm=new PublicMethod('set_payed',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldInt("doc_id",options));}
DOCClientOrder_Controller.prototype.getPrintList=function(){return[new PrintObj({"caption":"Заказ покупателя","publicMethod":this.getPublicMethod("get_print"),"templ":"DOCClientOrderPrint","publicMethodKeyIds":["doc_id"]})];} 
function DOCClientOrderDOCTMaterial_Controller(app,options){options=options||{};options.listModel=DOCClientOrderDOCTMaterialList_Model;options.objModel=DOCClientOrderDOCTMaterialList_Model;DOCClientOrderDOCTMaterial_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCClientOrderDOCTMaterial_Controller,ControllerDb);DOCClientOrderDOCTMaterial_Controller.prototype.addInsert=function(){DOCClientOrderDOCTMaterial_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";options.required=true;var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCClientOrderDOCTMaterial_Controller.prototype.addUpdate=function(){DOCClientOrderDOCTMaterial_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Материал";var field=new FieldInt("material_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCClientOrderDOCTMaterial_Controller.prototype.addDelete=function(){DOCClientOrderDOCTMaterial_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCClientOrderDOCTMaterial_Controller.prototype.addGetList=function(){DOCClientOrderDOCTMaterial_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};pm.addField(new FieldInt("material_id",f_opts));var f_opts={};f_opts.alias="Материал";pm.addField(new FieldString("material_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Скидка,%";pm.addField(new FieldFloat("disc_percent",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price_no_disc",f_opts));var f_opts={};f_opts.alias="Всего";pm.addField(new FieldFloat("total",f_opts));}
DOCClientOrderDOCTMaterial_Controller.prototype.addGetObject=function(){DOCClientOrderDOCTMaterial_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function DOCClientOrderDOCTProduct_Controller(app,options){options=options||{};options.listModel=DOCClientOrderDOCTProductList_Model;options.objModel=DOCClientOrderDOCTProductList_Model;DOCClientOrderDOCTProduct_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DOCClientOrderDOCTProduct_Controller,ControllerDb);DOCClientOrderDOCTProduct_Controller.prototype.addInsert=function(){DOCClientOrderDOCTProduct_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Букет";options.required=true;var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCClientOrderDOCTProduct_Controller.prototype.addUpdate=function(){DOCClientOrderDOCTProduct_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("view_id",options);pm.addField(field);field=new FieldString("old_view_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("line_number",options);pm.addField(field);field=new FieldInt("old_line_number",{});pm.addField(field);var options={};var field=new FieldInt("login_id",options);pm.addField(field);var options={};options.alias="Букет";var field=new FieldInt("product_id",options);pm.addField(field);var options={};options.alias="Количество";var field=new FieldFloat("quant",options);pm.addField(field);var options={};options.alias="Цена";var field=new FieldFloat("price",options);pm.addField(field);var options={};var field=new FieldFloat("disc_percent",options);pm.addField(field);var options={};var field=new FieldFloat("price_no_disc",options);pm.addField(field);var options={};options.alias="Сумма";var field=new FieldFloat("total",options);pm.addField(field);}
DOCClientOrderDOCTProduct_Controller.prototype.addDelete=function(){DOCClientOrderDOCTProduct_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("view_id",options));var options={"required":true};pm.addField(new FieldInt("line_number",options));}
DOCClientOrderDOCTProduct_Controller.prototype.addGetList=function(){DOCClientOrderDOCTProduct_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));var f_opts={};pm.addField(new FieldInt("login_id",f_opts));var f_opts={};pm.addField(new FieldInt("product_id",f_opts));var f_opts={};f_opts.alias="Букет";pm.addField(new FieldString("product_descr",f_opts));var f_opts={};f_opts.alias="Количество";pm.addField(new FieldFloat("quant",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price",f_opts));var f_opts={};f_opts.alias="Скидка,%";pm.addField(new FieldFloat("disc_percent",f_opts));var f_opts={};f_opts.alias="Цена";pm.addField(new FieldFloat("price_no_disc",f_opts));var f_opts={};f_opts.alias="Всего";pm.addField(new FieldFloat("total",f_opts));}
DOCClientOrderDOCTProduct_Controller.prototype.addGetObject=function(){DOCClientOrderDOCTProduct_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("view_id",f_opts));var f_opts={};f_opts.alias="№";pm.addField(new FieldInt("line_number",f_opts));} 
function DeliveryHour_Controller(app,options){options=options||{};options.listModel=DeliveryHourList_Model;options.objModel=DeliveryHourList_Model;DeliveryHour_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DeliveryHour_Controller,ControllerDb);DeliveryHour_Controller.prototype.addInsert=function(){DeliveryHour_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("h_from",options);pm.addField(field);var options={};var field=new FieldInt("h_to",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DeliveryHour_Controller.prototype.addUpdate=function(){DeliveryHour_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("h_from",options);pm.addField(field);var options={};var field=new FieldInt("h_to",options);pm.addField(field);}
DeliveryHour_Controller.prototype.addDelete=function(){DeliveryHour_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DeliveryHour_Controller.prototype.addGetList=function(){DeliveryHour_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("h_from",f_opts));var f_opts={};pm.addField(new FieldInt("h_to",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));}
DeliveryHour_Controller.prototype.addGetObject=function(){DeliveryHour_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));} 
function CashRegister_Controller(app,options){options=options||{};options.listModel=CashRegister_Model;options.objModel=CashRegister_Model;CashRegister_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(CashRegister_Controller,ControllerDb);CashRegister_Controller.prototype.addInsert=function(){CashRegister_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Порт оборудования";var field=new FieldInt("port",options);pm.addField(field);var options={};options.alias="Скорость оборудования";var field=new FieldInt("baud_rate",options);pm.addField(field);var options={};options.alias="Сервер";var field=new FieldString("eq_server",options);pm.addField(field);var options={};options.alias="Порт сервера";var field=new FieldInt("eq_port",options);pm.addField(field);var options={};options.alias="Идентификатор оборуд.";var field=new FieldString("eq_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
CashRegister_Controller.prototype.addUpdate=function(){CashRegister_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Порт оборудования";var field=new FieldInt("port",options);pm.addField(field);var options={};options.alias="Скорость оборудования";var field=new FieldInt("baud_rate",options);pm.addField(field);var options={};options.alias="Сервер";var field=new FieldString("eq_server",options);pm.addField(field);var options={};options.alias="Порт сервера";var field=new FieldInt("eq_port",options);pm.addField(field);var options={};options.alias="Идентификатор оборуд.";var field=new FieldString("eq_id",options);pm.addField(field);}
CashRegister_Controller.prototype.addDelete=function(){CashRegister_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
CashRegister_Controller.prototype.addGetList=function(){CashRegister_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Порт оборудования";pm.addField(new FieldInt("port",f_opts));var f_opts={};f_opts.alias="Скорость оборудования";pm.addField(new FieldInt("baud_rate",f_opts));var f_opts={};f_opts.alias="Сервер";pm.addField(new FieldString("eq_server",f_opts));var f_opts={};f_opts.alias="Порт сервера";pm.addField(new FieldInt("eq_port",f_opts));var f_opts={};f_opts.alias="Идентификатор оборуд.";pm.addField(new FieldString("eq_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
CashRegister_Controller.prototype.addGetObject=function(){CashRegister_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));} 
function PaymentTypeForSale_Controller(app,options){options=options||{};options.listModel=PaymentTypeForSale_Model;options.objModel=PaymentTypeForSale_Model;PaymentTypeForSale_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(PaymentTypeForSale_Controller,ControllerDb);PaymentTypeForSale_Controller.prototype.addInsert=function(){PaymentTypeForSale_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Вид оплаты из заказа";options.enumValues='cash,bank,yandex,trans_to_card,web_money';field=new FieldEnum("client_order_payment_type",options);pm.addField(field);var options={};options.alias="Тип оплаты для ККМ";var field=new FieldInt("kkm_type_close",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
PaymentTypeForSale_Controller.prototype.addUpdate=function(){PaymentTypeForSale_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Вид оплаты из заказа";options.enumValues='cash,bank,yandex,trans_to_card,web_money';field=new FieldEnum("client_order_payment_type",options);pm.addField(field);var options={};options.alias="Тип оплаты для ККМ";var field=new FieldInt("kkm_type_close",options);pm.addField(field);}
PaymentTypeForSale_Controller.prototype.addDelete=function(){PaymentTypeForSale_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
PaymentTypeForSale_Controller.prototype.addGetList=function(){PaymentTypeForSale_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Вид оплаты из заказа";pm.addField(new FieldEnum("client_order_payment_type",f_opts));var f_opts={};f_opts.alias="Тип оплаты для ККМ";pm.addField(new FieldInt("kkm_type_close",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
PaymentTypeForSale_Controller.prototype.addGetObject=function(){PaymentTypeForSale_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));} 
function Client_Controller(app,options){options=options||{};options.listModel=ClientList_Model;options.objModel=ClientDialog_Model;Client_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Client_Controller,ControllerDb);Client_Controller.prototype.addInsert=function(){Client_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Сотовый телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Менеджер";var field=new FieldInt("manager_id",options);pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Диск.карта";var field=new FieldInt("disc_card_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Client_Controller.prototype.addUpdate=function(){Client_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Полное наименование";var field=new FieldText("name_full",options);pm.addField(field);var options={};options.alias="Сотовый телефон";var field=new FieldString("tel",options);pm.addField(field);var options={};options.alias="Менеджер";var field=new FieldInt("manager_id",options);pm.addField(field);var options={};var field=new FieldDate("create_date",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.alias="Диск.карта";var field=new FieldInt("disc_card_id",options);pm.addField(field);}
Client_Controller.prototype.addDelete=function(){Client_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
Client_Controller.prototype.addGetList=function(){Client_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("tel",f_opts));var f_opts={};f_opts.alias="Скидка, %";pm.addField(new FieldString("disc_card_percent",f_opts));var f_opts={};pm.addField(new FieldInt("disc_card_id",f_opts));var f_opts={};pm.addField(new FieldInt("discount_id",f_opts));}
Client_Controller.prototype.addGetObject=function(){Client_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
Client_Controller.prototype.addComplete=function(){Client_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function RepSalesOnTypes_Controller(app,options){options=options||{};RepSalesOnTypes_Controller.superclass.constructor.call(this,app,options);this.addGetObject();this.add_report();}
extend(RepSalesOnTypes_Controller,ControllerDb);RepSalesOnTypes_Controller.prototype.addGetObject=function(){RepSalesOnTypes_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();}
RepSalesOnTypes_Controller.prototype.add_report=function(){var pm=new PublicMethod('report',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("cond_fields",options));var options={};pm.addField(new FieldString("cond_vals",options));var options={};pm.addField(new FieldString("cond_sgns",options));var options={};pm.addField(new FieldString("cond_ic",options));var options={};pm.addField(new FieldString("templ",options));var options={};pm.addField(new FieldString("ord_fields",options));var options={};pm.addField(new FieldString("ord_directs",options));var options={};pm.addField(new FieldString("field_sep",options));} 
App.prototype.m_templates={"GridCmdContainerAjx":`<div id="{{id}}"><div id="{{id}}:insert"></div><div class="btn-group"><div id="{{id}}:search:set"></div><div id="{{id}}:search:unset"></div></div><div id="{{id}}:filter"class="hidden"></div><div id="{{id}}:printObj"class="hidden"></div><div id="{{id}}:allCommands"></div></div>`,"ViewGridColManager":`<div id="{{id}}"><h1 class="page-header">{{this.HEADER}}</h1><ul class="nav nav-tabs"role="tablist"><li role="presentation"class="active"><a href="#columns"aria-controls="columns"role="tab"data-toggle="tab">{{this.TAB_COLUMNS}}</a></li><li role="presentation"><a href="#sortings"aria-controls="sortings"role="tab"data-toggle="tab">{{this.TAB_SORT}}</a></li></ul><!--Tab panes--><div class="tab-content"><div role="tabpanel"class="tab-pane active"id="columns"><div class="panel panel-body"><div id="{{id}}:view-visibility"></div></div></div><div role="tabpanel"class="tab-pane"id="sortings"><div class="panel panel-body"><div id="{{id}}:view-order"></div></div></div><div role="tabpanel"class="tab-pane"id="filters"><div class="panel panel-body"><div id="{{id}}:view-filter"></div></div></div><div id="{{id}}:cmdClose"></div></div>`,"PopOver":`<div id="{{id}}"class="popover"role="tooltip"style="position:absolute;display:block;max-width:100%;"><div class="tooltip-arrow"></div><h3 id="{{id}}:title"class="popover-title"></h3><div id="{{id}}:content"class="popover-content"></div></div>`,"GridCmdFilterView":`<form id="{{id}}"class="form-horizontal"><div class="form-group col-lg-12"><div id="{{id}}:set"></div><div id="{{id}}:unset"></div><div id="{{id}}:save"></div><div id="{{id}}:open"></div></div></form>`,"EditPeriodDate":`<div id="{{id}}"class="form-group col-lg-12"><a class="{{window.getBsCol(1)}}"id="{{id}}:periodSelect"></a><div class="btn-group {{window.getBsCol(2)}}"><div id="{{id}}:downFast"title="{{this.CONTR_DOWN_FAST_TITLE}}"></div><div id="{{id}}:down"title="{{this.CONTR_DOWN_TITLE}}"></div></div><div id="{{id}}:d-cont"class="{{window.getBsCol(7)}}"style="padding-right:0px;padding-left:0px;"><div id="{{id}}:from"class="{{window.getBsCol(6)}}"style="padding:0px 0px;margin:0px 0px;"></div><!--<span class="{{window.getBsCol(1)}}"style="padding-left:0px;padding-right:0px">-</span>--><div id="{{id}}:to"class="{{window.getBsCol(6)}}"style="padding:0px 0px;margin:0px 0px;"></div></div><div class="btn-group {{window.getBsCol(2)}}"><div id="{{id}}:upFast"title="{{this.CONTR_UP_FAST_TITLE}}"></div><div id="{{id}}:up"title="{{this.CONTR_UP_TITLE}}"></div></div></div>`,"WindowPrint":`<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="content-type"content="text/html; charset=UTF-8"><link rel="stylesheet"href="js20/custom-css/print.css?'+{{CommonHelper.uniqid()}}+'"type="text/css"media="all"><title>{{options.title}}</title></head><body>{{options.content}}</h1></body></html>`,"VariantStorageSaveView":`<div id="{{id}}"><div id="{{id}}:variants"></div><div id="{{id}}:name"></div><div id="{{id}}:default_variant"></div><div id="{{id}}:cmdSave"></div><div id="{{id}}:cmdCancel"></div></div>`,"VariantStorageOpenView":`<div id="{{id}}"><div id="{{id}}:variants"></div><div id="{{id}}:cmdOpen"></div><div id="{{id}}:cmdCancel"></div></div>`,"DOCClientOrderGridCommand":`<div id="{{id}}"><div><div id="{{id}}:insert"></div><div class="btn-group"><div id="{{id}}:search:set"></div><div id="{{id}}:search:unset"></div></div><div id="{{id}}:filter"class="hidden"></div><div id="{{id}}:printObj"class="hidden"></div><div id="{{id}}:allCommands"></div></div><div><div id="{{id}}:cmdStatChecked"></div><div id="{{id}}:cmdStatToFlorist"></div><div id="{{id}}:cmdStatToCourier"></div><div id="{{id}}:cmdStatClosed"></div><div id="{{id}}:cmdStatPayed"></div></div></div>`} 
function AppFlowers(options){options=options||{};this.setCachRegister(options.cashRegister);AppFlowers.superclass.constructor.call(this,"Flowers",options);}
extend(AppFlowers,App);AppFlowers.prototype.m_cashRegister;AppFlowers.prototype.formatError=function(erCode,erStr){return(erStr+((erCode)?(", код:"+erCode):""));}
AppFlowers.prototype.getJournalDateFormat=function(){return"d/m/y, H:i:s";}
AppFlowers.prototype.setCachRegister=function(v){this.m_cashRegister=v;}
AppFlowers.prototype.getCachRegister=function(){return this.m_cashRegister;}
AppFlowers.prototype.getCachierPwd=function(){return"29";}
AppFlowers.prototype.getCachierAdminPwd=function(){return"30";}
AppFlowers.prototype.getCachierSalePwd=function(){return"1";} 
function MaterialGroupSelect(id,options){options=options||{};options.model=new MaterialGroup_Model();var contr=new MaterialGroup_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];MaterialGroupSelect.superclass.constructor.call(this,id,options);}
extend(MaterialGroupSelect,EditSelectRef); 
function StoreSelect(id,options){options=options||{};options.model=new StoreList_Model();options.required=true;if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Салон:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new Store_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");StoreSelect.superclass.constructor.call(this,id,options);}
extend(StoreSelect,EditSelectRef); 
function MaterialNameEdit(id,options){options=options||{};options.labelCaption="Наименование:",options.placeholder="Краткое наименование материала",options.maxlength=50;MaterialNameEdit.superclass.constructor.call(this,id,options);}
extend(MaterialNameEdit,EditString); 
function ProductNameEdit(id,options){options=options||{};options.labelCaption="Наименование:",options.placeholder="Краткое наименование продукции",options.maxlength=100;ProductNameEdit.superclass.constructor.call(this,id,options);}
extend(ProductNameEdit,EditString); 
function SupplierNameEdit(id,options){options=options||{};options.labelCaption="Наименование:",options.placeholder="Краткое наименование поставщика",options.maxlength=100;SupplierNameEdit.superclass.constructor.call(this,id,options);}
extend(SupplierNameEdit,EditString); 
function ClientNameEdit(id,options){options=options||{};options.labelCaption="Наименование:",options.placeholder="Краткое наименование клиента",options.maxlength=100;ClientNameEdit.superclass.constructor.call(this,id,options);}
extend(ClientNameEdit,EditString); 
function ClientEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Клиент:";}
options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:false;options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=options.selectWinClass||ClientList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.selectKeyIds=options.selectKeyIds||["id"];options.editWinClass=Client_Form;options.acMinLengthForQuery=1;options.acController=new Client_Controller(options.app);options.acModel=new ClientList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"0";ClientEditRef.superclass.constructor.call(this,id,options);}
extend(ClientEditRef,EditRef); 
function UserNameEdit(id,options){options=options||{};options.labelCaption="Наименование:",options.placeholder="Краткое наименование пользователя",options.required=true;options.maxlength=50;UserNameEdit.superclass.constructor.call(this,id,options);}
extend(UserNameEdit,EditString); 
function CashRegisterSelect(id,options){options=options||{};options.model=new CashRegister_Model();options.keyIds=options.keyIds||["cash_register_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new CashRegister_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");CashRegisterSelect.superclass.constructor.call(this,id,options);}
extend(CashRegisterSelect,EditSelectRef); 
function PaymentTypeForSaleSelect(id,options){options=options||{};options.model=new PaymentTypeForSale_Model();if(options.labelCaption==undefined&&options.labelCaption!=""){options.labelCaption=this.CAP;}
options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new PaymentTypeForSale_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");PaymentTypeForSaleSelect.superclass.constructor.call(this,id,options);}
extend(PaymentTypeForSaleSelect,EditSelectRef); 
function DeliveryHourSelect(id,options){options=options||{};options.model=new DeliveryHourList_Model();options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFormatFunction=function(fields){return fields.h_from.getValue()+"-"+fields.h_to.getValue();};var contr=new DeliveryHour_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");DeliveryHourSelect.superclass.constructor.call(this,id,options);}
extend(DeliveryHourSelect,EditSelectRef); 
function UserEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Пользователь:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=UserList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=User_Form;options.acMinLengthForQuery=1;options.acController=new User_Controller(options.app);options.acModel=new UserList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";UserEditRef.superclass.constructor.call(this,id,options);}
extend(UserEditRef,EditRef); 
function GridColumnCustomTime(id,options){options=options||{};GridColumnCustomTime.superclass.constructor.call(this,id,options);}
extend(GridColumnCustomTime,GridColumn);GridColumnCustomTime.prototype.formatVal=function(v){var days=0,hours=0,minutes=0;var p=v.indexOf(":");if(p>=0){hours=parseInt(v.substring(0,p));minutes=parseInt(v.substring(p+1));if(hours>24){days=Math.floor(hours/24);hours=(hours%24);}}
else{minutes=v;}
var res=(days>0)?days+" сут.":"";if(hours>0){res+=(res=="")?"":" ";res+=hours+" ч.";}
if(minutes>0){res+=(res=="")?"":" ";res+=minutes+" мин.";}
return res;} 
function MaterialGroupRadio(id,options){options=options||{};var constants={"def_material_group":null};options.app.getConstantManager().get(constants);options.defaultValue=constants.def_material_group.getValue();options.model=new MaterialGroup_Model();options.cashable=true;options.colCount=3;options.notSelectedValue="0";options.notSelectedCaption="Все группы";options.notSelectedLast=true;options.keyFieldId="id";options.descrFieldId="name";var contr=new MaterialGroup_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list");MaterialGroupRadio.superclass.constructor.call(this,id,options);}
extend(MaterialGroupRadio,EditRadioGroupRef); 
function SupplierEditRef(id,options){options=options||{};options.labelCaption=options.labelCaption||"Поставщик:";options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=SupplierList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.selectKeyIds=options.selectKeyIds||["id"];options.editWinClass=Supplier_Form;options.acMinLengthForQuery=1;options.acController=new Supplier_Controller(options.app);options.acModel=new SupplierList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"0";SupplierEditRef.superclass.constructor.call(this,id,options);}
extend(SupplierEditRef,EditRef); 
function ProductEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Продукция:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.inputEnabled=false;options.keyIds=options.keyIds||["product_id"];options.selectWinClass=ProductList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.selectKeyIds=options.selectKeyIds||["id"];options.cmdEdit=false;ProductEditRef.superclass.constructor.call(this,id,options);}
extend(ProductEditRef,EditRef); 
function DOCNumberEdit(id,options){options=options||{};options.labelCaption="Номер:";options.contClassName=options.contClassName||"form-group";options.labelClassName=options.labelClassName||options.app.getBsCol(5);options.editContClassName="input-group "+options.app.getBsCol(5);options.enabled=(options.enabled!=undefined)?options.enabled:false;options.cmdClear=false;options.maxlength=10;DOCNumberEdit.superclass.constructor.call(this,id,options);}
extend(DOCNumberEdit,EditString); 
function DOCDateEdit(id,options){options=options||{};var tm=options.value;if(tm==undefined){tm=DateHelper.time();tm.setHours(0,0,0,0);}
options.value=tm;options.labelCaption=options.labelCaption||"от:";options.contClassName=options.contClassName||"form-group";DOCDateEdit.superclass.constructor.call(this,id,options);}
extend(DOCDateEdit,EditDateTime); 
function MaterialEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Материал:";}
options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:false;options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["material_id"];options.selectWinClass=options.selectWinClass||MaterialList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.selectKeyIds=options.selecKeyIds||["id"];options.editWinClass=Material_Form;options.acMinLengthForQuery=1;options.acController=new Material_Controller(options.app);options.acModel=new MaterialList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"0";MaterialEditRef.superclass.constructor.call(this,id,options);}
extend(MaterialEditRef,EditRef); 
function DOCCommands(id,options){options=options||{};this.m_detailOnSelect=options.detailOnSelect;var self=this;this.m_controlDetailFill=new ButtonSelectRef(id+":cmdDetailFill",{"caption":this.CTRL_DETFILL_CAP,"title":this.CTRL_DETFILL_TITLE,"multySelect":true,"onSelect":function(model){self.onSelected(model);},"app":options.app,"winClass":options.detailFillWinClass});DOCCommands.superclass.constructor.call(this,id,options);}
extend(DOCCommands,GridCommandsAjx);DOCCommands.prototype.addControls=function(){DOCCommands.superclass.addControls.call(this);this.addElement(this.m_controlDetailFill);}
DOCCommands.prototype.onSelected=function(model){this.m_detailOnSelect.call(this,model,1);} 
function DOCProductionDetMatSysCell(id,options){options=options||{};var self=this;options.elements=[new ButtonCtrl(id+":inc",{"glyph":"glyphicon-plus","title":this.BTN_INC_TITLE,"onClick":function(){self.inc(CommonHelper.json2obj(self.m_row.getAttr("keys")));}}),new ButtonCtrl(id+":dec",{"glyph":"glyphicon-minus","title":this.BTN_DEC_TITLE,"onClick":function(){self.dec(CommonHelper.json2obj(self.m_row.getAttr("keys")));}}),new ButtonCtrl(id+":del",{"glyph":"glyphicon-remove","title":this.BTN_DEL_TITLE,"onClick":function(){self.del(CommonHelper.json2obj(self.m_row.getAttr("keys")));}})];DOCProductionDetMatSysCell.superclass.constructor.call(this,id,options);}
extend(DOCProductionDetMatSysCell,GridCell);DOCProductionDetMatSysCell.prototype.updateGrid=function(keys,newQuant){var contr=new DOCProductionDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("update");pm.setFieldValue("old_view_id",keys["view_id"]);pm.setFieldValue("old_line_number",keys["line_number"]);pm.setFieldValue("quant",newQuant);pm.run({"async":false});this.getGridColumn().m_grid.setModified(true);this.getGridColumn().m_grid.onRefresh();}
DOCProductionDetMatSysCell.prototype.inc=function(keys){var m=this.getGridColumn().m_grid.getModel();m.getRow(this.m_modelIndex);var v=m.getFieldValue("quant")+1;this.updateGrid(keys,v);}
DOCProductionDetMatSysCell.prototype.dec=function(keys){var m=this.getGridColumn().m_grid.getModel();m.getRow(this.m_modelIndex);var v=m.getFieldValue("quant")-1;if(v)this.updateGrid(keys,v);}
DOCProductionDetMatSysCell.prototype.del=function(keys){var contr=new DOCProductionDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("delete");pm.setFieldValue("view_id",keys["view_id"]);pm.setFieldValue("line_number",keys["line_number"]);pm.run({"async":false});this.getGridColumn().m_grid.setModified(true);this.getGridColumn().m_grid.onRefresh();} 
function DOCSaleReceiptSysCell(id,options){options=options||{};var self=this;options.elements=[new ButtonCtrl(id+":del",{"glyph":"glyphicon-remove","title":"удалить позицию","onClick":function(){self.del(CommonHelper.json2obj(self.m_row.getAttr("keys")));},"app":options.app})];DOCSaleReceiptSysCell.superclass.constructor.call(this,id,options);}
extend(DOCSaleReceiptSysCell,GridCell);DOCSaleReceiptSysCell.prototype.del=function(keys){var contr=new Receipt_Controller(this.getApp());var pm=contr.getPublicMethod("delete");pm.setFieldValue("user_id",keys["user_id"]);pm.setFieldValue("item_id",keys["item_id"]);pm.setFieldValue("item_type",keys["item_type"]);pm.run({"async":false});this.getGridColumn().m_grid.onRefresh();} 
function DOCProductionEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Комплектация:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.formatFunction=options.formatFunction||function(row){return this.getDescr(row.doc_production_number.getValue(),row.doc_production_date_time.getValue(),row.product_descr.getValue());};options.selectWinClass=options.selectWinClass||DOCProductionList_Form;options.selectKeyIds=options.selectKeyIds;options.selectFormatFunction=options.selectFormatFunction||function(row){return this.getDescr(row.doc_production_number.getValue(),row.doc_production_date_time.getValue(),row.name.getValue());}
options.editWinClass=DOCProduction_Form;options.cmdAutoComplete=false;DOCProductionEditRef.superclass.constructor.call(this,id,options);}
extend(DOCProductionEditRef,EditRef);DOCProductionEditRef.prototype.getDescr=function(docNumber,docDate,prodDescr){return CommonHelper.format("№ % (%), %",[docNumber,DateHelper.format(docDate,this.getApp().getDateFormat()),prodDescr]);} 
function ExpenceTypeEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Статья затрат:";}
options.cmdOpen=false;options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=options.selectWinClass||ExpenceTypeList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new ExpenceType_Controller(options.app);options.acModel=new ExpenceType_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ExpenceTypeEditRef.superclass.constructor.call(this,id,options);}
extend(ExpenceTypeEditRef,EditRef); 
function DiscountSelect(id,options){options=options||{};if(options.labelCaption==undefined&&options.labelCaption!=""){options.labelCaption=this.CAP;}
options.keyIds=options.keyIds||["id"];options.model=new DiscountList_Model();options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("descr")];var contr=new Discount_Controller(options.app);options.readPublicMethod=contr.getPublicMethod("get_list_for_sale");DiscountSelect.superclass.constructor.call(this,id,options);}
extend(DiscountSelect,EditSelectRef); 
function DiscCardEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Диск.карта:";}
options.cmdOpen=true;options.cmdInsert=false;options.keyIds=options.keyIds||["id"];options.selectWinClass=null;options.selectDescrIds=null;options.editWinClass=DiscCard_Form;options.acMinLengthForQuery=1;options.acController=new DiscCard_Controller(options.app);options.acModel=new DiscCard_Model();options.acPatternFieldId=options.acPatternFieldId||"barcode";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("barcode")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DiscCardEditRef.superclass.constructor.call(this,id,options);}
extend(DiscCardEditRef,EditRef); 
function DOCSaleReceiptEditCell(id,options){options.value=options.gridColumn.getField().getValue();options.attrs=options.attrs||{};options.attrs.fieldId=options.gridColumn.getField().getId();options.editOptions={"cmdSelect":false,"editContClassName":"input-group "+window.getBsCol()+"12"}
this.m_editClass=options.editClass;this.m_editOptions=options.editOptions;this.m_gridColumn=options.gridColumn;this.m_row=options.row;this.m_value=options.value;options.value=null;DOCSaleReceiptEditCell.superclass.constructor.call(this,id,"td",options);}
extend(DOCSaleReceiptEditCell,Control);DOCSaleReceiptEditCell.prototype.toDOM=function(parent){DOCSaleReceiptEditCell.superclass.toDOM.call(this,parent);var self=this;var edit_opts=this.m_editOptions||{};edit_opts.value=this.m_value;edit_opts.events={"keydown":function(e){if(e.keyCode===13){var gr=self.m_gridColumn.getGrid();var row_n=self.m_row.getNode();gr.setModelToCurrentRow(row_n);var m=gr.getModel();var quant_old=m.getFieldValue("quant");var disc_percent_old=m.getFieldValue("disc_percent");var quant=parseFloat(DOMHelper.getElementsByAttr("quant",row_n,"fieldId",true,"td")[0].getElementsByTagName("input")[0].value);var disc_percent=parseFloat(DOMHelper.getElementsByAttr("disc_percent",row_n,"fieldId",true,"td")[0].getElementsByTagName("input")[0].value);if((quant&&quant!=quant_old)||(disc_percent!=disc_percent_old)){var item_id=m.getFieldValue("item_id");var item_type=m.getFieldValue("item_type");var doc_production_id=m.getFieldValue("doc_production_id");self.updateItem(item_id,item_type,doc_production_id,quant,disc_percent);}}}};this.m_edit=new this.m_editClass(this.getId()+"_edit",edit_opts);this.m_edit.toDOM(this.m_node);}
DOCSaleReceiptEditCell.prototype.delDOM=function(){this.m_edit.delDOM();delete this.m_edit;DOCSaleReceiptEditCell.superclass.delDOM.call(this);}
DOCSaleReceiptEditCell.prototype.updateItem=function(itemId,item_type,docProductionId,quant,disc_percent){var gr=this.m_gridColumn.getGrid();var pm=gr.getReadPublicMethod().getController().getPublicMethod("edit_item");pm.setFieldValue("item_id",itemId);pm.setFieldValue("item_type",item_type);pm.setFieldValue("doc_production_id",docProductionId);pm.setFieldValue("quant",quant);pm.setFieldValue("disc_percent",disc_percent);pm.run({async:false});gr.onRefresh();}
function ReceiptQuantCell(id,options){options.editClass=EditInt;ReceiptQuantCell.superclass.constructor.call(this,id,options);}
extend(ReceiptQuantCell,DOCSaleReceiptEditCell);function ReceiptDiscPercentCell(id,options){options.editClass=EditInt;ReceiptDiscPercentCell.superclass.constructor.call(this,id,options);}
extend(ReceiptDiscPercentCell,DOCSaleReceiptEditCell); 
function ItemsForSaleGrid(id,options){options=options||{};options.tagName="div";options.autoRefresh=false;options.navigate=false;var constants={"sale_item_cols":null};options.app.getConstantManager().get(constants);this.m_saleItemCols=constants.sale_item_cols;ItemsForSaleGrid.superclass.constructor.call(this,id,options);}
extend(ItemsForSaleGrid,GridAjx);ItemsForSaleGrid.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();var field_cnt;var row,row_keys;this.m_model.reset();this.m_addedItems={};var self=this;var hor_item_index=0;var item_index=0;var item_row=null;var item_row_count=0;var set_add_item=function(grid,node,item_id,doc_production_id){EventHelper.add(node,"click",function(){grid.onAddItem.call(self,item_id,doc_production_id);},true);}
var set_add_material=function(grid,node,item_id){EventHelper.add(node,"click",function(){grid.onAddMaterial.call(self,item_id);},true);}
while(this.m_model.getNextRow()){var item_id=this.m_model.getFieldValue('id');var class_name="productForSale item_col";var not_in_stock=(this.m_model.getFieldValue("quant")<=0);if(not_in_stock){class_name+=" not_in_stock";}
var row_id=this.getId()+"_prod_"+item_index;var row=new GridRow(row_id,{"tagName":"div","className":class_name,"elements":[new GridCell(row_id+":name",{"value":this.m_model.getFieldValue("name"),"tagName":"div"}),new GridCell(row_id+":price",{"value":this.m_model.getFieldValue("price"),"tagName":"div"}),new GridCell(row_id+":quant_descr",{"value":this.m_model.getFieldValue("quant_descr"),"tagName":"div"})],"attrs":{"item_id":item_id}});if(hor_item_index==0){if(item_row){body.addElement(item_row);}
item_row=new ControlContainer(this.getId()+"_row_"+item_row_count,"div",{className:"item_row"});item_row_count++;}
item_row.addElement(row);hor_item_index++;if(hor_item_index==this.m_saleItemCols){hor_item_index=0;}
item_index++;if(!not_in_stock){if(this.m_model.getFieldValue("item_type")==1){this.m_addedItems[row_id]=new set_add_material(this,row.m_node,item_id);}
else{this.m_addedItems[row_id]=new set_add_item(this,row.m_node,item_id,this.m_model.getFieldValue("doc_production_id"));}}}
if(item_row){body.addElement(item_row);}
body.toDOM(this.m_node);}}
ItemsForSaleGrid.prototype.onAddItem=function(itemId,docProductionId){var self=this;var contr=new Receipt_Controller(this.getApp());var pm=contr.getPublicMethod("add_product");pm.setFieldValue("doc_production_id",docProductionId);pm.setFieldValue("item_id",itemId);pm.run({"async":false,"ok":function(){self.m_receiptGrid.onRefresh();}});}
ItemsForSaleGrid.prototype.onAddMaterial=function(itemId){var self=this;var contr=new Receipt_Controller(this.getApp());var pm=contr.getPublicMethod("add_material");pm.setFieldValue("item_id",itemId);pm.run({"async":false,"ok":function(){self.m_receiptGrid.onRefresh();}});} 
function DOCClientOrderEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Заказ покупателя:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=options.selectWinClass||DOCClientOrderList_Form;options.selectKeyIds=options.selectKeyIds;options.selectDescrIds=["doc_client_order_descr"];options.editWinClass=DOCProduction_Form;options.cmdAutoComplete=false;DOCClientOrderEditRef.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderEditRef,EditRef); 
function DOCSalePayTypeSysCell(id,options){options=options||{};var self=this;options.elements=[new ButtonCtrl(id+":del",{"glyph":"glyphicon-remove","title":"удалить позицию","onClick":function(){self.del(CommonHelper.json2obj(self.m_row.getAttr("keys")));},"app":options.app})];DOCSalePayTypeSysCell.superclass.constructor.call(this,id,options);}
extend(DOCSalePayTypeSysCell,GridCell);DOCSalePayTypeSysCell.prototype.del=function(keys){var contr=new Receipt_Controller(this.getApp());var pm=contr.getPublicMethod("del_payment_type");pm.setFieldValue("dt",keys["dt"]);pm.run({"async":false});this.getGridColumn().m_grid.onRefresh();} 
function DOCSalePayTypeEditCell(id,options){options.value=options.gridColumn.getField().getValue();options.attrs=options.attrs||{};options.attrs.fieldId=options.gridColumn.getField().getId();options.editOptions={"cmdSelect":false,"editContClassName":"input-group "+window.getBsCol()+"12","app":options.app}
this.m_editClass=options.editClass;this.m_editOptions=options.editOptions;this.m_gridColumn=options.gridColumn;this.m_row=options.row;this.m_value=options.value;options.value=null;DOCSalePayTypeEditCell.superclass.constructor.call(this,id,"td",options);}
extend(DOCSalePayTypeEditCell,Control);DOCSalePayTypeEditCell.prototype.toDOM=function(parent){DOCSalePayTypeEditCell.superclass.toDOM.call(this,parent);var self=this;var edit_opts=this.m_editOptions||{};edit_opts.value=this.m_value;edit_opts.events={"blur":function(){self.update();},"keydown":function(e){if(e.keyCode===13){self.update();}}};this.m_edit=new this.m_editClass(this.getId()+"_edit",edit_opts);this.m_edit.toDOM(this.m_node);}
DOCSalePayTypeEditCell.prototype.delDOM=function(){this.m_edit.delDOM();delete this.m_edit;DOCSalePayTypeEditCell.superclass.delDOM.call(this);}
DOCSalePayTypeEditCell.prototype.update=function(){var gr=this.m_gridColumn.getGrid();var row_n=this.m_row.getNode();gr.setModelToCurrentRow(row_n);var m=gr.getModel();var total_old=m.getFieldValue("total");var total=parseFloat(DOMHelper.getElementsByAttr("total",row_n,"fieldId",true,"td")[0].getElementsByTagName("input")[0].value);if(!isNaN(total)&&total&&total!=total_old){var pm=gr.getReadPublicMethod().getController().getPublicMethod("set_payment_type_total");pm.setFieldValue("dt",m.getFieldValue("dt"));pm.setFieldValue("total",total);pm.run({async:false});gr.onRefresh();}}
function DOCSalePayTypeTotalCell(id,options){options.editClass=EditMoney;options.className="form-control input-lg";DOCSalePayTypeTotalCell.superclass.constructor.call(this,id,options);}
extend(DOCSalePayTypeTotalCell,DOCSalePayTypeEditCell); 
function ReceiptPayTypeAddBtn(id,options){options=options||{};options.className="btn dropdown";this.m_button=new ControlContainer(CommonHelper.uniqid(),"button",{"className":"btn btn-default dropdown-toggle","title":"Добавить тип оплаты","attrs":{"type":"button","data-toggle":"dropdown"},"elements":[new Control(CommonHelper.uniqid(),"i",{"className":"glyphicon glyphicon-plus"})]});this.m_model=options.model;this.m_pm=options.pm;this.m_refresh=options.refresh;var ctrls=[];var self=this;while(this.m_model.getNextRow()){var e_pref=id+":"+this.m_model.getFieldValue("id")+":";ctrls.push(new ControlContainer(e_pref+"cont","li",{"elements":[new Control(e_pref+"cont:a","a",{"value":this.m_model.getFieldValue("name"),"events":{"click":function(e){self.m_pm.setFieldValue("payment_type_for_sale_id",e.target.getAttribute("payTypeId"));self.m_pm.run({"async":true,"ok":function(){self.m_refresh();}});}},"attrs":{"href":"#","role":"menuitem","payTypeId":this.m_model.getFieldValue("id")}})]}));}
this.m_buttons=new ControlContainer(CommonHelper.uniqid(),"ul",{"className":"dropdown-menu","elements":ctrls});options.elements=[this.m_button,this.m_buttons];ReceiptPayTypeAddBtn.superclass.constructor.call(this,id,"div",options);}
extend(ReceiptPayTypeAddBtn,ControlContainer); 
function SeqMaterialText(id,options){options.labelCaption="Актуальность данных: ";options.cmdClear=false;options.enabled=false;options.contClassName="form-group "+window.getBsCol(4);var self=this;options.buttonOpen=new ButtonCtrl(id+":show",{"glyph":"glyphicon-pencil","onClick":function(){self.show();},"app":options.app});options.buttonSelect=new ButtonCtrl(id+":ref",{"glyph":"glyphicon-refresh","onClick":function(){self.refresh();},"app":options.app});this.m_model=new ModelXML("SequenceViolList_Model",{"fields":{"doc_log_date_time":new FieldDateTime("doc_log_date_time")},"data":options.data});SeqMaterialText.superclass.constructor.call(this,id,options);this.refreshValue();}
extend(SeqMaterialText,EditDateTime);SeqMaterialText.prototype.refreshValue=function(){if(this.m_model.getRowCount()){this.m_model.getRow(0);this.setValue(this.m_model.getFieldValue("doc_log_date_time"));}}
SeqMaterialText.prototype.refresh=function(){var contr=new DOCManager_Controller(this.getApp());var pm=contr.getPublicMethod("get_sequence_viol_list");pm.setFieldValue("sequence_list","materials");var self=this;pm.run({"ok":function(resp){self.m_model.setData(resp.getModelData(self.m_model.getId()));self.refreshValue();}});}
SeqMaterialText.prototype.show=function(){window.showNote("Пока не реализовано.");} 
function ConstantGrid(id,options){options=options||{};this.m_ctrlColumnClasses=options.ctrlColumnClasses;ConstantGrid.superclass.constructor.call(this,id,options);}
extend(ConstantGrid,GridAjx);ConstantGrid.prototype.m_ctrlColumnClasses;ConstantGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin();}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.setCountTotal(this.m_model.getTotCount());}
while(this.m_model.getNextRow()){var row_id=this.getId()+":body:"+row_cnt;var row_class=(row_cnt%2==0)?"even":"odd";if(this.m_onSelect){row_class+=" for_select";}
if(this.m_onEventSetRowClass){this.m_onEventSetRowClass(this.m_model,row_class);}
var r_class=this.getRowClass();var row_opts={"className":row_class,"app":this.getApp()};row=new r_class(row_id,row_opts);row_keys={};for(var k=0;k<this.m_keyIds.length;k++){if(this.m_model.fieldExists(this.m_keyIds[k])){row_keys[this.m_keyIds[k]]=this.m_model.getFieldValue(this.m_keyIds[k]);}}
var column_class;var ctrlClass;var ctrlOptions={"app":this.getApp()};var val_type=this.m_model.getFieldValue("val_type");var const_id=this.m_model.getFieldValue("id");if(this.m_ctrlColumnClasses[const_id]){if(this.m_ctrlColumnClasses[const_id].ctrlClass){ctrlClass=this.m_ctrlColumnClasses[const_id].ctrlClass;}
else{ctrlClass=EditString;}
if(this.m_ctrlColumnClasses[const_id].columnClass){column_class=this.m_ctrlColumnClasses[const_id].columnClass;}
else{column_class=GridColumn;}
if(this.m_ctrlColumnClasses[const_id].ctrlOptions){CommonHelper.merge(ctrlOptions,this.m_ctrlColumnClasses[const_id].ctrlOptions);}}
else{if(val_type=="Bool"){column_class=GridColumnBool;ctrlClass=EditCheckBox;}
else if(val_type=="Date"){column_class=GridColumnDate;ctrlClass=EditDate;}
else if(val_type=="DateTime"){column_class=GridColumnDateTime;ctrlClass=EditDateTime;}
else if(val_type=="Interval"){column_class=GridColumn;ctrlClass=EditTime;}
else if(val_type=="Float"){column_class=GridColumnFloat;ctrlClass=EditFloat;}
else if(val_type=="Int"){column_class=GridColumn;ctrlClass=EditInt;}
else{column_class=GridColumn;ctrlClass=EditString;}}
field_cnt=0;for(var col_id in columns){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[col_id]=columns[col_id].getField().getValue();}
var cell_class=columns[col_id].getCellClass();var cell_opts=columns[col_id].getCellOptions()||{};cell_opts.modelIndex=row_cnt;cell_opts.row=row;if(col_id=="val_descr"){cell_opts.gridColumn=new column_class({"field":columns[col_id].getField(),"headCell":columns[col_id].getHeadCell(),"ctrlClass":ctrlClass,"ctrlOptions":ctrlOptions,"ctrlBindFieldId":"val","ctrlBindField":this.m_model.getField("val_id"),"keyIds":["val"],"app":this.getApp()});}
else{cell_opts.gridColumn=columns[col_id];}
cell_opts.app=this.getApp();var cell=new cell_class(row_id+":"+field_cnt,cell_opts);row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.array2json(row_keys));row.setAttr("modelIndex",row_cnt);var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this,"app":this.getApp()};row.addElement(new row_cmd_class(row_id+":cell-sys",row_class_options));}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd();}
body.toDOM(this.m_node);}
if(this.m_navigate){this.setSelection();}
if(this.m_onRefresh){this.m_onRefresh.call(this);}}
ConstantGrid.prototype.initEditView=function(parent,replacedNode,cmd){ConstantGrid.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm=this.getUpdatePublicMethod();pm.setFieldValue("id",this.m_model.getFieldValue("id"));} 
function DOCClientOrderGridCommand(id,options){options=options||{};options.template=options.app.getTemplate("DOCClientOrderGridCommand");DOCClientOrderGridCommand.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderGridCommand,GridCmdContainerDOC);DOCClientOrderGridCommand.prototype.addCommands=function(){this.m_cmdInsert.setShowCmdControlInPopup(false);this.m_cmdEdit.setShowCmdControlInPopup(false);this.m_cmdCopy.setShowCmdControlInPopup(false);this.m_cmdDelete.setShowCmdControlInPopup(false);this.m_cmdRefresh.setShowCmdControlInPopup(false);this.m_cmdPrint.setShowCmdControlInPopup(false);this.m_cmdPrintObj.setShowCmdControlInPopup(false);this.m_cmdSearch.setShowCmdControlInPopup(false);this.m_cmdColManager.setShowCmdControlInPopup(false);this.m_cmdFilter.setShowCmdControlInPopup(false);this.m_cmdExport.setShowCmdControlInPopup(false);this.m_cmdDOCUnprocess.setShowCmdControlInPopup(false);this.m_cmdDOCShowActs.setShowCmdControlInPopup(false);DOCClientOrderGridCommand.superclass.addCommands.call(this);var self=this;var id=this.getId();this.m_commands.push(new GridCmd(id+"cmdStatChecked",{"caption":"Проверен","onCommand":function(){self.setState('checked');}}));this.m_commands.push(new GridCmd(id+"cmdStatToFlorist",{"caption":"Составлен","onCommand":function(){self.setState('to_florist');}}));this.m_commands.push(new GridCmd(id+"cmdStatToCourier",{"caption":"Забрал курьер","onCommand":function(){self.setState('to_courier');}}));this.m_commands.push(new GridCmd(id+"cmdStatClosed",{"caption":"Закрыть","onCommand":function(){self.setState('closed');}}));this.m_commands.push(new GridCmd(id+"cmdStatPayed",{"caption":"Оплатить","onCommand":function(){self.setPayed();}}));}
DOCClientOrderGridCommand.prototype.setState=function(state){var contr=new DOCClientOrder_Controller(this.getApp());var pm=contr.getPublicMethod("set_state");var g=this.m_grid;var r=g.getModelRow();if(r&&r["id"]){var doc_id=r["id"].getValue();var self=this;pm.setFieldValue("doc_id",doc_id);pm.setFieldValue("state",state);pm.run({"ok":function(resp){self.m_grid.onRefresh();window.showNote("Изменен статус документа.");}});}}
DOCClientOrderGridCommand.prototype.setPayed=function(){var contr=new DOCClientOrder_Controller(this.getApp());var pm=contr.getPublicMethod("set_payed");var g=this.m_grid;var r=g.getModelRow();console.log("Row="+r)
if(r&&r["id"]){var doc_id=r["id"].getValue();var self=this;pm.setFieldValue("doc_id",doc_id);pm.run({"ok":function(resp){self.m_grid.onRefresh();window.showNote("Установлен признак оплаты документа.");}});}} 
function EnumGridColumn_delivery_note_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.by_call="звонок";options.multyLangValues.ru.by_sms="SMS";EnumGridColumn_delivery_note_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_delivery_note_types,GridColumnEnum); 
function EnumGridColumn_delivery_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.courier="курьер";options.multyLangValues.ru.by_client="самовывоз";EnumGridColumn_delivery_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_delivery_types,GridColumnEnum); 
function EnumGridColumn_payment_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.cash="Наличными";options.multyLangValues.ru.bank="Банковской картой";options.multyLangValues.ru.yandex="Яндекс деньги";options.multyLangValues.ru.trans_to_card="Перевод на карту";options.multyLangValues.ru.web_money="Web money";EnumGridColumn_payment_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_payment_types,GridColumnEnum); 
function EnumGridColumn_client_order_states(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.to_noone="Не обработан";options.multyLangValues.ru.checked="Проверен";options.multyLangValues.ru.to_florist="Букет составлен";options.multyLangValues.ru.to_courier="Забрал курьер";options.multyLangValues.ru.closed="Выполнен";EnumGridColumn_client_order_states.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_client_order_states,GridColumnEnum); 
DOCCommands.prototype.CTRL_DETFILL_CAP="Подбор";DOCCommands.prototype.CTRL_DETFILL_TITLE="Открыть форму для множественного подбора";DOCProductionDetMatSysCell.prototype.BTN_INC_TITLE="Увеличить количество на 1";DOCProductionDetMatSysCell.prototype.BTN_DEC_TITLE="Уменьшить количество на 1";DOCProductionDetMatSysCell.prototype.BTN_DEL_TITLE="Удалить строку";PaymentTypeForSaleSelect.prototype.CAP="Вид оплаты:";DiscountSelect.prototype.CAP="Вид скидки:"; 
function Material_Form(options){options=options||{};options.formName="Material";options.method="get_object";Material_Form.superclass.constructor.call(this,options);}
extend(Material_Form,WindowFormObject); 
function MaterialList_Form(options){options=options||{};options.formName="MaterialList";options.controller="Material_Controller";options.method="get_list";MaterialList_Form.superclass.constructor.call(this,options);}
extend(MaterialList_Form,WindowFormObject); 
function MaterialBalanceList_Form(options){options=options||{};options.formName="MaterialBalanceList";options.controller="Material_Controller";options.method="get_list_with_balance";MaterialBalanceList_Form.superclass.constructor.call(this,options);}
extend(MaterialBalanceList_Form,WindowFormObject); 
function ProductBalanceList_Form(options){options=options||{};options.formName="ProductBalanceList";options.controller="Product_Controller";options.method="get_list_with_balance";ProductBalanceList_Form.superclass.constructor.call(this,options);}
extend(ProductBalanceList_Form,WindowFormObject); 
function Supplier_Form(options){options=options||{};options.formName="Supplier";options.method="get_object";Supplier_Form.superclass.constructor.call(this,options);}
extend(Supplier_Form,WindowFormObject); 
function Client_Form(options){options=options||{};options.formName="ClientDialog";options.method="get_object";options.controller="Client_Controller";Client_Form.superclass.constructor.call(this,options);}
extend(Client_Form,WindowFormObject); 
function ClientList_Form(options){options=options||{};options.formName="ClientList";options.controller="Client_Controller";options.method="get_list";ClientList_Form.superclass.constructor.call(this,options);}
extend(ClientList_Form,WindowFormObject); 
function Product_Form(options){options=options||{};options.formName="Product";options.method="get_object";Product_Form.superclass.constructor.call(this,options);}
extend(Product_Form,WindowFormObject); 
function User_Form(options){options=options||{};options.formName="UserDialog";options.controller="User_Controller";options.method="get_object";User_Form.superclass.constructor.call(this,options);}
extend(User_Form,WindowFormObject); 
function DOCProduction_Form(options){options=options||{};options.formName="DOCProduction";options.method="get_object";DOCProduction_Form.superclass.constructor.call(this,options);}
extend(DOCProduction_Form,WindowFormObject); 
function DOCProductionList_Form(options){options=options||{};options.formName="DOCProductionList";options.controller="DOCProduction_Controller";options.method="get_list";DOCProductionList_Form.superclass.constructor.call(this,options);}
extend(DOCProductionList_Form,WindowFormObject); 
function DOCProductDisposal_Form(options){options=options||{};options.formName="DOCProductDisposal";options.method="get_object";DOCProductDisposal_Form.superclass.constructor.call(this,options);}
extend(DOCProductDisposal_Form,WindowFormObject); 
function UserList_Form(options){options=options||{};options.formName="UserList";options.controller="User_Controller";options.method="get_list";UserList_Form.superclass.constructor.call(this,options);}
extend(UserList_Form,WindowFormObject); 
function SupplierList_Form(options){options=options||{};options.formName="SupplierList";options.controller="Supplier_Controller";options.method="get_list";SupplierList_Form.superclass.constructor.call(this,options);}
extend(SupplierList_Form,WindowFormObject); 
function ProductList_Form(options){options=options||{};options.formName="ProductList";options.controller="Product_Controller";options.method="get_list";ProductList_Form.superclass.constructor.call(this,options);}
extend(ProductList_Form,WindowFormObject); 
function DOCSale_Form(options){options=options||{};options.formName="DOCSale";options.method="get_object";DOCSale_Form.superclass.constructor.call(this,options);}
extend(DOCSale_Form,WindowFormObject); 
function DOCExpence_Form(options){options=options||{};options.formName="DOCExpence";options.method="get_object";DOCExpence_Form.superclass.constructor.call(this,options);}
extend(DOCExpence_Form,WindowFormObject); 
function DOCMaterialProcurement_Form(options){options=options||{};options.formName="DOCMaterialProcurement";options.method="get_object";DOCMaterialProcurement_Form.superclass.constructor.call(this,options);}
extend(DOCMaterialProcurement_Form,WindowFormObject); 
function DOCMaterialDisposal_Form(options){options=options||{};options.formName="DOCMaterialDisposal";options.method="get_object";DOCMaterialDisposal_Form.superclass.constructor.call(this,options);}
extend(DOCMaterialDisposal_Form,WindowFormObject); 
function ExpenceTypeList_Form(options){options=options||{};options.formName="ExpenceTypeList";options.controller="ExpenceType_Controller";options.method="get_list";ExpenceTypeList_Form.superclass.constructor.call(this,options);}
extend(ExpenceTypeList_Form,WindowFormObject); 
function DOCExpence_Form(options){options=options||{};options.formName="DOCExpence";options.method="get_object";DOCExpence_Form.superclass.constructor.call(this,options);}
extend(DOCExpence_Form,WindowFormObject); 
function DiscCard_Form(options){options=options||{};options.formName="DiscCard";options.method="get_object";DiscCard_Form.superclass.constructor.call(this,options);}
extend(DiscCard_Form,WindowFormObject); 
function DOCClientOrder_Form(options){options=options||{};options.formName="DOCClientOrder";options.method="get_object";DOCClientOrder_Form.superclass.constructor.call(this,options);}
extend(DOCClientOrder_Form,WindowFormObject); 
function DOCClientOrderList_Form(options){options=options||{};options.formName="DOCClientOrderList";options.controller="DOCClientOrder_Controller";options.method="get_list";DOCClientOrderList_Form.superclass.constructor.call(this,options);}
extend(DOCClientOrderList_Form,WindowFormObject); 
function Login_View(id,options){Login_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new ErrorControl(id+":error",{"app":options.app}));var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.login();}};this.addElement(new EditString(id+":user",{"placeholder":this.CTRL_USER_LAB,"editContClassName":"form-group","focus":true,"cmdClear":false,"events":{"keydown":check_for_enter},"app":options.app}));this.addElement(new EditPassword(id+":pwd",{"placeholder":this.CTRL_PWD_LAB,"editContClassName":"form-group","events":{"keydown":check_for_enter},"app":options.app}));this.addElement(new Button(id+":submit_login",{"onClick":function(){self.login();},"app":options.app}));var contr=new User_Controller(options.app);var pm=contr.getPublicMethod("login");this.addCommand(new Command("login",{"publicMethod":pm,"control":this.getElement("submit_login"),"async":false,"bindings":[new DataBinding({"field":pm.getField("name"),"control":this.getElement("user")}),new DataBinding({"field":pm.getField("pwd"),"control":this.getElement("pwd")})]}));}
extend(Login_View,ViewAjx);Login_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
Login_View.prototype.login=function(){var self=this;this.execCommand("login",function(){document.location.href=self.getApp().getHost();},function(resp,errCode,errStr){if(errCode==100){self.setError(self.ER_LOGIN);}
else{self.setError((errCode!=undefined)?(errCode+" "+errStr):errStr);}});} 
function StoreList_View(id,options){StoreList_View.superclass.constructor.call(this,id,options);var model=new StoreList_Model({"data":options.modelDataStr});var contr=new Store_Controller(options.app);var constants={"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"StoreList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(StoreList_View,ViewAjx); 
function ProductList_View(id,options){ProductList_View.superclass.constructor.call(this,id,options);var model=new ProductList_Model({"data":options.modelDataStr});var contr=new Product_Controller(options.app);var constants={"grid_refresh_interval":null,"doc_per_page_count":0};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":Product_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"ProductList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:price",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price",{"field":model.getField("price")})],"sortable":true}),new GridCellHead(id+":grid:head:for_sale",{"colAttrs":{"align":"center"},"columns":[new GridColumnBool("for_sale",{"field":model.getField("for_sale")})],"sortable":true})]})]}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count,"app":options.app}),"rowSelect":false,"focus":true,"app":options.app}));}
extend(ProductList_View,ViewAjx); 
function MaterialGroup_View(id,options){MaterialGroup_View.superclass.constructor.call(this,id,options);var model=new MaterialGroup_Model({"data":options.modelDataStr});var contr=new MaterialGroup_Controller(options.app);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"MaterialGroup","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"autoRefresh":false,"focus":true,"app":options.app}));}
extend(MaterialGroup_View,ViewAjx); 
function MaterialList_View(id,options){options=options||{};MaterialList_View.superclass.constructor.call(this,id,options);var model=new MaterialList_Model({"data":options.modelDataStr});var contr=new Material_Controller(options.app);var constants={"doc_per_page_count":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":Material_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"printObjList":contr.getPrintList(),"popUpMenu":popup_menu,"colTemplate":"MaterialList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:price",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price",{"field":model.getField("price")})],"sortable":true}),new GridCellHead(id+":grid:head:for_sale",{"colAttrs":{"align":"center"},"columns":[new GridColumnBool("for_sale",{"field":model.getField("for_sale")})],"sortable":true})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"autoRefresh":false,"rowSelect":false,"focus":true,"app":options.app}));}
extend(MaterialList_View,ViewAjx); 
function SupplierList_View(id,options){SupplierList_View.superclass.constructor.call(this,id,options);var model=new SupplierList_Model({"data":options.modelDataStr});var contr=new Supplier_Controller(options.app);var constants={"doc_per_page_count":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":Supplier_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"SupplierList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:tel",{"columns":[new GridColumnPhone("tel",{"field":model.getField("tel"),"app":options.app})]}),new GridCellHead(id+":grid:head:email",{"columns":[new GridColumn("email",{"field":model.getField("email")})]})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count,"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"autoRefresh":false,"rowSelect":false,"focus":true,"app":options.app}));}
extend(SupplierList_View,ViewAjx); 
function ClientList_View(id,options){ClientList_View.superclass.constructor.call(this,id,options);var model=new ClientList_Model({"data":options.modelDataStr});var contr=new Client_Controller(options.app);var constants={"doc_per_page_count":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":Client_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"ClientList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:tel",{"columns":[new GridColumnPhone("tel",{"field":model.getField("tel"),"app":options.app})]}),new GridCellHead(id+":grid:head:disc_card_percent",{"columns":[new GridColumn("disc_card_percent",{"field":model.getField("disc_card_percent"),"app":options.app})]})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(ClientList_View,ViewAjx); 
function UserList_View(id,options){UserList_View.superclass.constructor.call(this,id,options);var model=new UserList_Model({"data":options.modelDataStr});var contr=new User_Controller(options.app);var constants={"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":User_Form,"keyIds":["id"],"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"UserList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:role",{"columns":[new GridColumn("role",{"field":model.getField("role_descr")})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(UserList_View,ViewAjx); 
function PaymentTypeForSale_View(id,options){PaymentTypeForSale_View.superclass.constructor.call(this,id,options);var model=new PaymentTypeForSale_Model({"data":options.modelDataStr});var contr=new PaymentTypeForSale_Controller(options.app);var constants={"doc_per_page_count":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"PaymentTypeForSale","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:kkm_type_close",{"colAttrs":{"align":"center"},"columns":[new GridColumn("kkm_type_close",{"field":model.getField("kkm_type_close")})]})]})]}),"pagination":null,"autoRefresh":false,"rowSelect":false,"focus":true,"app":options.app}));}
extend(PaymentTypeForSale_View,ViewAjx); 
function CashRegister_View(id,options){CashRegister_View.superclass.constructor.call(this,id,options);var model=new CashRegister_Model({"data":options.modelDataStr});var contr=new CashRegister_Controller(options.app);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"CashRegister","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:eq_server",{"columns":[new GridColumn("eq_server",{"field":model.getField("eq_server")})]}),new GridCellHead(id+":grid:head:eq_port",{"columns":[new GridColumn("eq_port",{"field":model.getField("eq_port")})]}),new GridCellHead(id+":grid:head:eq_id",{"columns":[new GridColumn("eq_id",{"field":model.getField("eq_id")})]})]})]}),"pagination":null,"autoRefresh":false,"rowSelect":false,"focus":true,"app":options.app}));}
extend(CashRegister_View,ViewAjx); 
function Material_View(id,options){options=options||{};var contr=new Material_Controller(options.app);options.printList=contr.getPrintList();Material_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new MaterialNameEdit(id+":name",{"app":options.app,"events":{"onblur":function(){self.copyControl("name","name_full");}}}));this.addElement(new EditString(id+":name_full",{"labelCaption":"Полн. наименование:","placeholder":"Полное наименование материала","maxlength":255,"app":options.app}));this.addElement(new EditFloat(id+":price",{"labelCaption":"Розничная цена:","placeholder":"Розничная цена материала","precision":2,"minVal":0,"app":options.app}));this.addElement(new EditCheckBox(id+":for_sale",{"labelCaption":"Для продажи:","app":options.app}));this.addElement(new EditInt(id+":margin_percent",{"labelCaption":"Наценка:","app":options.app}));this.addElement(new MaterialGroupSelect(id+":material_group",{"labelCaption":"Группа материалов:","keyIds":["material_group_id"],"app":options.app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new Material_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("name_full"),"model":this.m_model}),new DataBinding({"control":this.getElement("price"),"model":this.m_model}),new DataBinding({"control":this.getElement("for_sale"),"model":this.m_model}),new DataBinding({"control":this.getElement("margin_percent"),"model":this.m_model}),new DataBinding({"control":this.getElement("material_group"),"model":this.m_model,"keyIds":["material_group_id"]})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("price")}),new CommandBinding({"control":this.getElement("for_sale")}),new CommandBinding({"control":this.getElement("margin_percent")}),new CommandBinding({"control":this.getElement("material_group"),"fieldId":"material_group_id"})]);}
extend(Material_View,ViewObjectAjx); 
function Product_View(id,options){options=options||{};Product_View.superclass.constructor.call(this,id,options);this.addElement(new HiddenKey(id+":id"));var self=this;this.addElement(new ProductNameEdit(id+":name",{"app":options.app,"events":{"onblur":function(){self.fillNameFull();}}}));this.addElement(new EditString(id+":name_full",{"labelCaption":"Полн. наименование:","placeholder":"Полное наименование продукции","maxlength":255,"app":options.app}));this.addElement(new EditFloat(id+":price",{"labelCaption":"Розничная цена:","placeholder":"Розничная цена продукции","precision":2,"minVal":0,"app":options.app}));this.addElement(new EditCheckBox(id+":for_sale",{"labelCaption":"Для продажи:","app":options.app}));this.addElement(new EditCheckBox(id+":make_order",{"labelCaption":"Заказывать автоматически:","app":options.app}));this.addElement(new EditFloat(id+":min_stock_quant",{"labelCaption":"Минимальный остаток:","precision":3,"minVal":0,"app":options.app}));var specification_model=new SpecificationList_Model();var specification_contr=new Specification_Controller(options.app);var grid=new GridAjx(id+":specification-grid",{"model":specification_model,"controller":specification_contr,"editInline":true,"editWinClass":null,"commands":new GridCommandsAjx(id+":specification-grid:cmd",{"cmdEdit":false,"cmdCopy":false,"app":options.app}),"head":new GridHead(id+":specification-grid:head",{"elements":[new GridRow(id+":specification-grid:head:row0",{"elements":[new GridCellHead(id+":specification-grid:head:material_descr",{"columns":[new GridColumn("material",{"field":specification_model.getField("material_descr"),"ctrlClass":MaterialEditRef,"ctrlOptions":{"labelCaption":"","keyIds":["material_id"]},"ctrlBindField":specification_model.getField("material_id")})]}),new GridCellHead(id+":specification-grid:head:quant",{"columns":[new GridColumn("quant",{"field":specification_model.getField("material_quant"),"ctrlOptions":{"minValue":"1"}})]})]})]}),"autoRefresh":false,"enabled":false,"app":options.app});this.addElement(grid);var contr=new Product_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new Product_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("name_full"),"model":this.m_model}),new DataBinding({"control":this.getElement("price"),"model":this.m_model}),new DataBinding({"control":this.getElement("make_order"),"model":this.m_model}),new DataBinding({"control":this.getElement("for_sale"),"model":this.m_model}),new DataBinding({"control":this.getElement("min_stock_quant"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("price")}),new CommandBinding({"control":this.getElement("make_order")}),new CommandBinding({"control":this.getElement("for_sale")}),new CommandBinding({"control":this.getElement("min_stock_quant")})]);this.addDetailDataSet({"control":grid,"controlFieldId":"product_id","field":this.m_model.getField("id")});}
extend(Product_View,ViewObjectAjx);Product_View.prototype.fillNameFull=function(){var name=this.getElement("name").getValue();var name_full=this.getElement("name_full").getValue();if(name&&!name_full){this.getElement("name_full").setValue(name);}} 
function Supplier_View(id,options){options=options||{};Supplier_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new SupplierNameEdit(id+":name",{"app":options.app,"events":{"onblur":function(){self.copyControl("name","name_full");}}}));this.addElement(new EditString(id+":name_full",{"labelCaption":"Полн. наименование:","placeholder":"Полное наименование поставщика","maxlength":255,"app":options.app}));this.addElement(new EditPhone(id+":tel",{"labelCaption":"Телефон:","precision":2,"app":options.app}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Email:","app":options.app}));var contr=new Supplier_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new Supplier_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("name_full"),"model":this.m_model}),new DataBinding({"control":this.getElement("tel"),"model":this.m_model}),new DataBinding({"control":this.getElement("email"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("tel")}),new CommandBinding({"control":this.getElement("email")})]);}
extend(Supplier_View,ViewObjectAjx); 
function ClientDialog_View(id,options){options=options||{};ClientDialog_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new ClientNameEdit(id+":name",{"app":options.app,"events":{"onblur":function(){self.copyControl("name","name_full");}}}));this.addElement(new EditString(id+":name_full",{"labelCaption":"Полн. наименование:","placeholder":"Полное наименование клиента","maxlength":255,"app":options.app}));this.addElement(new EditPhone(id+":tel",{"labelCaption":"Телефон:","app":options.app}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Email:","app":options.app}));this.addElement(new DiscCardEditRef(id+":disc_card",{"app":options.app}));var contr=new Client_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new ClientDialog_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("name_full"),"model":this.m_model}),new DataBinding({"control":this.getElement("tel"),"model":this.m_model}),new DataBinding({"control":this.getElement("email"),"model":this.m_model}),new DataBinding({"control":this.getElement("disc_card"),"model":this.m_model,"field":this.m_model.getField("disc_card_barcode"),"keyIds":["disc_card_id"]}),]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("tel")}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("disc_card"),"fieldId":"disc_card_id"})]);}
extend(ClientDialog_View,ViewObjectAjx); 
function UserDialog_View(id,options){options=options||{};options.model=new UserDialog_Model({"data":options.modelDataStr});UserDialog_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new UserNameEdit(id+":name",{"app":options.app}));this.addElement(new Enum_role_types(id+":role",{"labelCaption":"Роль:","required":true,"app":options.app}));this.addElement(new EditCheckBox(id+":constrain_to_store",{"labelCaption":"Привязывать к магазину:","app":options.app}));this.addElement(new CashRegisterSelect(id+":cash_register",{"labelCaption":"ККМ:","app":options.app}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","app":options.app}));this.addElement(new EditPhone(id+":phone_cel",{"labelCaption":"Моб.телефон:","app":options.app}));var contr=new User_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("role"),"field":this.m_model.getField("role_id")}),new DataBinding({"control":this.getElement("constrain_to_store"),"keyIds":["constrain_to_store"]}),new DataBinding({"control":this.getElement("cash_register"),"keyIds":["cash_register_id"]}),new DataBinding({"control":this.getElement("email")}),new DataBinding({"control":this.getElement("phone_cel")})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new CommandBinding({"control":this.getElement("constrain_to_store"),"fieldId":"constrain_to_store"}),new CommandBinding({"control":this.getElement("cash_register"),"fieldId":"cash_register_id"}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("phone_cel")})]);}
extend(UserDialog_View,ViewObjectAjx); 
function ConstantList_View(id,options){ConstantList_View.superclass.constructor.call(this,id,options);var model=new ConstantList_Model({"data":options.modelDataStr});var contr=new Constant_Controller(options.app);var popup_menu=new PopUpMenu();var ctrlColumnClasses={"def_store":{"ctrlClass":StoreSelect,"ctrlOptions":{"labelCaption":"","keyIds":["val_id"],"ctrlBindFieldId":"val_id"}},"cel_phone_for_sms":{"ctrlClass":EditPhone,"columnClass":GridColumnPhone},"def_material_group":{"ctrlClass":MaterialGroupSelect},"def_payment_type_for_sale":{"ctrlClass":PaymentTypeForSaleSelect},"def_client":{"ctrlClass":ClientEditRef},"def_discount":{"ctrlClass":DiscountSelect}};this.addElement(new ConstantGrid(id+":grid",{"model":model,"controller":contr,"editInline":true,"editWinClass":null,"keyIds":["id"],"commands":new GridCommandsAjx(id+"-gridcmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false,"popUpMenu":popup_menu,"app":options.app}),"updatePublicMethod":contr.getPublicMethod("set_value"),"ctrlColumnClasses":ctrlColumnClasses,"editViewOptions":{"ctrlColumnClasses":ctrlColumnClasses},"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:0",{"elements":[new GridCellHead(id+":grid:head:0:name",{"columns":[new GridColumn("name",{"field":model.getField("name"),"ctrlOptions":{"enabled":false,"cmdClear":false}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:0:descr",{"columns":[new GridColumn("descr",{"field":model.getField("descr"),"ctrlOptions":{"enabled":false,"cmdClear":false}})]}),new GridCellHead(id+":grid:head:0:val_descr",{"columns":[new GridColumn("val_descr",{"field":model.getField("val_descr")})]})]})]}),"autoRefresh":false,"focus":true,"app":options.app}));}
extend(ConstantList_View,ViewAjx); 
function MaterialBalanceList_View(id,options){MaterialBalanceList_View.superclass.constructor.call(this,id,options);var model=new MaterialBalanceList_Model({"data":options.modelDataStr});var contr=new Material_Controller(options.app);var constants={"grid_refresh_interval":null,"def_store":null};options.app.getConstantManager().get(constants);var self=this;var mat_groups=new MaterialGroupRadio(id+":mat-groups",{"onSelect":function(){self.m_grid.onRefresh();},"app":options.app});var mat_name=new MaterialNameEdit(id+":mat-name",{"events":{"keyup":function(e){self.m_grid.onRefresh();}},"app":options.app});this.m_fastFilter=new GridFilter(CommonHelper.uniqid(),{"filters":{"material_group":{"binding":new CommandBinding({"control":mat_groups,"field":new FieldInt("material_group_id")}),"sign":"e"},"material_name":{"binding":new CommandBinding({"control":mat_name,"field":new FieldString("name")}),"sign":"lk","lwcards":true,"rwcards":true,"icase":true}},"app":options.app});var popup_menu=new PopUpMenu();var filters={};var multy_store=options.app.getServVars().multy_store;if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.on_date={"binding":new CommandBinding({"control":new EditDateTime(id+":mat-bal_date",{"labelCaption":"Дата остатков:","app":options.app}),"field":new FieldDateTime("date_time")}),"sign":"e"};var grid_rows=[];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));};grid_rows.push(new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}));grid_rows.push(new GridCellHead(id+":grid:head:main_quant",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("main_quant",{"field":model.getField("main_quant")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:price",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price",{"field":model.getField("price")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:main_total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("main_total",{"field":model.getField("main_total")})],"sortable":true}));this.m_grid=new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_with_balance"),"editInline":false,"editWinClass":Product_Form,"commands":new GridCommandsAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdFilter":true,"popUpMenu":popup_menu,"printObjList":contr.getPrintList(),"printObjListKeyIds":["id"],"filters":filters,"app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"focus":true,"lastRowFooter":true,"app":options.app});this.m_gridRefresh=this.m_grid.onRefresh;this.m_gridSetFilters=this.m_grid.setFilters;this.m_grid.setFilters=function(){self.m_gridSetFilters.call(self.m_grid);self.m_fastFilter.getFilter().applyFilters(self.m_grid.getReadPublicMethod(),true);}
this.m_grid.onRefresh=function(){self.refreshGrid();}
this.addElement(mat_groups);this.addElement(mat_name);this.addElement(this.m_grid);}
extend(MaterialBalanceList_View,ViewAjx);MaterialBalanceList_View.prototype.refreshGrid=function(){this.m_gridRefresh.call(this.m_grid);} 
function ProductBalanceList_View(id,options){ProductBalanceList_View.superclass.constructor.call(this,id,options);this.m_model=new ProductBalanceList_Model({"data":options.modelDataStr});var contr=new Product_Controller(options.app);var doc_contr=new DOCProduction_Controller(options.app);var constants={"grid_refresh_interval":null,"def_store":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();var filters={};var multy_store=options.app.getServVars().multy_store;if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.name={"binding":new CommandBinding({"control":new ProductNameEdit(id+":filter-ctrl-name",{"app":options.app}),"field":new FieldString("name")}),"sign":"lk","lwcards":true,"rwcards":true,"icase":true};var grid_rows=[];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":this.m_model.getField("store_descr")})],"sortable":true}));};grid_rows.push(new GridCellHead(id+":grid:head:code",{"columns":[new GridColumn("code",{"field":this.m_model.getField("code")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":this.m_model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":this.m_model.getField("total")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:after_production_time",{"colAttrs":{"align":"center"},"columns":[new GridColumnCustomTime("after_production_time",{"field":this.m_model.getField("after_production_time")})],"sortable":true}));this.addElement(new GridAjx(id+":grid",{"model":this.m_model,"controller":contr,"keyIds":["id"],"readPublicMethod":contr.getPublicMethod("get_list_with_balance"),"popUpMenu":popup_menu,"editInline":false,"editWinClass":Product_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"printObjList":doc_contr.getPrintList(),"popUpMenu":popup_menu,"colTemplate":"ProductBalanceList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"focus":true,"lastRowFooter":true,"rowSelect":false,"app":options.app}));}
extend(ProductBalanceList_View,ViewAjx); 
function DOCProductionList_View(id,options){DOCProductionList_View.superclass.constructor.call(this,id,options);var model=new DOCProductionList_Model({"data":options.modelDataStr});var contr=new DOCProduction_Controller(options.app);var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var bs=window.getBsCol();var popup_menu=new PopUpMenu();var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Флорист:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:product_descr",{"columns":[new GridColumn("product",{"field":model.getField("product_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:price",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price",{"field":model.getField("price")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCProduction_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"colTemplate":"DOCProductionList","filters":filters,"cmdDOCUnprocess":true,"printObjList":contr.getPrintList(),"popUpMenu":popup_menu,"app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"refreshAfterDelRow":true,"focus":true,"app":options.app}));}
extend(DOCProductionList_View,ViewAjx); 
function DOCProductDisposalList_View(id,options){DOCProductDisposalList_View.superclass.constructor.call(this,id,options);var model=new DOCProductDisposalList_Model({"data":options.modelDataStr});var contr=new DOCProductDisposal_Controller(options.app);var multy_store=options.app.getServVars().multy_store;var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"contClassName":"form-group "+window.getBsCol(12),"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Флорист:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:product_descr",{"columns":[new GridColumn("product",{"field":model.getField("product_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:explanation",{"columns":[new GridColumn("explanation",{"field":model.getField("explanation")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCProductDisposal_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"printObjList":contr.getPrintList(),"filters":filters,"popUpMenu":popup_menu,"colTemplate":"DOCProductDisposalList","cmdDOCUnprocess":true,"app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"refreshAfterDelRow":true,"rowSelect":false,"focus":true,"app":options.app}));}
extend(DOCProductDisposalList_View,ViewAjx); 
function DOCMaterialDisposalList_View(id,options){DOCMaterialDisposalList_View.superclass.constructor.call(this,id,options);var model=new DOCMaterialDisposalList_Model({"data":options.modelDataStr});var contr=new DOCMaterialDisposal_Controller(options.app);var multy_store=options.app.getServVars().multy_store;var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Флорист:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:explanation",{"columns":[new GridColumn("explanation",{"field":model.getField("explanation")})],"sortable":true}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCMaterialDisposal_Form,"onSelect":window.onSelect,"multySelect":window.multySelect,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"printObjList":contr.getPrintList(),"cmdFilter":true,"filters":filters,"colTemplate":"DOCMaterialDisposalList","cmdDOCUnprocess":true,"popUpMenu":popup_menu,"app":options.app}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"refreshAfterDelRow":true,"focus":true,"app":options.app}));}
extend(DOCMaterialDisposalList_View,ViewAjx); 
function DOCMaterialDisposal_View(id,options){options=options||{};var contr=new DOCMaterialDisposal_Controller(options.app);this.m_printPublicMethod=contr.getPublicMethod("get_print");options.cmdPrint=true;options.printList=contr.getPrintList();DOCMaterialDisposal_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var app=options.app;var bs=app.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
this.addElement(new EditText(id+":explanation",{"labelCaption":this.CTRL_EXPL_CAP,"app":app}));var material_model=new DOCMaterialDisposalDOCTMaterialList_Model();var material_contr=new DOCMaterialDisposalDOCTMaterial_Controller(app);this.addElement(new GridAjxDOCT(id+":material-grid",{"keyIds":["view_id"],"model":material_model,"controller":material_contr,"editInline":true,"editWinClass":null,"editViewClass":null,"commands":new DOCCommands(id+":material-grid:cmd",{"detailFillWinClass":MaterialBalanceList_Form,"detailOnSelect":function(fields,q){var contr=new DOCMaterialDisposalDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("material_id",fields.id.getValue());pm.setFieldValue("quant",q);pm.run({"async":false});this.m_grid.onRefresh();},"cmdEdit":false,"cmdCopy":false,"app":app,}),"head":new GridHead(id+":material-grid:head",{"elements":[new GridRow(id+":material-grid:head:row0",{"elements":[new GridCellHead(id+":material-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":material_model.getField("line_number"),"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":material-grid:head:material",{"className":bs+"8","columns":[new GridColumn("material",{"field":material_model.getField("material_descr"),"ctrlClass":MaterialEditRef,"ctrlOptions":{"labelCaption":"","selectWinClass":MaterialBalanceList_Form,"keyIds":["material_id"]},"ctrlBindField":material_model.getField("material_id")})]}),new GridCellHead(id+":material-grid:head:quant",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":material_model.getField("quant"),"ctrlOptions":{"value":"1"}})]})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"app":app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCMaterialDisposalList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("explanation"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("explanation")})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_descr","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
this.addDetailDataSet(this.getElement("material-grid"));}
extend(DOCMaterialDisposal_View,ViewDOC);DOCMaterialDisposal_View.prototype.setDefRefVals=function(){var constants={"def_store":null};this.getApp().getConstantManager().get(constants);var store_ctrl=this.getElement("store");if(store_ctrl){store_ctrl.setValue(constants.def_store);}}
DOCMaterialDisposal_View.prototype.onGetData=function(resp,cmd){DOCMaterialDisposal_View.superclass.onGetData.call(this,resp,cmd);this.m_printPublicMethod.setFieldValue("doc_id",this.getElement("id").getValue());} 
function DOCProductDisposal_View(id,options){options=options||{};var contr=new DOCProductDisposal_Controller(options.app);this.m_printPublicMethod=contr.getPublicMethod("get_print");options.detailDataSetsExist=false;options.cmdPrint=true;options.printList=contr.getPrintList();DOCProductDisposal_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var self=this;var multy_store=(this.getApp().getServVars().multy_store);if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":options.app}));}
var ctrl_docProduction=new DOCProductionEditRef(id+":doc_production",{"selectWinClass":ProductBalanceList_Form,"keyIds":["doc_production_id"],"selectKeyIds":["doc_production_id"],"app":options.app});this.addElement(ctrl_docProduction);this.addElement(new EditText(id+":explanation",{"labelCaption":this.CTRL_EXPL_CAP,"app":options.app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCProductDisposalList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":ctrl_docProduction,"model":this.m_model,"keyIds":["doc_production_id"]}),new DataBinding({"control":this.getElement("explanation"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("doc_production"),"fieldId":"doc_production_id"}),new CommandBinding({"control":this.getElement("explanation")})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_id","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}}
extend(DOCProductDisposal_View,ViewDOC);DOCProductDisposal_View.prototype.onGetData=function(resp,cmd){DOCProductDisposal_View.superclass.onGetData.call(this,resp,cmd);this.m_printPublicMethod.setFieldValue("doc_id",this.getElement("id").getValue());} 
function DOCMaterialProcurementList_View(id,options){DOCMaterialProcurementList_View.superclass.constructor.call(this,id,options);var model=new DOCMaterialProcurementList_Model({"data":options.modelDataStr});var contr=new DOCMaterialProcurement_Controller(options.app);var multy_store=options.app.getServVars().multy_store;var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time"),"app":options.app});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Флорист:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};filters.supplier={"binding":new CommandBinding({"control":new SupplierEditRef(id+":filter-ctrl-supplier",{"app":options.app,"keyIds":["supplier_id"],"app":options.app}),"field":new FieldInt("supplier_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:supplier_descr",{"columns":[new GridColumn("supplier",{"field":model.getField("supplier_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":model.getField("total")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCMaterialProcurement_Form,"onSelect":window.onSelect,"multySelect":window.multySelect,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"printObjList":contr.getPrintList(),"popUpMenu":popup_menu,"colTemplate":"DOCMaterialProcurementList","filters":filters,"cmdDOCUnprocess":true,"cmdColManager":false,"variantStorageModel":options.variantStorageModel,"app":options.app}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_lb",{"value":"Итого","colSpan":(multy_store=="1")?"6":"5"}),new GridCellFoot(id+":grid:foot:total_val",{"attrs":{"align":"right"},"calcEnd":function(m){this.setValue(m.getAttr("total_total"));},"gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"refreshAfterDelRow":true,"lastRowSelectOnInit":true,"focus":true,"app":options.app}));}
extend(DOCMaterialProcurementList_View,ViewAjx); 
function DOCMaterialProcurement_View(id,options){options=options||{};var contr=new DOCMaterialProcurement_Controller(options.app);this.m_printPublicMethod=contr.getPublicMethod("get_print");options.printList=contr.getPrintList();DOCMaterialProcurement_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var app=options.app;var bs=app.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
this.addElement(new SupplierEditRef(id+":supplier",{"app":app}));var material_model=new DOCMaterialProcurementDOCTMaterialList_Model();var material_contr=new DOCMaterialProcurementDOCTMaterial_Controller(app);this.addElement(new GridAjxDOCT(id+":material-grid",{"keyIds":["view_id"],"model":material_model,"controller":material_contr,"editInline":true,"editWinClass":null,"editViewClass":DOCMaterialProcurementDOCTMaterialInline_View,"commands":new DOCCommands(id+":material-grid:cmd",{"detailFillWinClass":MaterialList_Form,"detailOnSelect":function(fields,q){var contr=new DOCMaterialProcurementDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("material_id",fields.id.getValue());pm.setFieldValue("price",price);pm.setFieldValue("quant",q);pm.setFieldValue("total",q*price);pm.run({"async":false});this.m_grid.onRefresh();},"cmdEdit":true,"cmdCopy":false,"app":app,}),"head":new GridHead(id+":material-grid:head",{"elements":[new GridRow(id+":material-grid:head:row0",{"elements":[new GridCellHead(id+":material-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":material_model.getField("line_number"),"ctrlId":"line_number"})]}),new GridCellHead(id+":material-grid:head:material",{"className":bs+"4","columns":[new GridColumn("material",{"field":material_model.getField("material_descr"),"ctrlBindField":material_model.getField("material_id")})]}),new GridCellHead(id+":material-grid:head:quant",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":material_model.getField("quant")})]}),new GridCellHead(id+":material-grid:head:price",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price",{"field":material_model.getField("price")})]}),new GridCellHead(id+":material-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":material_model.getField("total")})]})]})]}),"foot":new GridFoot(id+":material-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":material-grid:foot:row0",{"elements":[new GridCell(id+":material-grid:foot:total_lb",{"value":"Итого","colSpan":"4"}),new GridCellFoot(id+":material-grid:foot:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"app":app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCMaterialProcurementList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("supplier"),"model":this.m_model,"field":this.m_model.getField("supplier_descr"),"keyIds":["supplier_id"]})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("supplier"),"fieldId":"supplier_id"})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_id","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
this.addDetailDataSet(this.getElement("material-grid"));}
extend(DOCMaterialProcurement_View,ViewDOC);DOCMaterialProcurement_View.prototype.setDefRefVals=function(){var constants={"def_store":null};this.getApp().getConstantManager().get(constants);var store_ctrl=this.getElement("store");if(store_ctrl){store_ctrl.setValue(constants.def_store);}}
DOCMaterialProcurement_View.prototype.onGetData=function(resp,cmd){DOCMaterialProcurement_View.superclass.onGetData.call(this,resp,cmd);this.m_printPublicMethod.setFieldValue("doc_id",this.getElement("id").getValue());} 
function DOCMaterialProcurementDOCTMaterialInline_View(id,options){options=options||{};DOCMaterialProcurementDOCTMaterialInline_View.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDOCTMaterialInline_View,ViewGridEditInlineAjx);DOCMaterialProcurementDOCTMaterialInline_View.prototype.addEditControls=function(){var self=this;var recalc=function(){self.getElement("total").setValue((Math.round(parseFloat(self.getElement("price").getValue()*self.getElement("quant").getValue())*100))/100);}
var recalc_key=function(e){e=EventHelper.fixMouseEvent(e);if(e.keyCode==13){recalc();}}
this.addElement(new Edit(this.getId()+":line_number",{"enabled":false,"app":this.getApp()}));this.addElement(new MaterialEditRef(this.getId()+":material",{"required":true,"labelCaption":"","selectWinClass":MaterialList_Form,"keyIds":["material_id"],"onSelect":function(fields){self.getElement("quant").setValue(1);self.getElement("price").setValue(fields.price.getValue());recalc();},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":quant",{"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":price",{"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":total",{"app":this.getApp()}));}
DOCMaterialProcurementDOCTMaterialInline_View.prototype.setWritePublicMethod=function(pm){if(pm){var cmd=this.getCommands()[this.CMD_OK];cmd.setBindings([new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price")}),new CommandBinding({"control":this.getElement("total")}),new CommandBinding({"control":this.getElement("material"),"fieldId":"material_id"})]);this.setKeysPublicMethod(pm);cmd.setPublicMethod(pm);}} 
function DOCSaleList_View(id,options){DOCSaleList_View.superclass.constructor.call(this,id,options);var model=new DOCSaleList_Model({"data":options.modelDataStr});var contr=new DOCSale_Controller(options.app);var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var popup_menu=new PopUpMenu();var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"contClassName":"form-group "+window.getBsCol(12),"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Флорист:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:payment_type_for_sale_descr",{"colAttrs":{"align":"right"},"columns":[new GridColumn("payment_type_for_sale",{"field":model.getField("payment_type_for_sale_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":model.getField("total")})]}));grid_rows.push(new GridCellHead(id+":grid:head:cost",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("cost",{"field":model.getField("cost")})]}));grid_rows.push(new GridCellHead(id+":grid:head:income",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("income",{"field":model.getField("income")})]}));grid_rows.push(new GridCellHead(id+":grid:head:income_percent",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("income_percent",{"field":model.getField("income_percent"),"format":"%%"})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCSale_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"printObjList":contr.getPrintList(),"filters":filters,"popUpMenu":popup_menu,"colTemplate":"DOCSaleList","cmdDOCUnprocess":true,"app":options.app}),"filters":filters,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_lb",{"value":"Итого","colSpan":(multy_store=="1")?"6":"5"}),new GridCellFoot(id+":grid:foot:total_val",{"attrs":{"align":"right"},"calcEnd":function(m){this.setValue(m.getAttr("total_total"));},"gridColumn":new GridColumnFloat("total_val",{})}),new GridCellFoot(id+":grid:foot:cost_val",{"attrs":{"align":"right"},"calcEnd":function(m){this.setValue(m.getAttr("total_cost"));},"gridColumn":new GridColumnFloat("cost_val",{})}),new GridCellFoot(id+":grid:foot:income_val",{"attrs":{"align":"right"},"calcEnd":function(m){this.setValue(m.getAttr("avg_income"));},"gridColumn":new GridColumnFloat("income_val",{})}),new GridCellFoot(id+":grid:foot:income_percent_val",{"attrs":{"align":"right"},"calcEnd":function(m){this.setValue(m.getAttr("avg_income_percent"));},"gridColumn":new GridColumnFloat("income_percent_val",{})})]})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"refreshAfterDelRow":true,"focus":true,"app":options.app}));}
extend(DOCSaleList_View,ViewAjx); 
function ExpenceType_View(id,options){ExpenceType_View.superclass.constructor.call(this,id,options);var model=new ExpenceType_Model({"data":options.modelDataStr});var contr=new ExpenceType_Controller(options.app);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"commands":new GridCmdContainerAjx(id+"-gridcmd",{"popUpMenu":popup_menu,"colTemplate":"ExpenceType","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":null,"autoRefresh":false,"rowSelect":false,"focus":true,"app":options.app}));}
extend(ExpenceType_View,ViewAjx); 
function DOCExpenceList_View(id,options){DOCExpenceList_View.superclass.constructor.call(this,id,options);var model=new DOCExpenceList_Model({"data":options.modelDataStr});var contr=new DOCExpence_Controller(options.app);var multy_store=options.app.getServVars().multy_store;var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Автор:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":model.getField("total")})]}));var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCExpence_Form,"onSelect":window.onSelect,"multySelect":window.multySelect,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"popUpMenu":popup_menu,"colTemplate":"DOCExpenceList","cmdDOCUnprocess":true,"app":options.app}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_lb",{"value":"Итого","colSpan":(multy_store=="1")?"4":"3"}),new GridCellFoot(id+":grid:foot:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(DOCExpenceList_View,ViewAjx); 
function UserProfile_View(id,options){options=options||{};options.cmdOk=false;options.cmdCancel=false;UserProfile_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new UserNameEdit(id+":name",{"app":options.app,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new EditPassword(id+":pwd",{"labelCaption":"Пароль:","app":options.app,"events":{"keyup":function(){self.checkPass();}}}));this.addElement(new EditPassword(id+":pwd_confirm",{"labelCaption":"Подтверждение пароля:","app":options.app,"events":{"keyup":function(){self.checkPass();}}}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","app":options.app,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new EditPhone(id+":phone_cel",{"labelCaption":"Моб.телефон:","app":options.app,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));var contr=new User_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new UserProfile_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("email"),"model":this.m_model}),new DataBinding({"control":this.getElement("phone_cel"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("phone_cel")}),new CommandBinding({"control":this.getElement("pwd")})]);this.getControlSave().setEnabled(false);}
extend(UserProfile_View,ViewObjectAjx);UserProfile_View.prototype.TXT_PWD_ER="Пароли не совпадают";UserProfile_View.prototype.checkPass=function(){var pwd=this.getElement("pwd").getValue();if(pwd&&pwd.length){var pwd_conf=this.getElement("pwd_confirm").getValue();if(pwd_conf&&pwd_conf.length&&pwd!=pwd_conf){this.getElement("pwd_confirm").setNotValid(this.TXT_PWD_ER);this.getControlSave().setEnabled(false);}
else if(pwd_conf&&pwd_conf.length){this.getElement("pwd_confirm").setValid();if(!this.getControlSave().getEnabled()){this.getControlSave().setEnabled(true);}}
else if((!pwd_conf||!pwd_conf.length)&&this.getControlSave().getEnabled()){this.getControlSave().setEnabled(false);}}} 
function DOCProduction_View(id,options){options=options||{};var contr=new DOCProduction_Controller(options.app);options.printList=contr.getPrintList();DOCProduction_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var app=options.app;var bs=app.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
this.addElement(new ProductEditRef(id+":product",{"onSelect":function(fields){self.onSetProduct(fields);},"app":app}));this.addElement(new EditFloat(id+":quant",{"labelCaption":"Количество:","value":1,"presicion":"3","maxlength":"19","app":app}));this.addElement(new EditMoney(id+":price",{"labelCaption":"Цена:","app":app}));this.addElement(new EditMoney(id+":material_retail_cost",{"labelCaption":"Стоимость материалов:","enabled":false,"cmdSelect":false,"app":app}));this.addElement(new EditMoney(id+":material_cost",{"labelCaption":"Себестоимость материалов:","enabled":false,"cmdSelect":false,"app":app}));this.addElement(new EditText(id+":florist_comment",{"labelCaption":"Комментарий:","editContClassName":"input-group "+bs+"10","labelClassName":"control-label "+bs+"2","rows":"2","app":app}));var material_model=new DOCProductionDOCTMaterialList_Model();var material_contr=new DOCProductionDOCTMaterial_Controller(app);this.addElement(new GridAjxDOCT(id+":material-grid",{"keyIds":["view_id"],"model":material_model,"controller":material_contr,"editInline":true,"editWinClass":null,"commands":new DOCCommands(id+":material-grid:cmd",{"detailFillWinClass":MaterialBalanceList_Form,"detailOnSelect":function(fields,q){var contr=new DOCProductionDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("insert");pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("material_id",fields.id.getValue());pm.setFieldValue("quant",q);pm.run({"async":false});this.m_grid.onRefresh();},"viewId":this.getElement("view_id").getValue(),"cmdEdit":false,"cmdCopy":false,"app":app}),"head":new GridHead(id+":material-grid:head",{"elements":[new GridRow(id+":material-grid:head:row0",{"elements":[new GridCellHead(id+":material-grid:head:line_number",{"columns":[new GridColumn("line_number",{"field":material_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"tagName":"div"}})]}),new GridCellHead(id+":material-grid:head:material",{"columns":[new GridColumn("material",{"field":material_model.getField("material_descr"),"ctrlClass":MaterialEditRef,"ctrlOptions":{"labelCaption":"","selectWinClass":MaterialBalanceList_Form,"keyIds":["material_id"]},"ctrlBindField":material_model.getField("material_id")})]}),new GridCellHead(id+":material-grid:head:quant",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":material_model.getField("quant"),"ctrlOptions":{"value":"1"}})]}),new GridCellHead(id+":material-grid:head:sys-cmd",{"value":"...","columns":[new GridColumn("sys-cmd",{"cellClass":DOCProductionDetMatSysCell})]})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"onRefresh":function(){self.calcMatCosts();},"app":app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCProductionList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("product"),"model":this.m_model,"field":this.m_model.getField("product_descr"),"keyIds":["product_id"]}),new DataBinding({"control":this.getElement("quant"),"model":this.m_model}),new DataBinding({"control":this.getElement("price"),"model":this.m_model}),new DataBinding({"control":this.getElement("florist_comment"),"model":this.m_model}),new DataBinding({"control":this.getElement("material_cost"),"model":this.m_model}),new DataBinding({"control":this.getElement("material_retail_cost"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("product"),"fieldId":"product_id"}),new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price")}),new CommandBinding({"control":this.getElement("florist_comment")})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_id","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
this.addDetailDataSet(this.getElement("material-grid"));}
extend(DOCProduction_View,ViewDOC);DOCProduction_View.prototype.setDefRefVals=function(){var constants={"def_store":null};this.getApp().getConstantManager().get(constants);var store_ctrl=this.getElement("store");if(store_ctrl){store_ctrl.setValue(constants.def_store);}}
DOCProduction_View.prototype.onSetProduct=function(fields){this.getElement("price").setValue(fields.price.getValue());}
DOCProduction_View.prototype.calcMatCosts=function(){if(!this.getElement("material-grid").getModified())return;var pm=this.getController().getPublicMethod("calc_mat_costs");pm.setFieldValue("view_id",this.getElement("view_id").getValue());pm.setFieldValue("doc_id",this.getElement("id").getValue());var self=this;pm.run({"async":true,"ok":function(resp){var m=new ModelXML("MatCosts_Model",{"fields":{"material_retail_cost":new FieldFloat("material_retail_cost"),"material_cost":new FieldFloat("material_cost")},"data":resp.getModelData("MatCosts_Model")});if(m.getRowCount()){m.getRow(0);var v=m.getFieldValue("material_cost");self.getElement("material_retail_cost").setValue(m.getFieldValue("material_retail_cost"));self.getElement("material_cost").setValue(v);}}})} 
function QuantEdit_View(id,options){options=options||{};options.elements=[new EditFloat(id+":quant",{"labelCaption":this.QUANT_CAP,"value":options.defValue,"focus":true,"app":options.app})];QuantEdit_View.superclass.constructor.call(this,id,"div",options);}
extend(QuantEdit_View,ControlContainer); 
function DOCExpenceList_View(id,options){DOCExpenceList_View.superclass.constructor.call(this,id,options);var model=new DOCExpenceList_Model({"data":options.modelDataStr});var contr=new DOCExpence_Controller(options.app);var multy_store=options.app.getServVars().multy_store;var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.user={"binding":new CommandBinding({"control":new UserEditRef(id+":filter-ctrl-user",{"contClassName":"form-group "+window.getBsCol(12),"labelCaption":"Автор:","keyIds":["user_id"],"app":options.app}),"field":new FieldInt("user_id")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCDate(id+":grid:head:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:number",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:store_descr",{"columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:user_descr",{"columns":[new GridColumn("user",{"field":model.getField("user_descr")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:total",{"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":model.getField("total")})]}));var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCExpence_Form,"onSelect":window.onSelect,"multySelect":window.multySelect,"popUpMenu":popup_menu,"commands":new GridCmdContainerDOC(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"popUpMenu":popup_menu,"colTemplate":"DOCExpenceList","cmdDOCUnprocess":true,"app":options.app}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_rows})]}),"foot":new GridFoot(id+":grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":grid:foot:row0",{"elements":[new GridCell(id+":grid:foot:total_lb",{"value":"Итого","colSpan":(multy_store=="1")?"4":"3"}),new GridCellFoot(id+":grid:foot:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(DOCExpenceList_View,ViewAjx); 
function DOCExpence_View(id,options){options=options||{};var contr=new DOCExpence_Controller(options.app);this.m_printPublicMethod=contr.getPublicMethod("get_print");DOCExpence_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var app=options.app;var bs=window.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
var expence_model=new DOCExpenceDOCTExpenceTypeList_Model();var expence_contr=new DOCExpenceDOCTExpenceType_Controller(app);this.addElement(new GridAjxDOCT(id+":expence-grid",{"keyIds":["view_id"],"model":expence_model,"controller":expence_contr,"editInline":true,"editWinClass":null,"editViewClass":null,"commands":new GridCommandsAjx(id+":expence-grid:cmd",{"cmdEdit":false,"cmdCopy":false,"app":app,}),"head":new GridHead(id+":expence-grid:head",{"elements":[new GridRow(id+":expence-grid:head:row0",{"elements":[new GridCellHead(id+":expence-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":expence_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":expence-grid:head:expence",{"className":bs+"2","columns":[new GridColumn("expence",{"field":expence_model.getField("expence_type_descr"),"ctrlClass":ExpenceTypeEditRef,"ctrlOptions":{"labelCaption":"","selectWinClass":ExpenceTypeList_Form,"keyIds":["expence_type_id"]},"ctrlBindField":expence_model.getField("expence_type_id")})]}),new GridCellHead(id+":expence-grid:head:expence_date",{"className":bs+"2","columns":[new GridColumnDate("expence_date",{"field":expence_model.getField("expence_date"),"ctrlOptions":{"value":DateHelper.time()}})]}),new GridCellHead(id+":expence-grid:head:expence_comment",{"className":bs+"4","columns":[new GridColumn("expence_comment",{"field":expence_model.getField("expence_comment")})]}),new GridCellHead(id+":expence-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":expence_model.getField("total")})]})]})]}),"foot":new GridFoot(id+":expence-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":expence-grid:foot:row0",{"elements":[new GridCell(id+":expence-grid:foot:total_lb",{"value":"Итого","colSpan":"4"}),new GridCellFoot(id+":expence-grid:foot:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"app":app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCExpenceList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_descr","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
this.addDetailDataSet(this.getElement("expence-grid"));}
extend(DOCExpence_View,ViewDOC);DOCExpence_View.prototype.setDefRefVals=function(){var constants={"def_store":null};this.getApp().getConstantManager().get(constants);var store_ctrl=this.getElement("store");if(store_ctrl){store_ctrl.setValue(constants.def_store);}}
DOCExpence_View.prototype.onGetData=function(resp,cmd){DOCExpence_View.superclass.onGetData.call(this,resp,cmd);this.m_printPublicMethod.setFieldValue("doc_id",this.getElement("id").getValue());} 
function RepBalance_View(id,options){options=options||{};var contr=new RepBalance_Controller(options.app);options.publicMethod=contr.getPublicMethod("balance");options.reportViewId="ViewHTMLXSLT";options.templateId="RepBalance";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
RepBalance_View.superclass.constructor.call(this,id,options);}
extend(RepBalance_View,ViewReport); 
function MaterialProcurAvgPrice_View(id,options){options=options||{};var contr=new Material_Controller(options.app);options.publicMethod=contr.getPublicMethod("procur_avg_price_report");options.reportViewId="ViewHTMLXSLT";options.templateId="MaterialProcurAvgPrice";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material_group":{"binding":new CommandBinding({"control":new MaterialGroupRadio(id+":mat-groups",{"app":options.app}),"field":new FieldInt("material_group_id")}),"sign":"e"}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
MaterialProcurAvgPrice_View.superclass.constructor.call(this,id,options);}
extend(MaterialProcurAvgPrice_View,ViewReport); 
function MaterialActionsReport_View(id,options){options=options||{};var contr=new Material_Controller(options.app);options.publicMethod=contr.getPublicMethod("actions_report");options.reportViewId="ViewHTMLXSLT";options.templateId=options.templateId||"MaterialActionsReport";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"material_group":{"binding":new CommandBinding({"control":new MaterialGroupRadio(id+":mat-groups",{"app":options.app}),"field":new FieldInt("material_group_id")}),"sign":"e"}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
options.elements=[new SeqMaterialText(id+":sequence",{"data":options.modelDataStr,"app":options.app})];MaterialActionsReport_View.superclass.constructor.call(this,id,options);}
extend(MaterialActionsReport_View,ViewReport); 
function MaterialActionsNoPriceReport_View(id,options){options=options||{};options.templateId="MaterialActionsNoPriceReport";MaterialActionsNoPriceReport_View.superclass.constructor.call(this,id,options);}
extend(MaterialActionsNoPriceReport_View,MaterialActionsReport_View); 
function RepSaleForAcc_View(id,options){options=options||{};var contr=new RepSaleForAcc_Controller(options.app);options.publicMethod=contr.getPublicMethod("report");options.reportViewId="ViewHTMLXSLT";options.templateId="RepSaleForAcc";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
RepSaleForAcc_View.superclass.constructor.call(this,id,options);}
extend(RepSaleForAcc_View,ViewReport); 
function RepSalesOnTypes_View(id,options){options=options||{};var contr=new RepSalesOnTypes_Controller(options.app);options.publicMethod=contr.getPublicMethod("report");options.reportViewId="ViewHTMLXSLT";options.templateId="RepSalesOnTypes";options.cmdMake=true;options.cmdPrint=true;options.cmdFilter=true;options.cmdExcel=false;options.cmdPdf=false;var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});options.filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
RepSalesOnTypes_View.superclass.constructor.call(this,id,options);}
extend(RepSalesOnTypes_View,ViewReport); 
function DOCSale_View(id,options){options=options||{};var contr=new DOCSale_Controller(options.app);this.m_printPublicMethod=contr.getPublicMethod("get_print");options.cmdPrint=true;options.printList=contr.getPrintList();DOCSale_View.superclass.constructor.call(this,id,options);this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));var app=options.app;var bs=app.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
this.addElement(new ClientEditRef(id+":client",{"onSelect":function(fields){debugger
self.getElement("discount").setValue(fields.discount_id.getValue());self.setDiscountPercent(fields.disc_card_percent.getValue());},"app":app}));this.addElement(new DiscountSelect(id+":discount",{"onSelect":function(fields){self.setDiscountPercent(fields.percent.getValue());},"app":app}));var product_model=new DOCSaleDOCTProductList_Model();var product_contr=new DOCSaleDOCTProduct_Controller(app);this.addElement(new GridAjxDOCT(id+":product-grid",{"keyIds":["view_id"],"model":product_model,"controller":product_contr,"editInline":true,"editWinClass":null,"editViewClass":DOCSaleDOCTProductInline_View,"commands":new DOCCommands(id+":product-grid:cmd",{"detailFillWinClass":ProductBalanceList_Form,"detailOnSelect":function(fields,q){var gr_opts=self.getElement("product-grid").getEditViewOptions();var disc_percent=(gr_opts)?gr_opts.discountPercent:0;var contr=new DOCSaleDOCTProduct_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("doc_production_id",fields.doc_production_id.getValue());pm.setFieldValue("price_no_disc",price);pm.setFieldValue("quant",q);pm.setFieldValue("disc_percent",disc_percent);var tot_no_disc=q*price;pm.setFieldValue("total",(Math.round(parseFloat(tot_no_disc-tot_no_disc*disc_percent/100)*100))/100);pm.run({"async":false});this.m_grid.onRefresh();},"viewId":this.getElement("view_id").getValue(),"cmdEdit":false,"cmdCopy":false,"app":app}),"head":new GridHead(id+":product-grid:head",{"elements":[new GridRow(id+":product-grid:head:row0",{"elements":[new GridCellHead(id+":product-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":product_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"tagName":"div"}})]}),new GridCellHead(id+":product-grid:head:doc_production",{"className":bs+"3","columns":[new GridColumn("doc_production",{"field":product_model.getField("doc_production_id"),"formatFunction":function(model){return CommonHelper.format("№ % (%), %",[model.getFieldValue("doc_production_number"),DateHelper.format(model.getFieldValue("doc_production_date_time"),this.getApp().getDateFormat()),model.getFieldValue("product_descr")]);},"ctrlBindField":product_model.getField("doc_production_id")})]}),new GridCellHead(id+":product-grid:head:quant",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":product_model.getField("quant"),"ctrlId":"quant",})]}),new GridCellHead(id+":product-grid:head:price_no_disc",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price_no_disc",{"field":product_model.getField("price_no_disc"),"ctrlId":"price_no_disc",})]}),new GridCellHead(id+":product-grid:head:disc_percent",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("disc_percent",{"field":product_model.getField("disc_percent"),"ctrlId":"disc_percent",})]}),new GridCellHead(id+":product-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":product_model.getField("total")})]})]})]}),"foot":new GridFoot(id+":product-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":product-grid:foot:row0",{"elements":[new GridCell(id+":product-grid:foot:row0:total_lb",{"value":"Итого","colSpan":"5"}),new GridCellFoot(id+":product-grid:foot:row0:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"app":app}));var material_model=new DOCSaleDOCTMaterialList_Model();var material_contr=new DOCSaleDOCTMaterial_Controller(app);this.addElement(new GridAjxDOCT(id+":material-grid",{"keyIds":["view_id"],"model":material_model,"controller":material_contr,"editInline":true,"editWinClass":null,"editViewClass":DOCSaleDOCTMaterialInline_View,"editViewOptions":null,"commands":new DOCCommands(id+":material-grid:cmd",{"detailFillWinClass":MaterialBalanceList_Form,"detailOnSelect":function(fields,q){var gr_opts=self.getElement("material-grid").getEditViewOptions();var disc_percent=(gr_opts)?gr_opts.discountPercent:0;var contr=new DOCSaleDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("material_id",fields.id.getValue());pm.setFieldValue("price_no_disc",price);pm.setFieldValue("quant",q);pm.setFieldValue("disc_percent",disc_percent);var tot_no_disc=q*price;pm.setFieldValue("total",(Math.round(parseFloat(tot_no_disc-tot_no_disc*disc_percent/100)*100))/100);pm.run({"async":false});this.m_grid.onRefresh();},"viewId":this.getElement("view_id").getValue(),"cmdEdit":false,"cmdCopy":false,"app":app}),"head":new GridHead(id+":material-grid:head",{"elements":[new GridRow(id+":material-grid:head:row0",{"elements":[new GridCellHead(id+":material-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":material_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"tagName":"div"}})]}),new GridCellHead(id+":material-grid:head:material",{"className":bs+"3","columns":[new GridColumn("material",{"field":material_model.getField("material_descr"),"ctrlBindField":material_model.getField("material_id")})]}),new GridCellHead(id+":material-grid:head:quant",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":material_model.getField("quant")})]}),new GridCellHead(id+":material-grid:head:price_no_disc",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price_no_disc",{"field":material_model.getField("price_no_disc")})]}),new GridCellHead(id+":material-grid:head:disc_percent",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("disc_percent",{"field":material_model.getField("disc_percent")})]}),new GridCellHead(id+":material-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":material_model.getField("total")})]})]})]}),"foot":new GridFoot(id+":material-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":material-grid:foot:row0",{"elements":[new GridCell(id+":material-grid:foot:row0:total_lb",{"value":"Итого","colSpan":"5"}),new GridCellFoot(id+":material-grid:foot:row0:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"autoRefresh":false,"refreshInterval":0,"enabled":true,"app":app}));this.addElement(new Control(id+":total","h1",{"value":"","app":options.app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCSaleDialog_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("client"),"model":this.m_model,"field":this.m_model.getField("client_descr"),"keyIds":["client_id"]}),new DataBinding({"control":this.getElement("payment_type_for_sale"),"model":this.m_model,"field":this.m_model.getField("payment_type_for_sale_id"),"keyIds":["payment_type_for_sale_id"]}),new DataBinding({"control":this.getElement("discount"),"model":this.m_model,"field":this.m_model.getField("discount_id"),"keyIds":["discount_id"]})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("client"),"fieldId":"client_id"}),new CommandBinding({"control":this.getElement("discount"),"fieldId":"discount_id"})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_id","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
var gr_product=this.getElement("product-grid");var gr_material=this.getElement("material-grid");this.addDetailDataSet(gr_product);this.addDetailDataSet(gr_material);this.m_prodOnGetData=gr_product.onGetData;gr_product.onGetData=function(resp){self.m_prodOnGetData.call(self.getElement("product-grid"),resp);self.refreshTotal();}
this.m_matOnGetData=gr_material.onGetData;gr_material.onGetData=function(resp){self.m_matOnGetData.call(self.getElement("material-grid"),resp);self.refreshTotal();}}
extend(DOCSale_View,ViewDOC);DOCSale_View.prototype.setDefRefVals=function(){var constants={"def_store":null,"def_payment_type_for_sale":null,"def_discount":null};this.getApp().getConstantManager().get(constants);var ctrl=this.getElement("store");if(ctrl){ctrl.setValue(constants.def_store.getValue());}
this.getElement("discount").setValue(constants.def_discount.getValue());}
DOCSale_View.prototype.setDiscountPercent=function(v){this.getElement("product-grid").setEditViewOptions({"discountPercent":v});this.getElement("material-grid").setEditViewOptions({"discountPercent":v});}
DOCSale_View.prototype.refreshTotal=function(){var tot=this.getElement("product-grid").getFoot().getElement("row0").getElement("total_val").getValue()+
this.getElement("material-grid").getFoot().getElement("row0").getElement("total_val").getValue();var c=this.getElement("total");var vl=this.getApp().numberFormat(tot,2);c.setValue("ИТОГО: "+vl+" руб.");}
DOCSale_View.prototype.onGetData=function(resp,cmd){DOCSale_View.superclass.onGetData.call(this,resp,cmd);this.m_printPublicMethod.setFieldValue("doc_id",this.getElement("id").getValue());} 
function DOCSaleDOCTMaterialInline_View(id,options){options=options||{};this.m_discountPercent=(options.discountPercent!=undefined)?options.discountPercent:0;DOCSaleDOCTMaterialInline_View.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTMaterialInline_View,ViewGridEditInlineAjx);DOCSaleDOCTMaterialInline_View.prototype.addEditControls=function(){var self=this;var recalc=function(){var tot_no_disc=self.getElement("price_no_disc").getValue()*self.getElement("quant").getValue();self.getElement("total").setValue((Math.round(parseFloat(tot_no_disc-tot_no_disc*self.getElement("disc_percent").getValue()/100)*100))/100);}
var recalc_key=function(e){e=EventHelper.fixMouseEvent(e);if(e.keyCode==13){recalc();}}
this.addElement(new Edit(this.getId()+":line_number",{"enabled":false,"app":this.getApp()}));this.addElement(new MaterialEditRef(this.getId()+":material",{"required":true,"labelCaption":"","selectWinClass":MaterialBalanceList_Form,"keyIds":["material_id"],"onSelect":function(fields){self.getElement("quant").setValue(1);self.getElement("price_no_disc").setValue(fields.price.getValue());recalc();},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":quant",{"value":1,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":price_no_disc",{"value":0,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":disc_percent",{"value":this.m_discountPercent,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":total",{"app":this.getApp()}));}
DOCSaleDOCTMaterialInline_View.prototype.setWritePublicMethod=function(pm){if(pm){var cmd=this.getCommands()[this.CMD_OK];cmd.setBindings([new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price_no_disc")}),new CommandBinding({"control":this.getElement("total")}),new CommandBinding({"control":this.getElement("disc_percent")}),new CommandBinding({"control":this.getElement("material"),"fieldId":"material_id"})]);this.setKeysPublicMethod(pm);cmd.setPublicMethod(pm);}} 
function DOCSaleDOCTProductInline_View(id,options){options=options||{};this.m_discountPercent=(options.discountPercent!=undefined)?options.discountPercent:0;DOCSaleDOCTProductInline_View.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTProductInline_View,ViewGridEditInlineAjx);DOCSaleDOCTProductInline_View.prototype.addEditControls=function(){var self=this;var recalc=function(){var tot_no_disc=self.getElement("price_no_disc").getValue()*self.getElement("quant").getValue();self.getElement("total").setValue((Math.round(parseFloat(tot_no_disc-tot_no_disc*self.getElement("disc_percent").getValue()/100)*100))/100);}
var recalc_key=function(e){e=EventHelper.fixMouseEvent(e);if(e.keyCode==13){recalc();}}
this.addElement(new Edit(this.getId()+":line_number",{"enabled":false,"app":this.getApp()}));this.addElement(new DOCProductionEditRef(this.getId()+":doc_production",{"required":true,"labelCaption":"","selectWinClass":ProductBalanceList_Form,"keyIds":["doc_production_id"],"selectKeyIds":["doc_production_id"],"formatFunction":function(fields){var prod_f=(fields.product_descr)?"product_descr":"name";return CommonHelper.format("№ % (%), %",[fields.doc_production_number.getValue(),DateHelper.format(fields.doc_production_date_time.getValue(),this.getApp().getDateFormat()),fields[prod_f].getValue()]);},"onSelect":function(fields){self.getElement("quant").setValue(1);self.getElement("price_no_disc").setValue(fields.price.getValue());recalc();},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":quant",{"value":1,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":price_no_disc",{"value":0,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":disc_percent",{"value":this.m_discountPercent,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":total",{"app":this.getApp()}));}
DOCSaleDOCTProductInline_View.prototype.setWritePublicMethod=function(pm){if(pm){var cmd=this.getCommands()[this.CMD_OK];cmd.setBindings([new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price_no_disc")}),new CommandBinding({"control":this.getElement("total")}),new CommandBinding({"control":this.getElement("disc_percent")}),new CommandBinding({"control":this.getElement("doc_production"),"fieldId":"doc_production_id"})]);this.setKeysPublicMethod(pm);cmd.setPublicMethod(pm);}}
DOCSaleDOCTProductInline_View.prototype.setReadBinds=function(pm){if(pm){var model=new DOCSaleDOCTProductList_Model();this.setDataBindings([new DataBinding({"control":this.getElement("line_number"),"model":model}),new DataBinding({"control":this.getElement("quant"),"model":model}),new DataBinding({"control":this.getElement("price_no_disc"),"model":model}),new DataBinding({"control":this.getElement("total"),"model":model}),new DataBinding({"control":this.getElement("disc_percent"),"model":model}),new DataBinding({"control":this.getElement("doc_production"),"model":model,"field":model.getField("doc_production_id"),"keyIds":["doc_production_id"]})]);}} 
function CashRegisterOper_View(id,options){options=options||{};var cash_reg=options.app.getCachRegister();var obj_en=(cash_reg&&cash_reg.getEnabled()==1);var self=this;options.elements=[new ButtonCtrl(id+":repX",{"caption":this.BTN_REPX_CAP,"enabled":obj_en,"onClick":function(){var cash_reg=self.getApp().getCachRegister();if(cash_reg){cash_reg.printX({pwd:self.getApp().getCachierPwd()});}},"attrs":{"title":this.BTN_REPX_TITLE}}),new Button(id+":repZ",{"caption":this.BTN_REPZ_CAP,"enabled":obj_en,"onClick":function(){var cash_reg=self.getApp().getCachRegister();if(cash_reg){cash_reg.printZ({pwd:self.getApp().getCachierAdminPwd()});}},"attrs":{"title":this.BTN_REPZ_TITLE}}),new Button(id+":propPage",{"caption":this.BTN_PROP_CAP,"enabled":obj_en,"onClick":function(){var cash_reg=self.getApp().getCachRegister();if(cash_reg){cash_reg.printZ({pwd:self.getApp().getCachierPwd()});}},"attrs":{"title":this.BTN_PROP_TITLE}})];CashRegisterOper_View.superclass.constructor.call(this,id,options);}
extend(CashRegisterOper_View,View); 
function DOCSaleCashier_View(id,options){options=options||{};var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var model=new ModelXML("get_list_for_sale",{"fields":{"id":new FieldInt("id"),"name":new FieldString("name"),"code":new FieldString("code"),"quant":new FieldFloat("quant"),"quant_descr":new FieldString("quant_descr"),"price":new FieldString("price"),"doc_production_id":new FieldInt("doc_production_id"),"item_type":new FieldInt("item_type")},"data":options.get_list_for_sale});var contr=new Product_Controller(options.app);options.elements=[new ItemsForSaleGrid(id+":items-grid",{"model":model,"controller":contr,"readPublicMethod":contr.getPublicMethod("get_list_for_sale"),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"app":options.app}),new DOCSaleReceipt_View(id+":receipt",{"ReceiptHeadList_Model":options.ReceiptHeadList_Model,"ReceiptList_Model":options.ReceiptList_Model,"ReceiptPaymentTypeList_Model":options.ReceiptPaymentTypeList_Model,"PaymentTypeForSale_Model":options.PaymentTypeForSale_Model,"app":options.app})];DOCSaleCashier_View.superclass.constructor.call(this,id,options);this.getElement("items-grid").m_receiptGrid=this.getElement("receipt").getElement("receipt-grid");}
extend(DOCSaleCashier_View,View); 
function DOCSaleReceipt_View(id,options){options=options||{};var bs=window.getBsCol();var receipt_model=new ReceiptList_Model({"data":options.ReceiptList_Model});var pay_type_model=new ReceiptPaymentTypeList_Model({"data":options.ReceiptPaymentTypeList_Model});var pay_types_model=new PaymentTypeForSale_Model({"data":options.PaymentTypeForSale_Model});var receipt_head_model=new ReceiptHeadList_Model({"data":options.ReceiptHeadList_Model});var receipt_contr=new Receipt_Controller(options.app);var self=this;options.elements=[new EditString(id+":barcode",{"placeholder":"Штрих-код","contClassName":bs+"4","editContClassName":"input-group "+bs+"12","cmdClear":true,"attrs":{"maxlength":"13"},"buttonOpen":new ButtonCtrl(id+":barcode_find",{"glyph":"glyphicon-search","onClick":function(){if(self.getElement("barcode").getValue().length){self.findByBarcode();}},"app":options.app}),"events":{"input":function(){var val=self.getElement("bercode").getValue();if((val.substr(0,1)==9&&val.length==12)||val.length==13){self.findByBarcode();}},"keypress":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.findByBarcode();}}},"app":options.app}),new ClientEditRef(id+":client",{"placeholder":"Клиент","labelCaption":"Клиент:","contClassName":bs+"4","editContClassName":"input-group "+bs+"12","onSelect":function(fields){var v=fields.discount_id.getValue();self.getElement("discount").setValue(new RefType({"keys":{"discount_id":v}}));m=self.getElement("discount").getModel();self.setDiscountPercent(m.getFieldValue("percent"));self.saveHead();},"app":options.app}),new DiscountSelect(id+":discount",{"labelCaption":"Вид скидки:","contClassName":bs+"4","labelClassName":"control-label "+bs+12,"editContClassName":"input-group "+bs+"12","keyIds":["id"],"keyFieldId":["id"],"onSelect":function(fields){self.setDiscountPercent(fields.percent.getValue());self.saveHead();},"app":options.app}),new DOCClientOrderEditRef(id+":doc_client_order",{"labelCaption":"Заказ:","contClassName":bs+"4","editContClassName":"input-group "+bs+"12","onSelect":function(fields){self.onDOCClientSelected();},"app":options.app}),new GridAjxDOCT(id+":receipt-grid",{"keyIds":["user_id","item_id","item_type"],"model":receipt_model,"controller":receipt_contr,"navigate":false,"cmdEdit":false,"editInline":null,"editWinClass":null,"editViewClass":null,"editViewOptions":null,"commands":null,"head":new GridHead(id+":receipt-grid:head",{"elements":[new GridRow(id+":receipt-grid:head:row0",{"elements":[new GridCellHead(id+":receipt-grid:head:receipt",{"value":"Номенклатура","className":bs+"4","columns":[new GridColumn("item_name",{"field":receipt_model.getField("item_name")})]}),new GridCellHead(id+":receipt-grid:head:quant",{"value":"Количество","className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":receipt_model.getField("quant"),"cellClass":ReceiptQuantCell})]}),new GridCellHead(id+":receipt-grid:head:price_no_disc",{"value":"Цена","className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price_no_disc",{"field":receipt_model.getField("price_no_disc")})]}),new GridCellHead(id+":receipt-grid:head:disc_percent",{"value":"Скидка,%","className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("disc_percent",{"field":receipt_model.getField("disc_percent"),"cellClass":ReceiptDiscPercentCell})]}),new GridCellHead(id+":receipt-grid:head:total",{"value":"Итого","className":bs+"3","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":receipt_model.getField("total")})]}),new GridCellHead(id+":receipt-grid:head:sys-cmd",{"value":"...","className":bs+"1","columns":[new GridColumn("sys-cmd",{"cellClass":DOCSaleReceiptSysCell})]})]})]}),"foot":new GridFoot(id+":receipt-grid:foot",{"className":"receipt_totals","autoCalc":true,"elements":[new GridRow(id+":receipt-grid:foot:row0",{"elements":[new GridCell(id+":receipt-grid:foot:row0:total_lb",{"value":"Итого к оплате:","colSpan":"4"}),new GridCellFoot(id+":receipt-grid:foot:row0:total_val",{"colSpan":"2","attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"enabled":true,"app":options.app}),new GridAjx(id+":payment_type-grid",{"className":"table table-bordered table-responsive table-striped payment_type_grid","keyIds":["dt"],"model":pay_type_model,"controller":receipt_contr,"readPublicMethod":receipt_contr.getPublicMethod("get_payment_type_list"),"navigate":false,"cmdEdit":false,"editInline":null,"editWinClass":null,"editViewClass":null,"editViewOptions":null,"commands":new GridCommands(id+":material-grid:cmd",{"controlInsert":new ReceiptPayTypeAddBtn(id+":material-grid:cmd:cmdInsert",{"model":pay_types_model,"pm":receipt_contr.getPublicMethod("add_payment_type"),"refresh":function(){self.getElement("payment_type-grid").onRefresh();}}),"cmdInsert":true,"cmdEdit":false,"cmdCopy":false,"cmdDelete":false,"cmdRefresh":false,"cmdFilter":false,"cmdPrint":false,"cmdPrintObj":false,"app":options.app}),"head":new GridHead(id+":payment_type-grid:head",{"attrs":{"class":"hidden"},"elements":[new GridRow(id+":payment_type-grid:head:row0",{"elements":[new GridCellHead(id+":payment_type-grid:head:payment_type_for_sale",{"value":"Тип оплаты","className":bs+"7","columns":[new GridColumn("payment_type_for_sale",{"field":pay_type_model.getField("payment_type_for_sale_descr")})]}),new GridCellHead(id+":payment_type-grid:head:total",{"value":"Получено","className":bs+"4","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":pay_type_model.getField("total"),"cellClass":DOCSalePayTypeTotalCell})]}),new GridCellHead(id+":receipt-grid:head:sys-cmd",{"value":"...","className":bs+"1","columns":[new GridColumn("sys-cmd",{"cellClass":DOCSalePayTypeSysCell})]})]})]}),"foot":new GridFoot(id+":payment_type:foot",{"autoCalc":true,"elements":[new GridRow(id+":payment_type:foot:row0",{"elements":[new GridCell(id+":payment_type:foot:row0:change_lb",{"value":"Сдача:"}),new GridCellFoot(id+":payment_type:foot:row0:change_val",{"colSpan":"2","attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","calcEnd":function(){var purch_total=self.getElement("receipt-grid").getFoot().getElement("row0").getElement("total_val").getValue();this.setValue(this.getTotal()-purch_total);},"gridColumn":new GridColumnFloat("change_val",{})})]})]}),"autoRefresh":false,"refreshInterval":0,"app":options.app}),new ButtonCmd(id+":btnClear",{"caption":"Очистить","onClick":function(){var contr=new Receipt_Controller(self.getApp());contr.run("clear",{async:false});self.getElement("receipt-grid").onRefresh();self.getElement("payment_type-grid").onRefresh();self.getElement("client").reset();self.getElement("discount").reset();self.getElement("doc_client_order").reset();self.getElement("barcode").focus();},"attrs":{"title":"удалить все строки"}}),new ButtonCmd(id+":btnProcess",{"caption":"Пробить","onClick":function(){self.process();},"attrs":{"title":"пробить чек по ККМ"}})];DOCSaleReceipt_View.superclass.constructor.call(this,id,options);var gr=this.getElement("receipt-grid");this.m_receiptRefresh=gr.onRefresh;gr.onRefresh=function(){self.m_receiptRefresh.call(self.getElement("receipt-grid"));self.getElement("payment_type-grid").onRefresh();}
this.setDataBindings([new DataBinding({"control":this.getElement("client"),"model":receipt_head_model,"field":receipt_head_model.getField("client_descr"),"keyIds":["client_id"]}),new DataBinding({"control":this.getElement("discount"),"model":receipt_head_model,"field":receipt_head_model.getField("discount_descr"),"keyIds":["discount_id"]}),new DataBinding({"control":this.getElement("doc_client_order"),"model":receipt_head_model,"field":receipt_head_model.getField("doc_client_order_descr"),"keyIds":["doc_client_order_id"]})]);this.addCommand(new Command({"publicMethod":receipt_contr.getPublicMethod("save_head"),"async":true,"bindings":[new CommandBinding({"control":this.getElement("client"),"fieldId":"client_id"}),new CommandBinding({"control":this.getElement("discount"),"fieldId":"discount_id"}),new CommandBinding({"control":this.getElement("doc_client_order"),"fieldId":"doc_client_order_id"})]}));this.addCommand(new Command({"publicMethod":receipt_contr.getPublicMethod("clear"),"async":true}));this.addCommand(new Command({"publicMethod":receipt_contr.getPublicMethod("add_by_code"),"async":false,"bindings":[new CommandBinding({"control":this.getElement("barcode"),"fieldId":"barcode"})]}));this.addCommand(new Command({"publicMethod":receipt_contr.getPublicMethod("fill_on_client_order"),"async":false,"bindings":[new CommandBinding({"control":this.getElement("doc_client_order"),"fieldId":"doc_client_order_id"})]}));this.addCommand(new Command({"publicMethod":receipt_contr.getPublicMethod("close"),"async":false,"bindings":[new CommandBinding({"control":this.getElement("client"),"fieldId":"client_id"}),new CommandBinding({"control":this.getElement("doc_client_order"),"fieldId":"doc_client_order_id"})]}));}
extend(DOCSaleReceipt_View,ViewAjx);DOCSaleReceipt_View.prototype.findByBarcode=function(){var self=this;this.execCommand("add_by_code",function(resp){self.setHeadFromResp(resp);self.getElement("receipt-grid").onRefresh();var ctrl=self.getElement("barcode");ctrl.setValue("");ctrl.focus();})}
DOCSaleReceipt_View.prototype.setDiscountPercent=function(v){v=(isNaN(v))?0:v;var gr=this.getElement("receipt-grid");gr.setEditViewOptions({"discountPercent":v});var pm=gr.getReadPublicMethod().getController().getPublicMethod("set_disc_percent");pm.setFieldValue("disc_percent",v);pm.run({async:false});gr.onRefresh();}
DOCSaleReceipt_View.prototype.process=function(){var CACH_CLOSE_TYPE=0;var payment_type_grid=this.getElement("payment_type-grid");var change=payment_type_grid.getFoot().getElement("row0").getElement("change_val").getValue();var close_types={};var cash_total=0;var m=payment_type_grid.getModel();m.reset();while(m.getNextRow()){var close_t=m.getFieldValue("kkm_type_close");var total_t=m.getFieldValue("total");if(close_types[close_t]){close_types[close_t]+=total_t;}
else{close_types[close_t]=total_t;}
if(close_t==CACH_CLOSE_TYPE){cash_total+=total_t;}}
if(change>0&&cash_total<change){throw new Error("Оплата за наличный расчет меньше сдачи!");}
else if(change>0){close_types[CACH_CLOSE_TYPE]-=change;}
this.m_cashRegData=[];var m=this.getElement("receipt-grid").getModel();var total_q=0;var total_total=0;m.reset();while(m.getNextRow()){total_q+=m.getFieldValue("quant");total_total+=m.getFieldValue("total");}
if(total_q==0){throw new Error("Количество равно нулю!");}
for(close_t in close_types){close_t_sruc={"typeClose":parseInt(close_t),"items":[],"total":0,"change":(close_t==CACH_CLOSE_TYPE)?change:0,"pwd":this.getApp().getCachierSalePwd()};var close_t_k=close_types[close_t]/total_total;var close_t_total=0;m.reset();while(m.getNextRow()){var item_total=Math.round(m.getFieldValue("total")*close_t_k*100)/100;close_t_sruc.items.push({"Name":m.getFieldValue("item_name"),"Quantity":m.getFieldValue("quant"),"Price":Math.round(item_total/m.getFieldValue("quant")*100)/100,"Department":1});close_t_sruc.total+=item_total;close_t_total+=item_total;}
if(close_t_sruc.total!=close_t_total){close_t_sruc.total=close_types[close_t]-close_t_sruc.total+close_t_total;}
this.m_cashRegData.push(close_t_sruc);}
var self=this;this.execCommand("close",function(){self.processOnKKM();});}
DOCSaleReceipt_View.prototype.processOnKKM=function(){this.getElement("client").reset();this.getElement("discount").reset();this.getElement("doc_client_order").reset();this.saveHead();var reg=this.getApp().getCachRegister();if(reg){reg.printCheck({"checks":this.m_cashRegData});}
else{window.showError("ККМ не инициализирована!");}
this.getElement("receipt-grid").onRefresh();this.getElement("barcode").focus();}
DOCSaleReceipt_View.prototype.saveHead=function(){this.execCommand("save_head");}
DOCSaleReceipt_View.prototype.setHeadFromResp=function(resp){var m=new ReceiptHeadList_Model({"data":resp.getModelData("ReceiptHeadList_Model")});if(m.getRowCount()){m.getRow(0);this.getElement("client").setValue(new RefType({"keys":{"client_id":m.getFieldValue("client_id")},"descr":m.getFieldValue("client_descr")}));this.getElement("discount").setValue(new RefType({"keys":{"discount_id":m.getFieldValue("discount_id")},"descr":m.getFieldValue("discount_descr")}));}}
DOCSaleReceipt_View.prototype.onDOCClientSelected=function(){var self=this;this.execCommand("fill_on_client_order",function(resp){self.setHeadFromResp(resp);self.getElement("receipt-grid").onRefresh();});}
DOCSaleReceipt_View.prototype.getModified=function(cmd){return true;} 
function DiscountList_View(id,options){DiscountList_View.superclass.constructor.call(this,id,options);var model=new Discount_Model({"data":options.modelDataStr});var contr=new Discount_Controller(options.app);var constants={"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"colTemplate":"DiscountList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true}),new GridCellHead(id+":grid:head:percent",{"columns":[new GridColumn("percent",{"field":model.getField("percent")})],"sortable":true,"sort":"asc"})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true,"app":options.app}));}
extend(DiscountList_View,ViewAjx); 
function DiscCard_View(id,options){options=options||{};DiscCard_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new EditString(id+":barcode",{"labelCaption":"Штрихкод:","cmdClear":false,"enabled":false,"app":options.app}));this.addElement(new DiscountSelect(id+":discount",{"labelCaption":"Вид скидки:","app":options.app}));var contr=new DiscCard_Controller(options.app);this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DiscCard_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("barcode"),"model":this.m_model}),new DataBinding({"control":this.getElement("discount"),"model":this.m_model,"field":this.m_model.getField("discount_id")})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("barcode")}),new CommandBinding({"control":this.getElement("discount"),"fieldId":"discount_id"})]);}
extend(DiscCard_View,ViewObjectAjx); 
function ExpenceTypeList_View(id,options){options=options||{};ExpenceTypeList_View.superclass.constructor.call(this,id,options);var model=new ExpenceType_Model({"data":options.modelDataStr});var contr=new ExpenceType_Controller(options.app);var constants={"doc_per_page_count":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":Material_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"popUpMenu":popup_menu,"printObjList":null,"filters":null,"colTemplate":"ExpenceTypeList","app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":null,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"autoRefresh":false,"focus":true,"app":options.app}));}
extend(ExpenceTypeList_View,ViewAjx); 
function DOCClientOrderList_View(id,options){DOCClientOrderList_View.superclass.constructor.call(this,id,options);var model=new DOCClientOrderList_Model({"data":options.modelDataStr});var contr=new DOCClientOrder_Controller(options.app);var constants={"doc_per_page_count":null,"def_store":null,"grid_refresh_interval":null};options.app.getConstantManager().get(constants);var multy_store=options.app.getServVars().multy_store;var period_ctrl=new EditPeriodDateTime(id+":filter-ctrl-period",{"app":options.app,"valueFrom":(options.templateParams)?options.templateParams.date_from:"","valueTo":(options.templateParams)?options.templateParams.date_to:"","field":new FieldDateTime("date_time"),"app":options.app});var popup_menu=new PopUpMenu();var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};if(multy_store=="1"){filters.store={"binding":new CommandBinding({"control":new StoreSelect(id+":filter-ctrl-store",{"contClassName":"form-group "+window.getBsCol(12),"value":constants.def_store.getValue(),"keyIds":["store_id"],"app":options.app}),"field":new FieldInt("store_id")}),"sign":"e"};}
filters.delivery_hour={"binding":new CommandBinding({"control":new DeliveryHourSelect(id+":filter-delivery_hour",{"labelCaption":"Время доставки:","contClassName":"form-group "+window.getBsCol(12),"keyIds":["delivery_hour_id"],"app":options.app}),"field":new FieldInt("delivery_hour_id")}),"sign":"e"};filters.recipient_type={"binding":new CommandBinding({"control":new Enum_recipient_types(id+":filter-recipient_type",{"labelCaption":"Вид получателя:","contClassName":"form-group "+window.getBsCol(12),"app":options.app}),"field":new FieldInt("recipient_type")}),"sign":"e"};filters.client_order_state={"binding":new CommandBinding({"control":new Enum_client_order_states(id+":filter-client_order_state",{"labelCaption":"Статус:","contClassName":"form-group "+window.getBsCol(12),"app":options.app}),"field":new FieldInt("client_order_state")}),"sign":"e"};filters.payed={"binding":new CommandBinding({"control":new EditCheckSelect(id+":filter-payed",{"labelCaption":"Оплачен:","contClassName":"form-group "+window.getBsCol(12),"app":options.app}),"field":new FieldInt("payed")}),"sign":"e"};filters.payment_type={"binding":new CommandBinding({"control":new Enum_payment_types(id+":filter-payment_type",{"labelCaption":"Вид оплаты:","contClassName":"form-group "+window.getBsCol(12),"app":options.app}),"field":new FieldInt("payment_type")}),"sign":"e"};var grid_rows=[new GridCellHeadDOCProcessed(id+":grid:head:0:processed",{"model":model}),new GridCellHeadDOCDate(id+":grid:head:0:date_time",{"model":model,"app":options.app}),new GridCellHeadDOCNumber(id+":grid:head:0:number_from_site",{"model":model,"app":options.app})];if(multy_store=="1"){grid_rows.push(new GridCellHead(id+":grid:head:0:store_descr",{"value":"Салон","columns":[new GridColumn("store",{"field":model.getField("store_descr")})],"sortable":true}));}
grid_rows.push(new GridCellHead(id+":grid:head:0:client_name",{"value":"Имя","columns":[new GridColumn("client_name",{"field":model.getField("client_name")})],"sortable":true}));grid_rows.push(new GridCellHead(id+":grid:head:0:client_tel",{"className":window.getBsCol(2),"value":"Телефон","columns":[new GridColumnPhone("client_tel",{"field":model.getField("client_tel"),"app":options.app})]}));grid_rows.push(new GridCellHead(id+":grid:head:0:delivery_date",{"colAttrs":{"align":"center"},"value":"Дата дост.","columns":[new GridColumnDate("delivery_date",{"field":model.getField("delivery_date"),"dateFormat":options.app.getJournalDateFormat()})]}));grid_rows.push(new GridCellHead(id+":grid:head:0:delivery_hour",{"value":"Время дост.","colAttrs":{"align":"center"},"columns":[new GridColumn("delivery_hour",{"field":model.getField("delivery_hour_descr")})]}));grid_rows.push(new GridCellHead(id+":grid:head:0:delivery_comment",{"value":"Примеч.","columns":[new GridColumn("delivery_comment",{"field":model.getField("delivery_comment")})]}));grid_rows.push(new GridCellHead(id+":grid:head:0:payment_type",{"value":"Оплата","columns":[new EnumGridColumn_payment_types("payment_type",{"field":model.getField("payment_type"),"app":options.app})]}));grid_rows.push(new GridCellHead(id+":grid:head:0:payed",{"value":"Оплачен","columns":[new GridColumnBool("payed",{"field":model.getField("payed")})]}));grid_rows.push(new GridCellHead(id+":list-grid:head:client_order_state",{"value":"Статус","colAttrs":{"order_state":function(fields){return fields.client_order_state.getValue();}},"columns":[new EnumGridColumn_client_order_states("client_order_state",{"field":model.getField("client_order_state"),"app":options.app})]}));grid_rows.push(new GridCellHead(id+":grid:head:total",{"className":window.getBsCol(2),"colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":model.getField("total")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"keyIds":["id"],"editInline":false,"editWinClass":DOCClientOrder_Form,"popUpMenu":popup_menu,"commands":new DOCClientOrderGridCommand(id+":grid:cmd",{"printObjList":contr.getPrintList(),"filters":filters,"popUpMenu":popup_menu,"colTemplate":"DOCClientOrderList","cmdDOCUnprocess":true,"popUpMenu":popup_menu,"app":options.app}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:0",{"elements":grid_rows})]}),"foot":null,"autoRefresh":false,"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue(),"app":options.app}),"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"refreshAfterDelRow":true,"focus":true,"app":options.app}));}
extend(DOCClientOrderList_View,ViewAjx); 
function DOCClientOrder_View(id,options){options=options||{};options.processable=false;var contr=new DOCClientOrder_Controller(options.app);options.cmdPrint=true;options.printList=contr.getPrintList();DOCClientOrder_View.superclass.constructor.call(this,id,options);this.addElement(new DOCDateEdit(id+":date_time",{"app":options.app}));this.addElement(new DOCNumberEdit(id+":number",{"app":options.app}));var app=options.app;var bs=app.getBsCol();var multy_store=app.getServVars().multy_store;var self=this;if(multy_store=="1"){this.addElement(new StoreSelect(id+":store",{"app":app}));}
this.addElement(new EditString(id+":number_from_site",{"labelCaption":"Номер с сайта:","app":options.app}));this.addElement(new Enum_delivery_types(id+":delivery_type",{"labelCaption":"Вид доставки:","required":true,"app":options.app}));this.addElement(new EditString(id+":client_name",{"labelCaption":"Покупатель:","attrs":{"maxlength":200},"app":options.app}));this.addElement(new EditPhone(id+":client_tel",{"labelCaption":"Телефон:","app":options.app}));this.addElement(new ClientEditRef(id+":client",{"app":options.app}));this.addElement(new Enum_recipient_types(id+":recipient_type",{"labelCaption":"Вид получателя:","required":true,"app":options.app}));this.addElement(new EditString(id+":recipient_name",{"labelCaption":"Получатель:","attrs":{"maxlength":200},"app":options.app}));this.addElement(new EditPhone(id+":recipient_tel",{"labelCaption":"Телефон:","app":options.app}));this.addElement(new EditString(id+":address",{"labelCaption":"Адрес:","attrs":{"maxlength":500},"required":true,"app":options.app}));this.addElement(new EditDate(id+":delivery_date",{"labelCaption":"Дата доставки:","required":true,"app":options.app}));this.addElement(new DeliveryHourSelect(id+":delivery_hour",{"labelCaption":"Время доставки:","keyIds":["delivery_hour_id"],"required":true,"app":options.app}));this.addElement(new EditString(id+":delivery_comment",{"labelCaption":"Коммент.доставки:","attrs":{"maxlength":100},"app":options.app}));this.addElement(new EditCheckBox(id+":card",{"labelCaption":"Открытка:","app":options.app}));this.addElement(new EditText(id+":card_text",{"labelCaption":"Текст открытки:","rows":2,"app":options.app}));this.addElement(new EditCheckBox(id+":anonym_gift",{"labelCaption":"Анонимный подарок:","app":options.app}));this.addElement(new Enum_delivery_note_types(id+":delivery_note_type",{"labelCaption":"Уведомление о доставке:","app":options.app}));this.addElement(new EditText(id+":extra_comment",{"labelCaption":"Комментарий:","rows":2,"app":options.app}));this.addElement(new Enum_payment_types(id+":payment_type",{"labelCaption":"Вид оплаты:","app":options.app}));this.addElement(new Enum_client_order_states(id+":client_order_state",{"labelCaption":"Статус:","app":options.app}));var product_model=new DOCClientOrderDOCTProductList_Model();var product_contr=new DOCClientOrderDOCTProduct_Controller(app);this.addElement(new GridAjxDOCT(id+":product-grid",{"keyIds":["view_id"],"model":product_model,"controller":product_contr,"editInline":true,"editWinClass":null,"editViewClass":DOCClientOrderDOCTProductInline_View,"commands":new DOCCommands(id+":product-grid:cmd",{"detailFillWinClass":ProductList_Form,"detailOnSelect":function(fields,q){var contr=new DOCClientOrderDOCTProduct_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("product_id",fields.id.getValue());pm.setFieldValue("price_no_disc",price);pm.setFieldValue("disc_percent",0);pm.setFieldValue("quant",q);pm.setFieldValue("total",q*price);pm.run({"async":false});this.m_grid.onRefresh();},"viewId":this.getElement("view_id").getValue(),"cmdEdit":false,"cmdCopy":false,"app":app}),"head":new GridHead(id+":product-grid:head",{"elements":[new GridRow(id+":product-grid:head:row0",{"elements":[new GridCellHead(id+":product-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":product_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"tagName":"div"}})]}),new GridCellHead(id+":product-grid:head:product",{"className":bs+"3","columns":[new GridColumn("product",{"field":product_model.getField("product_descr"),"ctrlBindField":product_model.getField("product_id")})]}),new GridCellHead(id+":product-grid:head:quant",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"model":product_model})]}),new GridCellHead(id+":product-grid:head:price_no_disc",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price_no_disc",{"model":product_model})]}),new GridCellHead(id+":product-grid:head:disc_percent",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("disc_percent",{"model":product_model})]}),new GridCellHead(id+":product-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"model":product_model})]})]})]}),"foot":new GridFoot(id+":product-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":product-grid:foot:row0",{"elements":[new GridCell(id+":product-grid:foot:row0:total_lb",{"value":"Итого","colSpan":"5"}),new GridCellFoot(id+":product-grid:foot:row0:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"enabled":true,"app":app}));var material_model=new DOCClientOrderDOCTMaterialList_Model();var material_contr=new DOCClientOrderDOCTMaterial_Controller(app);this.addElement(new GridAjxDOCT(id+":material-grid",{"keyIds":["view_id"],"model":material_model,"controller":material_contr,"editInline":true,"editWinClass":null,"editViewClass":DOCClientOrderDOCTMaterialInline_View,"editViewOptions":null,"commands":new DOCCommands(id+":material-grid:cmd",{"detailFillWinClass":MaterialBalanceList_Form,"detailOnSelect":function(fields,q){var gr_opts=self.getElement("material-grid").getEditViewOptions();var disc_percent=(gr_opts)?gr_opts.discountPercent:0;var contr=new DOCClientOrderDOCTMaterial_Controller(this.getApp());var pm=contr.getPublicMethod("insert");var price=fields.price.getValue();pm.setFieldValue("view_id",self.getElement("view_id").getValue());pm.setFieldValue("material_id",fields.id.getValue());pm.setFieldValue("price_no_disc",price);pm.setFieldValue("quant",q);pm.setFieldValue("disc_percent",disc_percent);var tot_no_disc=q*price;pm.setFieldValue("total",(Math.round(parseFloat(tot_no_disc-tot_no_disc*disc_percent/100)*100))/100);pm.run({"async":true});this.m_grid.onRefresh();},"viewId":this.getElement("view_id").getValue(),"cmdEdit":false,"cmdCopy":false,"app":app}),"head":new GridHead(id+":material-grid:head",{"elements":[new GridRow(id+":material-grid:head:row0",{"elements":[new GridCellHead(id+":material-grid:head:line_number",{"className":bs+"1","columns":[new GridColumn("line_number",{"field":material_model.getField("line_number"),"ctrlClass":Edit,"ctrlOptions":{"tagName":"div"}})]}),new GridCellHead(id+":material-grid:head:material",{"className":bs+"3","columns":[new GridColumn("material",{"field":material_model.getField("material_descr"),"ctrlId":"material","ctrlBindField":material_model.getField("material_id")})]}),new GridCellHead(id+":material-grid:head:quant",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("quant",{"field":material_model.getField("quant")})]}),new GridCellHead(id+":material-grid:head:price_no_disc",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("price_no_disc",{"field":material_model.getField("price_no_disc")})]}),new GridCellHead(id+":material-grid:head:disc_percent",{"className":bs+"1","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("disc_percent",{"field":material_model.getField("disc_percent")})]}),new GridCellHead(id+":material-grid:head:total",{"className":bs+"2","colAttrs":{"align":"right"},"columns":[new GridColumnFloat("total",{"field":material_model.getField("total")})]})]})]}),"foot":new GridFoot(id+":material-grid:foot",{"autoCalc":true,"elements":[new GridRow(id+":material-grid:foot:row0",{"elements":[new GridCell(id+":material-grid:foot:row0:total_lb",{"value":"Итого","colSpan":"5"}),new GridCellFoot(id+":material-grid:foot:row0:total_val",{"attrs":{"align":"right"},"calcOper":"sum","calcFieldId":"total","gridColumn":new GridColumnFloat("total_val",{})})]})]}),"enabled":true,"app":app}));this.addElement(new Control(id+":total","h1",{"value":"","app":options.app}));this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=new DOCClientOrderList_Model({"data":options.modelDataStr});this.setDataBindings([new DataBinding({"control":this.getElement("number_from_site"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("client_name"),"model":this.m_model}),new DataBinding({"control":this.getElement("client_tel"),"model":this.m_model}),new DataBinding({"control":this.getElement("recipient_name"),"model":this.m_model}),new DataBinding({"control":this.getElement("recipient_tel"),"model":this.m_model}),new DataBinding({"control":this.getElement("address"),"model":this.m_model}),new DataBinding({"control":this.getElement("delivery_date"),"model":this.m_model}),new DataBinding({"control":this.getElement("delivery_comment"),"model":this.m_model}),new DataBinding({"control":this.getElement("card"),"model":this.m_model}),new DataBinding({"control":this.getElement("card_text"),"model":this.m_model}),new DataBinding({"control":this.getElement("anonym_gift"),"model":this.m_model}),new DataBinding({"control":this.getElement("extra_comment"),"model":this.m_model}),new DataBinding({"control":this.getElement("delivery_type"),"model":this.m_model,"field":this.m_model.getField("delivery_type")}),new DataBinding({"control":this.getElement("recipient_type"),"model":this.m_model,"field":this.m_model.getField("recipient_type")}),new DataBinding({"control":this.getElement("delivery_note_type"),"model":this.m_model,"field":this.m_model.getField("delivery_note_type")}),new DataBinding({"control":this.getElement("payment_type"),"model":this.m_model,"field":this.m_model.getField("payment_type")}),new DataBinding({"control":this.getElement("delivery_hour"),"model":this.m_model,"field":this.m_model.getField("delivery_hour_id"),"keyIds":["delivery_hour_id"]})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("number_from_site")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("client_name")}),new CommandBinding({"control":this.getElement("client_tel")}),new CommandBinding({"control":this.getElement("recipient_name")}),new CommandBinding({"control":this.getElement("recipient_tel")}),new CommandBinding({"control":this.getElement("address")}),new CommandBinding({"control":this.getElement("delivery_date")}),new CommandBinding({"control":this.getElement("delivery_comment")}),new CommandBinding({"control":this.getElement("card")}),new CommandBinding({"control":this.getElement("card_text")}),new CommandBinding({"control":this.getElement("anonym_gift")}),new CommandBinding({"control":this.getElement("extra_comment")}),new CommandBinding({"control":this.getElement("delivery_type")}),new CommandBinding({"control":this.getElement("recipient_type")}),new CommandBinding({"control":this.getElement("delivery_note_type")}),new CommandBinding({"control":this.getElement("payment_type")}),new CommandBinding({"control":this.getElement("delivery_hour"),"fieldId":"delivery_hour_id"})]);this.addDefDataBindings();if(multy_store=="1"){this.getCommand(this.CMD_OK).getBindings().push((new CommandBinding({"control":this.getElement("store"),"fieldId":"store_descr","keyIds":["store_id"]})));this.addDataBinding(new DataBinding({"control":this.getElement("store"),"model":this.m_model,"field":this.m_model.getField("store_id")}));}
var gr_product=this.getElement("product-grid");var gr_material=this.getElement("material-grid");this.addDetailDataSet(gr_product);this.addDetailDataSet(gr_material);this.m_prodOnGetData=gr_product.onGetData;gr_product.onGetData=function(resp){self.m_prodOnGetData.call(self.getElement("product-grid"),resp);self.refreshTotal();}
this.m_matOnGetData=gr_material.onGetData;gr_material.onGetData=function(resp){self.m_matOnGetData.call(self.getElement("material-grid"),resp);self.refreshTotal();}}
extend(DOCClientOrder_View,ViewDOC);DOCClientOrder_View.prototype.setDefRefVals=function(){var constants={"def_store":null,"def_payment_type_for_sale":null,"def_discount":null};this.getApp().getConstantManager().get(constants);var ctrl=this.getElement("store");if(ctrl){ctrl.setValue(constants.def_store.getValue());}}
DOCClientOrder_View.prototype.refreshTotal=function(){var tot=this.getElement("product-grid").getFoot().getElement("row0").getElement("total_val").getValue()+
this.getElement("material-grid").getFoot().getElement("row0").getElement("total_val").getValue();var c=this.getElement("total");var vl=this.getApp().numberFormat(tot,2);c.setValue("ИТОГО: "+vl+" руб.");} 
function DOCClientOrderDOCTMaterialInline_View(id,options){options=options||{};this.m_discountPercent=(options.discountPercent!=undefined)?options.discountPercent:0;DOCClientOrderDOCTMaterialInline_View.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTMaterialInline_View,ViewGridEditInlineAjx);DOCClientOrderDOCTMaterialInline_View.prototype.addEditControls=function(){var self=this;var recalc=function(){var tot_no_disc=self.getElement("price_no_disc").getValue()*self.getElement("quant").getValue();self.getElement("total").setValue((Math.round(parseFloat(tot_no_disc-tot_no_disc*self.getElement("disc_percent").getValue()/100)*100))/100);}
var recalc_key=function(e){e=EventHelper.fixMouseEvent(e);if(e.keyCode==13){recalc();}}
this.addElement(new Edit(this.getId()+":line_number",{"enabled":false,"app":this.getApp()}));this.addElement(new MaterialEditRef(this.getId()+":material",{"required":true,"labelCaption":"","selectWinClass":MaterialBalanceList_Form,"keyIds":["material_id"],"onSelect":function(fields){self.getElement("quant").setValue(1);self.getElement("price_no_disc").setValue(fields.price.getValue());recalc();},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":quant",{"value":1,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":price_no_disc",{"value":0,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":disc_percent",{"value":this.m_discountPercent,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":total",{"app":this.getApp()}));}
DOCClientOrderDOCTMaterialInline_View.prototype.setWritePublicMethod=function(pm){if(pm){var cmd=this.getCommands()[this.CMD_OK];cmd.setBindings([new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price_no_disc")}),new CommandBinding({"control":this.getElement("total")}),new CommandBinding({"control":this.getElement("disc_percent")}),new CommandBinding({"control":this.getElement("material"),"fieldId":"material_id"})]);this.setKeysPublicMethod(pm);cmd.setPublicMethod(pm);}} 
function DOCClientOrderDOCTProductInline_View(id,options){options=options||{};this.m_discountPercent=(options.discountPercent!=undefined)?options.discountPercent:0;DOCClientOrderDOCTProductInline_View.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTProductInline_View,ViewGridEditInlineAjx);DOCClientOrderDOCTProductInline_View.prototype.addEditControls=function(){var self=this;var recalc=function(){var tot_no_disc=self.getElement("price_no_disc").getValue()*self.getElement("quant").getValue();self.getElement("total").setValue((Math.round(parseFloat(tot_no_disc-tot_no_disc*self.getElement("disc_percent").getValue()/100)*100))/100);}
var recalc_key=function(e){e=EventHelper.fixMouseEvent(e);if(e.keyCode==13){recalc();}}
this.addElement(new Edit(this.getId()+":line_number",{"enabled":false,"app":this.getApp()}));this.addElement(new ProductEditRef(this.getId()+":product",{"required":true,"labelCaption":"","selectWinClass":ProductList_Form,"keyIds":["product_id"],"onSelect":function(fields){self.getElement("quant").setValue(1);self.getElement("price_no_disc").setValue(fields.price.getValue());recalc();},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":quant",{"value":1,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":price_no_disc",{"value":0,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":disc_percent",{"value":this.m_discountPercent,"events":{"keypress":recalc_key,"blur":recalc,"change":recalc},"app":this.getApp()}));this.addElement(new EditFloat(this.getId()+":total",{"app":this.getApp()}));}
DOCClientOrderDOCTProductInline_View.prototype.setWritePublicMethod=function(pm){if(pm){var cmd=this.getCommands()[this.CMD_OK];cmd.setBindings([new CommandBinding({"control":this.getElement("quant")}),new CommandBinding({"control":this.getElement("price_no_disc")}),new CommandBinding({"control":this.getElement("total")}),new CommandBinding({"control":this.getElement("disc_percent")}),new CommandBinding({"control":this.getElement("product"),"fieldId":"product_id"})]);this.setKeysPublicMethod(pm);cmd.setPublicMethod(pm);}}
DOCClientOrderDOCTProductInline_View.prototype.setReadBinds=function(pm){if(pm){var model=new DOCClientOrderDOCTProductList_Model();this.setDataBindings([new DataBinding({"control":this.getElement("line_number"),"model":model}),new DataBinding({"control":this.getElement("quant"),"model":model}),new DataBinding({"control":this.getElement("price_no_disc"),"model":model}),new DataBinding({"control":this.getElement("total"),"model":model}),new DataBinding({"control":this.getElement("disc_percent"),"model":model}),new DataBinding({"control":this.getElement("product"),"model":model,"field":model.getField("product_descr"),"keyIds":["product_id"]})]);}} 
Login_View.prototype.ER_LOGIN="Неправильный логин или пароль.";Login_View.prototype.CTRL_USER_LAB="Пользователь (email)";Login_View.prototype.CTRL_PWD_LAB="Пароль";UserProfile_View.prototype.NOTE_DATA_SAVED="Профиль пользователя сохранен.";QuantEdit_View.prototype.QUANT_CAP="Количество:";DOCProductDisposal_View.prototype.CTRL_EXPL_CAP="Причина списания:";DOCMaterialDisposal_View.prototype.CTRL_EXPL_CAP="Причина списания:";CashRegisterOper_View.prototype.BTN_REPX_CAP="Х-отчет";CashRegisterOper_View.prototype.BTN_REPX_TITLE="напечатать отчет без гашения";CashRegisterOper_View.prototype.BTN_REPZ_CAP="Z-отчет";CashRegisterOper_View.prototype.BTN_REPZ_TITLE="снять отчет с гашения, закрыть смену";CashRegisterOper_View.prototype.BTN_PROP_CAP="Свойства ККМ";CashRegisterOper_View.prototype.BTN_PROP_TITLE="Открыть страницу параметров ККМ";DOCMaterialProcurement_Controller.prototype.PRINT_OBJ_CAP="Поступление материалов"; 
function FileStorageSmall_Controller(servConnector){options={};FileStorageSmall_Controller.superclass.constructor.call(this,"FileStorageSmall_Controller",servConnector,options);this.add_add_file();this.add_set_file();this.add_get_file();}
extend(FileStorageSmall_Controller,ControllerDb);FileStorageSmall_Controller.prototype.add_add_file=function(){var pm=this.addMethodById('add_file');}
FileStorageSmall_Controller.prototype.add_set_file=function(){var pm=this.addMethodById('set_file');pm.addParam(new FieldInt("id"));}
FileStorageSmall_Controller.prototype.add_get_file=function(){var pm=this.addMethodById('get_file');pm.addParam(new FieldInt("id"));} 
function Store_Model(options){var id='Store_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');Store_Model.superclass.constructor.call(this,id,options);}
extend(Store_Model,ModelXML); 
function StoreList_Model(options){var id='StoreList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);StoreList_Model.superclass.constructor.call(this,id,options);}
extend(StoreList_Model,ModelXML); 
function ConstantList_Model(options){var id='ConstantList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldString("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Значение';options.fields.val_descr=new FieldText("val_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя значения';options.fields.val_type=new FieldText("val_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.val_id=new FieldInt("val_id",filed_options);ConstantList_Model.superclass.constructor.call(this,id,options);}
extend(ConstantList_Model,ModelXML); 
function User_Model(options){var id='User_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,store_manager,florist,cashier';options.fields.role_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;options.fields.pwd=new FieldPassword("pwd",filed_options);options.fields.pwd.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Привязвывать к магазину';options.fields.constrain_to_store=new FieldBool("constrain_to_store",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.cash_register_id=new FieldInt("cash_register_id",filed_options);User_Model.superclass.constructor.call(this,id,options);}
extend(User_Model,ModelXML); 
function UserList_Model(options){var id='UserList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;options.fields.constrain_to_store=new FieldBool("constrain_to_store",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_descr=new FieldString("store_descr",filed_options);UserList_Model.superclass.constructor.call(this,id,options);}
extend(UserList_Model,ModelXML); 
function UserDialog_Model(options){var id='UserDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldString("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.constrain_to_store=new FieldBool("constrain_to_store",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.cash_register_descr=new FieldString("cash_register_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.cash_register_id=new FieldInt("cash_register_id",filed_options);UserDialog_Model.superclass.constructor.call(this,id,options);}
extend(UserDialog_Model,ModelXML); 
function CashRegister_Model(options){var id='CashRegister_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Порт оборудования';options.fields.port=new FieldInt("port",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скорость оборудования';options.fields.baud_rate=new FieldInt("baud_rate",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сервер';options.fields.eq_server=new FieldString("eq_server",filed_options);options.fields.eq_server.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Порт сервера';options.fields.eq_port=new FieldInt("eq_port",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Идентификатор оборуд.';options.fields.eq_id=new FieldString("eq_id",filed_options);options.fields.eq_id.getValidator().setMaxLength('20');CashRegister_Model.superclass.constructor.call(this,id,options);}
extend(CashRegister_Model,ModelXML); 
function Client_Model(options){var id='Client_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';options.fields.name_full=new FieldText("name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сотовый телефон';options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Менеджер';options.fields.manager_id=new FieldInt("manager_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.create_date=new FieldDate("create_date",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Диск.карта';options.fields.disc_card_id=new FieldInt("disc_card_id",filed_options);Client_Model.superclass.constructor.call(this,id,options);}
extend(Client_Model,ModelXML); 
function ClientList_Model(options){var id='ClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка, %';options.fields.disc_card_percent=new FieldString("disc_card_percent",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.disc_card_id=new FieldInt("disc_card_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.discount_id=new FieldInt("discount_id",filed_options);ClientList_Model.superclass.constructor.call(this,id,options);}
extend(ClientList_Model,ModelXML); 
function ClientDialog_Model(options){var id='ClientDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';options.fields.name_full=new FieldText("name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Диск.карта';options.fields.disc_card_barcode=new FieldString("disc_card_barcode",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.disc_card_id=new FieldInt("disc_card_id",filed_options);ClientDialog_Model.superclass.constructor.call(this,id,options);}
extend(ClientDialog_Model,ModelXML); 
function Product_Model(options){var id='Product_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Розничная цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setRequired(true);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Для продажи';options.fields.for_sale=new FieldBool("for_sale",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Заказывать автоматически';options.fields.make_order=new FieldBool("make_order",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Минимальный остаток';options.fields.min_stock_quant=new FieldFloat("min_stock_quant",filed_options);options.fields.min_stock_quant.getValidator().setMaxLength('19');Product_Model.superclass.constructor.call(this,id,options);}
extend(Product_Model,ModelXML); 
function ProductList_Model(options){var id='ProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Розничная цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Для продажи';options.fields.for_sale=new FieldBool("for_sale",filed_options);ProductList_Model.superclass.constructor.call(this,id,options);}
extend(ProductList_Model,ModelXML); 
function ProductBalanceList_Model(options){var id='ProductBalanceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Код';options.fields.code=new FieldString("code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во заказано';options.fields.order_quant=new FieldFloat("order_quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время изготовления';options.fields.after_production_time=new FieldString("after_production_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Документ комплектации';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер документа комплектации';options.fields.doc_production_number=new FieldInt("doc_production_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата документа комплектации';options.fields.doc_production_date_time=new FieldDateTime("doc_production_date_time",filed_options);ProductBalanceList_Model.superclass.constructor.call(this,id,options);}
extend(ProductBalanceList_Model,ModelXML); 
function MaterialGroup_Model(options){var id='MaterialGroup_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Для флориста';options.fields.for_florist=new FieldBool("for_florist",filed_options);MaterialGroup_Model.superclass.constructor.call(this,id,options);}
extend(MaterialGroup_Model,ModelXML); 
function Material_Model(options){var id='Material_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Розничная цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setRequired(true);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Для продажи';options.fields.for_sale=new FieldBool("for_sale",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наценка (%)';options.fields.margin_percent=new FieldInt("margin_percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа';options.fields.material_group_id=new FieldInt("material_group_id",filed_options);options.fields.material_group_id.getValidator().setRequired(true);Material_Model.superclass.constructor.call(this,id,options);}
extend(Material_Model,ModelXML); 
function MaterialList_Model(options){var id='MaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Розничная цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Для продажи';options.fields.for_sale=new FieldBool("for_sale",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldString("material_group_id",filed_options);MaterialList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialList_Model,ModelXML); 
function MaterialBalanceList_Model(options){var id='MaterialBalanceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол-во';options.fields.main_quant=new FieldFloat("main_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.main_total=new FieldFloat("main_total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время';options.fields.procur_avg_time=new FieldString("procur_avg_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_descr=new FieldString("store_descr",filed_options);MaterialBalanceList_Model.superclass.constructor.call(this,id,options);}
extend(MaterialBalanceList_Model,ModelXML); 
function Supplier_Model(options){var id='Supplier_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Полное наименование';options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');Supplier_Model.superclass.constructor.call(this,id,options);}
extend(Supplier_Model,ModelXML); 
function SupplierList_Model(options){var id='SupplierList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');SupplierList_Model.superclass.constructor.call(this,id,options);}
extend(SupplierList_Model,ModelXML); 
function Specification_Model(options){var id='Specification_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.product_id=new FieldInt("product_id",filed_options);options.fields.product_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Кол.продукции';options.fields.product_quant=new FieldFloat("product_quant",filed_options);options.fields.product_quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кол.материала';options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setRequired(true);options.fields.material_quant.getValidator().setMaxLength('19');Specification_Model.superclass.constructor.call(this,id,options);}
extend(Specification_Model,ModelXML); 
function SpecificationList_Model(options){var id='SpecificationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_quant=new FieldInt("product_quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.material_quant=new FieldFloat("material_quant",filed_options);options.fields.material_quant.getValidator().setMaxLength('19');SpecificationList_Model.superclass.constructor.call(this,id,options);}
extend(SpecificationList_Model,ModelXML); 
function PaymentTypeForSale_Model(options){var id='PaymentTypeForSale_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид оплаты из заказа';options.fields.client_order_payment_type=new FieldEnum("client_order_payment_type",filed_options);filed_options.enumValues='cash,bank,yandex,trans_to_card,web_money';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип оплаты для ККМ';options.fields.kkm_type_close=new FieldInt("kkm_type_close",filed_options);PaymentTypeForSale_Model.superclass.constructor.call(this,id,options);}
extend(PaymentTypeForSale_Model,ModelXML); 
function DOCProduction_Model(options){var id='DOCProduction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Флорист';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_id=new FieldInt("product_id",filed_options);options.fields.product_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.florist_comment=new FieldText("florist_comment",filed_options);DOCProduction_Model.superclass.constructor.call(this,id,options);}
extend(DOCProduction_Model,ModelXML); 
function DOCProductionMaterialList_Model(options){var id='DOCProductionMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_sum=new FieldString("material_sum",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_cost=new FieldString("material_cost",filed_options);DOCProductionMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionMaterialList_Model,ModelXML); 
function DOCProductionList_Model(options){var id='DOCProductionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='По норме';options.fields.on_norm=new FieldBool("on_norm",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма материалов';options.fields.material_retail_cost=new FieldFloat("material_retail_cost",filed_options);options.fields.material_retail_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Себестоимость материалов';options.fields.material_cost=new FieldFloat("material_cost",filed_options);options.fields.material_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наценка,%';options.fields.income_percent=new FieldFloat("income_percent",filed_options);options.fields.income_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наценка,руб';options.fields.income=new FieldFloat("income",filed_options);options.fields.income.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.florist_comment=new FieldText("florist_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период после продажи';options.fields.after_prod_interval=new FieldText("after_prod_interval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Представление документа';options.fields.doc_descr=new FieldString("doc_descr",filed_options);DOCProductionList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionList_Model,ModelXML); 
function DOCProductionDOCTMaterial_Model(options){var id='DOCProductionDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCProductionDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionDOCTMaterial_Model,ModelXML); 
function DOCProductionDOCTMaterialList_Model(options){var id='DOCProductionDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);DOCProductionDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionDOCTMaterialList_Model,ModelXML); 
function DOCProductionDOCTFMaterial_Model(options){var id='DOCProductionDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCProductionDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionDOCTFMaterial_Model,ModelXML); 
function DOCProductionDOCTFMaterialList_Model(options){var id='DOCProductionDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);DOCProductionDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductionDOCTFMaterialList_Model,ModelXML); 
function DOCProductDisposal_Model(options){var id='DOCProductDisposal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Флорист';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комплектация';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);options.fields.doc_production_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина списания';options.fields.explanation=new FieldText("explanation",filed_options);DOCProductDisposal_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposal_Model,ModelXML); 
function DOCProductDisposalMaterialList_Model(options){var id='DOCProductDisposalMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина';options.fields.explanation=new FieldString("explanation",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);DOCProductDisposalMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalMaterialList_Model,ModelXML); 
function DOCProductDisposalList_Model(options){var id='DOCProductDisposalList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина списания';options.fields.explanation=new FieldString("explanation",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_production_descr=new FieldString("doc_production_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер комеплектации';options.fields.doc_production_number=new FieldString("doc_production_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата комеплектации';options.fields.doc_production_date_time=new FieldDateTime("doc_production_date_time",filed_options);DOCProductDisposalList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalList_Model,ModelXML); 
function DOCProductDisposalDOCTMaterial_Model(options){var id='DOCProductDisposalDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("login_id",filed_options);options.fields.login_id=field;var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("line_number",filed_options);options.fields.line_number=field;var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';var field=new FieldInt("material_id",filed_options);field.getValidator().setRequired(true);options.fields.material_id=field;var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';var field=new FieldFloat("quant",filed_options);field.getValidator().setMaxLength('19');options.fields.quant=field;DOCProductDisposalDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalDOCTMaterial_Model,ModelXML); 
function DOCProductDisposalDOCTMaterialList_Model(options){var id='DOCProductDisposalDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("login_id",filed_options);options.fields.login_id=field;var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';var field=new FieldInt("line_number",filed_options);options.fields.line_number=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldInt("material_id",filed_options);options.fields.material_id=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldString("material_descr",filed_options);options.fields.material_descr=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldFloat("quant",filed_options);options.fields.quant=field;DOCProductDisposalDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalDOCTMaterialList_Model,ModelXML); 
function DOCProductDisposalDOCTFMaterial_Model(options){var id='DOCProductDisposalDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("doc_id",filed_options);options.fields.doc_id=field;var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("line_number",filed_options);options.fields.line_number=field;var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';var field=new FieldInt("material_id",filed_options);field.getValidator().setRequired(true);options.fields.material_id=field;var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';var field=new FieldFloat("quant",filed_options);field.getValidator().setMaxLength('19');options.fields.quant=field;DOCProductDisposalDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalDOCTFMaterial_Model,ModelXML); 
function DOCProductDisposalDOCTFMaterialList_Model(options){var id='DOCProductDisposalDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;var field=new FieldInt("doc_id",filed_options);options.fields.doc_id=field;var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';var field=new FieldInt("line_number",filed_options);options.fields.line_number=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldInt("material_id",filed_options);options.fields.material_id=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldString("material_descr",filed_options);options.fields.material_descr=field;var filed_options={};filed_options.primaryKey=false;var field=new FieldFloat("quant",filed_options);options.fields.quant=field;DOCProductDisposalDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCProductDisposalDOCTFMaterialList_Model,ModelXML); 
function DOCMaterialProcurement_Model(options){var id='DOCMaterialProcurement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';options.fields.supplier_id=new FieldInt("supplier_id",filed_options);options.fields.supplier_id.getValidator().setRequired(true);DOCMaterialProcurement_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurement_Model,ModelXML); 
function DOCMaterialProcurementList_Model(options){var id='DOCMaterialProcurementList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Идентификатор';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';options.fields.supplier_id=new FieldInt("supplier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';options.fields.supplier_descr=new FieldString("supplier_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('19');DOCMaterialProcurementList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementList_Model,ModelXML); 
function DOCMaterialProcurementMaterialList_Model(options){var id='DOCMaterialProcurementMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.supplier_id=new FieldInt("supplier_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставщик';options.fields.supplier_descr=new FieldString("supplier_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price_descr=new FieldString("price_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total_descr=new FieldString("total_descr",filed_options);DOCMaterialProcurementMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementMaterialList_Model,ModelXML); 
function DOCMaterialProcurementDOCTMaterial_Model(options){var id='DOCMaterialProcurementDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('19');DOCMaterialProcurementDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDOCTMaterial_Model,ModelXML); 
function DOCMaterialProcurementDOCTMaterialList_Model(options){var id='DOCMaterialProcurementDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);DOCMaterialProcurementDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDOCTMaterialList_Model,ModelXML); 
function DOCMaterialProcurementDOCTFMaterial_Model(options){var id='DOCMaterialProcurementDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('19');DOCMaterialProcurementDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDOCTFMaterial_Model,ModelXML); 
function DOCMaterialProcurementDOCTFMaterialList_Model(options){var id='DOCMaterialProcurementDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);DOCMaterialProcurementDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialProcurementDOCTFMaterialList_Model,ModelXML); 
function DOCMaterialOrder_Model(options){var id='DOCMaterialOrder_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_id=new FieldInt("user_id",filed_options);DOCMaterialOrder_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrder_Model,ModelXML); 
function DOCMaterialOrderList_Model(options){var id='DOCMaterialOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_descr=new FieldString("user_descr",filed_options);DOCMaterialOrderList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderList_Model,ModelXML); 
function DOCMaterialOrderMaterialList_Model(options){var id='DOCMaterialOrderMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialOrderMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderMaterialList_Model,ModelXML); 
function DOCMaterialOrderDOCTMaterial_Model(options){var id='DOCMaterialOrderDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialOrderDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderDOCTMaterial_Model,ModelXML); 
function DOCMaterialOrderDOCTMaterialList_Model(options){var id='DOCMaterialOrderDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialOrderDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderDOCTMaterialList_Model,ModelXML); 
function DOCMaterialOrderDOCTFMaterial_Model(options){var id='DOCMaterialOrderDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialOrderDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderDOCTFMaterial_Model,ModelXML); 
function DOCMaterialOrderDOCTFMaterialList_Model(options){var id='DOCMaterialOrderDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialOrderDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialOrderDOCTFMaterialList_Model,ModelXML); 
function DOCMaterialDisposal_Model(options){var id='DOCMaterialDisposal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Флорист';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина списания';options.fields.explanation=new FieldText("explanation",filed_options);DOCMaterialDisposal_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposal_Model,ModelXML); 
function DOCMaterialDisposalList_Model(options){var id='DOCMaterialDisposalList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';options.fields.cost=new FieldFloat("cost",filed_options);options.fields.cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина';options.fields.explanation=new FieldString("explanation",filed_options);DOCMaterialDisposalList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalList_Model,ModelXML); 
function DOCMaterialDisposalMaterialList_Model(options){var id='DOCMaterialDisposalMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Причина';options.fields.explanation=new FieldString("explanation",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialDisposalMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalMaterialList_Model,ModelXML); 
function DOCMaterialDisposalDOCTMaterial_Model(options){var id='DOCMaterialDisposalDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialDisposalDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalDOCTMaterial_Model,ModelXML); 
function DOCMaterialDisposalDOCTMaterialList_Model(options){var id='DOCMaterialDisposalDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialDisposalDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalDOCTMaterialList_Model,ModelXML); 
function DOCMaterialDisposalDOCTFMaterial_Model(options){var id='DOCMaterialDisposalDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');DOCMaterialDisposalDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalDOCTFMaterial_Model,ModelXML); 
function DOCMaterialDisposalDOCTFMaterialList_Model(options){var id='DOCMaterialDisposalDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);DOCMaterialDisposalDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCMaterialDisposalDOCTFMaterialList_Model,ModelXML); 
function DOCClientOrder_Model(options){var id='DOCClientOrder_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер с сайта';options.fields.number_from_site=new FieldString("number_from_site",filed_options);options.fields.number_from_site.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_type=new FieldEnum("delivery_type",filed_options);filed_options.enumValues='courier,by_client';options.fields.delivery_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.client_name=new FieldString("client_name",filed_options);options.fields.client_name.getValidator().setRequired(true);options.fields.client_name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;options.fields.client_tel=new FieldString("client_tel",filed_options);options.fields.client_tel.getValidator().setRequired(true);options.fields.client_tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.recipient_type=new FieldEnum("recipient_type",filed_options);filed_options.enumValues='self,other';options.fields.recipient_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.recipient_name=new FieldString("recipient_name",filed_options);options.fields.recipient_name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;options.fields.recipient_tel=new FieldString("recipient_tel",filed_options);options.fields.recipient_tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_date=new FieldDate("delivery_date",filed_options);options.fields.delivery_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_hour_id=new FieldInt("delivery_hour_id",filed_options);options.fields.delivery_hour_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_comment=new FieldString("delivery_comment",filed_options);options.fields.delivery_comment.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;options.fields.card=new FieldBool("card",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.card_text=new FieldText("card_text",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.anonym_gift=new FieldBool("anonym_gift",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_note_type=new FieldEnum("delivery_note_type",filed_options);filed_options.enumValues='by_call,by_sms';var filed_options={};filed_options.primaryKey=false;options.fields.extra_comment=new FieldText("extra_comment",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type=new FieldEnum("payment_type",filed_options);filed_options.enumValues='cash,bank,yandex,trans_to_card,web_money';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;options.fields.client_order_state=new FieldEnum("client_order_state",filed_options);filed_options.enumValues='to_noone,checked,to_florist,to_courier,closed';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);DOCClientOrder_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrder_Model,ModelXML); 
function DOCClientOrderList_Model(options){var id='DOCClientOrderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер с сайта';options.fields.number_from_site=new FieldString("number_from_site",filed_options);options.fields.number_from_site.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;options.fields.delivery_type=new FieldString("delivery_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_name=new FieldString("client_name",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_tel=new FieldString("client_tel",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Покупатель из справочника';options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.recipient_type=new FieldString("recipient_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.recipient_name=new FieldString("recipient_name",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.recipient_tel=new FieldString("recipient_tel",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_date=new FieldDate("delivery_date",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_hour_id=new FieldInt("delivery_hour_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_hour_descr=new FieldString("delivery_hour_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.card=new FieldBool("card",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.card_text=new FieldText("card_text",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.anonym_gift=new FieldBool("anonym_gift",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_note_type=new FieldString("delivery_note_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.extra_comment=new FieldText("extra_comment",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.delivery_comment=new FieldText("delivery_comment",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type=new FieldString("payment_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_order_state=new FieldString("client_order_state",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payed=new FieldBool("payed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_client_order_descr=new FieldString("doc_client_order_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCClientOrderList_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderList_Model,ModelXML); 
function DOCClientOrderDOCTMaterial_Model(options){var id='DOCClientOrderDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCClientOrderDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTMaterial_Model,ModelXML); 
function DOCClientOrderDOCTMaterialList_Model(options){var id='DOCClientOrderDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка,%';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Всего';options.fields.total=new FieldFloat("total",filed_options);DOCClientOrderDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTMaterialList_Model,ModelXML); 
function DOCClientOrderDOCTFMaterial_Model(options){var id='DOCClientOrderDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCClientOrderDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTFMaterial_Model,ModelXML); 
function DOCClientOrderDOCTFMaterialList_Model(options){var id='DOCClientOrderDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);DOCClientOrderDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTFMaterialList_Model,ModelXML); 
function DOCClientOrderDOCTProduct_Model(options){var id='DOCClientOrderDOCTProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_id=new FieldInt("product_id",filed_options);options.fields.product_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCClientOrderDOCTProduct_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTProduct_Model,ModelXML); 
function DOCClientOrderDOCTProductList_Model(options){var id='DOCClientOrderDOCTProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка,%';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Всего';options.fields.total=new FieldFloat("total",filed_options);DOCClientOrderDOCTProductList_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTProductList_Model,ModelXML); 
function DOCClientOrderDOCTFProduct_Model(options){var id='DOCClientOrderDOCTFProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_id=new FieldInt("product_id",filed_options);options.fields.product_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCClientOrderDOCTFProduct_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTFProduct_Model,ModelXML); 
function DOCClientOrderDOCTFProductList_Model(options){var id='DOCClientOrderDOCTFProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);DOCClientOrderDOCTFProductList_Model.superclass.constructor.call(this,id,options);}
extend(DOCClientOrderDOCTFProductList_Model,ModelXML); 
function DOCSale_Model(options){var id='DOCSale_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продавец';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Себест.материалов';options.fields.total_material_cost=new FieldFloat("total_material_cost",filed_options);options.fields.total_material_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Себест.продукции';options.fields.total_product_cost=new FieldFloat("total_product_cost",filed_options);options.fields.total_product_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид скидки';options.fields.discount_id=new FieldInt("discount_id",filed_options);DOCSale_Model.superclass.constructor.call(this,id,options);}
extend(DOCSale_Model,ModelXML); 
function DOCSaleList_Model(options){var id='DOCSaleList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид оплаты';options.fields.payment_type_for_sale_descr=new FieldString("payment_type_for_sale_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Доставка';options.fields.delivery=new FieldString("delivery",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';options.fields.cost=new FieldFloat("cost",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наценка,руб';options.fields.income=new FieldFloat("income",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наценка,%';options.fields.income_percent=new FieldFloat("income_percent",filed_options);DOCSaleList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleList_Model,ModelXML); 
function DOCSaleDialog_Model(options){var id='DOCSaleDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид оплаты';options.fields.payment_type_for_sale_descr=new FieldString("payment_type_for_sale_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Клиент';options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.discount_id=new FieldInt("discount_id",filed_options);DOCSaleDialog_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDialog_Model,ModelXML); 
function DOCSaleDOCTMaterial_Model(options){var id='DOCSaleDOCTMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTMaterial_Model,ModelXML); 
function DOCSaleDOCTMaterialList_Model(options){var id='DOCSaleDOCTMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTMaterialList_Model,ModelXML); 
function DOCSaleDOCTFMaterial_Model(options){var id='DOCSaleDOCTFMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTFMaterial_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTFMaterial_Model,ModelXML); 
function DOCSaleDOCTFMaterialList_Model(options){var id='DOCSaleDOCTFMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTFMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTFMaterialList_Model,ModelXML); 
function DOCSaleDOCTProduct_Model(options){var id='DOCSaleDOCTProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);options.fields.doc_production_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма без скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTProduct_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTProduct_Model,ModelXML); 
function DOCSaleDOCTProductList_Model(options){var id='DOCSaleDOCTProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комплектация';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_number=new FieldInt("doc_production_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_date_time=new FieldDateTime("doc_production_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма без скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTProductList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTProductList_Model,ModelXML); 
function DOCSaleDOCTFProduct_Model(options){var id='DOCSaleDOCTFProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_id=new FieldInt("product_id",filed_options);options.fields.product_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);options.fields.doc_production_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTFProduct_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTFProduct_Model,ModelXML); 
function DOCSaleDOCTFProductList_Model(options){var id='DOCSaleDOCTFProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Скидка';options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена без скидки';options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма буз скидки';options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');DOCSaleDOCTFProductList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleDOCTFProductList_Model,ModelXML); 
function DOCSaleMaterialList_Model(options){var id='DOCSaleMaterialList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид оплаты';options.fields.payment_type_descr=new FieldString("payment_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_descr=new FieldString("material_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);DOCSaleMaterialList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleMaterialList_Model,ModelXML); 
function DOCSaleProductList_Model(options){var id='DOCSaleProductList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид оплаты';options.fields.payment_type_descr=new FieldString("payment_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Продукция';options.fields.product_descr=new FieldString("product_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цена';options.fields.price=new FieldFloat("price",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);DOCSaleProductList_Model.superclass.constructor.call(this,id,options);}
extend(DOCSaleProductList_Model,ModelXML); 
function Receipt_Model(options){var id='Receipt_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.item_id=new FieldInt("item_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.item_type=new FieldInt("item_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.item_name=new FieldString("item_name",filed_options);options.fields.item_name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.ord=new FieldTime("ord",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');Receipt_Model.superclass.constructor.call(this,id,options);}
extend(Receipt_Model,ModelXML); 
function ReceiptList_Model(options){var id='ReceiptList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.item_id=new FieldInt("item_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.item_type=new FieldInt("item_type",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.item_name=new FieldString("item_name",filed_options);options.fields.item_name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;options.fields.price=new FieldFloat("price",filed_options);options.fields.price.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.total_no_disc=new FieldFloat("total_no_disc",filed_options);options.fields.total_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.price_no_disc=new FieldFloat("price_no_disc",filed_options);options.fields.price_no_disc.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;options.fields.disc_percent=new FieldFloat("disc_percent",filed_options);options.fields.disc_percent.getValidator().setMaxLength('15');ReceiptList_Model.superclass.constructor.call(this,id,options);}
extend(ReceiptList_Model,ModelXML); 
function RGMaterial_Model(options){var id='RGMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_procurement_id=new FieldInt("doc_procurement_id",filed_options);options.fields.doc_procurement_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';options.fields.cost=new FieldFloat("cost",filed_options);options.fields.cost.getValidator().setMaxLength('15');RGMaterial_Model.superclass.constructor.call(this,id,options);}
extend(RGMaterial_Model,ModelXML); 
function RAMaterial_Model(options){var id='RAMaterial_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дебет';options.fields.deb=new FieldBool("deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='production,product_disposal,material_procurement,material_disposal,sale,expence,doc_client_order';options.fields.doc_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);options.fields.store_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);options.fields.material_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';options.fields.cost=new FieldFloat("cost",filed_options);options.fields.cost.getValidator().setMaxLength('15');RAMaterial_Model.superclass.constructor.call(this,id,options);}
extend(RAMaterial_Model,ModelXML); 
function RGProduct_Model(options){var id='RGProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Период';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='продукция';options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комплектация';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RGProduct_Model.superclass.constructor.call(this,id,options);}
extend(RGProduct_Model,ModelXML); 
function RAProduct_Model(options){var id='RAProduct_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид документа';options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='production,product_disposal,material_procurement,material_disposal,sale,expence,doc_client_order';var filed_options={};filed_options.primaryKey=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дебет';options.fields.deb=new FieldBool("deb",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Букет';options.fields.product_id=new FieldInt("product_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комплектация';options.fields.doc_production_id=new FieldInt("doc_production_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');RAProduct_Model.superclass.constructor.call(this,id,options);}
extend(RAProduct_Model,ModelXML); 
function VariantStorage_Model(options){var id='VariantStorage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;options.fields.variant_name=new FieldText("variant_name",filed_options);options.fields.variant_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.filter_data=new FieldText("filter_data",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.col_visib_data=new FieldText("col_visib_data",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.col_order_data=new FieldText("col_order_data",filed_options);VariantStorage_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorage_Model,ModelXML); 
function VariantStorageList_Model(options){var id='VariantStorageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.variant_name=new FieldText("variant_name",filed_options);VariantStorageList_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorageList_Model,ModelXML); 
function RepMaterialAction_Model(options){var id='RepMaterialAction_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_procurement_id=new FieldInt("doc_procurement_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поставка';options.fields.doc_procurement_descr=new FieldString("doc_procurement_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа материалов';options.fields.material_group_id=new FieldInt("material_group_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Группа материалов';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_id=new FieldInt("material_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Материал';options.fields.material_group_descr=new FieldString("material_group_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Документ движения';options.fields.ra_doc_id=new FieldInt("ra_doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Документ движения';options.fields.ra_doc_type=new FieldString("ra_doc_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Документ движения';options.fields.ra_doc_descr=new FieldString("ra_doc_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Количество';options.fields.quant=new FieldFloat("quant",filed_options);options.fields.quant.getValidator().setMaxLength('19');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Стоимость';options.fields.cost=new FieldFloat("cost",filed_options);options.fields.cost.getValidator().setMaxLength('15');RepMaterialAction_Model.superclass.constructor.call(this,id,options);}
extend(RepMaterialAction_Model,ModelXML); 
function ExpenceType_Model(options){var id='ExpenceType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');ExpenceType_Model.superclass.constructor.call(this,id,options);}
extend(ExpenceType_Model,ModelXML); 
function DOCExpence_Model(options){var id='DOCExpence_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldInt("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Проведен';options.fields.processed=new FieldBool("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_id=new FieldInt("user_id",filed_options);DOCExpence_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpence_Model,ModelXML); 
function DOCExpenceList_Model(options){var id='DOCExpenceList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.processed=new FieldString("processed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');DOCExpenceList_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceList_Model,ModelXML); 
function DOCExpenceExpenceTypeList_Model(options){var id='DOCExpenceExpenceTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.date_time_descr=new FieldString("date_time_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Номер';options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.expence_type_id=new FieldInt("expence_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_descr=new FieldString("expence_type_descr",filed_options);DOCExpenceExpenceTypeList_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceExpenceTypeList_Model,ModelXML); 
function DOCExpenceDOCTExpenceType_Model(options){var id='DOCExpenceDOCTExpenceType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_id=new FieldInt("expence_type_id",filed_options);options.fields.expence_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.expence_comment=new FieldText("expence_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата расхода';options.fields.expence_date=new FieldDate("expence_date",filed_options);DOCExpenceDOCTExpenceType_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceDOCTExpenceType_Model,ModelXML); 
function DOCExpenceDOCTExpenceTypeList_Model(options){var id='DOCExpenceDOCTExpenceTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.view_id=new FieldString("view_id",filed_options);options.fields.view_id.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.expence_type_id=new FieldInt("expence_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_descr=new FieldString("expence_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.expence_comment=new FieldText("expence_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма';options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата расхода';options.fields.expence_date=new FieldDate("expence_date",filed_options);DOCExpenceDOCTExpenceTypeList_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceDOCTExpenceTypeList_Model,ModelXML); 
function DOCExpenceDOCTFExpenceType_Model(options){var id='DOCExpenceDOCTFExpenceType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_id=new FieldInt("expence_type_id",filed_options);options.fields.expence_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.expence_comment=new FieldText("expence_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата расхода';options.fields.expence_date=new FieldDate("expence_date",filed_options);DOCExpenceDOCTFExpenceType_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceDOCTFExpenceType_Model,ModelXML); 
function DOCExpenceDOCTFExpenceTypeList_Model(options){var id='DOCExpenceDOCTFExpenceTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='№';options.fields.line_number=new FieldInt("line_number",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.login_id=new FieldInt("login_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_descr=new FieldString("expence_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';options.fields.expence_comment=new FieldText("expence_comment",filed_options);DOCExpenceDOCTFExpenceTypeList_Model.superclass.constructor.call(this,id,options);}
extend(DOCExpenceDOCTFExpenceTypeList_Model,ModelXML); 
function RepBalance_Model(options){var id='RepBalance_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_id=new FieldInt("store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Салон';options.fields.store_descr=new FieldString("store_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата';options.fields.period=new FieldDate("period",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Месяц';options.fields.mon=new FieldString("mon",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.expence_type_id=new FieldInt("expence_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид затрат';options.fields.expence_type_descr=new FieldString("expence_type_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сумма затрат';options.fields.total_expences=new FieldFloat("total_expences",filed_options);options.fields.total_expences.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Выручка';options.fields.total_sales=new FieldFloat("total_sales",filed_options);options.fields.total_sales.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Списания материалов';options.fields.total_mat_disp=new FieldFloat("total_mat_disp",filed_options);options.fields.total_mat_disp.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Себестоимость материалов';options.fields.total_mat_cost=new FieldFloat("total_mat_cost",filed_options);options.fields.total_mat_cost.getValidator().setMaxLength('12');RepBalance_Model.superclass.constructor.call(this,id,options);}
extend(RepBalance_Model,ModelXML); 
function DeliveryHour_Model(options){var id='DeliveryHour_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;options.fields.h_from=new FieldInt("h_from",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.h_to=new FieldInt("h_to",filed_options);DeliveryHour_Model.superclass.constructor.call(this,id,options);}
extend(DeliveryHour_Model,ModelXML); 
function DeliveryHourList_Model(options){var id='DeliveryHourList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.h_from=new FieldInt("h_from",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.h_to=new FieldInt("h_to",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.descr=new FieldString("descr",filed_options);DeliveryHourList_Model.superclass.constructor.call(this,id,options);}
extend(DeliveryHourList_Model,ModelXML); 
function Message_Model(options){var id='Message_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.message_type=new FieldEnum("message_type",filed_options);filed_options.enumValues='error,warning,info';options.fields.message_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор сообщения';options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Требует отметки просмотра';options.fields.require_view=new FieldBool("require_view",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';options.fields.subject=new FieldText("subject",filed_options);options.fields.subject.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержание';options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Уровень важности';options.fields.importance_level=new FieldInt("importance_level",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время создания';options.fields.date_time=new FieldDateTime("date_time",filed_options);Message_Model.superclass.constructor.call(this,id,options);}
extend(Message_Model,ModelXML); 
function MessageRecipient_Model(options){var id='MessageRecipient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сообщение';options.fields.message_id=new FieldInt("message_id",filed_options);options.fields.message_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Магазин';options.fields.for_store_id=new FieldInt("for_store_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';options.fields.for_role_id=new FieldEnum("for_role_id",filed_options);filed_options.enumValues='admin,store_manager,florist,cashier';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';options.fields.for_user_id=new FieldInt("for_user_id",filed_options);MessageRecipient_Model.superclass.constructor.call(this,id,options);}
extend(MessageRecipient_Model,ModelXML); 
function MessageView_Model(options){var id='MessageView_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Сообщение';options.fields.message_id=new FieldInt("message_id",filed_options);options.fields.message_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время просмотра';options.fields.date_time=new FieldDateTime("date_time",filed_options);MessageView_Model.superclass.constructor.call(this,id,options);}
extend(MessageView_Model,ModelXML); 
function Message_Controller(servConnector){options={};Message_Controller.superclass.constructor.call(this,"Message_Controller",servConnector,options);this.add_get_headers();}
extend(Message_Controller,ControllerDb);Message_Controller.prototype.add_get_headers=function(){var pm=this.addMethodById('get_headers');} 
function MessageHeaderList_Model(options){var id='MessageHeaderList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.message_type=new FieldEnum("message_type",filed_options);filed_options.enumValues='error,warning,info';options.fields.message_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор сообщения';options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Автор сообщения';options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Требует отметки просмотра';options.fields.require_view=new FieldBool("require_view",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';options.fields.subject=new FieldText("subject",filed_options);options.fields.subject.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Уровень важности';options.fields.importance_level=new FieldInt("importance_level",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время создания';options.fields.date_time=new FieldDateTime("date_time",filed_options);MessageHeaderList_Model.superclass.constructor.call(this,id,options);}
extend(MessageHeaderList_Model,ModelXML); 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_admin":"Администратор","ru_store_manager":"Администратор салона","ru_florist":"Флорист","ru_cashier":"Продавец"};options.options=[{"value":"admin","descr":multy_lang_values[options.app.getLocale()+"_"+"admin"],checked:(options.defaultValue&&options.defaultValue=="admin")},{"value":"store_manager","descr":multy_lang_values[options.app.getLocale()+"_"+"store_manager"],checked:(options.defaultValue&&options.defaultValue=="store_manager")},{"value":"florist","descr":multy_lang_values[options.app.getLocale()+"_"+"florist"],checked:(options.defaultValue&&options.defaultValue=="florist")},{"value":"cashier","descr":multy_lang_values[options.app.getLocale()+"_"+"cashier"],checked:(options.defaultValue&&options.defaultValue=="cashier")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect); 
function Enum_doc_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_production":"Комплектация","ru_product_disposal":"Разукомплектация","ru_material_procurement":"Поступление материалов","ru_material_disposal":"Списание материалов","ru_sale":"Продажа","ru_expence":"Затраты","ru_doc_client_order":"Заказы покупателей"};options.options=[{"value":"production","descr":multy_lang_values[options.app.getLocale()+"_"+"production"],checked:(options.defaultValue&&options.defaultValue=="production")},{"value":"product_disposal","descr":multy_lang_values[options.app.getLocale()+"_"+"product_disposal"],checked:(options.defaultValue&&options.defaultValue=="product_disposal")},{"value":"material_procurement","descr":multy_lang_values[options.app.getLocale()+"_"+"material_procurement"],checked:(options.defaultValue&&options.defaultValue=="material_procurement")},{"value":"material_disposal","descr":multy_lang_values[options.app.getLocale()+"_"+"material_disposal"],checked:(options.defaultValue&&options.defaultValue=="material_disposal")},{"value":"sale","descr":multy_lang_values[options.app.getLocale()+"_"+"sale"],checked:(options.defaultValue&&options.defaultValue=="sale")},{"value":"expence","descr":multy_lang_values[options.app.getLocale()+"_"+"expence"],checked:(options.defaultValue&&options.defaultValue=="expence")},{"value":"doc_client_order","descr":multy_lang_values[options.app.getLocale()+"_"+"doc_client_order"],checked:(options.defaultValue&&options.defaultValue=="doc_client_order")}];Enum_doc_types.superclass.constructor.call(this,id,options);}
extend(Enum_doc_types,EditSelect); 
function Enum_reg_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_material":"Учет материалов","ru_product":"Учет продукции","ru_client_order":"Учет заказов клиентов"};options.options=[{"value":"material","descr":multy_lang_values[options.app.getLocale()+"_"+"material"],checked:(options.defaultValue&&options.defaultValue=="material")},{"value":"product","descr":multy_lang_values[options.app.getLocale()+"_"+"product"],checked:(options.defaultValue&&options.defaultValue=="product")},{"value":"client_order","descr":multy_lang_values[options.app.getLocale()+"_"+"client_order"],checked:(options.defaultValue&&options.defaultValue=="client_order")}];Enum_reg_types.superclass.constructor.call(this,id,options);}
extend(Enum_reg_types,EditSelect); 
function Enum_payment_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_cash":"Наличными","ru_bank":"Банковской картой","ru_yandex":"Яндекс деньги","ru_trans_to_card":"Перевод на карту","ru_web_money":"Web money"};options.options=[{"value":"cash","descr":multy_lang_values[options.app.getLocale()+"_"+"cash"],checked:(options.defaultValue&&options.defaultValue=="cash")},{"value":"bank","descr":multy_lang_values[options.app.getLocale()+"_"+"bank"],checked:(options.defaultValue&&options.defaultValue=="bank")},{"value":"yandex","descr":multy_lang_values[options.app.getLocale()+"_"+"yandex"],checked:(options.defaultValue&&options.defaultValue=="yandex")},{"value":"trans_to_card","descr":multy_lang_values[options.app.getLocale()+"_"+"trans_to_card"],checked:(options.defaultValue&&options.defaultValue=="trans_to_card")},{"value":"web_money","descr":multy_lang_values[options.app.getLocale()+"_"+"web_money"],checked:(options.defaultValue&&options.defaultValue=="web_money")}];Enum_payment_types.superclass.constructor.call(this,id,options);}
extend(Enum_payment_types,EditSelect); 
function Enum_report_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_material_actions":"Движение материалов","ru_filter_variants":"Настройки отборов"};options.options=[{"value":"material_actions","descr":multy_lang_values[options.app.getLocale()+"_"+"material_actions"],checked:(options.defaultValue&&options.defaultValue=="material_actions")},{"value":"filter_variants","descr":multy_lang_values[options.app.getLocale()+"_"+"filter_variants"],checked:(options.defaultValue&&options.defaultValue=="filter_variants")}];Enum_report_types.superclass.constructor.call(this,id,options);}
extend(Enum_report_types,EditSelect); 
function Enum_delivery_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_courier":"курьер","ru_by_client":"самовывоз"};options.options=[{"value":"courier","descr":multy_lang_values[options.app.getLocale()+"_"+"courier"],checked:(options.defaultValue&&options.defaultValue=="courier")},{"value":"by_client","descr":multy_lang_values[options.app.getLocale()+"_"+"by_client"],checked:(options.defaultValue&&options.defaultValue=="by_client")}];Enum_delivery_types.superclass.constructor.call(this,id,options);}
extend(Enum_delivery_types,EditSelect); 
function Enum_recipient_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_self":"я получатель","ru_other":"другой человек"};options.options=[{"value":"self","descr":multy_lang_values[options.app.getLocale()+"_"+"self"],checked:(options.defaultValue&&options.defaultValue=="self")},{"value":"other","descr":multy_lang_values[options.app.getLocale()+"_"+"other"],checked:(options.defaultValue&&options.defaultValue=="other")}];Enum_recipient_types.superclass.constructor.call(this,id,options);}
extend(Enum_recipient_types,EditSelect); 
function Enum_delivery_note_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_by_call":"звонок","ru_by_sms":"SMS"};options.options=[{"value":"by_call","descr":multy_lang_values[options.app.getLocale()+"_"+"by_call"],checked:(options.defaultValue&&options.defaultValue=="by_call")},{"value":"by_sms","descr":multy_lang_values[options.app.getLocale()+"_"+"by_sms"],checked:(options.defaultValue&&options.defaultValue=="by_sms")}];Enum_delivery_note_types.superclass.constructor.call(this,id,options);}
extend(Enum_delivery_note_types,EditSelect); 
function Enum_client_order_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_to_noone":"Не обработан","ru_checked":"Проверен","ru_to_florist":"Букет составлен","ru_to_courier":"Забрал курьер","ru_closed":"Выполнен"};options.options=[{"value":"to_noone","descr":multy_lang_values[options.app.getLocale()+"_"+"to_noone"],checked:(options.defaultValue&&options.defaultValue=="to_noone")},{"value":"checked","descr":multy_lang_values[options.app.getLocale()+"_"+"checked"],checked:(options.defaultValue&&options.defaultValue=="checked")},{"value":"to_florist","descr":multy_lang_values[options.app.getLocale()+"_"+"to_florist"],checked:(options.defaultValue&&options.defaultValue=="to_florist")},{"value":"to_courier","descr":multy_lang_values[options.app.getLocale()+"_"+"to_courier"],checked:(options.defaultValue&&options.defaultValue=="to_courier")},{"value":"closed","descr":multy_lang_values[options.app.getLocale()+"_"+"closed"],checked:(options.defaultValue&&options.defaultValue=="closed")}];Enum_client_order_states.superclass.constructor.call(this,id,options);}
extend(Enum_client_order_states,EditSelect); 
function Enum_message_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_error":"Ошибка","ru_warning":"Предупреждение","ru_info":"Информация"};options.options=[{"value":"error","descr":multy_lang_values[options.app.getLocale()+"_"+"error"],checked:(options.defaultValue&&options.defaultValue=="error")},{"value":"warning","descr":multy_lang_values[options.app.getLocale()+"_"+"warning"],checked:(options.defaultValue&&options.defaultValue=="warning")},{"value":"info","descr":multy_lang_values[options.app.getLocale()+"_"+"info"],checked:(options.defaultValue&&options.defaultValue=="info")}];Enum_message_types.superclass.constructor.call(this,id,options);}
extend(Enum_message_types,EditSelect); 
function TemplateParam_Model(options){var id='TemplateParam_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.template=new FieldText("template",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.param=new FieldText("param",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.param_type=new FieldText("param_type",filed_options);TemplateParam_Model.superclass.constructor.call(this,id,options);}
extend(TemplateParam_Model,ModelXML); 
function Enum_def_date_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_cur_shift":"Текущая смена","ru_cur_date":"Текущая дата","ru_cur_week":"Текущая неделя","ru_cur_month":"Текущий месяц","ru_cur_quarter":"Текущий квартал","ru_cur_year":"Текущий год"};options.options=[{"value":"cur_shift","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_shift"],checked:(options.defaultValue&&options.defaultValue=="cur_shift")},{"value":"cur_date","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_date"],checked:(options.defaultValue&&options.defaultValue=="cur_date")},{"value":"cur_week","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_week"],checked:(options.defaultValue&&options.defaultValue=="cur_week")},{"value":"cur_month","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_month"],checked:(options.defaultValue&&options.defaultValue=="cur_month")},{"value":"cur_quarter","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_quarter"],checked:(options.defaultValue&&options.defaultValue=="cur_quarter")},{"value":"cur_year","descr":multy_lang_values[options.app.getLocale()+"_"+"cur_year"],checked:(options.defaultValue&&options.defaultValue=="cur_year")}];Enum_def_date_types.superclass.constructor.call(this,id,options);}
extend(Enum_def_date_types,EditSelect); 
function UserProfile_Model(options){var id='UserProfile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');UserProfile_Model.superclass.constructor.call(this,id,options);}
extend(UserProfile_Model,ModelXML); 
function TemplateParam_Controller(servConnector){options={};options["listModelId"]="TemplateParamList_Model";TemplateParam_Controller.superclass.constructor.call(this,"TemplateParam_Controller",servConnector,options);this.addGetList();this.add_set_value();}
extend(TemplateParam_Controller,ControllerDb);TemplateParam_Controller.prototype.addGetList=function(){TemplateParam_Controller.superclass.addGetList.call(this);var options={};var pm=this.getGetList();var options={};pm.addParam(new FieldString("template",options));}
TemplateParam_Controller.prototype.add_set_value=function(){var pm=this.addMethodById('set_value');pm.addParam(new FieldString("template"));pm.addParam(new FieldString("param"));pm.addParam(new FieldText("val"));} 
function TemplateParamVal_Model(options){var id='TemplateParamVal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.template_param_id=new FieldInt("template_param_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Пользователь';options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.val=new FieldText("val",filed_options);TemplateParamVal_Model.superclass.constructor.call(this,id,options);}
extend(TemplateParamVal_Model,ModelXML); 
function TemplateParamValList_Model(options){var id='TemplateParamValList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;options.fields.param=new FieldString("param",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.val=new FieldText("val",filed_options);TemplateParamValList_Model.superclass.constructor.call(this,id,options);}
extend(TemplateParamValList_Model,ModelXML); 
function Discount_Controller(app,options){options=options||{};options.listModel=Discount_Model;options.objModel=Discount_Model;Discount_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_list_for_sale();}
extend(Discount_Controller,ControllerDb);Discount_Controller.prototype.addInsert=function(){Discount_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Процент";var field=new FieldInt("percent",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Discount_Controller.prototype.addUpdate=function(){Discount_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Процент";var field=new FieldInt("percent",options);pm.addField(field);}
Discount_Controller.prototype.addDelete=function(){Discount_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Discount_Controller.prototype.addGetList=function(){Discount_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Процент";pm.addField(new FieldInt("percent",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Discount_Controller.prototype.addGetObject=function(){Discount_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));}
Discount_Controller.prototype.add_get_list_for_sale=function(){var pm=new PublicMethod('get_list_for_sale',{controller:this});this.addPublicMethod(pm);} 
function Discount_Model(options){var id='Discount_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Процент';options.fields.percent=new FieldInt("percent",filed_options);Discount_Model.superclass.constructor.call(this,id,options);}
extend(Discount_Model,ModelXML); 
function DiscountList_Model(options){var id='DiscountList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.percent=new FieldInt("percent",filed_options);DiscountList_Model.superclass.constructor.call(this,id,options);}
extend(DiscountList_Model,ModelXML); 
function DiscCard_Controller(app,options){options=options||{};options.listModel=DiscCard_Model;options.objModel=DiscCard_Model;DiscCard_Controller.superclass.constructor.call(this,app,options);this.addUpdate();this.addGetList();this.addGetObject();this.addComplete();}
extend(DiscCard_Controller,ControllerDb);DiscCard_Controller.prototype.addUpdate=function(){DiscCard_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Вид скидки";var field=new FieldInt("discount_id",options);pm.addField(field);var options={};options.alias="Штрихкод";var field=new FieldText("barcode",options);pm.addField(field);}
DiscCard_Controller.prototype.addGetList=function(){DiscCard_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Вид скидки";pm.addField(new FieldInt("discount_id",f_opts));var f_opts={};f_opts.alias="Штрихкод";pm.addField(new FieldText("barcode",f_opts));}
DiscCard_Controller.prototype.addGetObject=function(){DiscCard_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));}
DiscCard_Controller.prototype.addComplete=function(){DiscCard_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldText("barcode",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("barcode");} 
function DiscCard_Model(options){var id='DiscCard_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Вид скидки';options.fields.discount_id=new FieldInt("discount_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Штрихкод';options.fields.barcode=new FieldText("barcode",filed_options);DiscCard_Model.superclass.constructor.call(this,id,options);}
extend(DiscCard_Model,ModelXML); 
function DOCManager_Controller(app,options){options=options||{};options.listModel=DOCManagerList_Model;DOCManager_Controller.superclass.constructor.call(this,app,options);this.add_reprocess();this.addGetList();this.add_get_sequence_viol_list();this.add_get_reprocess_list();}
extend(DOCManager_Controller,ControllerDb);DOCManager_Controller.prototype.add_reprocess=function(){var pm=new PublicMethod('reprocess',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("sequence_list",options));}
DOCManager_Controller.prototype.addGetList=function(){DOCManager_Controller.superclass.addGetList.call(this);var pm=this.getGetList();}
DOCManager_Controller.prototype.add_get_sequence_viol_list=function(){var pm=new PublicMethod('get_sequence_viol_list',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("sequence_list",options));}
DOCManager_Controller.prototype.add_get_reprocess_list=function(){var pm=new PublicMethod('get_reprocess_list',{controller:this});this.addPublicMethod(pm);} 
function DOCReprocessStat_Model(options){var id='DOCReprocessStat_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Последовательности';options.fields.doc_sequence=new FieldEnum("doc_sequence",filed_options);filed_options.enumValues='materials';var filed_options={};filed_options.primaryKey=false;options.fields.start_time=new FieldDateTime("start_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.update_time=new FieldDateTime("update_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.end_time=new FieldDateTime("end_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.count_total=new FieldInt("count_total",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.count_done=new FieldInt("count_done",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.time_to_go=new FieldInterval("time_to_go",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='production,product_disposal,material_procurement,material_disposal,sale,expence,doc_client_order';var filed_options={};filed_options.primaryKey=false;options.fields.error_message=new FieldText("error_message",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.res=new FieldBool("res",filed_options);DOCReprocessStat_Model.superclass.constructor.call(this,id,options);}
extend(DOCReprocessStat_Model,ModelXML); 
function Constant_Controller(app,options){options=options||{};options.listModel=ConstantList_Model;options.objModel=ConstantList_Model;Constant_Controller.superclass.constructor.call(this,app,options);this.add_set_value();this.addGetList();this.addGetObject();this.add_get_values();}
extend(Constant_Controller,ControllerDb);Constant_Controller.prototype.add_set_value=function(){var pm=new PublicMethod('set_value',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldString("val",options));}
Constant_Controller.prototype.addGetList=function(){Constant_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Описание";pm.addField(new FieldText("descr",f_opts));var f_opts={};f_opts.alias="Значение";pm.addField(new FieldText("val_descr",f_opts));var f_opts={};f_opts.alias="Имя значения";pm.addField(new FieldText("val_type",f_opts));var f_opts={};pm.addField(new FieldInt("val_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Constant_Controller.prototype.addGetObject=function(){Constant_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));}
Constant_Controller.prototype.add_get_values=function(){var pm=new PublicMethod('get_values',{controller:this});this.addPublicMethod(pm);var options={};pm.addField(new FieldString("id_list",options));} 
function ReceiptHead_Model(options){var id='ReceiptHead_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.discount_id=new FieldInt("discount_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_client_order_id=new FieldInt("doc_client_order_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);ReceiptHead_Model.superclass.constructor.call(this,id,options);}
extend(ReceiptHead_Model,ModelXML); 
function ReceiptHeadList_Model(options){var id='ReceiptHeadList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.discount_id=new FieldInt("discount_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.discount_descr=new FieldString("discount_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_client_order_id=new FieldInt("doc_client_order_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.doc_client_order_descr=new FieldString("doc_client_order_descr",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);ReceiptHeadList_Model.superclass.constructor.call(this,id,options);}
extend(ReceiptHeadList_Model,ModelXML); 
function DOCSalePaymentType_Model(options){var id='DOCSalePaymentType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('2');DOCSalePaymentType_Model.superclass.constructor.call(this,id,options);}
extend(DOCSalePaymentType_Model,ModelXML); 
function ReceiptPaymentType_Model(options){var id='ReceiptPaymentType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=true;options.fields.dt=new FieldString("dt",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');ReceiptPaymentType_Model.superclass.constructor.call(this,id,options);}
extend(ReceiptPaymentType_Model,ModelXML); 
function ReceiptPaymentTypeList_Model(options){var id='ReceiptPaymentTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;options.fields.dt=new FieldString("dt",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.kkm_type_close=new FieldInt("kkm_type_close",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type_for_sale_id=new FieldInt("payment_type_for_sale_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.payment_type_for_sale_descr=new FieldString("payment_type_for_sale_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('2');var filed_options={};filed_options.primaryKey=false;options.fields.user_id=new FieldInt("user_id",filed_options);ReceiptPaymentTypeList_Model.superclass.constructor.call(this,id,options);}
extend(ReceiptPaymentTypeList_Model,ModelXML); 
function Enum_doc_sequences(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_materials":"Учет материалов"};options.options=[{"value":"materials","descr":multy_lang_values[options.app.getLocale()+"_"+"materials"],checked:(options.defaultValue&&options.defaultValue=="materials")}];Enum_doc_sequences.superclass.constructor.call(this,id,options);}
extend(Enum_doc_sequences,EditSelect); 
function DOCReprocessStatList_Model(options){var id='DOCReprocessStatList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Последовательности';options.fields.doc_sequence=new FieldEnum("doc_sequence",filed_options);filed_options.enumValues='materials';var filed_options={};filed_options.primaryKey=false;filed_options.alias='Состав идентификаторы';options.fields.seq_contents=new FieldString("seq_contents",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Состав представления';options.fields.seq_contents_descrs=new FieldString("seq_contents_descrs",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время начала';options.fields.stat_start_time=new FieldDateTime("stat_start_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время обновления';options.fields.stat_update_time=new FieldDateTime("stat_update_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Время окончания';options.fields.stat_end_time=new FieldDateTime("stat_end_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.done_percent=new FieldInt("done_percent",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_time_to_go=new FieldInterval("stat_time_to_go",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_doc_id=new FieldInt("stat_doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_doc_type=new FieldEnum("stat_doc_type",filed_options);filed_options.enumValues='production,product_disposal,material_procurement,material_disposal,sale,expence,doc_client_order';var filed_options={};filed_options.primaryKey=false;options.fields.stat_error_message=new FieldText("stat_error_message",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_res=new FieldBool("stat_res",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_user_id=new FieldInt("stat_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.stat_user_descr=new FieldString("stat_user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viol_date_time=new FieldDateTime("viol_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viol_reprocessing=new FieldBool("viol_reprocessing",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.violated=new FieldBool("violated",filed_options);DOCReprocessStatList_Model.superclass.constructor.call(this,id,options);}
extend(DOCReprocessStatList_Model,ModelXML); 
function RepMaterialAction_Controller(app,options){options=options||{};RepMaterialAction_Controller.superclass.constructor.call(this,app,options);this.addGetObject();}
extend(RepMaterialAction_Controller,ControllerDb);RepMaterialAction_Controller.prototype.addGetObject=function(){RepMaterialAction_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();} 
function EnumGridColumn_role_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.admin="Администратор";options.multyLangValues.ru.store_manager="Администратор салона";options.multyLangValues.ru.florist="Флорист";options.multyLangValues.ru.cashier="Продавец";EnumGridColumn_role_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_role_types,GridColumnEnum); 
function EnumGridColumn_doc_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.production="Комплектация";options.multyLangValues.ru.product_disposal="Разукомплектация";options.multyLangValues.ru.material_procurement="Поступление материалов";options.multyLangValues.ru.material_disposal="Списание материалов";options.multyLangValues.ru.sale="Продажа";options.multyLangValues.ru.expence="Затраты";options.multyLangValues.ru.doc_client_order="Заказы покупателей";EnumGridColumn_doc_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_doc_types,GridColumnEnum); 
function EnumGridColumn_reg_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.material="Учет материалов";options.multyLangValues.ru.product="Учет продукции";options.multyLangValues.ru.client_order="Учет заказов клиентов";EnumGridColumn_reg_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_reg_types,GridColumnEnum); 
function EnumGridColumn_report_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.material_actions="Движение материалов";options.multyLangValues.ru.filter_variants="Настройки отборов";EnumGridColumn_report_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_report_types,GridColumnEnum); 
function EnumGridColumn_recipient_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.self="я получатель";options.multyLangValues.ru.other="другой человек";EnumGridColumn_recipient_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_recipient_types,GridColumnEnum); 
function EnumGridColumn_message_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.error="Ошибка";options.multyLangValues.ru.warning="Предупреждение";options.multyLangValues.ru.info="Информация";EnumGridColumn_message_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_message_types,GridColumnEnum); 
function EnumGridColumn_def_date_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.cur_shift="Текущая смена";options.multyLangValues.ru.cur_date="Текущая дата";options.multyLangValues.ru.cur_week="Текущая неделя";options.multyLangValues.ru.cur_month="Текущий месяц";options.multyLangValues.ru.cur_quarter="Текущий квартал";options.multyLangValues.ru.cur_year="Текущий год";EnumGridColumn_def_date_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_def_date_types,GridColumnEnum); 
function EnumGridColumn_doc_sequences(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.materials="Учет материалов";EnumGridColumn_doc_sequences.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_doc_sequences,GridColumnEnum); 
function VariantStorage_Controller(app,options){options=options||{};options.objModel=VariantStorage_Model;VariantStorage_Controller.superclass.constructor.call(this,app,options);this.addInsert();this.add_upsert_filter_data();this.add_upsert_col_visib_data();this.add_upsert_col_order_data();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_filter_data();this.add_get_col_visib_data();this.add_get_col_order_data();}
extend(VariantStorage_Controller,ControllerDb);VariantStorage_Controller.prototype.addInsert=function(){VariantStorage_Controller.superclass.addInsert.call(this);var field;var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldText("storage_name",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldText("variant_name",options);pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldText("filter_data",options);pm.addField(field);var options={};var field=new FieldText("col_visib_data",options);pm.addField(field);var options={};var field=new FieldText("col_order_data",options);pm.addField(field);}
VariantStorage_Controller.prototype.add_upsert_filter_data=function(){var pm=new PublicMethod('upsert_filter_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldString("filter_data",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));}
VariantStorage_Controller.prototype.add_upsert_col_visib_data=function(){var pm=new PublicMethod('upsert_col_visib_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldString("col_visib",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));}
VariantStorage_Controller.prototype.add_upsert_col_order_data=function(){var pm=new PublicMethod('upsert_col_order_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldString("col_order",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));}
VariantStorage_Controller.prototype.addUpdate=function(){VariantStorage_Controller.superclass.addUpdate.call(this);var field;var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);field=new FieldInt("old_user_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldText("storage_name",options);pm.addField(field);field=new FieldText("old_storage_name",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldText("variant_name",options);pm.addField(field);field=new FieldText("old_variant_name",{});pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldText("filter_data",options);pm.addField(field);var options={};var field=new FieldText("col_visib_data",options);pm.addField(field);var options={};var field=new FieldText("col_order_data",options);pm.addField(field);}
VariantStorage_Controller.prototype.addDelete=function(){VariantStorage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));var options={"required":true};pm.addField(new FieldText("storage_name",options));var options={"required":true};pm.addField(new FieldText("variant_name",options));}
VariantStorage_Controller.prototype.addGetList=function(){VariantStorage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));}
VariantStorage_Controller.prototype.addGetObject=function(){VariantStorage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldText("storage_name",f_opts));var f_opts={};pm.addField(new FieldText("variant_name",f_opts));}
VariantStorage_Controller.prototype.add_get_filter_data=function(){var pm=new PublicMethod('get_filter_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));}
VariantStorage_Controller.prototype.add_get_col_visib_data=function(){var pm=new PublicMethod('get_col_visib_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));}
VariantStorage_Controller.prototype.add_get_col_order_data=function(){var pm=new PublicMethod('get_col_order_data',{controller:this});this.addPublicMethod(pm);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));} 
function EnumGridColumn_role_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.admin="Администратор";options.multyLangValues.ru.store_manager="Администратор салона";options.multyLangValues.ru.florist="Флорист";options.multyLangValues.ru.cashier="Продавец";EnumGridColumn_role_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_role_types,GridColumnEnum); 
function EnumGridColumn_doc_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.production="Комплектация";options.multyLangValues.ru.product_disposal="Разукомплектация";options.multyLangValues.ru.material_procurement="Поступление материалов";options.multyLangValues.ru.material_disposal="Списание материалов";options.multyLangValues.ru.sale="Продажа";options.multyLangValues.ru.expence="Затраты";options.multyLangValues.ru.doc_client_order="Заказы покупателей";EnumGridColumn_doc_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_doc_types,GridColumnEnum); 
function EnumGridColumn_reg_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.material="Учет материалов";options.multyLangValues.ru.product="Учет продукции";options.multyLangValues.ru.client_order="Учет заказов клиентов";EnumGridColumn_reg_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_reg_types,GridColumnEnum); 
function EnumGridColumn_report_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.material_actions="Движение материалов";options.multyLangValues.ru.filter_variants="Настройки отборов";EnumGridColumn_report_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_report_types,GridColumnEnum); 
function EnumGridColumn_recipient_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.self="я получатель";options.multyLangValues.ru.other="другой человек";EnumGridColumn_recipient_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_recipient_types,GridColumnEnum); 
function EnumGridColumn_message_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.error="Ошибка";options.multyLangValues.ru.warning="Предупреждение";options.multyLangValues.ru.info="Информация";EnumGridColumn_message_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_message_types,GridColumnEnum); 
function EnumGridColumn_def_date_types(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.cur_shift="Текущая смена";options.multyLangValues.ru.cur_date="Текущая дата";options.multyLangValues.ru.cur_week="Текущая неделя";options.multyLangValues.ru.cur_month="Текущий месяц";options.multyLangValues.ru.cur_quarter="Текущий квартал";options.multyLangValues.ru.cur_year="Текущий год";EnumGridColumn_def_date_types.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_def_date_types,GridColumnEnum); 
function EnumGridColumn_doc_sequences(id,options){options=options||{};options.multyLangValues={};options.multyLangValues.ru={};options.multyLangValues.ru.materials="Учет материалов";EnumGridColumn_doc_sequences.superclass.constructor.call(this,id,options);}
extend(EnumGridColumn_doc_sequences,GridColumnEnum);