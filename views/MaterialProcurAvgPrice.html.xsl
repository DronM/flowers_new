<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0"  xmlns:html="http://www.w3.org/TR/REC-html40" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format"><xsl:import href="functions.xsl"/><!-- Main template--><xsl:template match="/">	<xsl:choose>		<xsl:when test="not(document/model[@id='ModelServResponse']/row[1]/result='0')">		<xsl:apply-templates select="document/model[@id='ModelServResponse']"/>			</xsl:when>		<xsl:otherwise>			<xsl:apply-templates select="document/model[@id='Material_Model']"/>			</xsl:otherwise>	</xsl:choose></xsl:template><!-- Error --><xsl:template match="model[@id='ModelServResponse']">	<div class="error">		<xsl:value-of select="row[1]/descr"/>	</div></xsl:template><!-- table --><xsl:template match="model"><br></br><div class="scrollable-area"><table id="{@model_id}" class="table table-bordered table-responsive table-striped">	<thead>	<tr>		<th rowspan="2">Материал</th>		<th rowspan="2">Розн.цена</th>		<th rowspan="2">Наценка</th>		<th colspan="3" align="center">Поступление</th>		<th rowspan="2">Реком.цена</th>		<th rowspan="2">Баланс</th>	</tr>	<tr>		<th>Кол-во</th>		<th>Сумма</th>		<th>Цена</th>	</tr>		</thead>	<tbody>		<xsl:apply-templates/>	</tbody>	</table></div></xsl:template><xsl:template match="row">	<xsl:variable name="class_name">		<xsl:choose>			<xsl:when test="position() mod 2 = 0">odd</xsl:when>			<xsl:otherwise>even</xsl:otherwise>		</xsl:choose>	</xsl:variable>	<tr class="{$class_name}">		<td>		<xsl:value-of select="material_descr"/>		</td>		<!-- Розн цена -->		<td align="right">		<xsl:call-template name="format_money">			<xsl:with-param name="val" select="price"/>		</xsl:call-template>																							</td>										<!-- Наценка -->		<td align="center">		<xsl:value-of select="material_margin_percent"/>%		</td>				<!-- Пост кол-во -->		<td align="right">		<xsl:call-template name="format_quant">			<xsl:with-param name="val" select="procur_quant"/>		</xsl:call-template>																							</td>								<!-- Пост Сумма -->		<td align="right">		<xsl:call-template name="format_money">			<xsl:with-param name="val" select="procur_cost"/>		</xsl:call-template>																							</td>						<!-- Пост цена -->		<td align="right">		<xsl:call-template name="format_money">			<xsl:with-param name="val" select="procur_price"/>		</xsl:call-template>																							</td>				<!-- Реком цена -->		<td align="right">		<xsl:call-template name="format_money">			<xsl:with-param name="val" select="recom_price"/>		</xsl:call-template>																							</td>				<!-- Баланс -->		<td align="right">		<xsl:call-template name="format_money">			<xsl:with-param name="val" select="balance"/>		</xsl:call-template>																							</td>	</tr></xsl:template></xsl:stylesheet>